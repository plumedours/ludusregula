var _m=u=>{throw TypeError(u)};var yh=(u,t,n)=>t.has(u)||_m("Cannot "+n);var Zt=(u,t,n)=>(yh(u,t,"read from private field"),n?n.call(u):t.get(u)),Bn=(u,t,n)=>t.has(u)?_m("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(u):t.set(u,n),qe=(u,t,n,s)=>(yh(u,t,"write to private field"),s?s.call(u,n):t.set(u,n),n),Pn=(u,t,n)=>(yh(u,t,"access private method"),n);var Cm=(u,t,n,s)=>({set _(a){qe(u,t,a,n)},get _(){return Zt(u,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Jh(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var vh={exports:{}},wr={};var Tm;function h1(){if(Tm)return wr;Tm=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:u,type:s,key:l,ref:a!==void 0?a:null,props:o}}return wr.Fragment=t,wr.jsx=n,wr.jsxs=n,wr}var Mm;function d1(){return Mm||(Mm=1,vh.exports=h1()),vh.exports}var w=d1(),Ah={exports:{}},bt={};var Rm;function f1(){if(Rm)return bt;Rm=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function x(N,q,W){this.props=N,this.context=q,this.refs=C,this.updater=W||E}x.prototype.isReactComponent={},x.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},x.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function T(){}T.prototype=x.prototype;function M(N,q,W){this.props=N,this.context=q,this.refs=C,this.updater=W||E}var O=M.prototype=new T;O.constructor=M,S(O,x.prototype),O.isPureReactComponent=!0;var B=Array.isArray;function j(){}var P={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function X(N,q,W){var tt=W.ref;return{$$typeof:u,type:N,key:q,ref:tt!==void 0?tt:null,props:W}}function Q(N,q){return X(N.type,q,N.props)}function Z(N){return typeof N=="object"&&N!==null&&N.$$typeof===u}function ct(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(W){return q[W]})}var dt=/\/+/g;function at(N,q){return typeof N=="object"&&N!==null&&N.key!=null?ct(""+N.key):q.toString(36)}function et(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(j,j):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function R(N,q,W,tt,ot){var ft=typeof N;(ft==="undefined"||ft==="boolean")&&(N=null);var lt=!1;if(N===null)lt=!0;else switch(ft){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(N.$$typeof){case u:case t:lt=!0;break;case g:return lt=N._init,R(lt(N._payload),q,W,tt,ot)}}if(lt)return ot=ot(N),lt=tt===""?"."+at(N,0):tt,B(ot)?(W="",lt!=null&&(W=lt.replace(dt,"$&/")+"/"),R(ot,q,W,"",function(jt){return jt})):ot!=null&&(Z(ot)&&(ot=Q(ot,W+(ot.key==null||N&&N.key===ot.key?"":(""+ot.key).replace(dt,"$&/")+"/")+lt)),q.push(ot)),1;lt=0;var $t=tt===""?".":tt+":";if(B(N))for(var Et=0;Et<N.length;Et++)tt=N[Et],ft=$t+at(tt,Et),lt+=R(tt,q,W,ft,ot);else if(Et=A(N),typeof Et=="function")for(N=Et.call(N),Et=0;!(tt=N.next()).done;)tt=tt.value,ft=$t+at(tt,Et++),lt+=R(tt,q,W,ft,ot);else if(ft==="object"){if(typeof N.then=="function")return R(et(N),q,W,tt,ot);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return lt}function G(N,q,W){if(N==null)return N;var tt=[],ot=0;return R(N,tt,"","",function(ft){return q.call(W,ft,ot++)}),tt}function J(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(W){(N._status===0||N._status===-1)&&(N._status=1,N._result=W)},function(W){(N._status===0||N._status===-1)&&(N._status=2,N._result=W)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var pt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},At={map:G,forEach:function(N,q,W){G(N,function(){q.apply(this,arguments)},W)},count:function(N){var q=0;return G(N,function(){q++}),q},toArray:function(N){return G(N,function(q){return q})||[]},only:function(N){if(!Z(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return bt.Activity=b,bt.Children=At,bt.Component=x,bt.Fragment=n,bt.Profiler=a,bt.PureComponent=M,bt.StrictMode=s,bt.Suspense=d,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,bt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return P.H.useMemoCache(N)}},bt.cache=function(N){return function(){return N.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(N,q,W){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var tt=S({},N.props),ot=N.key;if(q!=null)for(ft in q.key!==void 0&&(ot=""+q.key),q)!I.call(q,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&q.ref===void 0||(tt[ft]=q[ft]);var ft=arguments.length-2;if(ft===1)tt.children=W;else if(1<ft){for(var lt=Array(ft),$t=0;$t<ft;$t++)lt[$t]=arguments[$t+2];tt.children=lt}return X(N.type,ot,tt)},bt.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},bt.createElement=function(N,q,W){var tt,ot={},ft=null;if(q!=null)for(tt in q.key!==void 0&&(ft=""+q.key),q)I.call(q,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(ot[tt]=q[tt]);var lt=arguments.length-2;if(lt===1)ot.children=W;else if(1<lt){for(var $t=Array(lt),Et=0;Et<lt;Et++)$t[Et]=arguments[Et+2];ot.children=$t}if(N&&N.defaultProps)for(tt in lt=N.defaultProps,lt)ot[tt]===void 0&&(ot[tt]=lt[tt]);return X(N,ft,ot)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(N){return{$$typeof:h,render:N}},bt.isValidElement=Z,bt.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:J}},bt.memo=function(N,q){return{$$typeof:f,type:N,compare:q===void 0?null:q}},bt.startTransition=function(N){var q=P.T,W={};P.T=W;try{var tt=N(),ot=P.S;ot!==null&&ot(W,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(j,pt)}catch(ft){pt(ft)}finally{q!==null&&W.types!==null&&(q.types=W.types),P.T=q}},bt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},bt.use=function(N){return P.H.use(N)},bt.useActionState=function(N,q,W){return P.H.useActionState(N,q,W)},bt.useCallback=function(N,q){return P.H.useCallback(N,q)},bt.useContext=function(N){return P.H.useContext(N)},bt.useDebugValue=function(){},bt.useDeferredValue=function(N,q){return P.H.useDeferredValue(N,q)},bt.useEffect=function(N,q){return P.H.useEffect(N,q)},bt.useEffectEvent=function(N){return P.H.useEffectEvent(N)},bt.useId=function(){return P.H.useId()},bt.useImperativeHandle=function(N,q,W){return P.H.useImperativeHandle(N,q,W)},bt.useInsertionEffect=function(N,q){return P.H.useInsertionEffect(N,q)},bt.useLayoutEffect=function(N,q){return P.H.useLayoutEffect(N,q)},bt.useMemo=function(N,q){return P.H.useMemo(N,q)},bt.useOptimistic=function(N,q){return P.H.useOptimistic(N,q)},bt.useReducer=function(N,q,W){return P.H.useReducer(N,q,W)},bt.useRef=function(N){return P.H.useRef(N)},bt.useState=function(N){return P.H.useState(N)},bt.useSyncExternalStore=function(N,q,W){return P.H.useSyncExternalStore(N,q,W)},bt.useTransition=function(){return P.H.useTransition()},bt.version="19.2.0",bt}var Dm;function td(){return Dm||(Dm=1,Ah.exports=f1()),Ah.exports}var L=td();const qi=Jh(L);var Sh={exports:{}},Er={},xh={exports:{}},wh={};var Lm;function p1(){return Lm||(Lm=1,(function(u){function t(R,G){var J=R.length;R.push(G);t:for(;0<J;){var pt=J-1>>>1,At=R[pt];if(0<a(At,G))R[pt]=G,R[J]=At,J=pt;else break t}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var G=R[0],J=R.pop();if(J!==G){R[0]=J;t:for(var pt=0,At=R.length,N=At>>>1;pt<N;){var q=2*(pt+1)-1,W=R[q],tt=q+1,ot=R[tt];if(0>a(W,J))tt<At&&0>a(ot,W)?(R[pt]=ot,R[tt]=J,pt=tt):(R[pt]=W,R[q]=J,pt=q);else if(tt<At&&0>a(ot,J))R[pt]=ot,R[tt]=J,pt=tt;else break t}}return G}function a(R,G){var J=R.sortIndex-G.sortIndex;return J!==0?J:R.id-G.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;u.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();u.unstable_now=function(){return l.now()-h}}var d=[],f=[],g=1,b=null,y=3,A=!1,E=!1,S=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function O(R){for(var G=n(f);G!==null;){if(G.callback===null)s(f);else if(G.startTime<=R)s(f),G.sortIndex=G.expirationTime,t(d,G);else break;G=n(f)}}function B(R){if(S=!1,O(R),!E)if(n(d)!==null)E=!0,j||(j=!0,ct());else{var G=n(f);G!==null&&et(B,G.startTime-R)}}var j=!1,P=-1,I=5,X=-1;function Q(){return C?!0:!(u.unstable_now()-X<I)}function Z(){if(C=!1,j){var R=u.unstable_now();X=R;var G=!0;try{t:{E=!1,S&&(S=!1,T(P),P=-1),A=!0;var J=y;try{e:{for(O(R),b=n(d);b!==null&&!(b.expirationTime>R&&Q());){var pt=b.callback;if(typeof pt=="function"){b.callback=null,y=b.priorityLevel;var At=pt(b.expirationTime<=R);if(R=u.unstable_now(),typeof At=="function"){b.callback=At,O(R),G=!0;break e}b===n(d)&&s(d),O(R)}else s(d);b=n(d)}if(b!==null)G=!0;else{var N=n(f);N!==null&&et(B,N.startTime-R),G=!1}}break t}finally{b=null,y=J,A=!1}G=void 0}}finally{G?ct():j=!1}}}var ct;if(typeof M=="function")ct=function(){M(Z)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,at=dt.port2;dt.port1.onmessage=Z,ct=function(){at.postMessage(null)}}else ct=function(){x(Z,0)};function et(R,G){P=x(function(){R(u.unstable_now())},G)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(R){R.callback=null},u.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},u.unstable_getCurrentPriorityLevel=function(){return y},u.unstable_next=function(R){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var J=y;y=G;try{return R()}finally{y=J}},u.unstable_requestPaint=function(){C=!0},u.unstable_runWithPriority=function(R,G){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=y;y=R;try{return G()}finally{y=J}},u.unstable_scheduleCallback=function(R,G,J){var pt=u.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pt+J:pt):J=pt,R){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=J+At,R={id:g++,callback:G,priorityLevel:R,startTime:J,expirationTime:At,sortIndex:-1},J>pt?(R.sortIndex=J,t(f,R),n(d)===null&&R===n(f)&&(S?(T(P),P=-1):S=!0,et(B,J-pt))):(R.sortIndex=At,t(d,R),E||A||(E=!0,j||(j=!0,ct()))),R},u.unstable_shouldYield=Q,u.unstable_wrapCallback=function(R){var G=y;return function(){var J=y;y=G;try{return R.apply(this,arguments)}finally{y=J}}}})(wh)),wh}var Nm;function g1(){return Nm||(Nm=1,xh.exports=p1()),xh.exports}var Eh={exports:{}},De={};var Om;function m1(){if(Om)return De;Om=1;var u=td();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:f,implementation:g}}var l=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,De.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},De.flushSync=function(d){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=g,s.d.f()}},De.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},De.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},De.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,b=h(g,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:b,integrity:y,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},De.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},De.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,b=h(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},De.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},De.requestFormReset=function(d){s.d.r(d)},De.unstable_batchedUpdates=function(d,f){return d(f)},De.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},De.useFormStatus=function(){return l.H.useHostTransitionStatus()},De.version="19.2.0",De}var km;function b1(){if(km)return Eh.exports;km=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),Eh.exports=m1(),Eh.exports}var Bm;function y1(){if(Bm)return Er;Bm=1;var u=g1(),t=td(),n=b1();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,r=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(r=i.return),e=i.return;while(e)}return i.tag===3?r:null}function l(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function f(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(s(188));return i!==e?null:e}for(var r=e,c=i;;){var p=r.return;if(p===null)break;var m=p.alternate;if(m===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===r)return d(p),e;if(m===c)return d(p),i;m=m.sibling}throw Error(s(188))}if(r.return!==c.return)r=p,c=m;else{for(var v=!1,_=p.child;_;){if(_===r){v=!0,r=p,c=m;break}if(_===c){v=!0,c=p,r=m;break}_=_.sibling}if(!v){for(_=m.child;_;){if(_===r){v=!0,r=m,c=p;break}if(_===c){v=!0,c=m,r=p;break}_=_.sibling}if(!v)throw Error(s(189))}}if(r.alternate!==c)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ct(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Symbol.for("react.client.reference");function at(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===dt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case x:return"Profiler";case C:return"StrictMode";case B:return"Suspense";case j:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case M:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return i=e.displayName||null,i!==null?i:at(e.type)||"Memo";case I:i=e._payload,e=e._init;try{return at(e(i))}catch{}}return null}var et=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},pt=[],At=-1;function N(e){return{current:e}}function q(e){0>At||(e.current=pt[At],pt[At]=null,At--)}function W(e,i){At++,pt[At]=e.current,e.current=i}var tt=N(null),ot=N(null),ft=N(null),lt=N(null);function $t(e,i){switch(W(ft,i),W(ot,e),W(tt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?$g(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=$g(i),e=Kg(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(tt),W(tt,e)}function Et(){q(tt),q(ot),q(ft)}function jt(e){e.memoizedState!==null&&W(lt,e);var i=tt.current,r=Kg(i,e.type);i!==r&&(W(ot,e),W(tt,r))}function je(e){ot.current===e&&(q(tt),q(ot)),lt.current===e&&(q(lt),vr._currentValue=J)}var $e,Nt;function Ot(e){if($e===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);$e=i&&i[1]||"",Nt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+e+Nt}var te=!1;function ae(e,i){if(!e||te)return"";te=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(V){var H=V}Reflect.construct(e,[],K)}else{try{K.call()}catch(V){H=V}e.call(K.prototype)}}else{try{throw Error()}catch(V){H=V}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],_=m[1];if(v&&_){var D=v.split(`
`),U=_.split(`
`);for(p=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(c===D.length||p===U.length)for(c=D.length-1,p=U.length-1;1<=c&&0<=p&&D[c]!==U[p];)p--;for(;1<=c&&0<=p;c--,p--)if(D[c]!==U[p]){if(c!==1||p!==1)do if(c--,p--,0>p||D[c]!==U[p]){var Y=`
`+D[c].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=c&&0<=p);break}}}finally{te=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Ot(r):""}function gi(e,i){switch(e.tag){case 26:case 27:case 5:return Ot(e.type);case 16:return Ot("Lazy");case 13:return e.child!==i&&i!==null?Ot("Suspense Fallback"):Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return ae(e.type,!1);case 11:return ae(e.type.render,!1);case 1:return ae(e.type,!0);case 31:return Ot("Activity");default:return""}}function mi(e){try{var i="",r=null;do i+=gi(e,r),r=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Wi=Object.prototype.hasOwnProperty,Da=u.unstable_scheduleCallback,bi=u.unstable_cancelCallback,ic=u.unstable_shouldYield,sc=u.unstable_requestPaint,Oe=u.unstable_now,ac=u.unstable_getCurrentPriorityLevel,eo=u.unstable_ImmediatePriority,xn=u.unstable_UserBlockingPriority,wn=u.unstable_NormalPriority,Dn=u.unstable_LowPriority,Ts=u.unstable_IdlePriority,Yb=u.log,$b=u.unstable_setDisableYieldValue,La=null,Ke=null;function yi(e){if(typeof Yb=="function"&&$b(e),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(La,e)}catch{}}var We=Math.clz32?Math.clz32:Qb,Kb=Math.log,Wb=Math.LN2;function Qb(e){return e>>>=0,e===0?32:31-(Kb(e)/Wb|0)|0}var no=256,io=262144,so=4194304;function Qi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ao(e,i,r){var c=e.pendingLanes;if(c===0)return 0;var p=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=c&134217727;return _!==0?(c=_&~m,c!==0?p=Qi(c):(v&=_,v!==0?p=Qi(v):r||(r=_&~e,r!==0&&(p=Qi(r))))):(_=c&~m,_!==0?p=Qi(_):v!==0?p=Qi(v):r||(r=c&~e,r!==0&&(p=Qi(r)))),p===0?0:i!==0&&i!==p&&(i&m)===0&&(m=p&-p,r=i&-i,m>=r||m===32&&(r&4194048)!==0)?i:p}function Na(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Zb(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Md(){var e=so;return so<<=1,(so&62914560)===0&&(so=4194304),e}function rc(e){for(var i=[],r=0;31>r;r++)i.push(e);return i}function Oa(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jb(e,i,r,c,p,m){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var _=e.entanglements,D=e.expirationTimes,U=e.hiddenUpdates;for(r=v&~r;0<r;){var Y=31-We(r),K=1<<Y;_[Y]=0,D[Y]=-1;var H=U[Y];if(H!==null)for(U[Y]=null,Y=0;Y<H.length;Y++){var V=H[Y];V!==null&&(V.lane&=-536870913)}r&=~K}c!==0&&Rd(e,c,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~i))}function Rd(e,i,r){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-We(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|r&261930}function Dd(e,i){var r=e.entangledLanes|=i;for(e=e.entanglements;r;){var c=31-We(r),p=1<<c;p&i|e[c]&i&&(e[c]|=i),r&=~p}}function Ld(e,i){var r=i&-i;return r=(r&42)!==0?1:oc(r),(r&(e.suspendedLanes|i))!==0?0:r}function oc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function lc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Nd(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:ym(e.type))}function Od(e,i){var r=G.p;try{return G.p=e,i()}finally{G.p=r}}var vi=Math.random().toString(36).slice(2),we="__reactFiber$"+vi,ze="__reactProps$"+vi,Ms="__reactContainer$"+vi,cc="__reactEvents$"+vi,ty="__reactListeners$"+vi,ey="__reactHandles$"+vi,kd="__reactResources$"+vi,ka="__reactMarker$"+vi;function uc(e){delete e[we],delete e[ze],delete e[cc],delete e[ty],delete e[ey]}function Rs(e){var i=e[we];if(i)return i;for(var r=e.parentNode;r;){if(i=r[Ms]||r[we]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(e=nm(e);e!==null;){if(r=e[we])return r;e=nm(e)}return i}e=r,r=e.parentNode}return null}function Ds(e){if(e=e[we]||e[Ms]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Ba(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Ls(e){var i=e[kd];return i||(i=e[kd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ye(e){e[ka]=!0}var Bd=new Set,Pd={};function Zi(e,i){Ns(e,i),Ns(e+"Capture",i)}function Ns(e,i){for(Pd[e]=i,e=0;e<i.length;e++)Bd.add(i[e])}var ny=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jd={},zd={};function iy(e){return Wi.call(zd,e)?!0:Wi.call(jd,e)?!1:ny.test(e)?zd[e]=!0:(jd[e]=!0,!1)}function ro(e,i,r){if(iy(i))if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+r)}}function oo(e,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+r)}}function qn(e,i,r,c){if(c===null)e.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(i,r,""+c)}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fd(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function sy(e,i,r){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,m=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function hc(e){if(!e._valueTracker){var i=Fd(e)?"checked":"value";e._valueTracker=sy(e,i,""+e[i])}}function Ud(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return e&&(c=Fd(e)?e.checked?"true":"false":e.value),e=c,e!==r?(i.setValue(e),!0):!1}function lo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ay=/[\n"\\]/g;function un(e){return e.replace(ay,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function dc(e,i,r,c,p,m,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+cn(i)):e.value!==""+cn(i)&&(e.value=""+cn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?fc(e,v,cn(i)):r!=null?fc(e,v,cn(r)):c!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+cn(_):e.removeAttribute("name")}function Hd(e,i,r,c,p,m,v,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){hc(e);return}r=r!=null?""+cn(r):"",i=i!=null?""+cn(i):r,_||i===e.value||(e.value=i),e.defaultValue=i}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=_?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),hc(e)}function fc(e,i,r){i==="number"&&lo(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Os(e,i,r,c){if(e=e.options,i){i={};for(var p=0;p<r.length;p++)i["$"+r[p]]=!0;for(r=0;r<e.length;r++)p=i.hasOwnProperty("$"+e[r].value),e[r].selected!==p&&(e[r].selected=p),p&&c&&(e[r].defaultSelected=!0)}else{for(r=""+cn(r),i=null,p=0;p<e.length;p++){if(e[p].value===r){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function Id(e,i,r){if(i!=null&&(i=""+cn(i),i!==e.value&&(e.value=i),r==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=r!=null?""+cn(r):""}function Gd(e,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(s(92));if(et(c)){if(1<c.length)throw Error(s(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=cn(i),e.defaultValue=r,c=e.textContent,c===r&&c!==""&&c!==null&&(e.value=c),hc(e)}function ks(e,i){if(i){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=i;return}}e.textContent=i}var ry=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vd(e,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,r):typeof r!="number"||r===0||ry.has(i)?i==="float"?e.cssFloat=r:e[i]=(""+r).trim():e[i]=r+"px"}function qd(e,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in i)c=i[p],i.hasOwnProperty(p)&&r[p]!==c&&Vd(e,p,c)}else for(var m in i)i.hasOwnProperty(m)&&Vd(e,m,i[m])}function pc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ly=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function co(e){return ly.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Xn(){}var gc=null;function mc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bs=null,Ps=null;function Xd(e){var i=Ds(e);if(i&&(e=i.stateNode)){var r=e[ze]||null;t:switch(e=i.stateNode,i.type){case"input":if(dc(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+un(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==e&&c.form===e.form){var p=c[ze]||null;if(!p)throw Error(s(90));dc(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===e.form&&Ud(c)}break t;case"textarea":Id(e,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&Os(e,!!r.multiple,i,!1)}}}var bc=!1;function Yd(e,i,r){if(bc)return e(i,r);bc=!0;try{var c=e(i);return c}finally{if(bc=!1,(Bs!==null||Ps!==null)&&(Qo(),Bs&&(i=Bs,e=Ps,Ps=Bs=null,Xd(i),e)))for(i=0;i<e.length;i++)Xd(e[i])}}function Pa(e,i){var r=e.stateNode;if(r===null)return null;var c=r[ze]||null;if(c===null)return null;r=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=!1;if(Yn)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){yc=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{yc=!1}var Ai=null,vc=null,uo=null;function $d(){if(uo)return uo;var e,i=vc,r=i.length,c,p="value"in Ai?Ai.value:Ai.textContent,m=p.length;for(e=0;e<r&&i[e]===p[e];e++);var v=r-e;for(c=1;c<=v&&i[r-c]===p[m-c];c++);return uo=p.slice(e,1<c?1-c:void 0)}function ho(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function fo(){return!0}function Kd(){return!1}function Fe(e){function i(r,c,p,m,v){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(r=e[_],this[_]=r?r(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?fo:Kd,this.isPropagationStopped=Kd,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),i}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=Fe(Ji),za=b({},Ji,{view:0,detail:0}),cy=Fe(za),Ac,Sc,Fa,go=b({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fa&&(Fa&&e.type==="mousemove"?(Ac=e.screenX-Fa.screenX,Sc=e.screenY-Fa.screenY):Sc=Ac=0,Fa=e),Ac)},movementY:function(e){return"movementY"in e?e.movementY:Sc}}),Wd=Fe(go),uy=b({},go,{dataTransfer:0}),hy=Fe(uy),dy=b({},za,{relatedTarget:0}),xc=Fe(dy),fy=b({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),py=Fe(fy),gy=b({},Ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),my=Fe(gy),by=b({},Ji,{data:0}),Qd=Fe(by),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Ay[e])?!!i[e]:!1}function wc(){return Sy}var xy=b({},za,{key:function(e){if(e.key){var i=yy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ho(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(e){return e.type==="keypress"?ho(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ho(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wy=Fe(xy),Ey=b({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=Fe(Ey),_y=b({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),Cy=Fe(_y),Ty=b({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),My=Fe(Ty),Ry=b({},go,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dy=Fe(Ry),Ly=b({},Ji,{newState:0,oldState:0}),Ny=Fe(Ly),Oy=[9,13,27,32],Ec=Yn&&"CompositionEvent"in window,Ua=null;Yn&&"documentMode"in document&&(Ua=document.documentMode);var ky=Yn&&"TextEvent"in window&&!Ua,Jd=Yn&&(!Ec||Ua&&8<Ua&&11>=Ua),tf=" ",ef=!1;function nf(e,i){switch(e){case"keyup":return Oy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var js=!1;function By(e,i){switch(e){case"compositionend":return sf(i);case"keypress":return i.which!==32?null:(ef=!0,tf);case"textInput":return e=i.data,e===tf&&ef?null:e;default:return null}}function Py(e,i){if(js)return e==="compositionend"||!Ec&&nf(e,i)?(e=$d(),uo=vc=Ai=null,js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Jd&&i.locale!=="ko"?null:i.data;default:return null}}var jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function af(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!jy[e.type]:i==="textarea"}function rf(e,i,r,c){Bs?Ps?Ps.push(c):Ps=[c]:Bs=c,i=sl(i,"onChange"),0<i.length&&(r=new po("onChange","change",null,r,c),e.push({event:r,listeners:i}))}var Ha=null,Ia=null;function zy(e){Ig(e,0)}function mo(e){var i=Ba(e);if(Ud(i))return e}function of(e,i){if(e==="change")return i}var lf=!1;if(Yn){var _c;if(Yn){var Cc="oninput"in document;if(!Cc){var cf=document.createElement("div");cf.setAttribute("oninput","return;"),Cc=typeof cf.oninput=="function"}_c=Cc}else _c=!1;lf=_c&&(!document.documentMode||9<document.documentMode)}function uf(){Ha&&(Ha.detachEvent("onpropertychange",hf),Ia=Ha=null)}function hf(e){if(e.propertyName==="value"&&mo(Ia)){var i=[];rf(i,Ia,e,mc(e)),Yd(zy,i)}}function Fy(e,i,r){e==="focusin"?(uf(),Ha=i,Ia=r,Ha.attachEvent("onpropertychange",hf)):e==="focusout"&&uf()}function Uy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mo(Ia)}function Hy(e,i){if(e==="click")return mo(i)}function Iy(e,i){if(e==="input"||e==="change")return mo(i)}function Gy(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Qe=typeof Object.is=="function"?Object.is:Gy;function Ga(e,i){if(Qe(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var r=Object.keys(e),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!Wi.call(i,p)||!Qe(e[p],i[p]))return!1}return!0}function df(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ff(e,i){var r=df(e);e=0;for(var c;r;){if(r.nodeType===3){if(c=e+r.textContent.length,e<=i&&c>=i)return{node:r,offset:i-e};e=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=df(r)}}function pf(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?pf(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function gf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=lo(e.document);i instanceof e.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)e=i.contentWindow;else break;i=lo(e.document)}return i}function Tc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Vy=Yn&&"documentMode"in document&&11>=document.documentMode,zs=null,Mc=null,Va=null,Rc=!1;function mf(e,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rc||zs==null||zs!==lo(c)||(c=zs,"selectionStart"in c&&Tc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Va&&Ga(Va,c)||(Va=c,c=sl(Mc,"onSelect"),0<c.length&&(i=new po("onSelect","select",null,i,r),e.push({event:i,listeners:c}),i.target=zs)))}function ts(e,i){var r={};return r[e.toLowerCase()]=i.toLowerCase(),r["Webkit"+e]="webkit"+i,r["Moz"+e]="moz"+i,r}var Fs={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Dc={},bf={};Yn&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function es(e){if(Dc[e])return Dc[e];if(!Fs[e])return e;var i=Fs[e],r;for(r in i)if(i.hasOwnProperty(r)&&r in bf)return Dc[e]=i[r];return e}var yf=es("animationend"),vf=es("animationiteration"),Af=es("animationstart"),qy=es("transitionrun"),Xy=es("transitionstart"),Yy=es("transitioncancel"),Sf=es("transitionend"),xf=new Map,Lc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lc.push("scrollEnd");function En(e,i){xf.set(e,i),Zi(i,[e])}var bo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},hn=[],Us=0,Nc=0;function yo(){for(var e=Us,i=Nc=Us=0;i<e;){var r=hn[i];hn[i++]=null;var c=hn[i];hn[i++]=null;var p=hn[i];hn[i++]=null;var m=hn[i];if(hn[i++]=null,c!==null&&p!==null){var v=c.pending;v===null?p.next=p:(p.next=v.next,v.next=p),c.pending=p}m!==0&&wf(r,p,m)}}function vo(e,i,r,c){hn[Us++]=e,hn[Us++]=i,hn[Us++]=r,hn[Us++]=c,Nc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Oc(e,i,r,c){return vo(e,i,r,c),Ao(e)}function ns(e,i){return vo(e,null,null,i),Ao(e)}function wf(e,i,r){e.lanes|=r;var c=e.alternate;c!==null&&(c.lanes|=r);for(var p=!1,m=e.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&i!==null&&(p=31-We(r),e=m.hiddenUpdates,c=e[p],c===null?e[p]=[i]:c.push(i),i.lane=r|536870912),m):null}function Ao(e){if(50<dr)throw dr=0,Iu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Hs={};function $y(e,i,r,c){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ze(e,i,r,c){return new $y(e,i,r,c)}function kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $n(e,i){var r=e.alternate;return r===null?(r=Ze(e.tag,i,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=i,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,i=e.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Ef(e,i){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,i=r.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function So(e,i,r,c,p,m){var v=0;if(c=e,typeof e=="function")kc(e)&&(v=1);else if(typeof e=="string")v=Jv(e,r,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case X:return e=Ze(31,r,i,p),e.elementType=X,e.lanes=m,e;case S:return is(r.children,p,m,i);case C:v=8,p|=24;break;case x:return e=Ze(12,r,i,p|2),e.elementType=x,e.lanes=m,e;case B:return e=Ze(13,r,i,p),e.elementType=B,e.lanes=m,e;case j:return e=Ze(19,r,i,p),e.elementType=j,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:v=10;break t;case T:v=9;break t;case O:v=11;break t;case P:v=14;break t;case I:v=16,c=null;break t}v=29,r=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=Ze(v,r,i,p),i.elementType=e,i.type=c,i.lanes=m,i}function is(e,i,r,c){return e=Ze(7,e,c,i),e.lanes=r,e}function Bc(e,i,r){return e=Ze(6,e,null,i),e.lanes=r,e}function _f(e){var i=Ze(18,null,null,0);return i.stateNode=e,i}function Pc(e,i,r){return i=Ze(4,e.children!==null?e.children:[],e.key,i),i.lanes=r,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Cf=new WeakMap;function dn(e,i){if(typeof e=="object"&&e!==null){var r=Cf.get(e);return r!==void 0?r:(i={value:e,source:i,stack:mi(i)},Cf.set(e,i),i)}return{value:e,source:i,stack:mi(i)}}var Is=[],Gs=0,xo=null,qa=0,fn=[],pn=0,Si=null,Ln=1,Nn="";function Kn(e,i){Is[Gs++]=qa,Is[Gs++]=xo,xo=e,qa=i}function Tf(e,i,r){fn[pn++]=Ln,fn[pn++]=Nn,fn[pn++]=Si,Si=e;var c=Ln;e=Nn;var p=32-We(c)-1;c&=~(1<<p),r+=1;var m=32-We(i)+p;if(30<m){var v=p-p%5;m=(c&(1<<v)-1).toString(32),c>>=v,p-=v,Ln=1<<32-We(i)+p|r<<p|c,Nn=m+e}else Ln=1<<m|r<<p|c,Nn=e}function jc(e){e.return!==null&&(Kn(e,1),Tf(e,1,0))}function zc(e){for(;e===xo;)xo=Is[--Gs],Is[Gs]=null,qa=Is[--Gs],Is[Gs]=null;for(;e===Si;)Si=fn[--pn],fn[pn]=null,Nn=fn[--pn],fn[pn]=null,Ln=fn[--pn],fn[pn]=null}function Mf(e,i){fn[pn++]=Ln,fn[pn++]=Nn,fn[pn++]=Si,Ln=i.id,Nn=i.overflow,Si=e}var Ee=null,Kt=null,Dt=!1,xi=null,gn=!1,Fc=Error(s(519));function wi(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(dn(i,e)),Fc}function Rf(e){var i=e.stateNode,r=e.type,c=e.memoizedProps;switch(i[we]=e,i[ze]=c,r){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(r=0;r<pr.length;r++)Ct(pr[r],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":Ct("invalid",i),Hd(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ct("invalid",i);break;case"textarea":Ct("invalid",i),Gd(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||Xg(i.textContent,r)?(c.popover!=null&&(Ct("beforetoggle",i),Ct("toggle",i)),c.onScroll!=null&&Ct("scroll",i),c.onScrollEnd!=null&&Ct("scrollend",i),c.onClick!=null&&(i.onclick=Xn),i=!0):i=!1,i||wi(e,!0)}function Df(e){for(Ee=e.return;Ee;)switch(Ee.tag){case 5:case 31:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:Ee=Ee.return}}function Vs(e){if(e!==Ee)return!1;if(!Dt)return Df(e),Dt=!0,!1;var i=e.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||ih(e.type,e.memoizedProps)),r=!r),r&&Kt&&wi(e),Df(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Kt=em(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Kt=em(e)}else i===27?(i=Kt,ji(e.type)?(e=lh,lh=null,Kt=e):Kt=i):Kt=Ee?bn(e.stateNode.nextSibling):null;return!0}function ss(){Kt=Ee=null,Dt=!1}function Uc(){var e=xi;return e!==null&&(Ge===null?Ge=e:Ge.push.apply(Ge,e),xi=null),e}function Xa(e){xi===null?xi=[e]:xi.push(e)}var Hc=N(null),as=null,Wn=null;function Ei(e,i,r){W(Hc,i._currentValue),i._currentValue=r}function Qn(e){e._currentValue=Hc.current,q(Hc)}function Ic(e,i,r){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===r)break;e=e.return}}function Gc(e,i,r,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var v=p.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=p;for(var D=0;D<i.length;D++)if(_.context===i[D]){m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),Ic(m.return,r,e),c||(v=null);break t}m=_.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(s(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),Ic(v,r,e),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===e){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function qs(e,i,r,c){e=null;for(var p=i,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=p.type;Qe(p.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(p===lt.current){if(v=p.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(vr):e=[vr])}p=p.return}e!==null&&Gc(i,e,r,c),i.flags|=262144}function wo(e){for(e=e.firstContext;e!==null;){if(!Qe(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function rs(e){as=e,Wn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _e(e){return Lf(as,e)}function Eo(e,i){return as===null&&rs(e),Lf(e,i)}function Lf(e,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Wn===null){if(e===null)throw Error(s(308));Wn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Wn=Wn.next=i;return r}var Ky=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(r,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(r){return r()})}},Wy=u.unstable_scheduleCallback,Qy=u.unstable_NormalPriority,de={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vc(){return{controller:new Ky,data:new Map,refCount:0}}function Ya(e){e.refCount--,e.refCount===0&&Wy(Qy,function(){e.controller.abort()})}var $a=null,qc=0,Xs=0,Ys=null;function Zy(e,i){if($a===null){var r=$a=[];qc=0,Xs=$u(),Ys={status:"pending",value:void 0,then:function(c){r.push(c)}}}return qc++,i.then(Nf,Nf),i}function Nf(){if(--qc===0&&$a!==null){Ys!==null&&(Ys.status="fulfilled");var e=$a;$a=null,Xs=0,Ys=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Jy(e,i){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var p=0;p<r.length;p++)(0,r[p])(i)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var Of=R.S;R.S=function(e,i){mg=Oe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Zy(e,i),Of!==null&&Of(e,i)};var os=N(null);function Xc(){var e=os.current;return e!==null?e:qt.pooledCache}function _o(e,i){i===null?W(os,os.current):W(os,i.pool)}function kf(){var e=Xc();return e===null?null:{parent:de._currentValue,pool:e}}var $s=Error(s(460)),Yc=Error(s(474)),Co=Error(s(542)),To={then:function(){}};function Bf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pf(e,i,r){switch(r=e[r],r===void 0?e.push(i):r!==i&&(i.then(Xn,Xn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,zf(e),e;default:if(typeof i.status=="string")i.then(Xn,Xn);else{if(e=qt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=c}},function(c){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,zf(e),e}throw cs=i,$s}}function ls(e){try{var i=e._init;return i(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(cs=r,$s):r}}var cs=null;function jf(){if(cs===null)throw Error(s(459));var e=cs;return cs=null,e}function zf(e){if(e===$s||e===Co)throw Error(s(483))}var Ks=null,Ka=0;function Mo(e){var i=Ka;return Ka+=1,Ks===null&&(Ks=[]),Pf(Ks,e,i)}function Wa(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ro(e,i){throw i.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Ff(e){function i(z,k){if(e){var F=z.deletions;F===null?(z.deletions=[k],z.flags|=16):F.push(k)}}function r(z,k){if(!e)return null;for(;k!==null;)i(z,k),k=k.sibling;return null}function c(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function p(z,k){return z=$n(z,k),z.index=0,z.sibling=null,z}function m(z,k,F){return z.index=F,e?(F=z.alternate,F!==null?(F=F.index,F<k?(z.flags|=67108866,k):F):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function v(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function _(z,k,F,$){return k===null||k.tag!==6?(k=Bc(F,z.mode,$),k.return=z,k):(k=p(k,F),k.return=z,k)}function D(z,k,F,$){var ut=F.type;return ut===S?Y(z,k,F.props.children,$,F.key):k!==null&&(k.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===I&&ls(ut)===k.type)?(k=p(k,F.props),Wa(k,F),k.return=z,k):(k=So(F.type,F.key,F.props,null,z.mode,$),Wa(k,F),k.return=z,k)}function U(z,k,F,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=Pc(F,z.mode,$),k.return=z,k):(k=p(k,F.children||[]),k.return=z,k)}function Y(z,k,F,$,ut){return k===null||k.tag!==7?(k=is(F,z.mode,$,ut),k.return=z,k):(k=p(k,F),k.return=z,k)}function K(z,k,F){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Bc(""+k,z.mode,F),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return F=So(k.type,k.key,k.props,null,z.mode,F),Wa(F,k),F.return=z,F;case E:return k=Pc(k,z.mode,F),k.return=z,k;case I:return k=ls(k),K(z,k,F)}if(et(k)||ct(k))return k=is(k,z.mode,F,null),k.return=z,k;if(typeof k.then=="function")return K(z,Mo(k),F);if(k.$$typeof===M)return K(z,Eo(z,k),F);Ro(z,k)}return null}function H(z,k,F,$){var ut=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ut!==null?null:_(z,k,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===ut?D(z,k,F,$):null;case E:return F.key===ut?U(z,k,F,$):null;case I:return F=ls(F),H(z,k,F,$)}if(et(F)||ct(F))return ut!==null?null:Y(z,k,F,$,null);if(typeof F.then=="function")return H(z,k,Mo(F),$);if(F.$$typeof===M)return H(z,k,Eo(z,F),$);Ro(z,F)}return null}function V(z,k,F,$,ut){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return z=z.get(F)||null,_(k,z,""+$,ut);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return z=z.get($.key===null?F:$.key)||null,D(k,z,$,ut);case E:return z=z.get($.key===null?F:$.key)||null,U(k,z,$,ut);case I:return $=ls($),V(z,k,F,$,ut)}if(et($)||ct($))return z=z.get(F)||null,Y(k,z,$,ut,null);if(typeof $.then=="function")return V(z,k,F,Mo($),ut);if($.$$typeof===M)return V(z,k,F,Eo(k,$),ut);Ro(k,$)}return null}function st(z,k,F,$){for(var ut=null,kt=null,rt=k,xt=k=0,Mt=null;rt!==null&&xt<F.length;xt++){rt.index>xt?(Mt=rt,rt=null):Mt=rt.sibling;var Bt=H(z,rt,F[xt],$);if(Bt===null){rt===null&&(rt=Mt);break}e&&rt&&Bt.alternate===null&&i(z,rt),k=m(Bt,k,xt),kt===null?ut=Bt:kt.sibling=Bt,kt=Bt,rt=Mt}if(xt===F.length)return r(z,rt),Dt&&Kn(z,xt),ut;if(rt===null){for(;xt<F.length;xt++)rt=K(z,F[xt],$),rt!==null&&(k=m(rt,k,xt),kt===null?ut=rt:kt.sibling=rt,kt=rt);return Dt&&Kn(z,xt),ut}for(rt=c(rt);xt<F.length;xt++)Mt=V(rt,z,xt,F[xt],$),Mt!==null&&(e&&Mt.alternate!==null&&rt.delete(Mt.key===null?xt:Mt.key),k=m(Mt,k,xt),kt===null?ut=Mt:kt.sibling=Mt,kt=Mt);return e&&rt.forEach(function(Ii){return i(z,Ii)}),Dt&&Kn(z,xt),ut}function gt(z,k,F,$){if(F==null)throw Error(s(151));for(var ut=null,kt=null,rt=k,xt=k=0,Mt=null,Bt=F.next();rt!==null&&!Bt.done;xt++,Bt=F.next()){rt.index>xt?(Mt=rt,rt=null):Mt=rt.sibling;var Ii=H(z,rt,Bt.value,$);if(Ii===null){rt===null&&(rt=Mt);break}e&&rt&&Ii.alternate===null&&i(z,rt),k=m(Ii,k,xt),kt===null?ut=Ii:kt.sibling=Ii,kt=Ii,rt=Mt}if(Bt.done)return r(z,rt),Dt&&Kn(z,xt),ut;if(rt===null){for(;!Bt.done;xt++,Bt=F.next())Bt=K(z,Bt.value,$),Bt!==null&&(k=m(Bt,k,xt),kt===null?ut=Bt:kt.sibling=Bt,kt=Bt);return Dt&&Kn(z,xt),ut}for(rt=c(rt);!Bt.done;xt++,Bt=F.next())Bt=V(rt,z,xt,Bt.value,$),Bt!==null&&(e&&Bt.alternate!==null&&rt.delete(Bt.key===null?xt:Bt.key),k=m(Bt,k,xt),kt===null?ut=Bt:kt.sibling=Bt,kt=Bt);return e&&rt.forEach(function(u1){return i(z,u1)}),Dt&&Kn(z,xt),ut}function Gt(z,k,F,$){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var ut=F.key;k!==null;){if(k.key===ut){if(ut=F.type,ut===S){if(k.tag===7){r(z,k.sibling),$=p(k,F.props.children),$.return=z,z=$;break t}}else if(k.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===I&&ls(ut)===k.type){r(z,k.sibling),$=p(k,F.props),Wa($,F),$.return=z,z=$;break t}r(z,k);break}else i(z,k);k=k.sibling}F.type===S?($=is(F.props.children,z.mode,$,F.key),$.return=z,z=$):($=So(F.type,F.key,F.props,null,z.mode,$),Wa($,F),$.return=z,z=$)}return v(z);case E:t:{for(ut=F.key;k!==null;){if(k.key===ut)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){r(z,k.sibling),$=p(k,F.children||[]),$.return=z,z=$;break t}else{r(z,k);break}else i(z,k);k=k.sibling}$=Pc(F,z.mode,$),$.return=z,z=$}return v(z);case I:return F=ls(F),Gt(z,k,F,$)}if(et(F))return st(z,k,F,$);if(ct(F)){if(ut=ct(F),typeof ut!="function")throw Error(s(150));return F=ut.call(F),gt(z,k,F,$)}if(typeof F.then=="function")return Gt(z,k,Mo(F),$);if(F.$$typeof===M)return Gt(z,k,Eo(z,F),$);Ro(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,k!==null&&k.tag===6?(r(z,k.sibling),$=p(k,F),$.return=z,z=$):(r(z,k),$=Bc(F,z.mode,$),$.return=z,z=$),v(z)):r(z,k)}return function(z,k,F,$){try{Ka=0;var ut=Gt(z,k,F,$);return Ks=null,ut}catch(rt){if(rt===$s||rt===Co)throw rt;var kt=Ze(29,rt,null,z.mode);return kt.lanes=$,kt.return=z,kt}finally{}}}var us=Ff(!0),Uf=Ff(!1),_i=!1;function $c(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ci(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(e,i,r){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Pt&2)!==0){var p=c.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),c.pending=i,i=Ao(e),wf(e,null,r),i}return vo(e,c,i,r),Ao(e)}function Qa(e,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,r|=c,i.lanes=r,Dd(e,r)}}function Wc(e,i){var r=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?p=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?p=m=i:m=m.next=i}else p=m=i;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=i:e.next=i,r.lastBaseUpdate=i}var Qc=!1;function Za(){if(Qc){var e=Ys;if(e!==null)throw e}}function Ja(e,i,r,c){Qc=!1;var p=e.updateQueue;_i=!1;var m=p.firstBaseUpdate,v=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var D=_,U=D.next;D.next=null,v===null?m=U:v.next=U,v=D;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,_=Y.lastBaseUpdate,_!==v&&(_===null?Y.firstBaseUpdate=U:_.next=U,Y.lastBaseUpdate=D))}if(m!==null){var K=p.baseState;v=0,Y=U=D=null,_=m;do{var H=_.lane&-536870913,V=H!==_.lane;if(V?(Tt&H)===H:(c&H)===H){H!==0&&H===Xs&&(Qc=!0),Y!==null&&(Y=Y.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var st=e,gt=_;H=i;var Gt=r;switch(gt.tag){case 1:if(st=gt.payload,typeof st=="function"){K=st.call(Gt,K,H);break t}K=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=gt.payload,H=typeof st=="function"?st.call(Gt,K,H):st,H==null)break t;K=b({},K,H);break t;case 2:_i=!0}}H=_.callback,H!==null&&(e.flags|=64,V&&(e.flags|=8192),V=p.callbacks,V===null?p.callbacks=[H]:V.push(H))}else V={lane:H,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Y===null?(U=Y=V,D=K):Y=Y.next=V,v|=H;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;V=_,_=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);Y===null&&(D=K),p.baseState=D,p.firstBaseUpdate=U,p.lastBaseUpdate=Y,m===null&&(p.shared.lanes=0),Ni|=v,e.lanes=v,e.memoizedState=K}}function Hf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function If(e,i){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Hf(r[e],i)}var Ws=N(null),Do=N(0);function Gf(e,i){e=ri,W(Do,e),W(Ws,i),ri=e|i.baseLanes}function Zc(){W(Do,ri),W(Ws,Ws.current)}function Jc(){ri=Do.current,q(Ws),q(Do)}var Je=N(null),mn=null;function Mi(e){var i=e.alternate;W(le,le.current&1),W(Je,e),mn===null&&(i===null||Ws.current!==null||i.memoizedState!==null)&&(mn=e)}function tu(e){W(le,le.current),W(Je,e),mn===null&&(mn=e)}function Vf(e){e.tag===22?(W(le,le.current),W(Je,e),mn===null&&(mn=e)):Ri()}function Ri(){W(le,le.current),W(Je,Je.current)}function tn(e){q(Je),mn===e&&(mn=null),q(le)}var le=N(0);function Lo(e){for(var i=e;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||rh(r)||oh(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zn=0,St=null,Ht=null,fe=null,No=!1,Qs=!1,hs=!1,Oo=0,tr=0,Zs=null,tv=0;function re(){throw Error(s(321))}function eu(e,i){if(i===null)return!1;for(var r=0;r<i.length&&r<e.length;r++)if(!Qe(e[r],i[r]))return!1;return!0}function nu(e,i,r,c,p,m){return Zn=m,St=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=e===null||e.memoizedState===null?Tp:bu,hs=!1,m=r(c,p),hs=!1,Qs&&(m=Xf(i,r,c,p)),qf(e),m}function qf(e){R.H=ir;var i=Ht!==null&&Ht.next!==null;if(Zn=0,fe=Ht=St=null,No=!1,tr=0,Zs=null,i)throw Error(s(300));e===null||pe||(e=e.dependencies,e!==null&&wo(e)&&(pe=!0))}function Xf(e,i,r,c){St=e;var p=0;do{if(Qs&&(Zs=null),tr=0,Qs=!1,25<=p)throw Error(s(301));if(p+=1,fe=Ht=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=Mp,m=i(r,c)}while(Qs);return m}function ev(){var e=R.H,i=e.useState()[0];return i=typeof i.then=="function"?er(i):i,e=e.useState()[0],(Ht!==null?Ht.memoizedState:null)!==e&&(St.flags|=1024),i}function iu(){var e=Oo!==0;return Oo=0,e}function su(e,i,r){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r}function au(e){if(No){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}No=!1}Zn=0,fe=Ht=St=null,Qs=!1,tr=Oo=0,Zs=null}function ke(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?St.memoizedState=fe=e:fe=fe.next=e,fe}function ce(){if(Ht===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var i=fe===null?St.memoizedState:fe.next;if(i!==null)fe=i,Ht=e;else{if(e===null)throw St.alternate===null?Error(s(467)):Error(s(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},fe===null?St.memoizedState=fe=e:fe=fe.next=e}return fe}function ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function er(e){var i=tr;return tr+=1,Zs===null&&(Zs=[]),e=Pf(Zs,e,i),i=St,(fe===null?i.memoizedState:fe.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?Tp:bu),e}function Bo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return er(e);if(e.$$typeof===M)return _e(e)}throw Error(s(438,String(e)))}function ru(e){var i=null,r=St.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=ko(),St.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(e),c=0;c<e;c++)r[c]=Q;return i.index++,r}function Jn(e,i){return typeof i=="function"?i(e):i}function Po(e){var i=ce();return ou(i,Ht,e)}function ou(e,i,r){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var p=e.baseQueue,m=c.pending;if(m!==null){if(p!==null){var v=p.next;p.next=m.next,m.next=v}i.baseQueue=p=m,c.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{i=p.next;var _=v=null,D=null,U=i,Y=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(Tt&K)===K:(Zn&K)===K){var H=U.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Xs&&(Y=!0);else if((Zn&H)===H){U=U.next,H===Xs&&(Y=!0);continue}else K={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(_=D=K,v=m):D=D.next=K,St.lanes|=H,Ni|=H;K=U.action,hs&&r(m,K),m=U.hasEagerState?U.eagerState:r(m,K)}else H={lane:K,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(_=D=H,v=m):D=D.next=H,St.lanes|=K,Ni|=K;U=U.next}while(U!==null&&U!==i);if(D===null?v=m:D.next=_,!Qe(m,e.memoizedState)&&(pe=!0,Y&&(r=Ys,r!==null)))throw r;e.memoizedState=m,e.baseState=v,e.baseQueue=D,c.lastRenderedState=m}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function lu(e){var i=ce(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var c=r.dispatch,p=r.pending,m=i.memoizedState;if(p!==null){r.pending=null;var v=p=p.next;do m=e(m,v.action),v=v.next;while(v!==p);Qe(m,i.memoizedState)||(pe=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),r.lastRenderedState=m}return[m,c]}function Yf(e,i,r){var c=St,p=ce(),m=Dt;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=i();var v=!Qe((Ht||p).memoizedState,r);if(v&&(p.memoizedState=r,pe=!0),p=p.queue,hu(Wf.bind(null,c,p,e),[e]),p.getSnapshot!==i||v||fe!==null&&fe.memoizedState.tag&1){if(c.flags|=2048,Js(9,{destroy:void 0},Kf.bind(null,c,p,r,i),null),qt===null)throw Error(s(349));m||(Zn&127)!==0||$f(c,i,r)}return r}function $f(e,i,r){e.flags|=16384,e={getSnapshot:i,value:r},i=St.updateQueue,i===null?(i=ko(),St.updateQueue=i,i.stores=[e]):(r=i.stores,r===null?i.stores=[e]:r.push(e))}function Kf(e,i,r,c){i.value=r,i.getSnapshot=c,Qf(i)&&Zf(e)}function Wf(e,i,r){return r(function(){Qf(i)&&Zf(e)})}function Qf(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!Qe(e,r)}catch{return!0}}function Zf(e){var i=ns(e,2);i!==null&&Ve(i,e,2)}function cu(e){var i=ke();if(typeof e=="function"){var r=e;if(e=r(),hs){yi(!0);try{r()}finally{yi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:e},i}function Jf(e,i,r,c){return e.baseState=r,ou(e,Ht,typeof c=="function"?c:Jn)}function nv(e,i,r,c,p){if(Fo(e))throw Error(s(485));if(e=i.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};R.T!==null?r(!0):m.isTransition=!1,c(m),r=i.pending,r===null?(m.next=i.pending=m,tp(i,m)):(m.next=r.next,i.pending=r.next=m)}}function tp(e,i){var r=i.action,c=i.payload,p=e.state;if(i.isTransition){var m=R.T,v={};R.T=v;try{var _=r(p,c),D=R.S;D!==null&&D(v,_),ep(e,i,_)}catch(U){uu(e,i,U)}finally{m!==null&&v.types!==null&&(m.types=v.types),R.T=m}}else try{m=r(p,c),ep(e,i,m)}catch(U){uu(e,i,U)}}function ep(e,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){np(e,i,c)},function(c){return uu(e,i,c)}):np(e,i,r)}function np(e,i,r){i.status="fulfilled",i.value=r,ip(i),e.state=r,i=e.pending,i!==null&&(r=i.next,r===i?e.pending=null:(r=r.next,i.next=r,tp(e,r)))}function uu(e,i,r){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,ip(i),i=i.next;while(i!==c)}e.action=null}function ip(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function sp(e,i){return i}function ap(e,i){if(Dt){var r=qt.formState;if(r!==null){t:{var c=St;if(Dt){if(Kt){e:{for(var p=Kt,m=gn;p.nodeType!==8;){if(!m){p=null;break e}if(p=bn(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Kt=bn(p.nextSibling),c=p.data==="F!";break t}}wi(c)}c=!1}c&&(i=r[0])}}return r=ke(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:i},r.queue=c,r=Ep.bind(null,St,c),c.dispatch=r,c=cu(!1),m=mu.bind(null,St,!1,c.queue),c=ke(),p={state:i,dispatch:null,action:e,pending:null},c.queue=p,r=nv.bind(null,St,p,m,r),p.dispatch=r,c.memoizedState=e,[i,r,!1]}function rp(e){var i=ce();return op(i,Ht,e)}function op(e,i,r){if(i=ou(e,i,sp)[0],e=Po(Jn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=er(i)}catch(v){throw v===$s?Co:v}else c=i;i=ce();var p=i.queue,m=p.dispatch;return r!==i.memoizedState&&(St.flags|=2048,Js(9,{destroy:void 0},iv.bind(null,p,r),null)),[c,m,e]}function iv(e,i){e.action=i}function lp(e){var i=ce(),r=Ht;if(r!==null)return op(i,r,e);ce(),i=i.memoizedState,r=ce();var c=r.queue.dispatch;return r.memoizedState=e,[i,c,!1]}function Js(e,i,r,c){return e={tag:e,create:r,deps:c,inst:i,next:null},i=St.updateQueue,i===null&&(i=ko(),St.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=e.next=e:(c=r.next,r.next=e,e.next=c,i.lastEffect=e),e}function cp(){return ce().memoizedState}function jo(e,i,r,c){var p=ke();St.flags|=e,p.memoizedState=Js(1|i,{destroy:void 0},r,c===void 0?null:c)}function zo(e,i,r,c){var p=ce();c=c===void 0?null:c;var m=p.memoizedState.inst;Ht!==null&&c!==null&&eu(c,Ht.memoizedState.deps)?p.memoizedState=Js(i,m,r,c):(St.flags|=e,p.memoizedState=Js(1|i,m,r,c))}function up(e,i){jo(8390656,8,e,i)}function hu(e,i){zo(2048,8,e,i)}function sv(e){St.flags|=4;var i=St.updateQueue;if(i===null)i=ko(),St.updateQueue=i,i.events=[e];else{var r=i.events;r===null?i.events=[e]:r.push(e)}}function hp(e){var i=ce().memoizedState;return sv({ref:i,nextImpl:e}),function(){if((Pt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function dp(e,i){return zo(4,2,e,i)}function fp(e,i){return zo(4,4,e,i)}function pp(e,i){if(typeof i=="function"){e=e();var r=i(e);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function gp(e,i,r){r=r!=null?r.concat([e]):null,zo(4,4,pp.bind(null,i,e),r)}function du(){}function mp(e,i){var r=ce();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&eu(i,c[1])?c[0]:(r.memoizedState=[e,i],e)}function bp(e,i){var r=ce();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&eu(i,c[1]))return c[0];if(c=e(),hs){yi(!0);try{e()}finally{yi(!1)}}return r.memoizedState=[c,i],c}function fu(e,i,r){return r===void 0||(Zn&1073741824)!==0&&(Tt&261930)===0?e.memoizedState=i:(e.memoizedState=r,e=yg(),St.lanes|=e,Ni|=e,r)}function yp(e,i,r,c){return Qe(r,i)?r:Ws.current!==null?(e=fu(e,r,c),Qe(e,i)||(pe=!0),e):(Zn&42)===0||(Zn&1073741824)!==0&&(Tt&261930)===0?(pe=!0,e.memoizedState=r):(e=yg(),St.lanes|=e,Ni|=e,i)}function vp(e,i,r,c,p){var m=G.p;G.p=m!==0&&8>m?m:8;var v=R.T,_={};R.T=_,mu(e,!1,i,r);try{var D=p(),U=R.S;if(U!==null&&U(_,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Y=Jy(D,c);nr(e,i,Y,sn(e))}else nr(e,i,c,sn(e))}catch(K){nr(e,i,{then:function(){},status:"rejected",reason:K},sn())}finally{G.p=m,v!==null&&_.types!==null&&(v.types=_.types),R.T=v}}function av(){}function pu(e,i,r,c){if(e.tag!==5)throw Error(s(476));var p=Ap(e).queue;vp(e,p,i,J,r===null?av:function(){return Sp(e),r(c)})}function Ap(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:J},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:r},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Sp(e){var i=Ap(e);i.next===null&&(i=e.alternate.memoizedState),nr(e,i.next.queue,{},sn())}function gu(){return _e(vr)}function xp(){return ce().memoizedState}function wp(){return ce().memoizedState}function rv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var r=sn();e=Ci(r);var c=Ti(i,e,r);c!==null&&(Ve(c,i,r),Qa(c,i,r)),i={cache:Vc()},e.payload=i;return}i=i.return}}function ov(e,i,r){var c=sn();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Fo(e)?_p(i,r):(r=Oc(e,i,r,c),r!==null&&(Ve(r,e,c),Cp(r,i,c)))}function Ep(e,i,r){var c=sn();nr(e,i,r,c)}function nr(e,i,r,c){var p={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fo(e))_p(i,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,_=m(v,r);if(p.hasEagerState=!0,p.eagerState=_,Qe(_,v))return vo(e,i,p,0),qt===null&&yo(),!1}catch{}finally{}if(r=Oc(e,i,p,c),r!==null)return Ve(r,e,c),Cp(r,i,c),!0}return!1}function mu(e,i,r,c){if(c={lane:2,revertLane:$u(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Fo(e)){if(i)throw Error(s(479))}else i=Oc(e,r,c,2),i!==null&&Ve(i,e,2)}function Fo(e){var i=e.alternate;return e===St||i!==null&&i===St}function _p(e,i){Qs=No=!0;var r=e.pending;r===null?i.next=i:(i.next=r.next,r.next=i),e.pending=i}function Cp(e,i,r){if((r&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,r|=c,i.lanes=r,Dd(e,r)}}var ir={readContext:_e,use:Bo,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useLayoutEffect:re,useInsertionEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useSyncExternalStore:re,useId:re,useHostTransitionStatus:re,useFormState:re,useActionState:re,useOptimistic:re,useMemoCache:re,useCacheRefresh:re};ir.useEffectEvent=re;var Tp={readContext:_e,use:Bo,useCallback:function(e,i){return ke().memoizedState=[e,i===void 0?null:i],e},useContext:_e,useEffect:up,useImperativeHandle:function(e,i,r){r=r!=null?r.concat([e]):null,jo(4194308,4,pp.bind(null,i,e),r)},useLayoutEffect:function(e,i){return jo(4194308,4,e,i)},useInsertionEffect:function(e,i){jo(4,2,e,i)},useMemo:function(e,i){var r=ke();i=i===void 0?null:i;var c=e();if(hs){yi(!0);try{e()}finally{yi(!1)}}return r.memoizedState=[c,i],c},useReducer:function(e,i,r){var c=ke();if(r!==void 0){var p=r(i);if(hs){yi(!0);try{r(i)}finally{yi(!1)}}}else p=i;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=ov.bind(null,St,e),[c.memoizedState,e]},useRef:function(e){var i=ke();return e={current:e},i.memoizedState=e},useState:function(e){e=cu(e);var i=e.queue,r=Ep.bind(null,St,i);return i.dispatch=r,[e.memoizedState,r]},useDebugValue:du,useDeferredValue:function(e,i){var r=ke();return fu(r,e,i)},useTransition:function(){var e=cu(!1);return e=vp.bind(null,St,e.queue,!0,!1),ke().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,r){var c=St,p=ke();if(Dt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),qt===null)throw Error(s(349));(Tt&127)!==0||$f(c,i,r)}p.memoizedState=r;var m={value:r,getSnapshot:i};return p.queue=m,up(Wf.bind(null,c,m,e),[e]),c.flags|=2048,Js(9,{destroy:void 0},Kf.bind(null,c,m,r,i),null),r},useId:function(){var e=ke(),i=qt.identifierPrefix;if(Dt){var r=Nn,c=Ln;r=(c&~(1<<32-We(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=Oo++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=tv++,i="_"+i+"r_"+r.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:gu,useFormState:ap,useActionState:ap,useOptimistic:function(e){var i=ke();i.memoizedState=i.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=mu.bind(null,St,!0,r),r.dispatch=i,[e,i]},useMemoCache:ru,useCacheRefresh:function(){return ke().memoizedState=rv.bind(null,St)},useEffectEvent:function(e){var i=ke(),r={impl:e};return i.memoizedState=r,function(){if((Pt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},bu={readContext:_e,use:Bo,useCallback:mp,useContext:_e,useEffect:hu,useImperativeHandle:gp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:bp,useReducer:Po,useRef:cp,useState:function(){return Po(Jn)},useDebugValue:du,useDeferredValue:function(e,i){var r=ce();return yp(r,Ht.memoizedState,e,i)},useTransition:function(){var e=Po(Jn)[0],i=ce().memoizedState;return[typeof e=="boolean"?e:er(e),i]},useSyncExternalStore:Yf,useId:xp,useHostTransitionStatus:gu,useFormState:rp,useActionState:rp,useOptimistic:function(e,i){var r=ce();return Jf(r,Ht,e,i)},useMemoCache:ru,useCacheRefresh:wp};bu.useEffectEvent=hp;var Mp={readContext:_e,use:Bo,useCallback:mp,useContext:_e,useEffect:hu,useImperativeHandle:gp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:bp,useReducer:lu,useRef:cp,useState:function(){return lu(Jn)},useDebugValue:du,useDeferredValue:function(e,i){var r=ce();return Ht===null?fu(r,e,i):yp(r,Ht.memoizedState,e,i)},useTransition:function(){var e=lu(Jn)[0],i=ce().memoizedState;return[typeof e=="boolean"?e:er(e),i]},useSyncExternalStore:Yf,useId:xp,useHostTransitionStatus:gu,useFormState:lp,useActionState:lp,useOptimistic:function(e,i){var r=ce();return Ht!==null?Jf(r,Ht,e,i):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:ru,useCacheRefresh:wp};Mp.useEffectEvent=hp;function yu(e,i,r,c){i=e.memoizedState,r=r(c,i),r=r==null?i:b({},i,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vu={enqueueSetState:function(e,i,r){e=e._reactInternals;var c=sn(),p=Ci(c);p.payload=i,r!=null&&(p.callback=r),i=Ti(e,p,c),i!==null&&(Ve(i,e,c),Qa(i,e,c))},enqueueReplaceState:function(e,i,r){e=e._reactInternals;var c=sn(),p=Ci(c);p.tag=1,p.payload=i,r!=null&&(p.callback=r),i=Ti(e,p,c),i!==null&&(Ve(i,e,c),Qa(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var r=sn(),c=Ci(r);c.tag=2,i!=null&&(c.callback=i),i=Ti(e,c,r),i!==null&&(Ve(i,e,r),Qa(i,e,r))}};function Rp(e,i,r,c,p,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,v):i.prototype&&i.prototype.isPureReactComponent?!Ga(r,c)||!Ga(p,m):!0}function Dp(e,i,r,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==e&&vu.enqueueReplaceState(i,i.state,null)}function ds(e,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(e=e.defaultProps){r===i&&(r=b({},r));for(var p in e)r[p]===void 0&&(r[p]=e[p])}return r}function Lp(e){bo(e)}function Np(e){console.error(e)}function Op(e){bo(e)}function Uo(e,i){try{var r=e.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function kp(e,i,r){try{var c=e.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Au(e,i,r){return r=Ci(r),r.tag=3,r.payload={element:null},r.callback=function(){Uo(e,i)},r}function Bp(e){return e=Ci(e),e.tag=3,e}function Pp(e,i,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var m=c.value;e.payload=function(){return p(m)},e.callback=function(){kp(i,r,c)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){kp(i,r,c),typeof p!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function lv(e,i,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&qs(i,r,p,!0),r=Je.current,r!==null){switch(r.tag){case 31:case 13:return mn===null?Zo():r.alternate===null&&oe===0&&(oe=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===To?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),qu(e,c,p)),!1;case 22:return r.flags|=65536,c===To?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),qu(e,c,p)),!1}throw Error(s(435,r.tag))}return qu(e,c,p),Zo(),!1}if(Dt)return i=Je.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,c!==Fc&&(e=Error(s(422),{cause:c}),Xa(dn(e,r)))):(c!==Fc&&(i=Error(s(423),{cause:c}),Xa(dn(i,r))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=dn(c,r),p=Au(e.stateNode,c,p),Wc(e,p),oe!==4&&(oe=2)),!1;var m=Error(s(520),{cause:c});if(m=dn(m,r),hr===null?hr=[m]:hr.push(m),oe!==4&&(oe=2),i===null)return!0;c=dn(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,e=p&-p,r.lanes|=e,e=Au(r.stateNode,c,e),Wc(r,e),!1;case 1:if(i=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Oi===null||!Oi.has(m))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Bp(p),Pp(p,e,r,c),Wc(r,p),!1}r=r.return}while(r!==null);return!1}var Su=Error(s(461)),pe=!1;function Ce(e,i,r,c){i.child=e===null?Uf(i,null,r,c):us(i,e.child,r,c)}function jp(e,i,r,c,p){r=r.render;var m=i.ref;if("ref"in c){var v={};for(var _ in c)_!=="ref"&&(v[_]=c[_])}else v=c;return rs(i),c=nu(e,i,r,v,m,p),_=iu(),e!==null&&!pe?(su(e,i,p),ti(e,i,p)):(Dt&&_&&jc(i),i.flags|=1,Ce(e,i,c,p),i.child)}function zp(e,i,r,c,p){if(e===null){var m=r.type;return typeof m=="function"&&!kc(m)&&m.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=m,Fp(e,i,m,c,p)):(e=So(r.type,null,c,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!Ru(e,p)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:Ga,r(v,c)&&e.ref===i.ref)return ti(e,i,p)}return i.flags|=1,e=$n(m,c),e.ref=i.ref,e.return=i,i.child=e}function Fp(e,i,r,c,p){if(e!==null){var m=e.memoizedProps;if(Ga(m,c)&&e.ref===i.ref)if(pe=!1,i.pendingProps=c=m,Ru(e,p))(e.flags&131072)!==0&&(pe=!0);else return i.lanes=e.lanes,ti(e,i,p)}return xu(e,i,r,c,p)}function Up(e,i,r,c){var p=c.children,m=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,e!==null){for(c=i.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~m}else c=0,i.child=null;return Hp(e,i,m,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&_o(i,m!==null?m.cachePool:null),m!==null?Gf(i,m):Zc(),Vf(i);else return c=i.lanes=536870912,Hp(e,i,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(_o(i,m.cachePool),Gf(i,m),Ri(),i.memoizedState=null):(e!==null&&_o(i,null),Zc(),Ri());return Ce(e,i,p,r),i.child}function sr(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Hp(e,i,r,c,p){var m=Xc();return m=m===null?null:{parent:de._currentValue,pool:m},i.memoizedState={baseLanes:r,cachePool:m},e!==null&&_o(i,null),Zc(),Vf(i),e!==null&&qs(e,i,c,!0),i.childLanes=p,null}function Ho(e,i){return i=Go({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Ip(e,i,r){return us(i,e.child,null,r),e=Ho(i,i.pendingProps),e.flags|=2,tn(i),i.memoizedState=null,e}function cv(e,i,r){var c=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Dt){if(c.mode==="hidden")return e=Ho(i,c),i.lanes=536870912,sr(null,e);if(tu(i),(e=Kt)?(e=tm(e,gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Si!==null?{id:Ln,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},r=_f(e),r.return=i,i.child=r,Ee=i,Kt=null)):e=null,e===null)throw wi(i);return i.lanes=536870912,null}return Ho(i,c)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(tu(i),p)if(i.flags&256)i.flags&=-257,i=Ip(e,i,r);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(pe||qs(e,i,r,!1),p=(r&e.childLanes)!==0,pe||p){if(c=qt,c!==null&&(v=Ld(c,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,ns(e,v),Ve(c,e,v),Su;Zo(),i=Ip(e,i,r)}else e=m.treeContext,Kt=bn(v.nextSibling),Ee=i,Dt=!0,xi=null,gn=!1,e!==null&&Mf(i,e),i=Ho(i,c),i.flags|=4096;return i}return e=$n(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Io(e,i){var r=i.ref;if(r===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(i.flags|=4194816)}}function xu(e,i,r,c,p){return rs(i),r=nu(e,i,r,c,void 0,p),c=iu(),e!==null&&!pe?(su(e,i,p),ti(e,i,p)):(Dt&&c&&jc(i),i.flags|=1,Ce(e,i,r,p),i.child)}function Gp(e,i,r,c,p,m){return rs(i),i.updateQueue=null,r=Xf(i,c,r,p),qf(e),c=iu(),e!==null&&!pe?(su(e,i,m),ti(e,i,m)):(Dt&&c&&jc(i),i.flags|=1,Ce(e,i,r,m),i.child)}function Vp(e,i,r,c,p){if(rs(i),i.stateNode===null){var m=Hs,v=r.contextType;typeof v=="object"&&v!==null&&(m=_e(v)),m=new r(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=vu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},$c(i),v=r.contextType,m.context=typeof v=="object"&&v!==null?_e(v):Hs,m.state=i.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(yu(i,r,v,c),m.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&vu.enqueueReplaceState(m,m.state,null),Ja(i,c,m,p),Za(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){m=i.stateNode;var _=i.memoizedProps,D=ds(r,_);m.props=D;var U=m.context,Y=r.contextType;v=Hs,typeof Y=="object"&&Y!==null&&(v=_e(Y));var K=r.getDerivedStateFromProps;Y=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||U!==v)&&Dp(i,m,c,v),_i=!1;var H=i.memoizedState;m.state=H,Ja(i,c,m,p),Za(),U=i.memoizedState,_||H!==U||_i?(typeof K=="function"&&(yu(i,r,K,c),U=i.memoizedState),(D=_i||Rp(i,r,D,c,H,U,v))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=U),m.props=c,m.state=U,m.context=v,c=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,Kc(e,i),v=i.memoizedProps,Y=ds(r,v),m.props=Y,K=i.pendingProps,H=m.context,U=r.contextType,D=Hs,typeof U=="object"&&U!==null&&(D=_e(U)),_=r.getDerivedStateFromProps,(U=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==K||H!==D)&&Dp(i,m,c,D),_i=!1,H=i.memoizedState,m.state=H,Ja(i,c,m,p),Za();var V=i.memoizedState;v!==K||H!==V||_i||e!==null&&e.dependencies!==null&&wo(e.dependencies)?(typeof _=="function"&&(yu(i,r,_,c),V=i.memoizedState),(Y=_i||Rp(i,r,Y,c,H,V,D)||e!==null&&e.dependencies!==null&&wo(e.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,V,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,V,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=V),m.props=c,m.state=V,m.context=D,c=Y):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),c=!1)}return m=c,Io(e,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&c?(i.child=us(i,e.child,null,p),i.child=us(i,null,r,p)):Ce(e,i,r,p),i.memoizedState=m.state,e=i.child):e=ti(e,i,p),e}function qp(e,i,r,c){return ss(),i.flags|=256,Ce(e,i,r,c),i.child}var wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eu(e){return{baseLanes:e,cachePool:kf()}}function _u(e,i,r){return e=e!==null?e.childLanes&~r:0,i&&(e|=nn),e}function Xp(e,i,r){var c=i.pendingProps,p=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(le.current&2)!==0),v&&(p=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Dt){if(p?Mi(i):Ri(),(e=Kt)?(e=tm(e,gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Si!==null?{id:Ln,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},r=_f(e),r.return=i,i.child=r,Ee=i,Kt=null)):e=null,e===null)throw wi(i);return oh(e)?i.lanes=32:i.lanes=536870912,null}var _=c.children;return c=c.fallback,p?(Ri(),p=i.mode,_=Go({mode:"hidden",children:_},p),c=is(c,p,r,null),_.return=i,c.return=i,_.sibling=c,i.child=_,c=i.child,c.memoizedState=Eu(r),c.childLanes=_u(e,v,r),i.memoizedState=wu,sr(null,c)):(Mi(i),Cu(i,_))}var D=e.memoizedState;if(D!==null&&(_=D.dehydrated,_!==null)){if(m)i.flags&256?(Mi(i),i.flags&=-257,i=Tu(e,i,r)):i.memoizedState!==null?(Ri(),i.child=e.child,i.flags|=128,i=null):(Ri(),_=c.fallback,p=i.mode,c=Go({mode:"visible",children:c.children},p),_=is(_,p,r,null),_.flags|=2,c.return=i,_.return=i,c.sibling=_,i.child=c,us(i,e.child,null,r),c=i.child,c.memoizedState=Eu(r),c.childLanes=_u(e,v,r),i.memoizedState=wu,i=sr(null,c));else if(Mi(i),oh(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var U=v.dgst;v=U,c=Error(s(419)),c.stack="",c.digest=v,Xa({value:c,source:null,stack:null}),i=Tu(e,i,r)}else if(pe||qs(e,i,r,!1),v=(r&e.childLanes)!==0,pe||v){if(v=qt,v!==null&&(c=Ld(v,r),c!==0&&c!==D.retryLane))throw D.retryLane=c,ns(e,c),Ve(v,e,c),Su;rh(_)||Zo(),i=Tu(e,i,r)}else rh(_)?(i.flags|=192,i.child=e.child,i=null):(e=D.treeContext,Kt=bn(_.nextSibling),Ee=i,Dt=!0,xi=null,gn=!1,e!==null&&Mf(i,e),i=Cu(i,c.children),i.flags|=4096);return i}return p?(Ri(),_=c.fallback,p=i.mode,D=e.child,U=D.sibling,c=$n(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,U!==null?_=$n(U,_):(_=is(_,p,r,null),_.flags|=2),_.return=i,c.return=i,c.sibling=_,i.child=c,sr(null,c),c=i.child,_=e.child.memoizedState,_===null?_=Eu(r):(p=_.cachePool,p!==null?(D=de._currentValue,p=p.parent!==D?{parent:D,pool:D}:p):p=kf(),_={baseLanes:_.baseLanes|r,cachePool:p}),c.memoizedState=_,c.childLanes=_u(e,v,r),i.memoizedState=wu,sr(e.child,c)):(Mi(i),r=e.child,e=r.sibling,r=$n(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=r,i.memoizedState=null,r)}function Cu(e,i){return i=Go({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Go(e,i){return e=Ze(22,e,null,i),e.lanes=0,e}function Tu(e,i,r){return us(i,e.child,null,r),e=Cu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Yp(e,i,r){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Ic(e.return,i,r)}function Mu(e,i,r,c,p,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=p,v.treeForkCount=m)}function $p(e,i,r){var c=i.pendingProps,p=c.revealOrder,m=c.tail;c=c.children;var v=le.current,_=(v&2)!==0;if(_?(v=v&1|2,i.flags|=128):v&=1,W(le,v),Ce(e,i,c,r),c=Dt?qa:0,!_&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yp(e,r,i);else if(e.tag===19)Yp(e,r,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(r=i.child,p=null;r!==null;)e=r.alternate,e!==null&&Lo(e)===null&&(p=r),r=r.sibling;r=p,r===null?(p=i.child,i.child=null):(p=r.sibling,r.sibling=null),Mu(i,!1,p,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Lo(e)===null){i.child=p;break}e=p.sibling,p.sibling=r,r=p,p=e}Mu(i,!0,r,null,m,c);break;case"together":Mu(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ti(e,i,r){if(e!==null&&(i.dependencies=e.dependencies),Ni|=i.lanes,(r&i.childLanes)===0)if(e!==null){if(qs(e,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,r=$n(e,e.pendingProps),i.child=r,r.return=i;e.sibling!==null;)e=e.sibling,r=r.sibling=$n(e,e.pendingProps),r.return=i;r.sibling=null}return i.child}function Ru(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&wo(e)))}function uv(e,i,r){switch(i.tag){case 3:$t(i,i.stateNode.containerInfo),Ei(i,de,e.memoizedState.cache),ss();break;case 27:case 5:jt(i);break;case 4:$t(i,i.stateNode.containerInfo);break;case 10:Ei(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,tu(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Mi(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Xp(e,i,r):(Mi(i),e=ti(e,i,r),e!==null?e.sibling:null);Mi(i);break;case 19:var p=(e.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(qs(e,i,r,!1),c=(r&i.childLanes)!==0),p){if(c)return $p(e,i,r);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(le,le.current),c)break;return null;case 22:return i.lanes=0,Up(e,i,r,i.pendingProps);case 24:Ei(i,de,e.memoizedState.cache)}return ti(e,i,r)}function Kp(e,i,r){if(e!==null)if(e.memoizedProps!==i.pendingProps)pe=!0;else{if(!Ru(e,r)&&(i.flags&128)===0)return pe=!1,uv(e,i,r);pe=(e.flags&131072)!==0}else pe=!1,Dt&&(i.flags&1048576)!==0&&Tf(i,qa,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=ls(i.elementType),i.type=e,typeof e=="function")kc(e)?(c=ds(e,c),i.tag=1,i=Vp(null,i,e,c,r)):(i.tag=0,i=xu(null,i,e,c,r));else{if(e!=null){var p=e.$$typeof;if(p===O){i.tag=11,i=jp(null,i,e,c,r);break t}else if(p===P){i.tag=14,i=zp(null,i,e,c,r);break t}}throw i=at(e)||e,Error(s(306,i,""))}}return i;case 0:return xu(e,i,i.type,i.pendingProps,r);case 1:return c=i.type,p=ds(c,i.pendingProps),Vp(e,i,c,p,r);case 3:t:{if($t(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;p=m.element,Kc(e,i),Ja(i,c,null,r);var v=i.memoizedState;if(c=v.cache,Ei(i,de,c),c!==m.cache&&Gc(i,[de],r,!0),Za(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=qp(e,i,c,r);break t}else if(c!==p){p=dn(Error(s(424)),i),Xa(p),i=qp(e,i,c,r);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Kt=bn(e.firstChild),Ee=i,Dt=!0,xi=null,gn=!0,r=Uf(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ss(),c===p){i=ti(e,i,r);break t}Ce(e,i,c,r)}i=i.child}return i;case 26:return Io(e,i),e===null?(r=rm(i.type,null,i.pendingProps,null))?i.memoizedState=r:Dt||(r=i.type,e=i.pendingProps,c=al(ft.current).createElement(r),c[we]=i,c[ze]=e,Te(c,r,e),ye(c),i.stateNode=c):i.memoizedState=rm(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return jt(i),e===null&&Dt&&(c=i.stateNode=im(i.type,i.pendingProps,ft.current),Ee=i,gn=!0,p=Kt,ji(i.type)?(lh=p,Kt=bn(c.firstChild)):Kt=p),Ce(e,i,i.pendingProps.children,r),Io(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Dt&&((p=c=Kt)&&(c=Uv(c,i.type,i.pendingProps,gn),c!==null?(i.stateNode=c,Ee=i,Kt=bn(c.firstChild),gn=!1,p=!0):p=!1),p||wi(i)),jt(i),p=i.type,m=i.pendingProps,v=e!==null?e.memoizedProps:null,c=m.children,ih(p,m)?c=null:v!==null&&ih(p,v)&&(i.flags|=32),i.memoizedState!==null&&(p=nu(e,i,ev,null,null,r),vr._currentValue=p),Io(e,i),Ce(e,i,c,r),i.child;case 6:return e===null&&Dt&&((e=r=Kt)&&(r=Hv(r,i.pendingProps,gn),r!==null?(i.stateNode=r,Ee=i,Kt=null,e=!0):e=!1),e||wi(i)),null;case 13:return Xp(e,i,r);case 4:return $t(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=us(i,null,c,r):Ce(e,i,c,r),i.child;case 11:return jp(e,i,i.type,i.pendingProps,r);case 7:return Ce(e,i,i.pendingProps,r),i.child;case 8:return Ce(e,i,i.pendingProps.children,r),i.child;case 12:return Ce(e,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,Ei(i,i.type,c.value),Ce(e,i,c.children,r),i.child;case 9:return p=i.type._context,c=i.pendingProps.children,rs(i),p=_e(p),c=c(p),i.flags|=1,Ce(e,i,c,r),i.child;case 14:return zp(e,i,i.type,i.pendingProps,r);case 15:return Fp(e,i,i.type,i.pendingProps,r);case 19:return $p(e,i,r);case 31:return cv(e,i,r);case 22:return Up(e,i,r,i.pendingProps);case 24:return rs(i),c=_e(de),e===null?(p=Xc(),p===null&&(p=qt,m=Vc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=r),p=m),i.memoizedState={parent:c,cache:p},$c(i),Ei(i,de,p)):((e.lanes&r)!==0&&(Kc(e,i),Ja(i,null,null,r),Za()),p=e.memoizedState,m=i.memoizedState,p.parent!==c?(p={parent:c,cache:c},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Ei(i,de,c)):(c=m.cache,Ei(i,de,c),c!==p.cache&&Gc(i,[de],r,!0))),Ce(e,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ei(e){e.flags|=4}function Du(e,i,r,c,p){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(xg())e.flags|=8192;else throw cs=To,Yc}else e.flags&=-16777217}function Wp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!hm(i))if(xg())e.flags|=8192;else throw cs=To,Yc}function Vo(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Md():536870912,e.lanes|=i,ia|=i)}function ar(e,i){if(!Dt)switch(e.tailMode){case"hidden":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Wt(e){var i=e.alternate!==null&&e.alternate.child===e.child,r=0,c=0;if(i)for(var p=e.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=r,i}function hv(e,i,r){var c=i.pendingProps;switch(zc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(i),null;case 1:return Wt(i),null;case 3:return r=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Qn(de),Et(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vs(i)?ei(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Uc())),Wt(i),null;case 26:var p=i.type,m=i.memoizedState;return e===null?(ei(i),m!==null?(Wt(i),Wp(i,m)):(Wt(i),Du(i,p,null,c,r))):m?m!==e.memoizedState?(ei(i),Wt(i),Wp(i,m)):(Wt(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&ei(i),Wt(i),Du(i,p,e,c,r)),null;case 27:if(je(i),r=ft.current,p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Wt(i),null}e=tt.current,Vs(i)?Rf(i):(e=im(p,c,r),i.stateNode=e,ei(i))}return Wt(i),null;case 5:if(je(i),p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Wt(i),null}if(m=tt.current,Vs(i))Rf(i);else{var v=al(ft.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(p,{is:c.is}):v.createElement(p)}}m[we]=i,m[ze]=c;t:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break t;for(;v.sibling===null;){if(v.return===null||v.return===i)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;t:switch(Te(m,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ei(i)}}return Wt(i),Du(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,r),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=ft.current,Vs(i)){if(e=i.stateNode,r=i.memoizedProps,c=null,p=Ee,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[we]=i,e=!!(e.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Xg(e.nodeValue,r)),e||wi(i,!0)}else e=al(e).createTextNode(c),e[we]=i,i.stateNode=e}return Wt(i),null;case 31:if(r=i.memoizedState,e===null||e.memoizedState!==null){if(c=Vs(i),r!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[we]=i}else ss(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Wt(i),e=!1}else r=Uc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return i.flags&256?(tn(i),i):(tn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Wt(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Vs(i),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[we]=i}else ss(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Wt(i),p=!1}else p=Uc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(tn(i),i):(tn(i),null)}return tn(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,e=e!==null&&e.memoizedState!==null,r&&(c=i.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==p&&(c.flags|=2048)),r!==e&&r&&(i.child.flags|=8192),Vo(i,i.updateQueue),Wt(i),null);case 4:return Et(),e===null&&Zu(i.stateNode.containerInfo),Wt(i),null;case 10:return Qn(i.type),Wt(i),null;case 19:if(q(le),c=i.memoizedState,c===null)return Wt(i),null;if(p=(i.flags&128)!==0,m=c.rendering,m===null)if(p)ar(c,!1);else{if(oe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=Lo(e),m!==null){for(i.flags|=128,ar(c,!1),e=m.updateQueue,i.updateQueue=e,Vo(i,e),i.subtreeFlags=0,e=r,r=i.child;r!==null;)Ef(r,e),r=r.sibling;return W(le,le.current&1|2),Dt&&Kn(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&Oe()>Ko&&(i.flags|=128,p=!0,ar(c,!1),i.lanes=4194304)}else{if(!p)if(e=Lo(m),e!==null){if(i.flags|=128,p=!0,e=e.updateQueue,i.updateQueue=e,Vo(i,e),ar(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Dt)return Wt(i),null}else 2*Oe()-c.renderingStartTime>Ko&&r!==536870912&&(i.flags|=128,p=!0,ar(c,!1),i.lanes=4194304);c.isBackwards?(m.sibling=i.child,i.child=m):(e=c.last,e!==null?e.sibling=m:i.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Oe(),e.sibling=null,r=le.current,W(le,p?r&1|2:r&1),Dt&&Kn(i,c.treeForkCount),e):(Wt(i),null);case 22:case 23:return tn(i),Jc(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(Wt(i),i.subtreeFlags&6&&(i.flags|=8192)):Wt(i),r=i.updateQueue,r!==null&&Vo(i,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),e!==null&&q(os),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Qn(de),Wt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function dv(e,i){switch(zc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Qn(de),Et(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return je(i),null;case 31:if(i.memoizedState!==null){if(tn(i),i.alternate===null)throw Error(s(340));ss()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(tn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ss()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return q(le),null;case 4:return Et(),null;case 10:return Qn(i.type),null;case 22:case 23:return tn(i),Jc(),e!==null&&q(os),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Qn(de),null;case 25:return null;default:return null}}function Qp(e,i){switch(zc(i),i.tag){case 3:Qn(de),Et();break;case 26:case 27:case 5:je(i);break;case 4:Et();break;case 31:i.memoizedState!==null&&tn(i);break;case 13:tn(i);break;case 19:q(le);break;case 10:Qn(i.type);break;case 22:case 23:tn(i),Jc(),e!==null&&q(os);break;case 24:Qn(de)}}function rr(e,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&e)===e){c=void 0;var m=r.create,v=r.inst;c=m(),v.destroy=c}r=r.next}while(r!==p)}}catch(_){Ft(i,i.return,_)}}function Di(e,i,r){try{var c=i.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var m=p.next;c=m;do{if((c.tag&e)===e){var v=c.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,p=i;var D=r,U=_;try{U()}catch(Y){Ft(p,D,Y)}}}c=c.next}while(c!==m)}}catch(Y){Ft(i,i.return,Y)}}function Zp(e){var i=e.updateQueue;if(i!==null){var r=e.stateNode;try{If(i,r)}catch(c){Ft(e,e.return,c)}}}function Jp(e,i,r){r.props=ds(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(c){Ft(e,i,c)}}function or(e,i){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof r=="function"?e.refCleanup=r(c):r.current=c}}catch(p){Ft(e,i,p)}}function On(e,i){var r=e.ref,c=e.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){Ft(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Ft(e,i,p)}else r.current=null}function tg(e){var i=e.type,r=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){Ft(e,e.return,p)}}function Lu(e,i,r){try{var c=e.stateNode;kv(c,e.type,r,i),c[ze]=i}catch(p){Ft(e,e.return,p)}}function eg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ji(e.type)||e.tag===4}function Nu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||eg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ji(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ou(e,i,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(e),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Xn));else if(c!==4&&(c===27&&ji(e.type)&&(r=e.stateNode,i=null),e=e.child,e!==null))for(Ou(e,i,r),e=e.sibling;e!==null;)Ou(e,i,r),e=e.sibling}function qo(e,i,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?r.insertBefore(e,i):r.appendChild(e);else if(c!==4&&(c===27&&ji(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(qo(e,i,r),e=e.sibling;e!==null;)qo(e,i,r),e=e.sibling}function ng(e){var i=e.stateNode,r=e.memoizedProps;try{for(var c=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Te(i,c,r),i[we]=e,i[ze]=r}catch(m){Ft(e,e.return,m)}}var ni=!1,ge=!1,ku=!1,ig=typeof WeakSet=="function"?WeakSet:Set,ve=null;function fv(e,i){if(e=e.containerInfo,eh=dl,e=gf(e),Tc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var v=0,_=-1,D=-1,U=0,Y=0,K=e,H=null;e:for(;;){for(var V;K!==r||p!==0&&K.nodeType!==3||(_=v+p),K!==m||c!==0&&K.nodeType!==3||(D=v+c),K.nodeType===3&&(v+=K.nodeValue.length),(V=K.firstChild)!==null;)H=K,K=V;for(;;){if(K===e)break e;if(H===r&&++U===p&&(_=v),H===m&&++Y===c&&(D=v),(V=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=V}r=_===-1||D===-1?null:{start:_,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(nh={focusedElem:e,selectionRange:r},dl=!1,ve=i;ve!==null;)if(i=ve,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,ve=e;else for(;ve!==null;){switch(i=ve,m=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)p=e[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=i,p=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var st=ds(r.type,p);e=c.getSnapshotBeforeUpdate(st,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(gt){Ft(r,r.return,gt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,r=e.nodeType,r===9)ah(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ah(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,ve=e;break}ve=i.return}}function sg(e,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:si(e,r),c&4&&rr(5,r);break;case 1:if(si(e,r),c&4)if(e=r.stateNode,i===null)try{e.componentDidMount()}catch(v){Ft(r,r.return,v)}else{var p=ds(r.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ft(r,r.return,v)}}c&64&&Zp(r),c&512&&or(r,r.return);break;case 3:if(si(e,r),c&64&&(e=r.updateQueue,e!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{If(e,i)}catch(v){Ft(r,r.return,v)}}break;case 27:i===null&&c&4&&ng(r);case 26:case 5:si(e,r),i===null&&c&4&&tg(r),c&512&&or(r,r.return);break;case 12:si(e,r);break;case 31:si(e,r),c&4&&og(e,r);break;case 13:si(e,r),c&4&&lg(e,r),c&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=xv.bind(null,r),Iv(e,r))));break;case 22:if(c=r.memoizedState!==null||ni,!c){i=i!==null&&i.memoizedState!==null||ge,p=ni;var m=ge;ni=c,(ge=i)&&!m?ai(e,r,(r.subtreeFlags&8772)!==0):si(e,r),ni=p,ge=m}break;case 30:break;default:si(e,r)}}function ag(e){var i=e.alternate;i!==null&&(e.alternate=null,ag(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&uc(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qt=null,Ue=!1;function ii(e,i,r){for(r=r.child;r!==null;)rg(e,i,r),r=r.sibling}function rg(e,i,r){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(La,r)}catch{}switch(r.tag){case 26:ge||On(r,i),ii(e,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ge||On(r,i);var c=Qt,p=Ue;ji(r.type)&&(Qt=r.stateNode,Ue=!1),ii(e,i,r),mr(r.stateNode),Qt=c,Ue=p;break;case 5:ge||On(r,i);case 6:if(c=Qt,p=Ue,Qt=null,ii(e,i,r),Qt=c,Ue=p,Qt!==null)if(Ue)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(r.stateNode)}catch(m){Ft(r,i,m)}else try{Qt.removeChild(r.stateNode)}catch(m){Ft(r,i,m)}break;case 18:Qt!==null&&(Ue?(e=Qt,Zg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),ha(e)):Zg(Qt,r.stateNode));break;case 4:c=Qt,p=Ue,Qt=r.stateNode.containerInfo,Ue=!0,ii(e,i,r),Qt=c,Ue=p;break;case 0:case 11:case 14:case 15:Di(2,r,i),ge||Di(4,r,i),ii(e,i,r);break;case 1:ge||(On(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Jp(r,i,c)),ii(e,i,r);break;case 21:ii(e,i,r);break;case 22:ge=(c=ge)||r.memoizedState!==null,ii(e,i,r),ge=c;break;default:ii(e,i,r)}}function og(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ha(e)}catch(r){Ft(i,i.return,r)}}}function lg(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ha(e)}catch(r){Ft(i,i.return,r)}}function pv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new ig),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new ig),i;default:throw Error(s(435,e.tag))}}function Xo(e,i){var r=pv(e);i.forEach(function(c){if(!r.has(c)){r.add(c);var p=wv.bind(null,e,c);c.then(p,p)}})}function He(e,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],m=e,v=i,_=v;t:for(;_!==null;){switch(_.tag){case 27:if(ji(_.type)){Qt=_.stateNode,Ue=!1;break t}break;case 5:Qt=_.stateNode,Ue=!1;break t;case 3:case 4:Qt=_.stateNode.containerInfo,Ue=!0;break t}_=_.return}if(Qt===null)throw Error(s(160));rg(m,v,p),Qt=null,Ue=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)cg(i,e),i=i.sibling}var _n=null;function cg(e,i){var r=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:He(i,e),Ie(e),c&4&&(Di(3,e,e.return),rr(3,e),Di(5,e,e.return));break;case 1:He(i,e),Ie(e),c&512&&(ge||r===null||On(r,r.return)),c&64&&ni&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=_n;if(He(i,e),Ie(e),c&512&&(ge||r===null||On(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=e.memoizedState,r===null)if(c===null)if(e.stateNode===null){t:{c=e.type,r=e.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":m=p.getElementsByTagName("title")[0],(!m||m[ka]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(c),p.head.insertBefore(m,p.querySelector("head > title"))),Te(m,c,r),m[we]=e,ye(m),c=m;break t;case"link":var v=cm("link","href",p).get(c+(r.href||""));if(v){for(var _=0;_<v.length;_++)if(m=v[_],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(_,1);break e}}m=p.createElement(c),Te(m,c,r),p.head.appendChild(m);break;case"meta":if(v=cm("meta","content",p).get(c+(r.content||""))){for(_=0;_<v.length;_++)if(m=v[_],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(_,1);break e}}m=p.createElement(c),Te(m,c,r),p.head.appendChild(m);break;default:throw Error(s(468,c))}m[we]=e,ye(m),c=m}e.stateNode=c}else um(p,e.type,e.stateNode);else e.stateNode=lm(p,c,e.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?um(p,e.type,e.stateNode):lm(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Lu(e,e.memoizedProps,r.memoizedProps)}break;case 27:He(i,e),Ie(e),c&512&&(ge||r===null||On(r,r.return)),r!==null&&c&4&&Lu(e,e.memoizedProps,r.memoizedProps);break;case 5:if(He(i,e),Ie(e),c&512&&(ge||r===null||On(r,r.return)),e.flags&32){p=e.stateNode;try{ks(p,"")}catch(st){Ft(e,e.return,st)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,Lu(e,p,r!==null?r.memoizedProps:p)),c&1024&&(ku=!0);break;case 6:if(He(i,e),Ie(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,r=e.stateNode;try{r.nodeValue=c}catch(st){Ft(e,e.return,st)}}break;case 3:if(ll=null,p=_n,_n=rl(i.containerInfo),He(i,e),_n=p,Ie(e),c&4&&r!==null&&r.memoizedState.isDehydrated)try{ha(i.containerInfo)}catch(st){Ft(e,e.return,st)}ku&&(ku=!1,ug(e));break;case 4:c=_n,_n=rl(e.stateNode.containerInfo),He(i,e),Ie(e),_n=c;break;case 12:He(i,e),Ie(e);break;case 31:He(i,e),Ie(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Xo(e,c)));break;case 13:He(i,e),Ie(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&($o=Oe()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Xo(e,c)));break;case 22:p=e.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,U=ni,Y=ge;if(ni=U||p,ge=Y||D,He(i,e),ge=Y,ni=U,Ie(e),c&8192)t:for(i=e.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(r===null||D||ni||ge||fs(e)),r=null,i=e;;){if(i.tag===5||i.tag===26){if(r===null){D=r=i;try{if(m=D.stateNode,p)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=D.stateNode;var K=D.memoizedProps.style,H=K!=null&&K.hasOwnProperty("display")?K.display:null;_.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(st){Ft(D,D.return,st)}}}else if(i.tag===6){if(r===null){D=i;try{D.stateNode.nodeValue=p?"":D.memoizedProps}catch(st){Ft(D,D.return,st)}}}else if(i.tag===18){if(r===null){D=i;try{var V=D.stateNode;p?Jg(V,!0):Jg(D.stateNode,!1)}catch(st){Ft(D,D.return,st)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Xo(e,r))));break;case 19:He(i,e),Ie(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Xo(e,c)));break;case 30:break;case 21:break;default:He(i,e),Ie(e)}}function Ie(e){var i=e.flags;if(i&2){try{for(var r,c=e.return;c!==null;){if(eg(c)){r=c;break}c=c.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,m=Nu(e);qo(e,m,p);break;case 5:var v=r.stateNode;r.flags&32&&(ks(v,""),r.flags&=-33);var _=Nu(e);qo(e,_,v);break;case 3:case 4:var D=r.stateNode.containerInfo,U=Nu(e);Ou(e,U,D);break;default:throw Error(s(161))}}catch(Y){Ft(e,e.return,Y)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function ug(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;ug(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function si(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)sg(e,i.alternate,i),i=i.sibling}function fs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Di(4,i,i.return),fs(i);break;case 1:On(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Jp(i,i.return,r),fs(i);break;case 27:mr(i.stateNode);case 26:case 5:On(i,i.return),fs(i);break;case 22:i.memoizedState===null&&fs(i);break;case 30:fs(i);break;default:fs(i)}e=e.sibling}}function ai(e,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,p=e,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:ai(p,m,r),rr(4,m);break;case 1:if(ai(p,m,r),c=m,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){Ft(c,c.return,U)}if(c=m,p=c.updateQueue,p!==null){var _=c.stateNode;try{var D=p.shared.hiddenCallbacks;if(D!==null)for(p.shared.hiddenCallbacks=null,p=0;p<D.length;p++)Hf(D[p],_)}catch(U){Ft(c,c.return,U)}}r&&v&64&&Zp(m),or(m,m.return);break;case 27:ng(m);case 26:case 5:ai(p,m,r),r&&c===null&&v&4&&tg(m),or(m,m.return);break;case 12:ai(p,m,r);break;case 31:ai(p,m,r),r&&v&4&&og(p,m);break;case 13:ai(p,m,r),r&&v&4&&lg(p,m);break;case 22:m.memoizedState===null&&ai(p,m,r),or(m,m.return);break;case 30:break;default:ai(p,m,r)}i=i.sibling}}function Bu(e,i){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ya(r))}function Pu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ya(e))}function Cn(e,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hg(e,i,r,c),i=i.sibling}function hg(e,i,r,c){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Cn(e,i,r,c),p&2048&&rr(9,i);break;case 1:Cn(e,i,r,c);break;case 3:Cn(e,i,r,c),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ya(e)));break;case 12:if(p&2048){Cn(e,i,r,c),e=i.stateNode;try{var m=i.memoizedProps,v=m.id,_=m.onPostCommit;typeof _=="function"&&_(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){Ft(i,i.return,D)}}else Cn(e,i,r,c);break;case 31:Cn(e,i,r,c);break;case 13:Cn(e,i,r,c);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?Cn(e,i,r,c):lr(e,i):m._visibility&2?Cn(e,i,r,c):(m._visibility|=2,ta(e,i,r,c,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Bu(v,i);break;case 24:Cn(e,i,r,c),p&2048&&Pu(i.alternate,i);break;default:Cn(e,i,r,c)}}function ta(e,i,r,c,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=e,v=i,_=r,D=c,U=v.flags;switch(v.tag){case 0:case 11:case 15:ta(m,v,_,D,p),rr(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?ta(m,v,_,D,p):lr(m,v):(Y._visibility|=2,ta(m,v,_,D,p)),p&&U&2048&&Bu(v.alternate,v);break;case 24:ta(m,v,_,D,p),p&&U&2048&&Pu(v.alternate,v);break;default:ta(m,v,_,D,p)}i=i.sibling}}function lr(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=e,c=i,p=c.flags;switch(c.tag){case 22:lr(r,c),p&2048&&Bu(c.alternate,c);break;case 24:lr(r,c),p&2048&&Pu(c.alternate,c);break;default:lr(r,c)}i=i.sibling}}var cr=8192;function ea(e,i,r){if(e.subtreeFlags&cr)for(e=e.child;e!==null;)dg(e,i,r),e=e.sibling}function dg(e,i,r){switch(e.tag){case 26:ea(e,i,r),e.flags&cr&&e.memoizedState!==null&&t1(r,_n,e.memoizedState,e.memoizedProps);break;case 5:ea(e,i,r);break;case 3:case 4:var c=_n;_n=rl(e.stateNode.containerInfo),ea(e,i,r),_n=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=cr,cr=16777216,ea(e,i,r),cr=c):ea(e,i,r));break;default:ea(e,i,r)}}function fg(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function ur(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];ve=c,gg(c,e)}fg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pg(e),e=e.sibling}function pg(e){switch(e.tag){case 0:case 11:case 15:ur(e),e.flags&2048&&Di(9,e,e.return);break;case 3:ur(e);break;case 12:ur(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Yo(e)):ur(e);break;default:ur(e)}}function Yo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];ve=c,gg(c,e)}fg(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Di(8,i,i.return),Yo(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Yo(i));break;default:Yo(i)}e=e.sibling}}function gg(e,i){for(;ve!==null;){var r=ve;switch(r.tag){case 0:case 11:case 15:Di(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ya(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,ve=c;else t:for(r=e;ve!==null;){c=ve;var p=c.sibling,m=c.return;if(ag(c),c===r){ve=null;break t}if(p!==null){p.return=m,ve=p;break t}ve=m}}}var gv={getCacheForType:function(e){var i=_e(de),r=i.data.get(e);return r===void 0&&(r=e(),i.data.set(e,r)),r},cacheSignal:function(){return _e(de).controller.signal}},mv=typeof WeakMap=="function"?WeakMap:Map,Pt=0,qt=null,_t=null,Tt=0,zt=0,en=null,Li=!1,na=!1,ju=!1,ri=0,oe=0,Ni=0,ps=0,zu=0,nn=0,ia=0,hr=null,Ge=null,Fu=!1,$o=0,mg=0,Ko=1/0,Wo=null,Oi=null,be=0,ki=null,sa=null,oi=0,Uu=0,Hu=null,bg=null,dr=0,Iu=null;function sn(){return(Pt&2)!==0&&Tt!==0?Tt&-Tt:R.T!==null?$u():Nd()}function yg(){if(nn===0)if((Tt&536870912)===0||Dt){var e=io;io<<=1,(io&3932160)===0&&(io=262144),nn=e}else nn=536870912;return e=Je.current,e!==null&&(e.flags|=32),nn}function Ve(e,i,r){(e===qt&&(zt===2||zt===9)||e.cancelPendingCommit!==null)&&(aa(e,0),Bi(e,Tt,nn,!1)),Oa(e,r),((Pt&2)===0||e!==qt)&&(e===qt&&((Pt&2)===0&&(ps|=r),oe===4&&Bi(e,Tt,nn,!1)),kn(e))}function vg(e,i,r){if((Pt&6)!==0)throw Error(s(327));var c=!r&&(i&127)===0&&(i&e.expiredLanes)===0||Na(e,i),p=c?vv(e,i):Vu(e,i,!0),m=c;do{if(p===0){na&&!c&&Bi(e,i,0,!1);break}else{if(r=e.current.alternate,m&&!bv(r)){p=Vu(e,i,!1),m=!1;continue}if(p===2){if(m=i,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var _=e;p=hr;var D=_.current.memoizedState.isDehydrated;if(D&&(aa(_,v).flags|=256),v=Vu(_,v,!1),v!==2){if(ju&&!D){_.errorRecoveryDisabledLanes|=m,ps|=m,p=4;break t}m=Ge,Ge=p,m!==null&&(Ge===null?Ge=m:Ge.push.apply(Ge,m))}p=v}if(m=!1,p!==2)continue}}if(p===1){aa(e,0),Bi(e,i,0,!0);break}t:{switch(c=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Bi(c,i,nn,!Li);break t;case 2:Ge=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=$o+300-Oe(),10<p)){if(Bi(c,i,nn,!Li),ao(c,0,!0)!==0)break t;oi=i,c.timeoutHandle=Wg(Ag.bind(null,c,r,Ge,Wo,Fu,i,nn,ps,ia,Li,m,"Throttled",-0,0),p);break t}Ag(c,r,Ge,Wo,Fu,i,nn,ps,ia,Li,m,null,-0,0)}}break}while(!0);kn(e)}function Ag(e,i,r,c,p,m,v,_,D,U,Y,K,H,V){if(e.timeoutHandle=-1,K=i.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},dg(i,m,K);var st=(m&62914560)===m?$o-Oe():(m&4194048)===m?mg-Oe():0;if(st=e1(K,st),st!==null){oi=m,e.cancelPendingCommit=st(Mg.bind(null,e,i,m,r,c,p,v,_,D,Y,K,null,H,V)),Bi(e,m,v,!U);return}}Mg(e,i,m,r,c,p,v,_,D)}function bv(e){for(var i=e;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],m=p.getSnapshot;p=p.value;try{if(!Qe(m(),p))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bi(e,i,r,c){i&=~zu,i&=~ps,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var p=i;0<p;){var m=31-We(p),v=1<<m;c[m]=-1,p&=~v}r!==0&&Rd(e,r,i)}function Qo(){return(Pt&6)===0?(fr(0),!1):!0}function Gu(){if(_t!==null){if(zt===0)var e=_t.return;else e=_t,Wn=as=null,au(e),Ks=null,Ka=0,e=_t;for(;e!==null;)Qp(e.alternate,e),e=e.return;_t=null}}function aa(e,i){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,jv(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),oi=0,Gu(),qt=e,_t=r=$n(e.current,null),Tt=i,zt=0,en=null,Li=!1,na=Na(e,i),ju=!1,ia=nn=zu=ps=Ni=oe=0,Ge=hr=null,Fu=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var p=31-We(c),m=1<<p;i|=e[p],c&=~m}return ri=i,yo(),r}function Sg(e,i){St=null,R.H=ir,i===$s||i===Co?(i=jf(),zt=3):i===Yc?(i=jf(),zt=4):zt=i===Su?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,en=i,_t===null&&(oe=1,Uo(e,dn(i,e.current)))}function xg(){var e=Je.current;return e===null?!0:(Tt&4194048)===Tt?mn===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?e===mn:!1}function wg(){var e=R.H;return R.H=ir,e===null?ir:e}function Eg(){var e=R.A;return R.A=gv,e}function Zo(){oe=4,Li||(Tt&4194048)!==Tt&&Je.current!==null||(na=!0),(Ni&134217727)===0&&(ps&134217727)===0||qt===null||Bi(qt,Tt,nn,!1)}function Vu(e,i,r){var c=Pt;Pt|=2;var p=wg(),m=Eg();(qt!==e||Tt!==i)&&(Wo=null,aa(e,i)),i=!1;var v=oe;t:do try{if(zt!==0&&_t!==null){var _=_t,D=en;switch(zt){case 8:Gu(),v=6;break t;case 3:case 2:case 9:case 6:Je.current===null&&(i=!0);var U=zt;if(zt=0,en=null,ra(e,_,D,U),r&&na){v=0;break t}break;default:U=zt,zt=0,en=null,ra(e,_,D,U)}}yv(),v=oe;break}catch(Y){Sg(e,Y)}while(!0);return i&&e.shellSuspendCounter++,Wn=as=null,Pt=c,R.H=p,R.A=m,_t===null&&(qt=null,Tt=0,yo()),v}function yv(){for(;_t!==null;)_g(_t)}function vv(e,i){var r=Pt;Pt|=2;var c=wg(),p=Eg();qt!==e||Tt!==i?(Wo=null,Ko=Oe()+500,aa(e,i)):na=Na(e,i);t:do try{if(zt!==0&&_t!==null){i=_t;var m=en;e:switch(zt){case 1:zt=0,en=null,ra(e,i,m,1);break;case 2:case 9:if(Bf(m)){zt=0,en=null,Cg(i);break}i=function(){zt!==2&&zt!==9||qt!==e||(zt=7),kn(e)},m.then(i,i);break t;case 3:zt=7;break t;case 4:zt=5;break t;case 7:Bf(m)?(zt=0,en=null,Cg(i)):(zt=0,en=null,ra(e,i,m,7));break;case 5:var v=null;switch(_t.tag){case 26:v=_t.memoizedState;case 5:case 27:var _=_t;if(v?hm(v):_.stateNode.complete){zt=0,en=null;var D=_.sibling;if(D!==null)_t=D;else{var U=_.return;U!==null?(_t=U,Jo(U)):_t=null}break e}}zt=0,en=null,ra(e,i,m,5);break;case 6:zt=0,en=null,ra(e,i,m,6);break;case 8:Gu(),oe=6;break t;default:throw Error(s(462))}}Av();break}catch(Y){Sg(e,Y)}while(!0);return Wn=as=null,R.H=c,R.A=p,Pt=r,_t!==null?0:(qt=null,Tt=0,yo(),oe)}function Av(){for(;_t!==null&&!ic();)_g(_t)}function _g(e){var i=Kp(e.alternate,e,ri);e.memoizedProps=e.pendingProps,i===null?Jo(e):_t=i}function Cg(e){var i=e,r=i.alternate;switch(i.tag){case 15:case 0:i=Gp(r,i,i.pendingProps,i.type,void 0,Tt);break;case 11:i=Gp(r,i,i.pendingProps,i.type.render,i.ref,Tt);break;case 5:au(i);default:Qp(r,i),i=_t=Ef(i,ri),i=Kp(r,i,ri)}e.memoizedProps=e.pendingProps,i===null?Jo(e):_t=i}function ra(e,i,r,c){Wn=as=null,au(i),Ks=null,Ka=0;var p=i.return;try{if(lv(e,p,i,r,Tt)){oe=1,Uo(e,dn(r,e.current)),_t=null;return}}catch(m){if(p!==null)throw _t=p,m;oe=1,Uo(e,dn(r,e.current)),_t=null;return}i.flags&32768?(Dt||c===1?e=!0:na||(Tt&536870912)!==0?e=!1:(Li=e=!0,(c===2||c===9||c===3||c===6)&&(c=Je.current,c!==null&&c.tag===13&&(c.flags|=16384))),Tg(i,e)):Jo(i)}function Jo(e){var i=e;do{if((i.flags&32768)!==0){Tg(i,Li);return}e=i.return;var r=hv(i.alternate,i,ri);if(r!==null){_t=r;return}if(i=i.sibling,i!==null){_t=i;return}_t=i=e}while(i!==null);oe===0&&(oe=5)}function Tg(e,i){do{var r=dv(e.alternate,e);if(r!==null){r.flags&=32767,_t=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(e=e.sibling,e!==null)){_t=e;return}_t=e=r}while(e!==null);oe=6,_t=null}function Mg(e,i,r,c,p,m,v,_,D){e.cancelPendingCommit=null;do tl();while(be!==0);if((Pt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Nc,Jb(e,r,m,v,_,D),e===qt&&(_t=qt=null,Tt=0),sa=i,ki=e,oi=r,Uu=m,Hu=p,bg=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ev(wn,function(){return Og(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=R.T,R.T=null,p=G.p,G.p=2,v=Pt,Pt|=4;try{fv(e,i,r)}finally{Pt=v,G.p=p,R.T=c}}be=1,Rg(),Dg(),Lg()}}function Rg(){if(be===1){be=0;var e=ki,i=sa,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=R.T,R.T=null;var c=G.p;G.p=2;var p=Pt;Pt|=4;try{cg(i,e);var m=nh,v=gf(e.containerInfo),_=m.focusedElem,D=m.selectionRange;if(v!==_&&_&&_.ownerDocument&&pf(_.ownerDocument.documentElement,_)){if(D!==null&&Tc(_)){var U=D.start,Y=D.end;if(Y===void 0&&(Y=U),"selectionStart"in _)_.selectionStart=U,_.selectionEnd=Math.min(Y,_.value.length);else{var K=_.ownerDocument||document,H=K&&K.defaultView||window;if(H.getSelection){var V=H.getSelection(),st=_.textContent.length,gt=Math.min(D.start,st),Gt=D.end===void 0?gt:Math.min(D.end,st);!V.extend&&gt>Gt&&(v=Gt,Gt=gt,gt=v);var z=ff(_,gt),k=ff(_,Gt);if(z&&k&&(V.rangeCount!==1||V.anchorNode!==z.node||V.anchorOffset!==z.offset||V.focusNode!==k.node||V.focusOffset!==k.offset)){var F=K.createRange();F.setStart(z.node,z.offset),V.removeAllRanges(),gt>Gt?(V.addRange(F),V.extend(k.node,k.offset)):(F.setEnd(k.node,k.offset),V.addRange(F))}}}}for(K=[],V=_;V=V.parentNode;)V.nodeType===1&&K.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<K.length;_++){var $=K[_];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}dl=!!eh,nh=eh=null}finally{Pt=p,G.p=c,R.T=r}}e.current=i,be=2}}function Dg(){if(be===2){be=0;var e=ki,i=sa,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=R.T,R.T=null;var c=G.p;G.p=2;var p=Pt;Pt|=4;try{sg(e,i.alternate,i)}finally{Pt=p,G.p=c,R.T=r}}be=3}}function Lg(){if(be===4||be===3){be=0,sc();var e=ki,i=sa,r=oi,c=bg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?be=5:(be=0,sa=ki=null,Ng(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(Oi=null),lc(r),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(La,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=R.T,p=G.p,G.p=2,R.T=null;try{for(var m=e.onRecoverableError,v=0;v<c.length;v++){var _=c[v];m(_.value,{componentStack:_.stack})}}finally{R.T=i,G.p=p}}(oi&3)!==0&&tl(),kn(e),p=e.pendingLanes,(r&261930)!==0&&(p&42)!==0?e===Iu?dr++:(dr=0,Iu=e):dr=0,fr(0)}}function Ng(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Ya(i)))}function tl(){return Rg(),Dg(),Lg(),Og()}function Og(){if(be!==5)return!1;var e=ki,i=Uu;Uu=0;var r=lc(oi),c=R.T,p=G.p;try{G.p=32>r?32:r,R.T=null,r=Hu,Hu=null;var m=ki,v=oi;if(be=0,sa=ki=null,oi=0,(Pt&6)!==0)throw Error(s(331));var _=Pt;if(Pt|=4,pg(m.current),hg(m,m.current,v,r),Pt=_,fr(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(La,m)}catch{}return!0}finally{G.p=p,R.T=c,Ng(e,i)}}function kg(e,i,r){i=dn(r,i),i=Au(e.stateNode,i,2),e=Ti(e,i,2),e!==null&&(Oa(e,2),kn(e))}function Ft(e,i,r){if(e.tag===3)kg(e,e,r);else for(;i!==null;){if(i.tag===3){kg(i,e,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Oi===null||!Oi.has(c))){e=dn(r,e),r=Bp(2),c=Ti(i,r,2),c!==null&&(Pp(r,c,i,e),Oa(c,2),kn(c));break}}i=i.return}}function qu(e,i,r){var c=e.pingCache;if(c===null){c=e.pingCache=new mv;var p=new Set;c.set(i,p)}else p=c.get(i),p===void 0&&(p=new Set,c.set(i,p));p.has(r)||(ju=!0,p.add(r),e=Sv.bind(null,e,i,r),i.then(e,e))}function Sv(e,i,r){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,qt===e&&(Tt&r)===r&&(oe===4||oe===3&&(Tt&62914560)===Tt&&300>Oe()-$o?(Pt&2)===0&&aa(e,0):zu|=r,ia===Tt&&(ia=0)),kn(e)}function Bg(e,i){i===0&&(i=Md()),e=ns(e,i),e!==null&&(Oa(e,i),kn(e))}function xv(e){var i=e.memoizedState,r=0;i!==null&&(r=i.retryLane),Bg(e,r)}function wv(e,i){var r=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Bg(e,r)}function Ev(e,i){return Da(e,i)}var el=null,oa=null,Xu=!1,nl=!1,Yu=!1,Pi=0;function kn(e){e!==oa&&e.next===null&&(oa===null?el=oa=e:oa=oa.next=e),nl=!0,Xu||(Xu=!0,Cv())}function fr(e,i){if(!Yu&&nl){Yu=!0;do for(var r=!1,c=el;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var m=0;else{var v=c.suspendedLanes,_=c.pingedLanes;m=(1<<31-We(42|e)+1)-1,m&=p&~(v&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Fg(c,m))}else m=Tt,m=ao(c,c===qt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Na(c,m)||(r=!0,Fg(c,m));c=c.next}while(r);Yu=!1}}function _v(){Pg()}function Pg(){nl=Xu=!1;var e=0;Pi!==0&&Pv()&&(e=Pi);for(var i=Oe(),r=null,c=el;c!==null;){var p=c.next,m=jg(c,i);m===0?(c.next=null,r===null?el=p:r.next=p,p===null&&(oa=r)):(r=c,(e!==0||(m&3)!==0)&&(nl=!0)),c=p}be!==0&&be!==5||fr(e),Pi!==0&&(Pi=0)}function jg(e,i){for(var r=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-We(m),_=1<<v,D=p[v];D===-1?((_&r)===0||(_&c)!==0)&&(p[v]=Zb(_,i)):D<=i&&(e.expiredLanes|=_),m&=~_}if(i=qt,r=Tt,r=ao(e,e===i?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,r===0||e===i&&(zt===2||zt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&bi(c),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Na(e,r)){if(i=r&-r,i===e.callbackPriority)return i;switch(c!==null&&bi(c),lc(r)){case 2:case 8:r=xn;break;case 32:r=wn;break;case 268435456:r=Ts;break;default:r=wn}return c=zg.bind(null,e),r=Da(r,c),e.callbackPriority=i,e.callbackNode=r,i}return c!==null&&c!==null&&bi(c),e.callbackPriority=2,e.callbackNode=null,2}function zg(e,i){if(be!==0&&be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(tl()&&e.callbackNode!==r)return null;var c=Tt;return c=ao(e,e===qt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(vg(e,c,i),jg(e,Oe()),e.callbackNode!=null&&e.callbackNode===r?zg.bind(null,e):null)}function Fg(e,i){if(tl())return null;vg(e,i,!0)}function Cv(){zv(function(){(Pt&6)!==0?Da(eo,_v):Pg()})}function $u(){if(Pi===0){var e=Xs;e===0&&(e=no,no<<=1,(no&261888)===0&&(no=256)),Pi=e}return Pi}function Ug(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:co(""+e)}function Hg(e,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,e.id&&r.setAttribute("form",e.id),i.parentNode.insertBefore(r,i),e=new FormData(e),r.parentNode.removeChild(r),e}function Tv(e,i,r,c,p){if(i==="submit"&&r&&r.stateNode===p){var m=Ug((p[ze]||null).action),v=c.submitter;v&&(i=(i=v[ze]||null)?Ug(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var _=new po("action","action",null,c,p);e.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Pi!==0){var D=v?Hg(p,v):new FormData(p);pu(r,{pending:!0,data:D,method:p.method,action:m},null,D)}}else typeof m=="function"&&(_.preventDefault(),D=v?Hg(p,v):new FormData(p),pu(r,{pending:!0,data:D,method:p.method,action:m},m,D))},currentTarget:p}]})}}for(var Ku=0;Ku<Lc.length;Ku++){var Wu=Lc[Ku],Mv=Wu.toLowerCase(),Rv=Wu[0].toUpperCase()+Wu.slice(1);En(Mv,"on"+Rv)}En(yf,"onAnimationEnd"),En(vf,"onAnimationIteration"),En(Af,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(qy,"onTransitionRun"),En(Xy,"onTransitionStart"),En(Yy,"onTransitionCancel"),En(Sf,"onTransitionEnd"),Ns("onMouseEnter",["mouseout","mouseover"]),Ns("onMouseLeave",["mouseout","mouseover"]),Ns("onPointerEnter",["pointerout","pointerover"]),Ns("onPointerLeave",["pointerout","pointerover"]),Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pr));function Ig(e,i){i=(i&4)!==0;for(var r=0;r<e.length;r++){var c=e[r],p=c.event;c=c.listeners;t:{var m=void 0;if(i)for(var v=c.length-1;0<=v;v--){var _=c[v],D=_.instance,U=_.currentTarget;if(_=_.listener,D!==m&&p.isPropagationStopped())break t;m=_,p.currentTarget=U;try{m(p)}catch(Y){bo(Y)}p.currentTarget=null,m=D}else for(v=0;v<c.length;v++){if(_=c[v],D=_.instance,U=_.currentTarget,_=_.listener,D!==m&&p.isPropagationStopped())break t;m=_,p.currentTarget=U;try{m(p)}catch(Y){bo(Y)}p.currentTarget=null,m=D}}}}function Ct(e,i){var r=i[cc];r===void 0&&(r=i[cc]=new Set);var c=e+"__bubble";r.has(c)||(Gg(i,e,2,!1),r.add(c))}function Qu(e,i,r){var c=0;i&&(c|=4),Gg(r,e,c,i)}var il="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[il]){e[il]=!0,Bd.forEach(function(r){r!=="selectionchange"&&(Dv.has(r)||Qu(r,!1,e),Qu(r,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[il]||(i[il]=!0,Qu("selectionchange",!1,i))}}function Gg(e,i,r,c){switch(ym(i)){case 2:var p=s1;break;case 8:p=a1;break;default:p=fh}r=p.bind(null,i,r,e),p=void 0,!yc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(i,r,{capture:!0,passive:p}):e.addEventListener(i,r,!0):p!==void 0?e.addEventListener(i,r,{passive:p}):e.addEventListener(i,r,!1)}function Ju(e,i,r,c,p){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var _=c.stateNode.containerInfo;if(_===p)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;_!==null;){if(v=Rs(_),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){c=m=v;continue t}_=_.parentNode}}c=c.return}Yd(function(){var U=m,Y=mc(r),K=[];t:{var H=xf.get(e);if(H!==void 0){var V=po,st=e;switch(e){case"keypress":if(ho(r)===0)break t;case"keydown":case"keyup":V=wy;break;case"focusin":st="focus",V=xc;break;case"focusout":st="blur",V=xc;break;case"beforeblur":case"afterblur":V=xc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=hy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Cy;break;case yf:case vf:case Af:V=py;break;case Sf:V=My;break;case"scroll":case"scrollend":V=cy;break;case"wheel":V=Dy;break;case"copy":case"cut":case"paste":V=my;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Zd;break;case"toggle":case"beforetoggle":V=Ny}var gt=(i&4)!==0,Gt=!gt&&(e==="scroll"||e==="scrollend"),z=gt?H!==null?H+"Capture":null:H;gt=[];for(var k=U,F;k!==null;){var $=k;if(F=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||F===null||z===null||($=Pa(k,z),$!=null&&gt.push(gr(k,$,F))),Gt)break;k=k.return}0<gt.length&&(H=new V(H,st,null,r,Y),K.push({event:H,listeners:gt}))}}if((i&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",H&&r!==gc&&(st=r.relatedTarget||r.fromElement)&&(Rs(st)||st[Ms]))break t;if((V||H)&&(H=Y.window===Y?Y:(H=Y.ownerDocument)?H.defaultView||H.parentWindow:window,V?(st=r.relatedTarget||r.toElement,V=U,st=st?Rs(st):null,st!==null&&(Gt=o(st),gt=st.tag,st!==Gt||gt!==5&&gt!==27&&gt!==6)&&(st=null)):(V=null,st=U),V!==st)){if(gt=Wd,$="onMouseLeave",z="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(gt=Zd,$="onPointerLeave",z="onPointerEnter",k="pointer"),Gt=V==null?H:Ba(V),F=st==null?H:Ba(st),H=new gt($,k+"leave",V,r,Y),H.target=Gt,H.relatedTarget=F,$=null,Rs(Y)===U&&(gt=new gt(z,k+"enter",st,r,Y),gt.target=F,gt.relatedTarget=Gt,$=gt),Gt=$,V&&st)e:{for(gt=Lv,z=V,k=st,F=0,$=z;$;$=gt($))F++;$=0;for(var ut=k;ut;ut=gt(ut))$++;for(;0<F-$;)z=gt(z),F--;for(;0<$-F;)k=gt(k),$--;for(;F--;){if(z===k||k!==null&&z===k.alternate){gt=z;break e}z=gt(z),k=gt(k)}gt=null}else gt=null;V!==null&&Vg(K,H,V,gt,!1),st!==null&&Gt!==null&&Vg(K,Gt,st,gt,!0)}}t:{if(H=U?Ba(U):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var kt=of;else if(af(H))if(lf)kt=Iy;else{kt=Uy;var rt=Fy}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?U&&pc(U.elementType)&&(kt=of):kt=Hy;if(kt&&(kt=kt(e,U))){rf(K,kt,r,Y);break t}rt&&rt(e,H,U),e==="focusout"&&U&&H.type==="number"&&U.memoizedProps.value!=null&&fc(H,"number",H.value)}switch(rt=U?Ba(U):window,e){case"focusin":(af(rt)||rt.contentEditable==="true")&&(zs=rt,Mc=U,Va=null);break;case"focusout":Va=Mc=zs=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,mf(K,r,Y);break;case"selectionchange":if(Vy)break;case"keydown":case"keyup":mf(K,r,Y)}var xt;if(Ec)t:{switch(e){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else js?nf(e,r)&&(Mt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Mt="onCompositionStart");Mt&&(Jd&&r.locale!=="ko"&&(js||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&js&&(xt=$d()):(Ai=Y,vc="value"in Ai?Ai.value:Ai.textContent,js=!0)),rt=sl(U,Mt),0<rt.length&&(Mt=new Qd(Mt,e,null,r,Y),K.push({event:Mt,listeners:rt}),xt?Mt.data=xt:(xt=sf(r),xt!==null&&(Mt.data=xt)))),(xt=ky?By(e,r):Py(e,r))&&(Mt=sl(U,"onBeforeInput"),0<Mt.length&&(rt=new Qd("onBeforeInput","beforeinput",null,r,Y),K.push({event:rt,listeners:Mt}),rt.data=xt)),Tv(K,e,U,r,Y)}Ig(K,i)})}function gr(e,i,r){return{instance:e,listener:i,currentTarget:r}}function sl(e,i){for(var r=i+"Capture",c=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Pa(e,r),p!=null&&c.unshift(gr(e,p,m)),p=Pa(e,i),p!=null&&c.push(gr(e,p,m))),e.tag===3)return c;e=e.return}return[]}function Lv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vg(e,i,r,c,p){for(var m=i._reactName,v=[];r!==null&&r!==c;){var _=r,D=_.alternate,U=_.stateNode;if(_=_.tag,D!==null&&D===c)break;_!==5&&_!==26&&_!==27||U===null||(D=U,p?(U=Pa(r,m),U!=null&&v.unshift(gr(r,U,D))):p||(U=Pa(r,m),U!=null&&v.push(gr(r,U,D)))),r=r.return}v.length!==0&&e.push({event:i,listeners:v})}var Nv=/\r\n?/g,Ov=/\u0000|\uFFFD/g;function qg(e){return(typeof e=="string"?e:""+e).replace(Nv,`
`).replace(Ov,"")}function Xg(e,i){return i=qg(i),qg(e)===i}function It(e,i,r,c,p,m){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||ks(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&ks(e,""+c);break;case"className":oo(e,"class",c);break;case"tabIndex":oo(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":oo(e,r,c);break;case"style":qd(e,c,m);break;case"data":if(i!=="object"){oo(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){e.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=co(""+c),e.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(i!=="input"&&It(e,i,"name",p.name,p,null),It(e,i,"formEncType",p.formEncType,p,null),It(e,i,"formMethod",p.formMethod,p,null),It(e,i,"formTarget",p.formTarget,p,null)):(It(e,i,"encType",p.encType,p,null),It(e,i,"method",p.method,p,null),It(e,i,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=co(""+c),e.setAttribute(r,c);break;case"onClick":c!=null&&(e.onclick=Xn);break;case"onScroll":c!=null&&Ct("scroll",e);break;case"onScrollEnd":c!=null&&Ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}r=co(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""+c):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":c===!0?e.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,c):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(r,c):e.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(r):e.setAttribute(r,c);break;case"popover":Ct("beforetoggle",e),Ct("toggle",e),ro(e,"popover",c);break;case"xlinkActuate":qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ro(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=oy.get(r)||r,ro(e,r,c))}}function th(e,i,r,c,p,m){switch(r){case"style":qd(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof c=="string"?ks(e,c):(typeof c=="number"||typeof c=="bigint")&&ks(e,""+c);break;case"onScroll":c!=null&&Ct("scroll",e);break;case"onScrollEnd":c!=null&&Ct("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pd.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),i=r.slice(2,p?r.length-7:void 0),m=e[ze]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(i,m,p),typeof c=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(i,c,p);break t}r in e?e[r]=c:c===!0?e.setAttribute(r,""):ro(e,r,c)}}}function Te(e,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",e),Ct("load",e);var c=!1,p=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(e,i,m,v,r,null)}}p&&It(e,i,"srcSet",r.srcSet,r,null),c&&It(e,i,"src",r.src,r,null);return;case"input":Ct("invalid",e);var _=m=v=p=null,D=null,U=null;for(c in r)if(r.hasOwnProperty(c)){var Y=r[c];if(Y!=null)switch(c){case"name":p=Y;break;case"type":v=Y;break;case"checked":D=Y;break;case"defaultChecked":U=Y;break;case"value":m=Y;break;case"defaultValue":_=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:It(e,i,c,Y,r,null)}}Hd(e,m,_,D,U,v,p,!1);return;case"select":Ct("invalid",e),c=v=m=null;for(p in r)if(r.hasOwnProperty(p)&&(_=r[p],_!=null))switch(p){case"value":m=_;break;case"defaultValue":v=_;break;case"multiple":c=_;default:It(e,i,p,_,r,null)}i=m,r=v,e.multiple=!!c,i!=null?Os(e,!!c,i,!1):r!=null&&Os(e,!!c,r,!0);return;case"textarea":Ct("invalid",e),m=p=c=null;for(v in r)if(r.hasOwnProperty(v)&&(_=r[v],_!=null))switch(v){case"value":c=_;break;case"defaultValue":p=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:It(e,i,v,_,r,null)}Gd(e,c,p,m);return;case"option":for(D in r)if(r.hasOwnProperty(D)&&(c=r[D],c!=null))switch(D){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:It(e,i,D,c,r,null)}return;case"dialog":Ct("beforetoggle",e),Ct("toggle",e),Ct("cancel",e),Ct("close",e);break;case"iframe":case"object":Ct("load",e);break;case"video":case"audio":for(c=0;c<pr.length;c++)Ct(pr[c],e);break;case"image":Ct("error",e),Ct("load",e);break;case"details":Ct("toggle",e);break;case"embed":case"source":case"link":Ct("error",e),Ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(c=r[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(e,i,U,c,r,null)}return;default:if(pc(i)){for(Y in r)r.hasOwnProperty(Y)&&(c=r[Y],c!==void 0&&th(e,i,Y,c,r,void 0));return}}for(_ in r)r.hasOwnProperty(_)&&(c=r[_],c!=null&&It(e,i,_,c,r,null))}function kv(e,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,v=null,_=null,D=null,U=null,Y=null;for(V in r){var K=r[V];if(r.hasOwnProperty(V)&&K!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":D=K;default:c.hasOwnProperty(V)||It(e,i,V,null,c,K)}}for(var H in c){var V=c[H];if(K=r[H],c.hasOwnProperty(H)&&(V!=null||K!=null))switch(H){case"type":m=V;break;case"name":p=V;break;case"checked":U=V;break;case"defaultChecked":Y=V;break;case"value":v=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,i));break;default:V!==K&&It(e,i,H,V,c,K)}}dc(e,v,_,D,U,Y,m,p);return;case"select":V=v=_=H=null;for(m in r)if(D=r[m],r.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":V=D;default:c.hasOwnProperty(m)||It(e,i,m,null,c,D)}for(p in c)if(m=c[p],D=r[p],c.hasOwnProperty(p)&&(m!=null||D!=null))switch(p){case"value":H=m;break;case"defaultValue":_=m;break;case"multiple":v=m;default:m!==D&&It(e,i,p,m,c,D)}i=_,r=v,c=V,H!=null?Os(e,!!r,H,!1):!!c!=!!r&&(i!=null?Os(e,!!r,i,!0):Os(e,!!r,r?[]:"",!1));return;case"textarea":V=H=null;for(_ in r)if(p=r[_],r.hasOwnProperty(_)&&p!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:It(e,i,_,null,c,p)}for(v in c)if(p=c[v],m=r[v],c.hasOwnProperty(v)&&(p!=null||m!=null))switch(v){case"value":H=p;break;case"defaultValue":V=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&It(e,i,v,p,c,m)}Id(e,H,V);return;case"option":for(var st in r)if(H=r[st],r.hasOwnProperty(st)&&H!=null&&!c.hasOwnProperty(st))switch(st){case"selected":e.selected=!1;break;default:It(e,i,st,null,c,H)}for(D in c)if(H=c[D],V=r[D],c.hasOwnProperty(D)&&H!==V&&(H!=null||V!=null))switch(D){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:It(e,i,D,H,c,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in r)H=r[gt],r.hasOwnProperty(gt)&&H!=null&&!c.hasOwnProperty(gt)&&It(e,i,gt,null,c,H);for(U in c)if(H=c[U],V=r[U],c.hasOwnProperty(U)&&H!==V&&(H!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:It(e,i,U,H,c,V)}return;default:if(pc(i)){for(var Gt in r)H=r[Gt],r.hasOwnProperty(Gt)&&H!==void 0&&!c.hasOwnProperty(Gt)&&th(e,i,Gt,void 0,c,H);for(Y in c)H=c[Y],V=r[Y],!c.hasOwnProperty(Y)||H===V||H===void 0&&V===void 0||th(e,i,Y,H,c,V);return}}for(var z in r)H=r[z],r.hasOwnProperty(z)&&H!=null&&!c.hasOwnProperty(z)&&It(e,i,z,null,c,H);for(K in c)H=c[K],V=r[K],!c.hasOwnProperty(K)||H===V||H==null&&V==null||It(e,i,K,H,c,V)}function Yg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var p=r[c],m=p.transferSize,v=p.initiatorType,_=p.duration;if(m&&_&&Yg(v)){for(v=0,_=p.responseEnd,c+=1;c<r.length;c++){var D=r[c],U=D.startTime;if(U>_)break;var Y=D.transferSize,K=D.initiatorType;Y&&Yg(K)&&(D=D.responseEnd,v+=Y*(D<_?1:(_-U)/(D-U)))}if(--c,i+=8*(m+v)/(p.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var eh=null,nh=null;function al(e){return e.nodeType===9?e:e.ownerDocument}function $g(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kg(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function ih(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sh=null;function Pv(){var e=window.event;return e&&e.type==="popstate"?e===sh?!1:(sh=e,!0):(sh=null,!1)}var Wg=typeof setTimeout=="function"?setTimeout:void 0,jv=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,zv=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(e){return Qg.resolve(null).then(e).catch(Fv)}:Wg;function Fv(e){setTimeout(function(){throw e})}function ji(e){return e==="head"}function Zg(e,i){var r=i,c=0;do{var p=r.nextSibling;if(e.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(c===0){e.removeChild(p),ha(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")mr(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,mr(r);for(var m=r.firstChild;m;){var v=m.nextSibling,_=m.nodeName;m[ka]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&mr(e.ownerDocument.body);r=p}while(r);ha(i)}function Jg(e,i){var r=e;e=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=c}while(r)}function ah(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ah(r),uc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Uv(e,i,r,c){for(;e.nodeType===1;){var p=r;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ka])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=bn(e.nextSibling),e===null)break}return null}function Hv(e,i,r){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=bn(e.nextSibling),e===null))return null;return e}function tm(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=bn(e.nextSibling),e===null))return null;return e}function rh(e){return e.data==="$?"||e.data==="$~"}function oh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Iv(e,i){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function bn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var lh=null;function em(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(i===0)return bn(e.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}e=e.nextSibling}return null}function nm(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return e;i--}else r!=="/$"&&r!=="/&"||i++}e=e.previousSibling}return null}function im(e,i,r){switch(i=al(r),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function mr(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);uc(e)}var yn=new Map,sm=new Set;function rl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var li=G.d;G.d={f:Gv,r:Vv,D:qv,C:Xv,L:Yv,m:$v,X:Wv,S:Kv,M:Qv};function Gv(){var e=li.f(),i=Qo();return e||i}function Vv(e){var i=Ds(e);i!==null&&i.tag===5&&i.type==="form"?Sp(i):li.r(e)}var la=typeof document>"u"?null:document;function am(e,i,r){var c=la;if(c&&typeof i=="string"&&i){var p=un(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),sm.has(p)||(sm.add(p),e={rel:e,crossOrigin:r,href:i},c.querySelector(p)===null&&(i=c.createElement("link"),Te(i,"link",e),ye(i),c.head.appendChild(i)))}}function qv(e){li.D(e),am("dns-prefetch",e,null)}function Xv(e,i){li.C(e,i),am("preconnect",e,i)}function Yv(e,i,r){li.L(e,i,r);var c=la;if(c&&e&&i){var p='link[rel="preload"][as="'+un(i)+'"]';i==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+un(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+un(r.imageSizes)+'"]')):p+='[href="'+un(e)+'"]';var m=p;switch(i){case"style":m=ca(e);break;case"script":m=ua(e)}yn.has(m)||(e=b({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:e,as:i},r),yn.set(m,e),c.querySelector(p)!==null||i==="style"&&c.querySelector(br(m))||i==="script"&&c.querySelector(yr(m))||(i=c.createElement("link"),Te(i,"link",e),ye(i),c.head.appendChild(i)))}}function $v(e,i){li.m(e,i);var r=la;if(r&&e){var c=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+un(c)+'"][href="'+un(e)+'"]',m=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ua(e)}if(!yn.has(m)&&(e=b({rel:"modulepreload",href:e},i),yn.set(m,e),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(yr(m)))return}c=r.createElement("link"),Te(c,"link",e),ye(c),r.head.appendChild(c)}}}function Kv(e,i,r){li.S(e,i,r);var c=la;if(c&&e){var p=Ls(c).hoistableStyles,m=ca(e);i=i||"default";var v=p.get(m);if(!v){var _={loading:0,preload:null};if(v=c.querySelector(br(m)))_.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":i},r),(r=yn.get(m))&&ch(e,r);var D=v=c.createElement("link");ye(D),Te(D,"link",e),D._p=new Promise(function(U,Y){D.onload=U,D.onerror=Y}),D.addEventListener("load",function(){_.loading|=1}),D.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ol(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:_},p.set(m,v)}}}function Wv(e,i){li.X(e,i);var r=la;if(r&&e){var c=Ls(r).hoistableScripts,p=ua(e),m=c.get(p);m||(m=r.querySelector(yr(p)),m||(e=b({src:e,async:!0},i),(i=yn.get(p))&&uh(e,i),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function Qv(e,i){li.M(e,i);var r=la;if(r&&e){var c=Ls(r).hoistableScripts,p=ua(e),m=c.get(p);m||(m=r.querySelector(yr(p)),m||(e=b({src:e,async:!0,type:"module"},i),(i=yn.get(p))&&uh(e,i),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function rm(e,i,r,c){var p=(p=ft.current)?rl(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=ca(r.href),r=Ls(p).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=ca(r.href);var m=Ls(p).hoistableStyles,v=m.get(e);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=p.querySelector(br(e)))&&!m._p&&(v.instance=m,v.state.loading=5),yn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},yn.set(e,r),m||Zv(p,e,r,v.state))),i&&c===null)throw Error(s(528,""));return v}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ua(r),r=Ls(p).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ca(e){return'href="'+un(e)+'"'}function br(e){return'link[rel="stylesheet"]['+e+"]"}function om(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Zv(e,i,r,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Te(i,"link",r),ye(i),e.head.appendChild(i))}function ua(e){return'[src="'+un(e)+'"]'}function yr(e){return"script[async]"+e}function lm(e,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+un(r.href)+'"]');if(c)return i.instance=c,ye(c),c;var p=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ye(c),Te(c,"style",p),ol(c,r.precedence,e),i.instance=c;case"stylesheet":p=ca(r.href);var m=e.querySelector(br(p));if(m)return i.state.loading|=4,i.instance=m,ye(m),m;c=om(r),(p=yn.get(p))&&ch(c,p),m=(e.ownerDocument||e).createElement("link"),ye(m);var v=m;return v._p=new Promise(function(_,D){v.onload=_,v.onerror=D}),Te(m,"link",c),i.state.loading|=4,ol(m,r.precedence,e),i.instance=m;case"script":return m=ua(r.src),(p=e.querySelector(yr(m)))?(i.instance=p,ye(p),p):(c=r,(p=yn.get(m))&&(c=b({},r),uh(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),ye(p),Te(p,"link",c),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,ol(c,r.precedence,e));return i.instance}function ol(e,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,m=p,v=0;v<c.length;v++){var _=c[v];if(_.dataset.precedence===i)m=_;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(e,i.firstChild))}function ch(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function uh(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ll=null;function cm(e,i,r){if(ll===null){var c=new Map,p=ll=new Map;p.set(r,c)}else p=ll,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(e))return c;for(c.set(e,null),r=r.getElementsByTagName(e),p=0;p<r.length;p++){var m=r[p];if(!(m[ka]||m[we]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=e+v;var _=c.get(v);_?_.push(m):c.set(v,[m])}}return c}function um(e,i,r){e=e.ownerDocument||e,e.head.insertBefore(r,i==="title"?e.querySelector("head > title"):null)}function Jv(e,i,r){if(r===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function hm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function t1(e,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=ca(c.href),m=i.querySelector(br(p));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=cl.bind(e),i.then(e,e)),r.state.loading|=4,r.instance=m,ye(m);return}m=i.ownerDocument||i,c=om(c),(p=yn.get(p))&&ch(c,p),m=m.createElement("link"),ye(m);var v=m;v._p=new Promise(function(_,D){v.onload=_,v.onerror=D}),Te(m,"link",c),r.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=cl.bind(e),i.addEventListener("load",r),i.addEventListener("error",r))}}var hh=0;function e1(e,i){return e.stylesheets&&e.count===0&&hl(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var c=setTimeout(function(){if(e.stylesheets&&hl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+i);0<e.imgBytes&&hh===0&&(hh=62500*Bv());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>hh?50:800)+i);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function cl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ul=null;function hl(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ul=new Map,i.forEach(n1,e),ul=null,cl.call(e))}function n1(e,i){if(!(i.state.loading&4)){var r=ul.get(e);if(r)var c=r.get(null);else{r=new Map,ul.set(e,r);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var v=p[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),c=v)}c&&r.set(null,c)}p=i.instance,v=p.getAttribute("data-precedence"),m=r.get(v)||c,m===c&&r.set(null,p),r.set(v,p),this.count++,c=cl.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var vr={$$typeof:M,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function i1(e,i,r,c,p,m,v,_,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.hiddenUpdates=rc(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function dm(e,i,r,c,p,m,v,_,D,U,Y,K){return e=new i1(e,i,r,v,D,U,Y,K,_),i=1,m===!0&&(i|=24),m=Ze(3,null,null,i),e.current=m,m.stateNode=e,i=Vc(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:i},$c(m),e}function fm(e){return e?(e=Hs,e):Hs}function pm(e,i,r,c,p,m){p=fm(p),c.context===null?c.context=p:c.pendingContext=p,c=Ci(i),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Ti(e,c,i),r!==null&&(Ve(r,e,i),Qa(r,e,i))}function gm(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<i?r:i}}function dh(e,i){gm(e,i),(e=e.alternate)&&gm(e,i)}function mm(e){if(e.tag===13||e.tag===31){var i=ns(e,67108864);i!==null&&Ve(i,e,67108864),dh(e,67108864)}}function bm(e){if(e.tag===13||e.tag===31){var i=sn();i=oc(i);var r=ns(e,i);r!==null&&Ve(r,e,i),dh(e,i)}}var dl=!0;function s1(e,i,r,c){var p=R.T;R.T=null;var m=G.p;try{G.p=2,fh(e,i,r,c)}finally{G.p=m,R.T=p}}function a1(e,i,r,c){var p=R.T;R.T=null;var m=G.p;try{G.p=8,fh(e,i,r,c)}finally{G.p=m,R.T=p}}function fh(e,i,r,c){if(dl){var p=ph(c);if(p===null)Ju(e,i,c,fl,r),vm(e,c);else if(o1(p,e,i,r,c))c.stopPropagation();else if(vm(e,c),i&4&&-1<r1.indexOf(e)){for(;p!==null;){var m=Ds(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Qi(m.pendingLanes);if(v!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var D=1<<31-We(v);_.entanglements[1]|=D,v&=~D}kn(m),(Pt&6)===0&&(Ko=Oe()+500,fr(0))}}break;case 31:case 13:_=ns(m,2),_!==null&&Ve(_,m,2),Qo(),dh(m,2)}if(m=ph(c),m===null&&Ju(e,i,c,fl,r),m===p)break;p=m}p!==null&&c.stopPropagation()}else Ju(e,i,c,null,r)}}function ph(e){return e=mc(e),gh(e)}var fl=null;function gh(e){if(fl=null,e=Rs(e),e!==null){var i=o(e);if(i===null)e=null;else{var r=i.tag;if(r===13){if(e=l(i),e!==null)return e;e=null}else if(r===31){if(e=h(i),e!==null)return e;e=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return fl=e,null}function ym(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ac()){case eo:return 2;case xn:return 8;case wn:case Dn:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var mh=!1,zi=null,Fi=null,Ui=null,Ar=new Map,Sr=new Map,Hi=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vm(e,i){switch(e){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Ar.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(i.pointerId)}}function xr(e,i,r,c,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[p]},i!==null&&(i=Ds(i),i!==null&&mm(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function o1(e,i,r,c,p){switch(i){case"focusin":return zi=xr(zi,e,i,r,c,p),!0;case"dragenter":return Fi=xr(Fi,e,i,r,c,p),!0;case"mouseover":return Ui=xr(Ui,e,i,r,c,p),!0;case"pointerover":var m=p.pointerId;return Ar.set(m,xr(Ar.get(m)||null,e,i,r,c,p)),!0;case"gotpointercapture":return m=p.pointerId,Sr.set(m,xr(Sr.get(m)||null,e,i,r,c,p)),!0}return!1}function Am(e){var i=Rs(e.target);if(i!==null){var r=o(i);if(r!==null){if(i=r.tag,i===13){if(i=l(r),i!==null){e.blockedOn=i,Od(e.priority,function(){bm(r)});return}}else if(i===31){if(i=h(r),i!==null){e.blockedOn=i,Od(e.priority,function(){bm(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pl(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var r=ph(e.nativeEvent);if(r===null){r=e.nativeEvent;var c=new r.constructor(r.type,r);gc=c,r.target.dispatchEvent(c),gc=null}else return i=Ds(r),i!==null&&mm(i),e.blockedOn=r,!1;i.shift()}return!0}function Sm(e,i,r){pl(e)&&r.delete(i)}function l1(){mh=!1,zi!==null&&pl(zi)&&(zi=null),Fi!==null&&pl(Fi)&&(Fi=null),Ui!==null&&pl(Ui)&&(Ui=null),Ar.forEach(Sm),Sr.forEach(Sm)}function gl(e,i){e.blockedOn===i&&(e.blockedOn=null,mh||(mh=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,l1)))}var ml=null;function xm(e){ml!==e&&(ml=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){ml===e&&(ml=null);for(var i=0;i<e.length;i+=3){var r=e[i],c=e[i+1],p=e[i+2];if(typeof c!="function"){if(gh(c||r)===null)continue;break}var m=Ds(r);m!==null&&(e.splice(i,3),i-=3,pu(m,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function ha(e){function i(D){return gl(D,e)}zi!==null&&gl(zi,e),Fi!==null&&gl(Fi,e),Ui!==null&&gl(Ui,e),Ar.forEach(i),Sr.forEach(i);for(var r=0;r<Hi.length;r++){var c=Hi[r];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Hi.length&&(r=Hi[0],r.blockedOn===null);)Am(r),r.blockedOn===null&&Hi.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],m=r[c+1],v=p[ze]||null;if(typeof m=="function")v||xm(r);else if(v){var _=null;if(m&&m.hasAttribute("formAction")){if(p=m,v=m[ze]||null)_=v.formAction;else if(gh(p)!==null)continue}else _=v.action;typeof _=="function"?r[c+1]=_:(r.splice(c,3),c-=3),xm(r)}}}function wm(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function bh(e){this._internalRoot=e}bl.prototype.render=bh.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,c=sn();pm(r,c,e,i,null,null)},bl.prototype.unmount=bh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;pm(e.current,2,null,e,null,null),Qo(),i[Ms]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var i=Nd();e={blockedOn:null,target:e,priority:i};for(var r=0;r<Hi.length&&i!==0&&i<Hi[r].priority;r++);Hi.splice(r,0,e),r===0&&Am(e)}};var Em=t.version;if(Em!=="19.2.0")throw Error(s(527,Em,"19.2.0"));G.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var c1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{La=yl.inject(c1),Ke=yl}catch{}}return Er.createRoot=function(e,i){if(!a(e))throw Error(s(299));var r=!1,c="",p=Lp,m=Np,v=Op;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=dm(e,1,!1,null,null,r,c,null,p,m,v,wm),e[Ms]=i.current,Zu(e),new bh(i)},Er.hydrateRoot=function(e,i,r){if(!a(e))throw Error(s(299));var c=!1,p="",m=Lp,v=Np,_=Op,D=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),i=dm(e,1,!0,i,r??null,c,p,D,m,v,_,wm),i.context=fm(null),r=i.current,c=sn(),c=oc(c),p=Ci(c),p.callback=null,Ti(r,p,c),r=c,i.current.lanes=r,Oa(i,r),kn(i),e[Ms]=i.current,Zu(e),new bl(i)},Er.version="19.2.0",Er}var Pm;function v1(){if(Pm)return Sh.exports;Pm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),Sh.exports=y1(),Sh.exports}var A1=v1();const S1=Jh(A1);var jm="popstate";function x1(u={}){function t(s,a){let{pathname:o,search:l,hash:h}=s.location;return zh("",{pathname:o,search:l,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Pr(a)}return E1(t,n,null,u)}function ie(u,t){if(u===!1||u===null||typeof u>"u")throw new Error(t)}function Mn(u,t){if(!u){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function w1(){return Math.random().toString(36).substring(2,10)}function zm(u,t){return{usr:u.state,key:u.key,idx:t}}function zh(u,t,n=null,s){return{pathname:typeof u=="string"?u:u.pathname,search:"",hash:"",...typeof t=="string"?Ca(t):t,state:n,key:t&&t.key||s||w1()}}function Pr({pathname:u="/",search:t="",hash:n=""}){return t&&t!=="?"&&(u+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(u+=n.charAt(0)==="#"?n:"#"+n),u}function Ca(u){let t={};if(u){let n=u.indexOf("#");n>=0&&(t.hash=u.substring(n),u=u.substring(0,n));let s=u.indexOf("?");s>=0&&(t.search=u.substring(s),u=u.substring(0,s)),u&&(t.pathname=u)}return t}function E1(u,t,n,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,h="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function b(){h="POP";let C=g(),x=C==null?null:C-f;f=C,d&&d({action:h,location:S.location,delta:x})}function y(C,x){h="PUSH";let T=zh(S.location,C,x);f=g()+1;let M=zm(T,f),O=S.createHref(T);try{l.pushState(M,"",O)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(O)}o&&d&&d({action:h,location:S.location,delta:1})}function A(C,x){h="REPLACE";let T=zh(S.location,C,x);f=g();let M=zm(T,f),O=S.createHref(T);l.replaceState(M,"",O),o&&d&&d({action:h,location:S.location,delta:0})}function E(C){return _1(C)}let S={get action(){return h},get location(){return u(a,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(jm,b),d=C,()=>{a.removeEventListener(jm,b),d=null}},createHref(C){return t(a,C)},createURL:E,encodeLocation(C){let x=E(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:y,replace:A,go(C){return l.go(C)}};return S}function _1(u,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ie(n,"No window.location.(origin|href) available to create URL");let s=typeof u=="string"?u:Pr(u);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function R0(u,t,n="/"){return C1(u,t,n,!1)}function C1(u,t,n,s){let a=typeof t=="string"?Ca(t):t,o=di(a.pathname||"/",n);if(o==null)return null;let l=D0(u);T1(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let f=z1(o);h=P1(l[d],f,s)}return h}function D0(u,t=[],n=[],s="",a=!1){let o=(l,h,d=a,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;ie(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let b=hi([s,g.relativePath]),y=n.concat(g);l.children&&l.children.length>0&&(ie(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),D0(l.children,t,y,b,d)),!(l.path==null&&!l.index)&&t.push({path:b,score:k1(b,l.index),routesMeta:y})};return u.forEach((l,h)=>{if(l.path===""||!l.path?.includes("?"))o(l,h);else for(let d of L0(l.path))o(l,h,!0,d)}),t}function L0(u){let t=u.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=L0(s.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&h.push(...l),h.map(d=>u.startsWith("/")&&d===""?"/":d)}function T1(u){u.sort((t,n)=>t.score!==n.score?n.score-t.score:B1(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var M1=/^:[\w-]+$/,R1=3,D1=2,L1=1,N1=10,O1=-2,Fm=u=>u==="*";function k1(u,t){let n=u.split("/"),s=n.length;return n.some(Fm)&&(s+=O1),t&&(s+=D1),n.filter(a=>!Fm(a)).reduce((a,o)=>a+(M1.test(o)?R1:o===""?L1:N1),s)}function B1(u,t){return u.length===t.length&&u.slice(0,-1).every((s,a)=>s===t[a])?u[u.length-1]-t[t.length-1]:0}function P1(u,t,n=!1){let{routesMeta:s}=u,a={},o="/",l=[];for(let h=0;h<s.length;++h){let d=s[h],f=h===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",b=Pl({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),y=d.route;if(!b&&f&&n&&!s[s.length-1].route.index&&(b=Pl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!b)return null;Object.assign(a,b.params),l.push({params:a,pathname:hi([o,b.pathname]),pathnameBase:I1(hi([o,b.pathnameBase])),route:y}),b.pathnameBase!=="/"&&(o=hi([o,b.pathnameBase]))}return l}function Pl(u,t){typeof u=="string"&&(u={path:u,caseSensitive:!1,end:!0});let[n,s]=j1(u.path,u.caseSensitive,u.end),a=t.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:b},y)=>{if(g==="*"){let E=h[y]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const A=h[y];return b&&!A?f[g]=void 0:f[g]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:u}}function j1(u,t=!1,n=!0){Mn(u==="*"||!u.endsWith("*")||u.endsWith("/*"),`Route path "${u}" will be treated as if it were "${u.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${u.replace(/\*$/,"/*")}".`);let s=[],a="^"+u.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(s.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return u.endsWith("*")?(s.push({paramName:"*"}),a+=u==="*"||u==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":u!==""&&u!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function z1(u){try{return u.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Mn(!1,`The URL path "${u}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),u}}function di(u,t){if(t==="/")return u;if(!u.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=u.charAt(n);return s&&s!=="/"?null:u.slice(n)||"/"}function F1(u,t="/"){let{pathname:n,search:s="",hash:a=""}=typeof u=="string"?Ca(u):u;return{pathname:n?n.startsWith("/")?n:U1(n,t):t,search:G1(s),hash:V1(a)}}function U1(u,t){let n=t.replace(/\/+$/,"").split("/");return u.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function _h(u,t,n,s){return`Cannot include a '${u}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H1(u){return u.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function N0(u){let t=H1(u);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function O0(u,t,n,s=!1){let a;typeof u=="string"?a=Ca(u):(a={...u},ie(!a.pathname||!a.pathname.includes("?"),_h("?","pathname","search",a)),ie(!a.pathname||!a.pathname.includes("#"),_h("#","pathname","hash",a)),ie(!a.search||!a.search.includes("#"),_h("#","search","hash",a)));let o=u===""||a.pathname==="",l=o?"/":a.pathname,h;if(l==null)h=n;else{let b=t.length-1;if(!s&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),b-=1;a.pathname=y.join("/")}h=b>=0?t[b]:"/"}let d=F1(a,h),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var hi=u=>u.join("/").replace(/\/\/+/g,"/"),I1=u=>u.replace(/\/+$/,"").replace(/^\/*/,"/"),G1=u=>!u||u==="?"?"":u.startsWith("?")?u:"?"+u,V1=u=>!u||u==="#"?"":u.startsWith("#")?u:"#"+u;function q1(u){return u!=null&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.internal=="boolean"&&"data"in u}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var k0=["POST","PUT","PATCH","DELETE"];new Set(k0);var X1=["GET",...k0];new Set(X1);var Ta=L.createContext(null);Ta.displayName="DataRouter";var ql=L.createContext(null);ql.displayName="DataRouterState";L.createContext(!1);var B0=L.createContext({isTransitioning:!1});B0.displayName="ViewTransition";var Y1=L.createContext(new Map);Y1.displayName="Fetchers";var $1=L.createContext(null);$1.displayName="Await";var Gn=L.createContext(null);Gn.displayName="Navigation";var Gr=L.createContext(null);Gr.displayName="Location";var Vn=L.createContext({outlet:null,matches:[],isDataRoute:!1});Vn.displayName="Route";var ed=L.createContext(null);ed.displayName="RouteError";function K1(u,{relative:t}={}){ie(Vr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=L.useContext(Gn),{hash:a,pathname:o,search:l}=qr(u,{relative:t}),h=o;return n!=="/"&&(h=o==="/"?n:hi([n,o])),s.createHref({pathname:h,search:l,hash:a})}function Vr(){return L.useContext(Gr)!=null}function Ki(){return ie(Vr(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Gr).location}var P0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j0(u){L.useContext(Gn).static||L.useLayoutEffect(u)}function z0(){let{isDataRoute:u}=L.useContext(Vn);return u?cA():W1()}function W1(){ie(Vr(),"useNavigate() may be used only in the context of a <Router> component.");let u=L.useContext(Ta),{basename:t,navigator:n}=L.useContext(Gn),{matches:s}=L.useContext(Vn),{pathname:a}=Ki(),o=JSON.stringify(N0(s)),l=L.useRef(!1);return j0(()=>{l.current=!0}),L.useCallback((d,f={})=>{if(Mn(l.current,P0),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=O0(d,JSON.parse(o),a,f.relative==="path");u==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:hi([t,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[t,n,o,a,u])}L.createContext(null);function Q1(){let{matches:u}=L.useContext(Vn),t=u[u.length-1];return t?t.params:{}}function qr(u,{relative:t}={}){let{matches:n}=L.useContext(Vn),{pathname:s}=Ki(),a=JSON.stringify(N0(n));return L.useMemo(()=>O0(u,JSON.parse(a),s,t==="path"),[u,a,s,t])}function Z1(u,t){return F0(u,t)}function F0(u,t,n,s,a){ie(Vr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(Gn),{matches:l}=L.useContext(Vn),h=l[l.length-1],d=h?h.params:{},f=h?h.pathname:"/",g=h?h.pathnameBase:"/",b=h&&h.route;{let T=b&&b.path||"";U0(f,!b||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let y=Ki(),A;if(t){let T=typeof t=="string"?Ca(t):t;ie(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),A=T}else A=y;let E=A.pathname||"/",S=E;if(g!=="/"){let T=g.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=R0(u,{pathname:S});Mn(b||C!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Mn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=iA(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:hi([g,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:hi([g,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,n,s,a);return t&&x?L.createElement(Gr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},x):x}function J1(){let u=lA(),t=q1(u)?`${u.status} ${u.statusText}`:u instanceof Error?u.message:JSON.stringify(u),n=u instanceof Error?u.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",u),l=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),n?L.createElement("pre",{style:a},n):null,l)}var tA=L.createElement(J1,null),eA=class extends L.Component{constructor(u){super(u),this.state={location:u.location,revalidation:u.revalidation,error:u.error}}static getDerivedStateFromError(u){return{error:u}}static getDerivedStateFromProps(u,t){return t.location!==u.location||t.revalidation!=="idle"&&u.revalidation==="idle"?{error:u.error,location:u.location,revalidation:u.revalidation}:{error:u.error!==void 0?u.error:t.error,location:t.location,revalidation:u.revalidation||t.revalidation}}componentDidCatch(u,t){this.props.unstable_onError?this.props.unstable_onError(u,t):console.error("React Router caught the following error during render",u)}render(){return this.state.error!==void 0?L.createElement(Vn.Provider,{value:this.props.routeContext},L.createElement(ed.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nA({routeContext:u,match:t,children:n}){let s=L.useContext(Ta);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(Vn.Provider,{value:u},n)}function iA(u,t=[],n=null,s=null,a=null){if(u==null){if(!n)return null;if(n.errors)u=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)u=n.matches;else return null}let o=u,l=n?.errors;if(l!=null){let f=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);ie(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let h=!1,d=-1;if(n)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:b,errors:y}=n,A=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||A){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,b)=>{let y,A=!1,E=null,S=null;n&&(y=l&&g.route.id?l[g.route.id]:void 0,E=g.route.errorElement||tA,h&&(d<0&&b===0?(U0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,S=null):d===b&&(A=!0,S=g.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,b+1)),x=()=>{let T;return y?T=E:A?T=S:g.route.Component?T=L.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=f,L.createElement(nA,{match:g,routeContext:{outlet:f,matches:C,isDataRoute:n!=null},children:T})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?L.createElement(eA,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:x(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:s}):x()},null)}function nd(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sA(u){let t=L.useContext(Ta);return ie(t,nd(u)),t}function aA(u){let t=L.useContext(ql);return ie(t,nd(u)),t}function rA(u){let t=L.useContext(Vn);return ie(t,nd(u)),t}function id(u){let t=rA(u),n=t.matches[t.matches.length-1];return ie(n.route.id,`${u} can only be used on routes that contain a unique "id"`),n.route.id}function oA(){return id("useRouteId")}function lA(){let u=L.useContext(ed),t=aA("useRouteError"),n=id("useRouteError");return u!==void 0?u:t.errors?.[n]}function cA(){let{router:u}=sA("useNavigate"),t=id("useNavigate"),n=L.useRef(!1);return j0(()=>{n.current=!0}),L.useCallback(async(a,o={})=>{Mn(n.current,P0),n.current&&(typeof a=="number"?u.navigate(a):await u.navigate(a,{fromRouteId:t,...o}))},[u,t])}var Um={};function U0(u,t,n){!t&&!Um[u]&&(Um[u]=!0,Mn(!1,n))}L.memo(uA);function uA({routes:u,future:t,state:n,unstable_onError:s}){return F0(u,void 0,n,s,t)}function Dr(u){ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hA({basename:u="/",children:t=null,location:n,navigationType:s="POP",navigator:a,static:o=!1}){ie(!Vr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=u.replace(/^\/*/,"/"),h=L.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=Ca(n));let{pathname:d="/",search:f="",hash:g="",state:b=null,key:y="default"}=n,A=L.useMemo(()=>{let E=di(d,l);return E==null?null:{location:{pathname:E,search:f,hash:g,state:b,key:y},navigationType:s}},[l,d,f,g,b,y,s]);return Mn(A!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:L.createElement(Gn.Provider,{value:h},L.createElement(Gr.Provider,{children:t,value:A}))}function dA({children:u,location:t}){return Z1(Fh(u),t)}function Fh(u,t=[]){let n=[];return L.Children.forEach(u,(s,a)=>{if(!L.isValidElement(s))return;let o=[...t,a];if(s.type===L.Fragment){n.push.apply(n,Fh(s.props.children,o));return}ie(s.type===Dr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ie(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Fh(s.props.children,o)),n.push(l)}),n}var Nl="get",Ol="application/x-www-form-urlencoded";function Xl(u){return u!=null&&typeof u.tagName=="string"}function fA(u){return Xl(u)&&u.tagName.toLowerCase()==="button"}function pA(u){return Xl(u)&&u.tagName.toLowerCase()==="form"}function gA(u){return Xl(u)&&u.tagName.toLowerCase()==="input"}function mA(u){return!!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)}function bA(u,t){return u.button===0&&(!t||t==="_self")&&!mA(u)}function Uh(u=""){return new URLSearchParams(typeof u=="string"||Array.isArray(u)||u instanceof URLSearchParams?u:Object.keys(u).reduce((t,n)=>{let s=u[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function yA(u,t){let n=Uh(u);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(o=>{n.append(a,o)})}),n}var vl=null;function vA(){if(vl===null)try{new FormData(document.createElement("form"),0),vl=!1}catch{vl=!0}return vl}var AA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ch(u){return u!=null&&!AA.has(u)?(Mn(!1,`"${u}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ol}"`),null):u}function SA(u,t){let n,s,a,o,l;if(pA(u)){let h=u.getAttribute("action");s=h?di(h,t):null,n=u.getAttribute("method")||Nl,a=Ch(u.getAttribute("enctype"))||Ol,o=new FormData(u)}else if(fA(u)||gA(u)&&(u.type==="submit"||u.type==="image")){let h=u.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=u.getAttribute("formaction")||h.getAttribute("action");if(s=d?di(d,t):null,n=u.getAttribute("formmethod")||h.getAttribute("method")||Nl,a=Ch(u.getAttribute("formenctype"))||Ch(h.getAttribute("enctype"))||Ol,o=new FormData(h,u),!vA()){let{name:f,type:g,value:b}=u;if(g==="image"){let y=f?`${f}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else f&&o.append(f,b)}}else{if(Xl(u))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nl,s=null,a=Ol,l=u}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sd(u,t){if(u===!1||u===null||typeof u>"u")throw new Error(t)}function xA(u,t,n){let s=typeof u=="string"?new URL(u,typeof window>"u"?"server://singlefetch/":window.location.origin):u;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&di(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function wA(u,t){if(u.id in t)return t[u.id];try{let n=await import(u.module);return t[u.id]=n,n}catch(n){return console.error(`Error loading route module \`${u.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EA(u){return u==null?!1:u.href==null?u.rel==="preload"&&typeof u.imageSrcSet=="string"&&typeof u.imageSizes=="string":typeof u.rel=="string"&&typeof u.href=="string"}async function _A(u,t,n){let s=await Promise.all(u.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await wA(o,n);return l.links?l.links():[]}return[]}));return RA(s.flat(1).filter(EA).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Hm(u,t,n,s,a,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,h=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>l(d,f)||h(d,f)):o==="data"?t.filter((d,f)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(u,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function CA(u,t,{includeHydrateFallback:n}={}){return TA(u.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function TA(u){return[...new Set(u)]}function MA(u){let t={},n=Object.keys(u).sort();for(let s of n)t[s]=u[s];return t}function RA(u,t){let n=new Set;return new Set(t),u.reduce((s,a)=>{let o=JSON.stringify(MA(a));return n.has(o)||(n.add(o),s.push({key:o,link:a})),s},[])}function H0(){let u=L.useContext(Ta);return sd(u,"You must render this element inside a <DataRouterContext.Provider> element"),u}function DA(){let u=L.useContext(ql);return sd(u,"You must render this element inside a <DataRouterStateContext.Provider> element"),u}var ad=L.createContext(void 0);ad.displayName="FrameworkContext";function I0(){let u=L.useContext(ad);return sd(u,"You must render this element inside a <HydratedRouter> element"),u}function LA(u,t){let n=L.useContext(ad),[s,a]=L.useState(!1),[o,l]=L.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:b}=t,y=L.useRef(null);L.useEffect(()=>{if(u==="render"&&l(!0),u==="viewport"){let S=x=>{x.forEach(T=>{l(T.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[u]),L.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{a(!0)},E=()=>{a(!1),l(!1)};return n?u!=="intent"?[o,y,{}]:[o,y,{onFocus:_r(h,A),onBlur:_r(d,E),onMouseEnter:_r(f,A),onMouseLeave:_r(g,E),onTouchStart:_r(b,A)}]:[!1,y,{}]}function _r(u,t){return n=>{u&&u(n),n.defaultPrevented||t(n)}}function NA({page:u,...t}){let{router:n}=H0(),s=L.useMemo(()=>R0(n.routes,u,n.basename),[n.routes,u,n.basename]);return s?L.createElement(kA,{page:u,matches:s,...t}):null}function OA(u){let{manifest:t,routeModules:n}=I0(),[s,a]=L.useState([]);return L.useEffect(()=>{let o=!1;return _A(u,t,n).then(l=>{o||a(l)}),()=>{o=!0}},[u,t,n]),s}function kA({page:u,matches:t,...n}){let s=Ki(),{manifest:a,routeModules:o}=I0(),{basename:l}=H0(),{loaderData:h,matches:d}=DA(),f=L.useMemo(()=>Hm(u,t,d,a,s,"data"),[u,t,d,a,s]),g=L.useMemo(()=>Hm(u,t,d,a,s,"assets"),[u,t,d,a,s]),b=L.useMemo(()=>{if(u===s.pathname+s.search+s.hash)return[];let E=new Set,S=!1;if(t.forEach(x=>{let T=a.routes[x.route.id];!T||!T.hasLoader||(!f.some(M=>M.route.id===x.route.id)&&x.route.id in h&&o[x.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:E.add(x.route.id))}),E.size===0)return[];let C=xA(u,l,"data");return S&&E.size>0&&C.searchParams.set("_routes",t.filter(x=>E.has(x.route.id)).map(x=>x.route.id).join(",")),[C.pathname+C.search]},[l,h,s,a,f,t,u,o]),y=L.useMemo(()=>CA(g,a),[g,a]),A=OA(g);return L.createElement(L.Fragment,null,b.map(E=>L.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),y.map(E=>L.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),A.map(({key:E,link:S})=>L.createElement("link",{key:E,nonce:n.nonce,...S})))}function BA(...u){return t=>{u.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var G0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G0&&(window.__reactRouterVersion="7.9.5")}catch{}function PA({basename:u,children:t,window:n}){let s=L.useRef();s.current==null&&(s.current=x1({window:n,v5Compat:!0}));let a=s.current,[o,l]=L.useState({action:a.action,location:a.location}),h=L.useCallback(d=>{L.startTransition(()=>l(d))},[l]);return L.useLayoutEffect(()=>a.listen(h),[a,h]),L.createElement(hA,{basename:u,children:t,location:o.location,navigationType:o.action,navigator:a})}var V0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Es=L.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:h,target:d,to:f,preventScrollReset:g,viewTransition:b,...y},A){let{basename:E}=L.useContext(Gn),S=typeof f=="string"&&V0.test(f),C,x=!1;if(typeof f=="string"&&S&&(C=f,G0))try{let X=new URL(window.location.href),Q=f.startsWith("//")?new URL(X.protocol+f):new URL(f),Z=di(Q.pathname,E);Q.origin===X.origin&&Z!=null?f=Z+Q.search+Q.hash:x=!0}catch{Mn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=K1(f,{relative:a}),[M,O,B]=LA(s,y),j=FA(f,{replace:l,state:h,target:d,preventScrollReset:g,relative:a,viewTransition:b});function P(X){t&&t(X),X.defaultPrevented||j(X)}let I=L.createElement("a",{...y,...B,href:C||T,onClick:x||o?t:P,ref:BA(A,O),target:d,"data-discover":!S&&n==="render"?"true":void 0});return M&&!S?L.createElement(L.Fragment,null,I,L.createElement(NA,{page:T})):I});Es.displayName="Link";var Vi=L.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:h,children:d,...f},g){let b=qr(l,{relative:f.relative}),y=Ki(),A=L.useContext(ql),{navigator:E,basename:S}=L.useContext(Gn),C=A!=null&&qA(b)&&h===!0,x=E.encodeLocation?E.encodeLocation(b).pathname:b.pathname,T=y.pathname,M=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(T=T.toLowerCase(),M=M?M.toLowerCase():null,x=x.toLowerCase()),M&&S&&(M=di(M,S)||M);const O=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let B=T===x||!a&&T.startsWith(x)&&T.charAt(O)==="/",j=M!=null&&(M===x||!a&&M.startsWith(x)&&M.charAt(x.length)==="/"),P={isActive:B,isPending:j,isTransitioning:C},I=B?t:void 0,X;typeof s=="function"?X=s(P):X=[s,B?"active":null,j?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(P):o;return L.createElement(Es,{...f,"aria-current":I,className:X,ref:g,style:Q,to:l,viewTransition:h},typeof d=="function"?d(P):d)});Vi.displayName="NavLink";var jA=L.forwardRef(({discover:u="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:a,state:o,method:l=Nl,action:h,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:b,...y},A)=>{let E=GA(),S=VA(h,{relative:f}),C=l.toLowerCase()==="get"?"get":"post",x=typeof h=="string"&&V0.test(h),T=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let O=M.nativeEvent.submitter,B=O?.getAttribute("formmethod")||l;E(O||M.currentTarget,{fetcherKey:t,method:B,navigate:n,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:b})};return L.createElement("form",{ref:A,method:C,action:S,onSubmit:s?d:T,...y,"data-discover":!x&&u==="render"?"true":void 0})});jA.displayName="Form";function zA(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q0(u){let t=L.useContext(Ta);return ie(t,zA(u)),t}function FA(u,{target:t,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let h=z0(),d=Ki(),f=qr(u,{relative:o});return L.useCallback(g=>{if(bA(g,t)){g.preventDefault();let b=n!==void 0?n:Pr(d)===Pr(f);h(u,{replace:b,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,h,f,n,s,t,u,a,o,l])}function UA(u){Mn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=L.useRef(Uh(u)),n=L.useRef(!1),s=Ki(),a=L.useMemo(()=>yA(s.search,n.current?null:t.current),[s.search]),o=z0(),l=L.useCallback((h,d)=>{const f=Uh(typeof h=="function"?h(new URLSearchParams(a)):h);n.current=!0,o("?"+f,d)},[o,a]);return[a,l]}var HA=0,IA=()=>`__${String(++HA)}__`;function GA(){let{router:u}=q0("useSubmit"),{basename:t}=L.useContext(Gn),n=oA();return L.useCallback(async(s,a={})=>{let{action:o,method:l,encType:h,formData:d,body:f}=SA(s,t);if(a.navigate===!1){let g=a.fetcherKey||IA();await u.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||h,flushSync:a.flushSync})}else await u.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[u,t,n])}function VA(u,{relative:t}={}){let{basename:n}=L.useContext(Gn),s=L.useContext(Vn);ie(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...qr(u||".",{relative:t})},l=Ki();if(u==null){o.search=l.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(b=>b).forEach(b=>h.append("index",b));let g=h.toString();o.search=g?`?${g}`:""}}return(!u||u===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:hi([n,o.pathname])),Pr(o)}function qA(u,{relative:t}={}){let n=L.useContext(B0);ie(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=q0("useViewTransitionState"),a=qr(u,{relative:t});if(!n.isTransitioning)return!1;let o=di(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=di(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Pl(a.pathname,l)!=null||Pl(a.pathname,o)!=null}var X0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Im=qi.createContext&&qi.createContext(X0),XA=["attr","size","title"];function YA(u,t){if(u==null)return{};var n=$A(u,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(u,s)&&(n[s]=u[s])}return n}function $A(u,t){if(u==null)return{};var n={};for(var s in u)if(Object.prototype.hasOwnProperty.call(u,s)){if(t.indexOf(s)>=0)continue;n[s]=u[s]}return n}function jl(){return jl=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(u[s]=n[s])}return u},jl.apply(this,arguments)}function Gm(u,t){var n=Object.keys(u);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(u);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(u,a).enumerable})),n.push.apply(n,s)}return n}function zl(u){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gm(Object(n),!0).forEach(function(s){KA(u,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(n)):Gm(Object(n)).forEach(function(s){Object.defineProperty(u,s,Object.getOwnPropertyDescriptor(n,s))})}return u}function KA(u,t,n){return t=WA(t),t in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n,u}function WA(u){var t=QA(u,"string");return typeof t=="symbol"?t:t+""}function QA(u,t){if(typeof u!="object"||!u)return u;var n=u[Symbol.toPrimitive];if(n!==void 0){var s=n.call(u,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(u)}function Y0(u){return u&&u.map((t,n)=>qi.createElement(t.tag,zl({key:n},t.attr),Y0(t.child)))}function Ut(u){return t=>qi.createElement(ZA,jl({attr:zl({},u.attr)},t),Y0(u.child))}function ZA(u){var t=n=>{var{attr:s,size:a,title:o}=u,l=YA(u,XA),h=a||n.size||"1em",d;return n.className&&(d=n.className),u.className&&(d=(d?d+" ":"")+u.className),qi.createElement("svg",jl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:d,style:zl(zl({color:u.color||n.color},n.style),u.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&qi.createElement("title",null,o),u.children)};return Im!==void 0?qi.createElement(Im.Consumer,null,n=>t(n)):t(X0)}function rd(u){return Ut({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(u)}function Fl(u){return Ut({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(u)}function JA(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(u)}function Yi(u){const t="/ludusregula/",n=String(u||"").replace(/^\//,"");return(t.endsWith("/")?t:t+"/")+n}function tS(){const[u,t]=L.useState(!1),n=Yi("icon.svg");L.useEffect(()=>(u?(document.documentElement.style.overflowX="hidden",document.body.style.overflow="hidden"):(document.documentElement.style.overflowX="",document.body.style.overflow=""),()=>{document.documentElement.style.overflowX="",document.body.style.overflow=""}),[u]);const s=[{to:"/",label:"Accueil",end:!0},{to:"/about",label:" propos"},{to:"/contribute",label:"Contribuer"}];return w.jsxs("header",{className:"sticky top-0 z-50",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"bg-gradient-to-r from-[#0abde3] via-[#10ac84] to-[#0abde3]",children:w.jsxs("div",{className:"max-w-6xl mx-auto h-16 px-4 flex items-center justify-between",children:[w.jsxs(Es,{to:"/",className:"group flex items-center gap-2",children:[w.jsx("img",{src:n,alt:"LudusRegula",className:"h-8 w-8 rounded-lg ring-1 ring-white/20 group-hover:ring-white/40 transition",loading:"eager",fetchPriority:"high"}),w.jsx("span",{className:"text-white/95 font-semibold tracking-tight text-lg",children:"LudusRegula"})]}),w.jsxs("nav",{className:"hidden sm:flex items-center gap-2",children:[s.map(({to:a,label:o,end:l})=>w.jsx(Vi,{to:a,end:l,className:"relative px-3 py-2 text-sm font-medium text-white/90 hover:text-white transition",children:({isActive:h})=>w.jsxs("span",{className:"relative inline-flex items-center",children:[o,w.jsx("span",{className:["absolute -bottom-1 left-0 h-0.5 w-full origin-left rounded","transition-transform duration-300",h?"scale-x-100 bg-white":"scale-x-0 bg-white/70"].join(" ")})]})},a)),w.jsx("a",{href:"https://discord.gg/Wffka998Xk",target:"_blank",rel:"noopener noreferrer",className:"ml-2 inline-flex h-9 w-9 items-center justify-center rounded-lg text-white/90 hover:bg-white/15 hover:text-white transition","aria-label":"Rejoindre notre Discord",children:w.jsx(rd,{className:"h-5 w-5"})})]}),w.jsx("button",{onClick:()=>t(a=>!a),"aria-expanded":u,"aria-controls":"mobile-menu","aria-label":"Ouvrir le menu",className:"sm:hidden inline-flex h-10 w-10 items-center justify-center rounded-md text-white/95 hover:bg-white/15 focus:outline-none focus:ring-4 focus:ring-white/30 transition",children:w.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:w.jsx("path",{d:"M4 7h16M4 12h16M4 17h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]})}),w.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[w.jsx("div",{className:"absolute -top-16 -left-10 h-40 w-40 rounded-full opacity-20 blur-2xl",style:{background:"radial-gradient(circle, #0abde3 0%, transparent 60%)"}}),w.jsx("div",{className:"absolute -bottom-16 -right-10 h-48 w-48 rounded-full opacity-15 blur-2xl",style:{background:"radial-gradient(circle, #10ac84 0%, transparent 60%)"}})]})]}),w.jsxs("div",{className:`fixed inset-0 z-[60] transition ${u?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!u,children:[w.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>t(!1)}),w.jsxs("div",{id:"mobile-menu",className:"absolute top-3 left-1/2 -translate-x-1/2 w-[min(92vw,560px)] max-w-full rounded-2xl bg-white shadow-xl border border-slate-200 overflow-hidden",role:"dialog","aria-modal":"true",children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"h-2.5 w-2.5 rounded-sm bg-[#10ac84]"}),w.jsx("span",{className:"font-semibold text-slate-900",children:"Menu"})]}),w.jsx("button",{type:"button",className:"rounded-md p-2 hover:bg-slate-100",onClick:()=>t(!1),"aria-label":"Fermer le menu",children:""})]}),w.jsx("nav",{className:"p-2",children:w.jsxs("ul",{className:"space-y-1",children:[w.jsx("li",{children:w.jsx(Vi,{to:"/",className:"block rounded-lg px-3 py-3 text-slate-900 hover:bg-slate-50",onClick:()=>t(!1),children:"Accueil"})}),w.jsx("li",{children:w.jsx(Vi,{to:"/about",className:"block rounded-lg px-3 py-3 text-slate-900 hover:bg-slate-50",onClick:()=>t(!1),children:" propos"})}),w.jsx("li",{children:w.jsx(Vi,{to:"/contribute",className:"block rounded-lg px-3 py-3 text-slate-900 hover:bg-slate-50",onClick:()=>t(!1),children:"Contribuer"})}),w.jsx("li",{children:w.jsx("a",{href:"https://discord.gg/Wffka998Xk",target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 rounded-lg px-3 py-3 hover:bg-slate-50",onClick:()=>t(!1),children:w.jsx("span",{className:"text-slate-900",children:"Rejoindre Discord"})})})]})})]})]})]})}function eS(){return w.jsx("footer",{className:"mt-auto border-t border-slate-200 bg-gradient-to-b from-slate-100 to-white",children:w.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-8",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[w.jsxs("section",{className:"min-w-0",children:[w.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"LudusRegula"}),w.jsx("p",{className:"text-sm leading-relaxed text-slate-600 break-words",children:"Votre plateforme communautaire pour partager et dcouvrir des rgles de jeux de socit."})]}),w.jsxs("section",{className:"min-w-0",children:[w.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Navigation"}),w.jsx("nav",{children:w.jsxs("ul",{className:"rounded-md overflow-hidden space-y-2 md:bg-transparent",children:[w.jsx("li",{className:"",children:w.jsx(Vi,{to:"/",className:"block px-3 text-sm text-slate-700 hover:text-[#0abde3] transition",children:"Accueil"})}),w.jsx("li",{children:w.jsx(Vi,{to:"/about",className:"block px-3 text-sm text-slate-700 hover:text-[#0abde3] transition",children:" propos"})}),w.jsx("li",{children:w.jsx(Vi,{to:"/contribute",className:"block px-3 text-sm text-slate-700 hover:text-[#0abde3] transition",children:"Contribuer"})})]})})]}),w.jsxs("section",{className:"min-w-0",children:[w.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Communaut"}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("a",{href:"https://github.com/plumedours",target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-8 w-8 items-center justify-center rounded-sm bg-slate-900 text-white hover:bg-slate-800 active:scale-[0.98] transition","aria-label":"GitHub",children:w.jsx(Fl,{className:"h-5 w-5"})}),w.jsx("a",{href:"https://discord.gg/Wffka998Xk",target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-8 w-8 items-center justify-center rounded-sm bg-[#5865F2] text-white hover:bg-[#4752C4] active:scale-[0.98] transition","aria-label":"Discord",children:w.jsx(rd,{className:"h-5 w-5"})})]})]})]}),w.jsx("div",{className:"mt-8 border-t border-slate-200 pt-6",children:w.jsxs("p",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1 text-sm text-slate-600",children:[w.jsxs("span",{children:[" ",new Date().getFullYear()," LudusRegula"]}),w.jsx("span",{className:"hidden sm:inline",children:""}),w.jsxs("span",{className:"inline-flex items-center gap-1",children:["Cr avec ",w.jsx(JA,{className:"h-3.5 w-3.5 text-red-500"})," par"," ",w.jsx("a",{className:"underline decoration-[#0abde3]/40 hover:decoration-[#0abde3]",href:"https://github.com/plumedours",target:"_blank",rel:"noreferrer",children:"Maxime Bory"})]})]})})]})})}function nS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288m144-144H112"},child:[]}]})(u)}function iS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M244 400 100 256l144-144M120 256h292"},child:[]}]})(u)}function sS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M244 400 100 256l144-144M120 256h292"},child:[]}]})(u)}function aS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m268 112 144 144-144 144m124-144H100"},child:[]}]})(u)}function rS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M428 224H288a48 48 0 0 1-48-48V36a4 4 0 0 0-4-4h-92a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h224a64 64 0 0 0 64-64V228a4 4 0 0 0-4-4zm-92 160H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0-80H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32z"},child:[]},{tag:"path",attr:{d:"M419.22 188.59 275.41 44.78a2 2 0 0 0-3.41 1.41V176a16 16 0 0 0 16 16h129.81a2 2 0 0 0 1.41-3.41z"},child:[]}]})(u)}function oS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M336 176h40a40 40 0 0 1 40 40v208a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V216a40 40 0 0 1 40-40h40"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m176 272 80 80 80-80M256 48v288"},child:[]}]})(u)}function lS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48z"},child:[]},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 48c-58.07 0-112.67 93.13-112.67 208S197.93 464 256 464s112.67-93.13 112.67-208S314.07 48 256 48z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M117.33 117.33c38.24 27.15 86.38 43.34 138.67 43.34s100.43-16.19 138.67-43.34m0 277.34c-38.24-27.15-86.38-43.34-138.67-43.34s-100.43 16.19-138.67 43.34"},child:[]},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 48v416m208-208H48"},child:[]}]})(u)}function cS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M508.64 148.79c0-45-33.1-81.2-74-81.2C379.24 65 322.74 64 265 64h-18c-57.6 0-114.2 1-169.6 3.6C36.6 67.6 3.5 104 3.5 149 1 184.59-.06 220.19 0 255.79q-.15 53.4 3.4 106.9c0 45 33.1 81.5 73.9 81.5 58.2 2.7 117.9 3.9 178.6 3.8q91.2.3 178.6-3.8c40.9 0 74-36.5 74-81.5 2.4-35.7 3.5-71.3 3.4-107q.34-53.4-3.26-106.9zM207 353.89v-196.5l145 98.2z"},child:[]}]})(u)}function uS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"416",height:"320",x:"48",y:"96",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"40",ry:"40"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m112 160 144 112 144-112"},child:[]}]})(u)}function hS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48M336 64h112v112M224 288 440 72"},child:[]}]})(u)}function dS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M384 368h24a40.12 40.12 0 0 0 40-40V168a40.12 40.12 0 0 0-40-40H104a40.12 40.12 0 0 0-40 40v160a40.12 40.12 0 0 0 40 40h24"},child:[]},{tag:"rect",attr:{width:"256",height:"208",x:"128",y:"240",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"24.32",ry:"24.32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M384 128v-24a40.12 40.12 0 0 0-40-40H168a40.12 40.12 0 0 0-40 40v24"},child:[]},{tag:"circle",attr:{cx:"392",cy:"184",r:"24"},child:[]}]})(u)}function fS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m256 58 80 80-80 80"},child:[]}]})(u)}function pS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"},child:[]}]})(u)}function gS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 96h112v112m-10.23-101.8L111.98 400.02M208 416H96V304"},child:[]}]})(u)}function mS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29 448 448"},child:[]}]})(u)}function bS(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M378 324a69.78 69.78 0 0 0-48.83 19.91L202 272.41a69.68 69.68 0 0 0 0-32.82l127.13-71.5A69.76 69.76 0 1 0 308.87 129l-130.13 73.2a70 70 0 1 0 0 107.56L308.87 383A70 70 0 1 0 378 324z"},child:[]}]})(u)}function yS({q:u,onChange:t,total:n=0,filtered:s=0}){const a=L.useId(),o=(u??"").length>0;return w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[w.jsx("div",{className:"absolute -top-24 -left-16 h-56 w-56 rounded-full opacity-20 blur-2xl",style:{background:"radial-gradient(circle, #0abde3 0%, transparent 60%)"}}),w.jsx("div",{className:"absolute -bottom-20 -right-10 h-64 w-64 rounded-full opacity-15 blur-2xl",style:{background:"radial-gradient(circle, #10ac84 0%, transparent 60%)"}}),w.jsx("div",{className:"absolute top-1/2 left-1/3 -translate-x-1/2 -translate-y-1/2 h-48 w-48 rotate-12 opacity-10 blur-2xl",style:{background:"linear-gradient(135deg, #ff9f43 0%, #ee5253 100%)"}})]}),w.jsxs("div",{className:"relative z-10 p-6 md:p-7",children:[w.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(mS,{size:32}),w.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Trouvez vos rgles en un clin dil"})]}),w.jsxs("div",{className:"inline-flex items-center rounded-md bg-[#10ac84]/15 text-[#10ac84] px-3 py-1 text-xs font-semibold",children:[n," rgle",n>1?"s":""," disponible",n>1?"s":""]})]}),w.jsx("label",{htmlFor:a,className:"sr-only",children:"Rechercher un jeu"}),w.jsx("div",{className:"flex items-stretch gap-2",children:w.jsxs("div",{className:"group relative flex-1",children:[w.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:w.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"transition opacity-80 group-focus-within:opacity-100",children:w.jsx("path",{d:"M21 21l-4.2-4.2m1.2-5A7 7 0 1 1 5 5a7 7 0 0 1 13 6.8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),w.jsx("input",{id:a,value:u,onChange:l=>t?.(l.target.value),placeholder:"Rechercher par nom, description","aria-label":"Rechercher un jeu",className:"h-12 w-full rounded-md border border-slate-300 bg-white pl-10 pr-10 outline-none ring-0 transition placeholder:text-slate-400 focus:border-[#0abde3] focus:ring-4 focus:ring-[#0abde3]/25"}),o&&w.jsx("button",{type:"button",onClick:()=>t?.(""),className:"absolute inset-y-0 right-0 mr-2 inline-flex h-8 w-8 items-center justify-center rounded-lg text-slate-400 hover:bg-slate-100 hover:text-slate-700",title:"Effacer","aria-label":"Effacer la recherche",children:w.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:w.jsx("path",{d:"M6 6l12 12M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]})}),w.jsxs("p",{className:"mt-3 text-sm text-slate-600",children:[s," rsultat",s>1?"s":""," sur ",n]})]})]})}function vS({allTags:u,active:t=[],onToggle:n,onClear:s}){return u.length?w.jsxs("div",{className:"relative rounded-2xl p-4 bg-white border border-slate-200 shadow-sm overflow-hidden",children:[w.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[w.jsx("div",{className:"absolute -top-16 -left-10 h-40 w-40 rounded-full opacity-15 blur-2xl",style:{background:"radial-gradient(circle, #0abde3 0%, transparent 60%)"}}),w.jsx("div",{className:"absolute -bottom-16 -right-10 h-48 w-48 rounded-full opacity-10 blur-2xl",style:{background:"radial-gradient(circle, #10ac84 0%, transparent 60%)"}})]}),w.jsxs("div",{className:"relative z-10 flex items-center justify-between gap-2 mb-3",children:[w.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Filtrer par tags"}),t.length>0&&w.jsx("button",{onClick:s,className:"text-xs text-slate-600 hover:text-slate-900 underline underline-offset-2",children:"Rinitialiser"})]}),w.jsx("div",{className:"relative z-10 flex flex-wrap gap-2",children:u.map(a=>{const o=t.includes(a);return w.jsxs("button",{onClick:()=>n(a),className:`px-2.5 py-1 rounded-lg text-xs font-semibold border transition cursor-pointer ${o?"bg-[#0abde3]/15 text-[#0abde3] border-[#0abde3]/30":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:["#",a]},a)})})]}):null}function AS({alt:u,sources:t=[],className:n="",onFailPlaceholder:s=null}){const[a,o]=L.useState(null),[l,h]=L.useState(!1);return L.useEffect(()=>{let d=!1;return(async()=>{for(const g of t.filter(Boolean)){const b=Yi(g);try{const y=await SS(b);if(!d&&y){o(b);return}}catch{}}d||(o(null),h(!0))})(),()=>{d=!0}},[t]),a?w.jsx("img",{src:a,alt:u,loading:"lazy",className:n}):l?s:w.jsx("div",{className:`animate-pulse bg-slate-200 ${n}`,"aria-hidden":!0})}function SS(u){return new Promise(t=>{const n=new Image;n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=u})}function xS(u){return Ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(u)}function wS(u){return Ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(u)}function ES(u){return Ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(u)}function _S(u){return Ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"},child:[]},{tag:"polygon",attr:{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"},child:[]}]})(u)}function CS({game:u}){const t=[u.thumb?.webp,u.thumb?.jpg,u.thumb?.png].filter(Boolean),n=u.tags||[],s=f=>typeof f=="string"&&f.trim().length>0,a=u?.rules?.official?.site_url||"",o=u?.rules?.type==="hosted"&&s(u?.rules?.pdf),l=o?Yi(u.rules.pdf):"",h=u?.rules?.links?.video_url||"",d=u?.rules?.official?.publisher||"";return w.jsxs("article",{className:"relative rounded-2xl bg-white border border-slate-200 shadow-sm hover:shadow-md transition overflow-hidden",children:[w.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[w.jsx("div",{className:"absolute -top-24 left-1/3 h-56 w-56 rounded-full opacity-10 blur-2xl",style:{background:"radial-gradient(circle, #ff9f43 0%, transparent 60%)"}}),w.jsx("div",{className:"absolute -bottom-24 right-0 h-64 w-64 rounded-full opacity-10 blur-2xl",style:{background:"radial-gradient(circle, #ee5253 0%, transparent 60%)"}})]}),w.jsx("div",{className:"relative aspect-3/2 w-full bg-slate-100 z-10",children:t.length?w.jsx(AS,{alt:u.name,sources:t,className:"h-full w-full object-cover",onFailPlaceholder:w.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400 text-sm",children:"Image introuvable"})}):w.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400 text-sm",children:"Aucune image"})}),w.jsxs("div",{className:"relative z-10 p-5",children:[w.jsx("div",{className:"flex items-start justify-between gap-3",children:w.jsxs("div",{children:[w.jsxs("div",{className:"flex flex-row justify-between items-center",children:[w.jsx("h3",{className:"text-lg font-semibold tracking-tight text-slate-900",children:u.name}),w.jsx("p",{className:"px-2 py-0.5 rounded-md text-[11px] font-semibold bg-[#10ac84]/15 text-[#10ac84]",children:d})]}),w.jsx("p",{className:"text-sm text-slate-600 mt-1 line-clamp-3",children:u.summary})]})}),!!n.length&&w.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:n.map(f=>w.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[11px] font-semibold bg-[#0abde3]/15 text-[#0abde3]",children:["#",f]},f))}),w.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 justify-center",children:[w.jsxs(Es,{to:`/game/${u.id}`,className:"btn-action-primary relative group hover:scale-110 transition","aria-label":"Voir la fiche",children:[w.jsx(wS,{className:"h-6 w-6"}),w.jsx("span",{className:`absolute bottom-full mb-1 left-1/2 -translate-x-1/2 \r
                     bg-gray-800 text-white text-xs rounded px-2 py-1 \r
                     opacity-0 group-hover:opacity-100 transition-opacity \r
                     pointer-events-none whitespace-nowrap shadow-lg`,children:"Voir la fiche"})]}),o&&w.jsxs("a",{href:l,download:!0,className:"btn-action relative group hover:scale-110 transition","aria-label":"Tlcharger le PDF",children:[w.jsx(xS,{className:"h-6 w-6"}),w.jsx("span",{className:`absolute bottom-full mb-1 left-1/2 -translate-x-1/2 \r
                       bg-gray-800 text-white text-xs rounded px-2 py-1 \r
                       opacity-0 group-hover:opacity-100 transition-opacity \r
                       pointer-events-none whitespace-nowrap shadow-lg`,children:"Tlcharger le PDF"})]}),s(h)&&w.jsxs("a",{href:h,target:"_blank",rel:"noreferrer",className:"btn-action relative group hover:scale-110 transition","aria-label":"Voir la vido dexplication",children:[w.jsx(_S,{className:"h-6 w-6"}),w.jsx("span",{className:`absolute bottom-full mb-1 left-1/2 -translate-x-1/2 \r
                       bg-gray-800 text-white text-xs rounded px-2 py-1 \r
                       opacity-0 group-hover:opacity-100 transition-opacity \r
                       pointer-events-none whitespace-nowrap shadow-lg`,children:"Voir la vido"})]}),w.jsxs("a",{href:a,target:"_blank",rel:"noreferrer",className:"btn-action relative group hover:scale-110 transition","aria-label":"Aller au site officiel",children:[w.jsx(ES,{className:"h-6 w-6"}),w.jsx("span",{className:`absolute bottom-full mb-1 left-1/2 -translate-x-1/2 \r
                     bg-gray-800 text-white text-xs rounded px-2 py-1 \r
                     opacity-0 group-hover:opacity-100 transition-opacity \r
                     pointer-events-none whitespace-nowrap shadow-lg`,children:"Site officiel"})]})]})]})]})}function TS({page:u,pageCount:t,onPage:n}){if(t<=1)return null;const s=MS(u,t);return w.jsxs("nav",{className:"flex items-center justify-between mt-4","aria-label":"Pagination",children:[w.jsx("button",{onClick:()=>n(Math.max(1,u-1)),disabled:u<=1,className:"px-3 py-2 rounded-md text-sm font-medium border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50",children:" Prcdent"}),w.jsx("div",{className:"flex items-center gap-1",children:s.map((a,o)=>a===""?w.jsx("span",{className:"px-2 text-slate-500",children:""},`dots-${o}`):w.jsx("button",{onClick:()=>n(a),className:`h-9 min-w-9 px-3 rounded-lg text-sm font-medium border ${a===u?"bg-[#0abde3] text-white border-[#0abde3]":"bg-white text-slate-800 border-slate-300 hover:bg-slate-50"}`,children:a},a))}),w.jsx("button",{onClick:()=>n(Math.min(t,u+1)),disabled:u>=t,className:"px-3 py-2 rounded-md text-sm font-medium border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50",children:"Suivant "})]})}function MS(u,t){const s=[...new Set([1,t,u,u-1,u+1,2,t-1])].filter(o=>o>=1&&o<=t).sort((o,l)=>o-l),a=[];for(let o=0;o<s.length;o++)a.push(s[o]),o<s.length-1&&s[o+1]-s[o]>1&&a.push("");return a}function Th(u){return(u||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const Mh=12;function RS(){const[u,t]=UA(),[n,s]=L.useState([]),[a,o]=L.useState(""),[l,h]=L.useState([]),[d,f]=L.useState(1);L.useEffect(()=>{fetch(Yi("/data/games.json")).then(x=>x.json()).then(x=>{const T=new Map;for(const M of Array.isArray(x)?x:[])M?.id&&T.set(String(M.id),M);s([...T.values()])}).catch(()=>s([]))},[]),L.useEffect(()=>{const x=u.get("q")??"",T=(u.get("tags")??"").split(",").map(O=>O.trim()).filter(Boolean),M=parseInt(u.get("page")??"1",10)||1;a!==x&&o(x),DS(l,T)||h(T),d!==M&&f(M)},[u]);const g=L.useMemo(()=>{const x=new Set;for(const T of n)(T.tags||[]).forEach(M=>x.add(M));return Array.from(x).sort((T,M)=>T.localeCompare(M,"fr"))},[n]),b=L.useMemo(()=>{const x=Th(a);return n.filter(T=>{const M=Th(T.name).includes(x)||Th(T.summary||"").includes(x),O=T.tags||[],B=l.every(j=>O.includes(j));return M&&B})},[a,l,n]),y=Math.max(1,Math.ceil(b.length/Mh)),A=Math.min(Math.max(1,d),y),E=L.useMemo(()=>{const x=(A-1)*Mh;return b.slice(x,x+Mh)},[b,A]);L.useEffect(()=>f(1),[a,l]),L.useEffect(()=>{const x={};a&&(x.q=a),l.length&&(x.tags=l.join(",")),A>1&&(x.page=String(A)),t(x,{replace:!0})},[a,l,A,t]),L.useEffect(()=>{const x=T=>{(T.ctrlKey||T.metaKey)&&T.key.toLowerCase()==="k"&&(T.preventDefault(),document.querySelector('input[aria-label="Rechercher un jeu"]')?.focus())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[]);const S=x=>h(T=>T.includes(x)?T.filter(M=>M!==x):[...T,x]),C=()=>h([]);return w.jsxs("div",{className:"space-y-6",children:[w.jsx(yS,{q:a,onChange:o,total:n.length,filtered:b.length}),w.jsx(vS,{allTags:g,active:l,onToggle:S,onClear:C}),w.jsx("section",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(x=>w.jsx(CS,{game:x},x.id))}),w.jsxs("div",{className:"text-xs text-slate-500",children:["Affichs: ",E.length," / Page ",A," sur ",y]}),b.length===0&&w.jsxs("div",{className:"text-slate-600 text-sm",children:["Aucun rsultat pour  ",a," ",l.length?` avec les tags ${l.join(", ")}`:"","."]}),w.jsx(TS,{page:A,pageCount:y,onPage:f})]})}function DS(u,t){if(u.length!==t.length)return!1;const n=[...u].sort(),s=[...t].sort();for(let a=0;a<n.length;a++)if(n[a]!==s[a])return!1;return!0}const Be=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Hh=[.001,0,0,.001,0,0],Rh=1.35,an={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},In={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},jr="pdfjs_internal_editor_",yt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},$0={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Me={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},kr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Xr={ERRORS:0,WARNINGS:1,INFOS:5},wa={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Al={moveTo:0,lineTo:1,curveTo:2,closePath:3},K0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yl=Xr.WARNINGS;function LS(u){Number.isInteger(u)&&(Yl=u)}function NS(){return Yl}function $l(u){Yl>=Xr.INFOS&&console.info(`Info: ${u}`)}function vt(u){Yl>=Xr.WARNINGS&&console.warn(`Warning: ${u}`)}function Yt(u){throw new Error(u)}function Lt(u,t){u||Yt(t)}function OS(u){switch(u?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function od(u,t=null,n=null){if(!u)return null;if(n&&typeof u=="string"&&(n.addDefaultProtocol&&u.startsWith("www.")&&u.match(/\./g)?.length>=2&&(u=`http://${u}`),n.tryConvertEncoding))try{u=zS(u)}catch{}const s=t?URL.parse(u,t):URL.parse(u);return OS(s)?s:null}function ld(u,t,n=!1){const s=URL.parse(u);return s?(s.hash=t,s.href):n&&od(u,"http://example.com")?u.split("#",1)[0]+`${t?`#${t}`:""}`:""}function wt(u,t,n,s=!1){return Object.defineProperty(u,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const _s=(function(){function t(n,s){this.message=n,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Vm extends _s{constructor(t,n){super(t,"PasswordException"),this.code=n}}class Dh extends _s{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class Ul extends _s{constructor(t){super(t,"InvalidPDFException")}}class zr extends _s{constructor(t,n,s){super(t,"ResponseException"),this.status=n,this.missing=s}}class kS extends _s{constructor(t){super(t,"FormatError")}}class fi extends _s{constructor(t){super(t,"AbortException")}}function W0(u){(typeof u!="object"||u?.length===void 0)&&Yt("Invalid argument for bytesToString");const t=u.length,n=8192;if(t<n)return String.fromCharCode.apply(null,u);const s=[];for(let a=0;a<t;a+=n){const o=Math.min(a+n,t),l=u.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Yr(u){typeof u!="string"&&Yt("Invalid argument for stringToBytes");const t=u.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=u.charCodeAt(s)&255;return n}function BS(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function PS(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function jS(){try{return new Function(""),!0}catch{return!1}}class xe{static get isLittleEndian(){return wt(this,"isLittleEndian",PS())}static get isEvalSupported(){return wt(this,"isEvalSupported",jS())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:n}=navigator;return wt(this,"platform",{isAndroid:n.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return wt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Lh=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));class it{static makeHexColor(t,n,s){return`#${Lh[t]}${Lh[n]}${Lh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,n){let s;t[0]?(t[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[3],n[3]*=t[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,t[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static multiplyByDOMMatrix(t,n){return[t[0]*n.a+t[2]*n.b,t[1]*n.a+t[3]*n.b,t[0]*n.c+t[2]*n.d,t[1]*n.c+t[3]*n.d,t[0]*n.e+t[2]*n.f+t[4],t[1]*n.e+t[3]*n.f+t[5]]}static applyTransform(t,n,s=0){const a=t[s],o=t[s+1];t[s]=a*n[0]+o*n[2]+n[4],t[s+1]=a*n[1]+o*n[3]+n[5]}static applyTransformToBezier(t,n,s=0){const a=n[0],o=n[1],l=n[2],h=n[3],d=n[4],f=n[5];for(let g=0;g<6;g+=2){const b=t[s+g],y=t[s+g+1];t[s+g]=b*a+y*l+d,t[s+g+1]=b*o+y*h+f}}static applyInverseTransform(t,n){const s=t[0],a=t[1],o=n[0]*n[3]-n[1]*n[2];t[0]=(s*n[3]-a*n[2]+n[2]*n[5]-n[4]*n[3])/o,t[1]=(-s*n[1]+a*n[0]+n[4]*n[1]-n[5]*n[0])/o}static axialAlignedBoundingBox(t,n,s){const a=n[0],o=n[1],l=n[2],h=n[3],d=n[4],f=n[5],g=t[0],b=t[1],y=t[2],A=t[3];let E=a*g+d,S=E,C=a*y+d,x=C,T=h*b+f,M=T,O=h*A+f,B=O;if(o!==0||l!==0){const j=o*g,P=o*y,I=l*b,X=l*A;E+=I,x+=I,C+=X,S+=X,T+=j,B+=j,O+=P,M+=P}s[0]=Math.min(s[0],E,C,S,x),s[1]=Math.min(s[1],T,O,M,B),s[2]=Math.max(s[2],E,C,S,x),s[3]=Math.max(s[3],T,O,M,B)}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t,n){const s=t[0],a=t[1],o=t[2],l=t[3],h=s**2+a**2,d=s*o+a*l,f=o**2+l**2,g=(h+f)/2,b=Math.sqrt(g**2-(h*f-d**2));n[0]=Math.sqrt(g+b||1),n[1]=Math.sqrt(g-b||1)}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const s=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,n,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],n)}static rectBoundingBox(t,n,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],n,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],n,a)}static#t(t,n,s,a,o,l,h,d,f,g){if(f<=0||f>=1)return;const b=1-f,y=f*f,A=y*f,E=b*(b*(b*t+3*f*n)+3*y*s)+A*a,S=b*(b*(b*o+3*f*l)+3*y*h)+A*d;g[0]=Math.min(g[0],E),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],E),g[3]=Math.max(g[3],S)}static#e(t,n,s,a,o,l,h,d,f,g,b,y){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,n,s,a,o,l,h,d,-b/g,y);return}const A=g**2-4*b*f;if(A<0)return;const E=Math.sqrt(A),S=2*f;this.#t(t,n,s,a,o,l,h,d,(-g+E)/S,y),this.#t(t,n,s,a,o,l,h,d,(-g-E)/S,y)}static bezierBoundingBox(t,n,s,a,o,l,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],n,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],n,d),this.#e(t,s,o,h,n,a,l,d,3*(-t+3*(s-o)+h),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,h,n,a,l,d,3*(-n+3*(a-l)+d),6*(n-2*a+l),3*(a-n),f)}}function zS(u){return decodeURIComponent(escape(u))}let Nh=null,qm=null;function Q0(u){return Nh||(Nh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qm=new Map([["","t"]])),u.replaceAll(Nh,(t,n,s)=>n?n.normalize("NFKC"):qm.get(s))}function cd(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const u=new Uint8Array(32);return crypto.getRandomValues(u),W0(u)}const ud="pdfjs_internal_id_";function FS(u,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,a,...o]=n;if(!u(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let h=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;h=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Le(u,t,n){return Math.min(Math.max(u,t),n)}function Z0(u){return Uint8Array.prototype.toBase64?u.toBase64():btoa(W0(u))}function US(u){return Uint8Array.fromBase64?Uint8Array.fromBase64(u):Yr(atob(u))}typeof Promise.try!="function"&&(Promise.try=function(u,...t){return new Promise(n=>{n(u(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(u){return u.reduce((t,n)=>t+n,0)});class Fr{static textContent(t){const n=[],s={items:n,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if(Fr.shouldBuildText(h))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&n.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class hd{static setupStorage(t,n,s,a,o){const l=a.getValue(n,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(n,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const h of s.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(n,{value:f})});break}}static setAttributes({html:t,element:n,storage:s=null,intent:a,linkService:o}){const{attributes:l}=n,h=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,n,s)}static render(t){const n=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const h=o!=="richText",d=t.div;if(d.append(l),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=b}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const b=document.createTextNode(a.value);l.append(b),h&&Fr.shouldBuildText(a.name)&&f.push(b)}return{textDivs:f}}const g=[[a,-1,l]];for(;g.length>0;){const[b,y,A]=g.at(-1);if(y+1===b.children.length){g.pop();continue}const E=b.children[++g.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const x=document.createTextNode(E.value);f.push(x),A.append(x);continue}const C=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(A.append(C),E.attributes&&this.setAttributes({html:C,element:E,storage:n,intent:o,linkService:s}),E.children?.length>0)g.push([E,-1,C]);else if(E.value){const x=document.createTextNode(E.value);h&&Fr.shouldBuildText(S)&&f.push(x),C.append(x)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const ci="http://www.w3.org/2000/svg";class Ss{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ma(u,t="text"){if(Lr(u,document.baseURI)){const n=await fetch(u);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const a=new XMLHttpRequest;a.open("GET",u,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(a.response);return}n(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class $r{constructor({viewBox:t,userUnit:n,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=n;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,b,y,A;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,b=0,y=0,A=1;break;case 90:g=0,b=1,y=1,A=0;break;case 270:g=0,b=-1,y=-1,A=0;break;case 0:g=1,b=0,y=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(y=-y,A=-A);let E,S,C,x;g===0?(E=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+l,C=(t[3]-t[1])*s,x=(t[2]-t[0])*s):(E=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+l,C=(t[2]-t[0])*s,x=(t[3]-t[1])*s),this.transform=[g*s,b*s,y*s,A*s,E-g*s*d-y*s*f,S-b*s*d-A*s*f],this.width=C,this.height=x}get rawDims(){const t=this.viewBox;return wt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new $r({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,n){const s=[t,n];return it.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const n=[t[0],t[1]];it.applyTransform(n,this.transform);const s=[t[2],t[3]];return it.applyTransform(s,this.transform),[n[0],n[1],s[0],s[1]]}convertToPdfPoint(t,n){const s=[t,n];return it.applyInverseTransform(s,this.transform),s}}class Kl extends _s{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function Kr(u){const t=u.length;let n=0;for(;n<t&&u[n].trim()==="";)n++;return u.substring(n,n+5).toLowerCase()==="data:"}function Wl(u){return typeof u=="string"&&/\.pdf$/i.test(u)}function J0(u){return[u]=u.split(/[#?]/,1),u.substring(u.lastIndexOf("/")+1)}function tb(u,t="document.pdf"){if(typeof u!="string")return t;if(Kr(u))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(u);if(!s)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const h=Array.from(s.searchParams.values()).reverse();for(const f of h)if(o.test(f))return a(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class Xm{started=Object.create(null);times=[];time(t){t in this.started&&vt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||vt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(n)} ${o-a}ms
`);return t.join("")}}function Lr(u,t){const n=t?URL.parse(u,t):URL.parse(u);return n?.protocol==="http:"||n?.protocol==="https:"}function ln(u){u.preventDefault()}function ne(u){u.preventDefault(),u.stopPropagation()}function HS(u){console.log("Deprecated API usage: "+u)}class Hl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const s=parseInt(n[1],10);let a=parseInt(n[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(n[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(n[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(n[6],10);d=d>=0&&d<=59?d:0;const f=n[7]||"Z";let g=parseInt(n[8],10);g=g>=0&&g<=23?g:0;let b=parseInt(n[9],10)||0;return b=b>=0&&b<=59?b:0,f==="-"?(l+=g,h+=b):f==="+"&&(l-=g,h-=b),new Date(Date.UTC(s,a,o,l,h,d))}}function eb(u,{scale:t=1,rotation:n=0}){const{width:s,height:a}=u.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new $r({viewBox:o,userUnit:1,scale:t,rotation:n})}function Ra(u){if(u.startsWith("#")){const t=parseInt(u.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return u.startsWith("rgb(")?u.slice(4,-1).split(",").map(t=>parseInt(t)):u.startsWith("rgba(")?u.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(vt(`Not a valid color format: "${u}"`),[0,0,0])}function IS(u){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of u.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;u.set(n,Ra(s))}t.remove()}function ee(u){const{a:t,b:n,c:s,d:a,e:o,f:l}=u.getTransform();return[t,n,s,a,o,l]}function jn(u){const{a:t,b:n,c:s,d:a,e:o,f:l}=u.getTransform().invertSelf();return[t,n,s,a,o,l]}function $i(u,t,n=!1,s=!0){if(t instanceof $r){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=u,h=xe.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,g=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,b=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!n||t.rotation%180===0?(l.width=g,l.height=b):(l.width=b,l.height=g)}s&&u.setAttribute("data-main-rotation",t.rotation)}class Rn{constructor(){const{pixelRatio:t}=Rn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,s,a,o=-1){let l=1/0,h=1/0,d=1/0;s=Rn.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*n))),a!==-1&&(h=a/t,d=a/n);const f=Math.min(l,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,n){if(n>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return t>0?Math.min(t,s):s}return t}}const Il=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class GS{static get isDarkMode(){return wt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class nb{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:n}=t;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),wt(this,"commentForegroundColor",Ra(s))}}function ib(u,t,n,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return u=Math.round(u*s+a),t=Math.round(t*s+a),n=Math.round(n*s+a),[u,t,n]}function Ym(u,t){const n=u[0]/255,s=u[1]/255,a=u[2]/255,o=Math.max(n,s,a),l=Math.min(n,s,a),h=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=h<.5?d/(o+l):d/(2-o-l),o){case n:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-n)/d+2)*60;break;case a:t[0]=((n-s)/d+4)*60;break}}t[2]=h}function Ih(u,t){const n=u[0],s=u[1],a=u[2],o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(n/60%2-1)),h=a-o/2;switch(Math.floor(n/60)){case 0:t[0]=o+h,t[1]=l+h,t[2]=h;break;case 1:t[0]=l+h,t[1]=o+h,t[2]=h;break;case 2:t[0]=h,t[1]=o+h,t[2]=l+h;break;case 3:t[0]=h,t[1]=l+h,t[2]=o+h;break;case 4:t[0]=l+h,t[1]=h,t[2]=o+h;break;case 5:case 6:t[0]=o+h,t[1]=h,t[2]=l+h;break}}function $m(u){return u<=.03928?u/12.92:((u+.055)/1.055)**2.4}function Km(u,t,n){Ih(u,n),n.map($m);const s=.2126*n[0]+.7152*n[1]+.0722*n[2];Ih(t,n),n.map($m);const a=.2126*n[0]+.7152*n[1]+.0722*n[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const Wm=new Map;function sb(u,t){const n=u[0]+u[1]*256+u[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Wm.get(n);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);Ym(u,l);const h=a.subarray(6,9);Ym(t,h);const d=h[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Km(l,h,o)<f){let g,b;d?(g=l[2],b=1):(g=0,b=l[2]);const y=.005;for(;b-g>y;){const A=l[2]=(g+b)/2;d===Km(l,h,o)<f?g=A:b=A}l[2]=d?b:g}return Ih(l,o),s=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Wm.set(n,s),s}function dd({html:u,dir:t,className:n},s){const a=document.createDocumentFragment();if(typeof u=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=u.split(/(?:\r\n?|\n)/);for(let h=0,d=l.length;h<d;++h){const f=l[h];o.append(document.createTextNode(f)),h<d-1&&o.append(document.createElement("br"))}a.append(o)}else hd.render({xfaHtml:u,div:a,intent:"richText"});a.firstChild.classList.add("richText",n),s.append(a)}class Br{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,Br.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(t.addEventListener("contextmenu",ln,{signal:n}),t.addEventListener("pointerdown",Br.#l,{signal:n}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ne(t)}#h(t){this.#i._focusEventsAllowed=!0,ne(t)}#f(t){const n=this.#i._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",ln,{signal:n}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:n}=this.#i,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Br.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{n.delete()},{signal:n._signal}),this.#n.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#f(n),this.#n.append(n,this.#m),this.#r=t}addComment(t,n=null){if(this.#s)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#a=this.#m;n?(this.#n.insertBefore(s,n),this.#n.insertBefore(a,n)):this.#n.append(s,a),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const n=t.renderButton();this.#f(n),this.#n.append(n,this.#m)}async addEditSignatureButton(t){const n=this.#o=await t.renderEditButton(this.#i);this.#f(n),this.#n.append(n,this.#m)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,n){switch(t){case"colorPicker":this.addColorPicker(n);break;case"altText":await this.addAltText(n);break;case"editSignature":await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(n);break}}async addButtonBefore(t,n,s){const a=this.#n.querySelector(s);a&&t==="comment"&&this.addComment(n,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class VS{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const n=this.#i._signal;n instanceof AbortSignal&&!n.aborted&&t.addEventListener("contextmenu",ln,{signal:n});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,n){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const h=o.x+(n?o.width:0);if(l>s){a=h,s=l;continue}n?h>a&&(a=h):h<a&&(a=h)}return[n?1-a:a,s]}show(t,n,s){const[a,o]=this.#r(n,s),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,n,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",n);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const h=this.#i._signal;h instanceof AbortSignal&&!h.aborted&&(o.addEventListener("contextmenu",ln,{signal:h}),o.addEventListener("click",a,{signal:h})),this.#t.append(o)}}function ab(u,t,n){for(const s of n)t.addEventListener(s,u[s].bind(u))}class qS{#t=0;get id(){return`${jr}${this.#t++}`}}class fd{#t=cd();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",o)}async#n(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof n=="string"?(s.url=n,a=await Ma(n,"blob")):n instanceof File?a=s.file=n:n instanceof Blob&&(a=n),a.type==="image/svg+xml"){const o=fd._isSVGFittingCanvas,l=new FileReader,h=new Image,d=new Promise((f,g)=>{h.onload=()=>{s.bitmap=h,s.isSvg=!0,f()},l.onload=async()=>{const b=s.svgUrl=l.result;h.src=await o?`${b}#svgView(preserveAspectRatio(none))`:b},h.onerror=l.onerror=g});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){vt(a),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:n,name:s,size:a,type:o}=t;return this.#n(`${n}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,n){const s=await n;return this.#n(t,s)}async getFromId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(n.width,n.height);return a.getContext("2d").drawImage(n,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const n=this.#i.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=a.convertToBlob()}s.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class XS{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:n,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:n,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){h&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#n];t(),n?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#n];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#t[n].type!==t){this.#t.splice(n+1,this.#n-n),this.#n=n;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Wr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=xe.platform;for(const[s,a,o={}]of t)for(const l of s){const h=l.startsWith("mac+");n&&h?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!n&&!h&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(this.#t(n));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:h=null}}=s;h&&!h(t,n)||(a.bind(t,...l,n)(),o||ne(n))}}class pd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return IS(t),wt(this,"_colors",t)}convert(t){const n=Ra(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,a]of this._colors)if(a.every((o,l)=>o===n[l]))return pd._colorsMapping.get(s);return n}getHexCode(t){const n=this._colors.get(t);return n?it.makeHexColor(...n):t}}class pi{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new XS;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#_=null;#w=null;#A=null;#T=null;#x=!1;#E=null;#D=new qS;#M=!1;#R=!1;#j=!1;#N=null;#k=null;#z=null;#B=null;#V=null;#C=yt.NONE;#S=new Set;#O=null;#F=null;#H=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#I=[0,0];#P=null;#q=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=pi.prototype,n=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new Wr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#q.contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(t,n,s,a,o,l,h,d,f,g,b,y,A,E,S,C){const x=this._signal=this.#t.signal;this.#q=t,this.#Z=n,this.#J=s,this.#s=a,this.#l=o,this.#F=l,this.#X=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:x}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),h._on("setpreference",this.onSetPreference.bind(this),{signal:x}),h._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:x}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:x}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#_=d.filterFactory,this.#H=f,this.#T=g||null,this.#b=b,this.#v=y,this.#y=A,this.#V=E||null,this.viewParameters={realScale:Ss.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=C!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#E?.hide(),this.#E=null,this.#z?.destroy(),this.#z=null,this.#i=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return wt(this,"hcmFilter",this.#H?this.#_.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return wt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return wt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(n=>n.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return wt(this,"highlightColors",null);const n=new Map,s=!!this.#H;for(const[a,o]of t){const l=a.endsWith("_HCM");if(s&&l){n.set(a.replace("_HCM",""),o);continue}!s&&!l&&n.set(a,o)}return wt(this,"highlightColors",n)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const n=this.highlightColorNames.get(t);return this._highlightColors.get(n)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#z=t}editAltText(t,n=!1){this.#s?.editAltText(this,t,n)}hasCommentManager(){return!!this.#l}editComment(t,n,s,a){this.#l?.showDialog(this,t,n,s,a)}selectComment(t,n){this.#r.get(t)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,n,s=void 0){this.#l?.toggleCommentPopup(t,n,s)}makeCommentColor(t,n){return t&&this.#l?.makeCommentColor(t,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:n,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),n())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#F?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#F}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=n;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,n){for(const s of this.#r.values()){const{x:a,y:o,width:l,height:h}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&n>=o&&n<=o+h)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Ss.PDF_TO_CSS_UNITS;for(const n of this.#g)n.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",n=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:h}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),b=this.getSelectionBoxes(g);if(!b)return;s.empty();const y=this.#tt(g),A=this.#C===yt.NONE,E=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:b,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:h,text:d});A&&this.showAllEditors("highlight",!0,!0),n&&S?.editComment()};if(A){this.switchToMode(yt.HIGHLIGHT,E);return}E()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#E||=new VS(this),this.#E.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const n=`${jr}${t}`,s=this.#a.getRawValue(n);return s&&this.#a.remove(n),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,n=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),n?s.setAttribute("data-l10n-args",JSON.stringify(n)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#E?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#O)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#O&&(this.#E?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#O=n,this.#L({hasSelectedText:!0}),!(this.#C!==yt.HIGHLIGHT&&this.#C!==yt.NONE)&&(this.#C===yt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===yt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#R){const l=new AbortController,h=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===yt.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#S)if(n.div.contains(t)){this.#k=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,n]=this.#k;this.#k=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#N?.abort(),this.#N=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of this.#S){const a=s.serialize(!0);a&&n.push(a)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){vt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const f=await a.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){vt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==yt.NONE&&!this.isEditorHandlingKeyboard&&pi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===yt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Rt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#L({isEditing:this.#C!==yt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const n of this.#u)this.#G(n.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,n=null,s=!1,a=!1,o=!1){if(this.#C!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===yt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===yt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===yt.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===yt.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,h=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:g,deleted:b}=d;f&&l.add(f),g&&!b&&h.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:g,contentsObj:b}=d;g&&b?.str&&!l.has(f)&&!this.#m.has(f)&&h.push(d)}this.#l?.showSidebar(h)}if(!n){s&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const l of this.#n.values())l.uid===n?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,n){if(this.#u){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor(n);return;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const s of this.#S)s.updateParams(t,n);else for(const s of this.#u)s.updateDefaultParams(t,n)}}showAllEditors(t,n,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(n);(this.#Y?.get(Rt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#G([[Rt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#j!==t){this.#j=t;for(const n of this.#r.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const n of this.#r.values())t.push(n.enable());await Promise.all(t);for(const n of this.#n.values())n.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const n of this.#n.values())n.pageIndex===t&&(yield n)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const n=this.#r.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const n of this.#S)n!==t&&n.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...this.#S],s=()=>{this._editorUndoBar?.show(a,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},a=()=>{for(const o of n)this.#st(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const n of this.#S)n.unselect();this.#S.clear();for(const n of t)n.isEmpty()||(this.#S.add(n),n.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==yt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#I[0]+=t,this.#I[1]+=n;const[a,o]=this.#I,l=[...this.#S],h=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#I[0]=this.#I[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},h);for(const d of l)d.translateInPage(t,n),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let n=!1;for(const[{x:a,y:o,pageIndex:l},h]of t)h.newX=a,h.newY=o,h.newPageIndex=l,n||=a!==h.savedX||o!==h.savedY||l!==h.savedPageIndex;if(!n)return!1;const s=(a,o,l,h)=>{if(this.#n.has(a.id)){const d=this.#r.get(h);d?a._setParentAndPosition(d,o,l):(a.pageIndex=h,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:h}]of t)s(a,o,l,h)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:h}]of t)s(a,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#p)for(const s of this.#p.keys())s.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==yt.NONE}get imageManager(){return wt(this,"imageManager",new fd)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let f=0,g=n.rangeCount;f<g;f++)if(!t.contains(n.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,g,b,y)=>({x:(g-a)/l,y:1-(f+b-s)/o,width:y/l,height:b/o});break;case"180":h=(f,g,b,y)=>({x:1-(f+b-s)/o,y:1-(g+y-a)/l,width:b/o,height:y/l});break;case"270":h=(f,g,b,y)=>({x:1-(g+y-a)/l,y:(f-s)/o,width:y/l,height:b/o});break;default:h=(f,g,b,y)=>({x:(f-s)/o,y:(g-a)/l,width:b/o,height:y/l});break}const d=[];for(let f=0,g=n.rangeCount;f<g;f++){const b=n.getRangeAt(f);if(!b.collapsed)for(const{x:y,y:A,width:E,height:S}of b.getClientRects())E===0||S===0||d.push(h(y,A,E,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#o||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const n=this.#o?.get(t.data.id);if(!n)return;const s=this.#a.getRawValue(n);s&&(this.#C===yt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,n,s){const a=this.#B?.get(t);a&&(a.setCanvas(n,s),this.#B.delete(t))}addMissingCanvas(t,n){(this.#B||=new Map).set(t,n)}}class Un{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Un.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Un._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#n=document.createElement("span");t.append(n),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Un.#f.missing),n.setAttribute("data-l10n-id",Un.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",ln,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Un._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#c.div.append(n)}this.#o.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#l===n&&(n=this.#d),{altText:n,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===n)&&(o||(this.#t=t,this.#e=n),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Un.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Un.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#r;if(!n){this.#r=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#c.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class Sl{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:n,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:h}=this.#n.parent.boundingClientRect;return[(t-a)/l,(n+s-o)/h]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:n}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=n)}#d(t,n){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",n?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",ln,{signal:s}),n&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,ne(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,ne(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const n=this.commentPopupPositionInLayer;let s,a;if(n)[s,a]=n;else{[s,a]=this.#n.commentButtonPosition;const{width:g,height:b,x:y,y:A}=this.#n;s=y+s*g,a=A+a*b}const o=this.#n.parent.boundingClientRect,{x:l,y:h,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+s*d,h+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,n=null){this.#r=t,this.data=t,this.#o=null,this.#s=n}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Qr{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:h}){this.#t=t,this.#i=s,this.#n=n,this.#r=a,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Rn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,h={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ne(f),d(f))},h),l.addEventListener("pointerup",d,h),l.addEventListener("pointercancel",d,h);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const h=this.#p.bind(this);o.addEventListener("touchend",h,l),o.addEventListener("touchcancel",h,l),l.capture=!0,o.addEventListener("pointerdown",ne,l),o.addEventListener("pointermove",ne,l),o.addEventListener("pointercancel",ne,l),o.addEventListener("pointerup",ne,l),this.#r?.()}if(ne(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ne(t);let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:a,screenY:o}=n,{screenX:l,screenY:h}=s,d=this.#l,{touch0X:f,touch0Y:g,touch1X:b,touch1Y:y}=d,A=b-f,E=y-g,S=l-a,C=h-o,x=Math.hypot(S,C)||1,T=Math.hypot(A,E)||1;if(!this.#e&&Math.abs(T-x)<=Qr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=h,!this.#e){this.#e=!0;return}const M=[(a+l)/2,(o+h)/2];this.#s?.(M,T,x)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(ne(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ht{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#b=!1;#v=!1;#y=null;#_=0;#w=0;#A=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#E=ht._zIndex++;static _borderLineWidth=-1;static _colorManager=new pd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ht.prototype._resizeWithKeyboard,n=pi.TRANSLATE_SMALL,s=pi.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new Wr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ht.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new YS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(ht._l10n??=t,ht._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ht._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ht._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){Yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(t){this.#x=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(n+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,n){const[s,a]=this.parentDimensions;this.setAt(t*s,n*a,this.width*s,this.height*a),this._onTranslated()}#D([t,n],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,n){this.#D(this.parentDimensions,t,n)}translateInPage(t,n){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,n){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=n/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:h}=this;const[d,f]=this.getBaseTranslation();l+=d,h+=f;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(l,h),s.scrollIntoView({block:"nearest"})}_onTranslating(t,n){}_onTranslated(t,n){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:s}=ht,a=s/t,o=s/n;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:n},pageDimensions:[s,a]}=this;let{x:o,y:l,width:h,height:d}=this;if(h*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=Le(o,0,s-h),l=Le(l,0,a-d);break;case 90:o=Le(o,0,s-d),l=Le(l,h,a);break;case 180:o=Le(o,h,s),l=Le(l,d,a);break;case 270:o=Le(o,d,s),l=Le(l,0,a-h);break}this.x=o/=s,this.y=l/=a;const[f,g]=this.getBaseTranslation();o+=f,l+=g,n.left=`${(100*o).toFixed(2)}%`,n.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#M(t,n,s){switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return ht.#M(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return ht.#M(t,n,360-this.parentRotation)}#R(t){switch(t){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,s]}=this;return[n*t,s*t]}setDims(){const{div:{style:t},width:n,height:s}=this;t.width=`${(100*n).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#j(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#N.bind(this,s),{signal:n}),a.addEventListener("contextmenu",ln,{signal:n}),a.tabIndex=-1}this.div.prepend(this.#c)}#N(t,n){n.preventDefault();const{isMac:s}=xe.platform;if(n.button!==0||n.ctrlKey&&s)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ne,{passive:!1,signal:l}),window.addEventListener("contextmenu",ln,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#z()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#k(t,n,s,a){this.width=s,this.height=a,this.x=t,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#z(){if(!this.#d)return;const{savedX:t,savedY:n,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,h=this.width,d=this.height;o===t&&l===n&&h===s&&d===a||this.addCommands({cmd:this.#k.bind(this,o,l,h,d),undo:this.#k.bind(this,t,n,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,n){const[s,a]=this.parentDimensions,o=this.x,l=this.y,h=this.width,d=this.height,f=ht.MIN_SIZE/s,g=ht.MIN_SIZE/a,b=this.#R(this.rotation),y=(R,G)=>[b[0]*R+b[2]*G,b[1]*R+b[3]*G],A=this.#R(360-this.rotation),E=(R,G)=>[A[0]*R+A[2]*G,A[1]*R+A[3]*G];let S,C,x=!1,T=!1;switch(t){case"topLeft":x=!0,S=(R,G)=>[0,0],C=(R,G)=>[R,G];break;case"topMiddle":S=(R,G)=>[R/2,0],C=(R,G)=>[R/2,G];break;case"topRight":x=!0,S=(R,G)=>[R,0],C=(R,G)=>[0,G];break;case"middleRight":T=!0,S=(R,G)=>[R,G/2],C=(R,G)=>[0,G/2];break;case"bottomRight":x=!0,S=(R,G)=>[R,G],C=(R,G)=>[0,0];break;case"bottomMiddle":S=(R,G)=>[R/2,G],C=(R,G)=>[R/2,0];break;case"bottomLeft":x=!0,S=(R,G)=>[0,G],C=(R,G)=>[R,0];break;case"middleLeft":T=!0,S=(R,G)=>[0,G/2],C=(R,G)=>[R,G/2];break}const M=S(h,d),O=C(h,d);let B=y(...O);const j=ht._round(o+B[0]),P=ht._round(l+B[1]);let I=1,X=1,Q,Z;if(n.fromKeyboard)({deltaX:Q,deltaY:Z}=n);else{const{screenX:R,screenY:G}=n,[J,pt]=this.#l;[Q,Z]=this.screenToPageTranslation(R-J,G-pt),this.#l[0]=R,this.#l[1]=G}if([Q,Z]=E(Q/s,Z/a),x){const R=Math.hypot(h,d);I=X=Math.max(Math.min(Math.hypot(O[0]-M[0]-Q,O[1]-M[1]-Z)/R,1/h,1/d),f/h,g/d)}else T?I=Le(Math.abs(O[0]-M[0]-Q),f,1)/h:X=Le(Math.abs(O[1]-M[1]-Z),g,1)/d;const ct=ht._round(h*I),dt=ht._round(d*X);B=y(...C(ct,dt));const at=j-B[0],et=P-B[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ct,this.height=dt,this.x=at,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Br(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[n,s]of t)await this._editToolbar.addButton(n,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Un.initialize(ht._l10n),this.#i=new Un(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Sl(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:n,date:s,deleted:a}}=this.#n;return{text:n,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Sl(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:n,richText:s}){if(!n||(this.#n||=new Sl(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Sl(this),this.#n.edit(t)}toggleComment(t,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,n)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,h=l+o+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:n}}){this.#n.data=n?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),ab(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Qr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,n,s){let o=.7*(s/n)+1-.7;if(o===1)return;const l=this.#R(this.rotation),h=(j,P)=>[l[0]*j+l[2]*P,l[1]*j+l[3]*P],[d,f]=this.parentDimensions,g=this.x,b=this.y,y=this.width,A=this.height,E=ht.MIN_SIZE/d,S=ht.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/A),E/y,S/A);const C=ht._round(y*o),x=ht._round(A*o);if(C===y&&x===A)return;this.#u||=[g,b,y,A];const T=h(y/2,A/2),M=ht._round(g+T[0]),O=ht._round(b+T[1]),B=h(C/2,x/2);this.x=M-B[0],this.y=O-B[1],this.width=C,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#z()}pointerdown(t){const{isMac:n}=xe.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#F(t);return}this.#O(t)}#O(t){const{isMac:n}=xe.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},h=f=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#O(f),s&&this._onStopDragging()};n&&(this.#_=t.clientX,this.#w=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:b,pointerId:y}=f;if(y!==this.#a){ne(f);return}const[A,E]=this.screenToPageTranslation(g-this.#_,b-this.#w);this.#_=g,this.#w=b,this._uiManager.dragSelectedEditors(A,E)},l),window.addEventListener("touchmove",ne,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&h(f),ne(f)},l));const d=f=>{if(!this.#a||this.#a===f.pointerId){h(f);return}ne(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,s){t.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,n,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,g=n/a,b=this.x*o,y=this.y*l,A=this.width*o,E=this.height*l;switch(s){case 0:return[b+f+h,l-y-g-E+d,b+f+A+h,l-y-g+d];case 90:return[b+g+h,l-y+f+d,b+g+E+h,l-y+f+A+d];case 180:return[b-f-A+h,l-y+g+d,b-f+h,l-y+g+E+d];case 270:return[b-g-E+h,l-y-f-A+d,b-g+h,l-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[s,a,o,l]=t,h=o-s,d=l-a;switch(this.rotation){case 0:return[s,n-l,h,d];case 90:return[s,n-a,d,h];case 180:return[o,n-a,h,d];case 270:return[o,n-l,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:n,date:s,opacity:a,deleted:o,richText:l},uid:h,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:n,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:n,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return n<l&&a>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,n,s){const a=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[h,d,f,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=h/o,a.y=d/l,a.width=f/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,n]}=this,[s,a,o,l]=this.getPDFRect();return[ht._round(s+(o-s)*t),ht._round(a+(l-a)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#c.children;if(!this.#e){this.#e=Array.from(n);const l=this.#Y.bind(this),h=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",ht._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const l of n){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)this.#c.append(this.#c.firstChild);else if(o>a)for(let h=0;h<o-a;h++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const h of n){const f=this.#e[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",ht._l10nResizer[f])}}this.#I(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ht._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#v?t:""}#I(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:n,fromKeyboard:!0})}#P(){this.#v=!1,this.#I(-1),this.#z()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#A||=new Map;const{action:s}=t;let a=this.#A.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(s),this.#A.size===0&&(this.#A=null)},ht._telemetryTimeout),this.#A.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class YS extends ht{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Qm=3285377520,vn=4294901760,zn=65535;class rb{constructor(t){this.h1=t?t&4294967295:Qm,this.h2=t?t&4294967295:Qm}update(t){let n,s;if(typeof t=="string"){n=new Uint8Array(t.length*2),s=0;for(let S=0,C=t.length;S<C;S++){const x=t.charCodeAt(S);x<=255?n[s++]=x:(n[s++]=x>>>8,n[s++]=x&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(n.buffer,0,a);let h=0,d=0,f=this.h1,g=this.h2;const b=3432918353,y=461845907,A=b&zn,E=y&zn;for(let S=0;S<a;S++)S&1?(h=l[S],h=h*b&vn|h*A&zn,h=h<<15|h>>>17,h=h*y&vn|h*E&zn,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*b&vn|d*A&zn,d=d<<15|d>>>17,d=d*y&vn|d*E&zn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=n[a*4+2]<<16;case 2:h^=n[a*4+1]<<8;case 1:h^=n[a*4],h=h*b&vn|h*A&zn,h=h<<15|h>>>17,h=h*y&vn|h*E&zn,a&1?f^=h:g^=h}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&vn|t*36045&zn,n=n*4283543511&vn|((n<<16|t>>>16)*2950163797&vn)>>>16,t^=n>>>1,t=t*444984403&vn|t*60499&zn,n=n*3301882366&vn|((n<<16|t>>>16)*3120437893&vn)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const Gh=Object.freeze({map:null,hash:"",transfer:void 0});class gd{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const s=this.#n.get(t);return s===void 0?n:Object.assign(n,s)}getRawValue(t){return this.#n.get(t)}remove(t){const n=this.#n.get(t);if(n!==void 0&&(n instanceof ht&&this.#i.delete(n.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof ht)return;this.onAnnotationEditor(null)}}setValue(t,n){const s=this.#n.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(n))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#n.set(t,n);a&&this.#r(),n instanceof ht&&((this.#i||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ob(this)}get serializable(){if(this.#n.size===0)return Gh;const t=new Map,n=new rb,s=[],a=Object.create(null);let o=!1;for(const[l,h]of this.#n){const d=h instanceof ht?h.serialize(!1,a):h;d&&(t.set(l,d),n.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:s}:Gh}get editorStats(){let t=null;const n=new Map;let s=0,a=0;for(const o of this.#n.values()){if(!(o instanceof ht)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:h}=l;n.has(h)||n.set(h,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[f,g]of Object.entries(l)){if(f==="type")continue;let b=d.get(f);b||(b=new Map,d.set(f,b));const y=b.get(g)??0;b.set(g,y+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,l]of n)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,n){const s=this.#i?.get(t);return s?(s.updateFromAnnotationLayer(n),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const n of this.#i.values())n.serialize()&&t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class ob extends gd{#t;constructor(t){super();const{map:n,hash:s,transfer:a}=t.serializable,o=structuredClone(n,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Yt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}}class $S{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:n,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Lt(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,h=new FontFace(a,o,l);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),s?.(t)}catch{vt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}Yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw vt(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return wt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",Be||xe.platform.isFirefox)}_queueLoadingCallback(t){function n(){for(Lt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:n,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function s(O,B){return O.charCodeAt(B)<<24|O.charCodeAt(B+1)<<16|O.charCodeAt(B+2)<<8|O.charCodeAt(B+3)&255}function a(O,B,j,P){const I=O.substring(0,B),X=O.substring(B+j);return I+P+X}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function g(O,B){if(++f>30){vt("Load test font never loaded."),B();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(g.bind(null,O,B))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,b.length,b);const E=16,S=1482184792;let C=s(y,E);for(o=0,l=b.length-3;o<l;o+=4)C=C-S+s(b,o)|0;o<b.length&&(C=C-S+s(b+"XXX",o)|0),y=a(y,E,4,BS(C));const x=`url(data:font/opentype;base64,${btoa(y)});`,T=`@font-face {font-family:"${b}";src:${x}}`;this.insertRule(T);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const O of[t.loadedName,b]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=O,M.append(B)}this._document.body.append(M),g(b,()=>{M.remove(),n.complete()})}}class KS{#t;constructor(t,n=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=n,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Z0(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const s=this.loadedName+"_path_"+n;let a;try{a=t.get(s)}catch(l){vt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[n]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function WS(u){if(u instanceof URL)return u.href;if(typeof u=="string"){if(Be)return u;const t=URL.parse(u,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function QS(u){if(Be&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return Yr(u);if(u instanceof ArrayBuffer||ArrayBuffer.isView(u)||typeof u=="object"&&!isNaN(u?.length))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function xl(u){if(typeof u!="string")return null;if(u.endsWith("/"))return u;throw new Error(`Invalid factory url: "${u}" must include trailing slash.`)}const Vh=u=>typeof u=="object"&&Number.isInteger(u?.num)&&u.num>=0&&Number.isInteger(u?.gen)&&u.gen>=0,ZS=u=>typeof u=="object"&&typeof u?.name=="string",lb=FS.bind(null,Vh,ZS);class JS{#t=new Map;#e=Promise.resolve();postMessage(t,n){const s={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,n,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){vt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,n);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(n,a)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const wl={DATA:1,ERROR:2},me={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Zm(){}function Xe(u){if(u instanceof fi||u instanceof Ul||u instanceof Vm||u instanceof zr||u instanceof Dh)return u;switch(u instanceof Error||typeof u=="object"&&u!==null||Yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),u.name){case"AbortException":return new fi(u.message);case"InvalidPDFException":return new Ul(u.message);case"PasswordException":return new Vm(u.message,u.code);case"ResponseException":return new zr(u.message,u.status,u.missing);case"UnknownErrorException":return new Dh(u.message,u.details)}return new Dh(u.message,u.toString())}class Nr{#t=new AbortController;constructor(t,n,s){this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===wl.DATA)a.resolve(t.data);else if(t.callback===wl.ERROR)a.reject(Xe(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(n,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:wl.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:wl.ERROR,callbackId:t.callbackId,reason:Xe(l)})});return}if(t.streamId){this.#i(t);return}n(t.data)}on(t,n){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=n}send(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}sendWithPromise(t,n,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:n},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,n,s,a){const o=this.streamId++,l=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:h,action:t,streamId:o,data:n,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:h,stream:me.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Lt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:h,stream:me.CANCEL,streamId:o,reason:Xe(f)}),g.promise}},s)}#i(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,h=this.actionHandler[t.action],d={enqueue(f,g=1,b){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=g,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:me.ENQUEUE,streamId:n,chunk:f},b)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:me.CLOSE,streamId:n}),delete l.streamSinks[n])},error(f){Lt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:me.ERROR,streamId:n,reason:Xe(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[n]=d,Promise.try(h,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:me.START_COMPLETE,streamId:n,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:me.START_COMPLETE,streamId:n,reason:Xe(f)})})}#n(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[n],h=this.streamSinks[n];switch(t.stream){case me.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Xe(t.reason));break;case me.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Xe(t.reason));break;case me.PULL:if(!h){o.postMessage({sourceName:s,targetName:a,stream:me.PULL_COMPLETE,streamId:n,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||Zm).then(function(){o.postMessage({sourceName:s,targetName:a,stream:me.PULL_COMPLETE,streamId:n,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:me.PULL_COMPLETE,streamId:n,reason:Xe(f)})});break;case me.ENQUEUE:if(Lt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case me.CLOSE:if(Lt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,n);break;case me.ERROR:Lt(l,"error should have stream controller"),l.controller.error(Xe(t.reason)),this.#r(l,n);break;case me.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Xe(t.reason)),this.#r(l,n);break;case me.CANCEL:if(!h)break;const d=Xe(t.reason);Promise.try(h.onCancel||Zm,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:me.CANCEL_COMPLETE,streamId:n,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:me.CANCEL_COMPLETE,streamId:n,reason:Xe(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#r(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class cb{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){Yt("Abstract method `_createCanvas` called.")}}class tx extends cb{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}class ub{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class Jm extends ub{async _fetch(t){const n=await Ma(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Yr(n)}}class hb{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,s,a,o){return"none"}destroy(t=!1){}}class ex extends hb{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#n=t,this.#r=n}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=this.#r.createElementNS(ci,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#r.createElementNS(ci,"defs"),t.append(s),s.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let b=0;b<256;b++)f[b]=d[b]/255;const g=f.join(",");return[g,g,g]}const[n,s,a]=t,o=new Array(256),l=new Array(256),h=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,l[d]=s[d]/255,h[d]=a[d]/255;return[o.join(","),l.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const n=this.#r.URL;n!==this.#r.baseURI&&(Kr(n)?vt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=ld(n,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#o.get(t);if(n)return n;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(n=this.#o.get(l),n)return this.#o.set(t,n),n;const h=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(h);this.#o.set(t,d),this.#o.set(l,d);const f=this.#p(h);return this.#g(s,a,o,f),d}addHCMFilter(t,n){const s=`${t}-${n}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!n))return o.url;const l=this.#v(t);t=it.makeHexColor(...l);const h=this.#v(n);if(n=it.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const E=A/255;d[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#n}_hcm_filter`,b=o.filter=this.#p(g);this.#g(f,f,f,b),this.#m(b);const y=(A,E)=>{const S=l[A]/255,C=h[A]/255,x=new Array(E+1);for(let T=0;T<=E;T++)x[T]=S+T/E*(C-S);return x.join(",")};return this.#g(y(0,5),y(1,5),y(2,5),b),o.url=this.#h(g),o.url}addAlphaFilter(t){let n=this.#o.get(t);if(n)return n;const[s]=this.#d([t]),a=`alpha_${s}`;if(n=this.#o.get(a),n)return this.#o.set(t,n),n;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const h=this.#p(o);return this.#b(s,h),l}addLuminosityFilter(t){let n=this.#o.get(t||"luminosity");if(n)return n;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",n=this.#o.get(a),n)return this.#o.set(t,n),n;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const h=this.#p(o);return this.#f(h),t&&this.#b(s,h),l}addHighlightHCMFilter(t,n,s,a,o){const l=`${n}-${s}-${a}-${o}`;let h=this.#c.get(t);if(h?.key===l||(h?(h.filter?.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},this.#c.set(t,h)),!n||!s))return h.url;const[d,f]=[n,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),b=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,A]=[a,o].map(this.#v.bind(this));b<g&&([g,b,y,A]=[b,g,A,y]),this.#l.style.color="";const E=(x,T,M)=>{const O=new Array(256),B=(b-g)/M,j=x/255,P=(T-x)/(255*M);let I=0;for(let X=0;X<=M;X++){const Q=Math.round(g+X*B),Z=j+X*P;for(let ct=I;ct<=Q;ct++)O[ct]=Z;I=Q+1}for(let X=I;X<256;X++)O[X]=O[I-1];return O.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,C=h.filter=this.#p(S);return this.#m(C),this.#g(E(y[0],A[0],5),E(y[1],A[1],5),E(y[2],A[2],5),C),h.url=this.#h(S),h.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const n=this.#r.createElementNS(ci,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#m(t){const n=this.#r.createElementNS(ci,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#p(t){const n=this.#r.createElementNS(ci,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#l.append(n),n}#u(t,n,s){const a=this.#r.createElementNS(ci,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#g(t,n,s,a){const o=this.#r.createElementNS(ci,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",n),this.#u(o,"feFuncB",s)}#b(t,n){const s=this.#r.createElementNS(ci,"feComponentTransfer");n.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,Ra(getComputedStyle(this.#l).getPropertyValue("color"))}}class db{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class t0 extends db{async _fetch(t){const n=await Ma(t,"arraybuffer");return new Uint8Array(n)}}class fb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class e0 extends fb{async _fetch(t){const n=await Ma(t,"arraybuffer");return new Uint8Array(n)}}Be&&vt("Please use the `legacy` build in Node.js environments.");async function md(u){const n=await process.getBuiltinModule("fs").promises.readFile(u);return new Uint8Array(n)}class nx extends hb{}class ix extends cb{_createCanvas(t,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,n)}}class sx extends ub{async _fetch(t){return md(t)}}class ax extends db{async _fetch(t){return md(t)}}class rx extends fb{async _fetch(t){return md(t)}}const da="__forcedDependency",{floor:n0,ceil:i0}=Math;function El(u,t,n,s,a,o){u[t*4+0]=Math.min(u[t*4+0],n),u[t*4+1]=Math.min(u[t*4+1],s),u[t*4+2]=Math.max(u[t*4+2],a),u[t*4+3]=Math.max(u[t*4+3],o)}const qh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class ox{#t;#e;constructor(t,n){this.#t=t,this.#e=n}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===qh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const _l=(u,t)=>{if(!u)return;let n=u.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},u.set(t,n)),n};class lx{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[da]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,n,s=!1){this.#f=t.width,this.#m=t.height,this.#b(n),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,n){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),n&&n.length>0?(this.#u.set(n),this.#u.fill(qh,n.length)):this.#u.fill(qh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[da]:{__proto__:this.#e[da]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const n=Object.getPrototypeOf(this.#t);if(n===null)return this;this.#t=n,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(_l(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const n=this.#n.pop();return n!==void 0&&(_l(this.#g,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const n=this.#r.pop();return n!==void 0&&(_l(this.#g,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}pushBaseTransform(t){return this.#s.push(it.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,n){return this.#t[t]=n,this}recordIncrementalData(t,n){return this.#e[t].push(n),this}resetIncrementalData(t,n){return this.#e[t].length=0,this}recordNamedData(t,n){return this.#i.set(t,n),this}recordSimpleDataFromNamed(t,n,s){this.#t[t]=this.#i.get(n)??s}recordFutureForcedDependency(t,n){return this.recordIncrementalData(da,n),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const n of t)n in this.#t&&this.recordFutureForcedDependency(n,this.#t[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(da,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,n,s,a,o,l){const h=it.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([s,o,a,l],h,d);const f=it.intersect(this.#a,d);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,n,s,a,o,l){const h=this.#a;if(h[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform());if(h[0]===-1/0)return it.axialAlignedBoundingBox([s,o,a,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([s,o,a,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,n,s,a=1,o=0,l=0,h){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],it.axialAlignedBoundingBox(d,s.fontMatrix,g),(a!==1||o!==0||l!==0)&&it.scaleMinMax([a,0,0,-a,o,l],g),f)))return this.recordBBox(t,n,g[0],g[2],g[1],g[3]);if(!h)return this.recordFullPageBBox(t);const b=h();return d&&g&&f===void 0&&(f=g[0]<=o-b.actualBoundingBoxLeft&&g[2]>=o+b.actualBoundingBoxRight&&g[1]<=l-b.actualBoundingBoxAscent&&g[3]>=l+b.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,n,g[0],g[2],g[1],g[3]):this.recordBBox(t,n,o-b.actualBoundingBoxLeft,o+b.actualBoundingBoxRight,l-b.actualBoundingBoxAscent,l+b.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,n){const s=this.#l,a=this.#t,o=this.#e;for(const l of n)l in this.#t?s.add(a[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,n){return this.#i.has(n)&&this.#l.add(this.#i.get(n)),this}recordOperation(t,n=!1){if(this.recordDependencies(t,[da]),this.#g){const s=_l(this.#g,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=n0(this.#o[0]*256/this.#f),a=n0(this.#o[1]*256/this.#m),o=i0(this.#o[2]*256/this.#f),l=i0(this.#o[3]*256/this.#m);El(this.#p,t,s,a,o,l);for(const h of this.#l)h!==t&&El(this.#p,h,s,a,o,l);for(const h of this.#n)h!==t&&El(this.#p,h,s,a,o,l);for(const h of this.#r)h!==t&&El(this.#p,h,s,a,o,l);n||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,n=!1){const s=Array.from(this.#l);this.recordOperation(t,n),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,n=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const n=this.#d.get(t);return this.#d.delete(t),n}_pushPendingDependencies(t){for(const n of t)this.#l.add(n)}take(){return this.#h.clear(),new ox(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Gl{#t;#e;#i;#n=0;#r=0;constructor(t,n,s){if(t instanceof Gl&&t.#i===!!s)return t;this.#t=t,this.#e=n,this.#i=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,n){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,n){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,n){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,n){return this}recordSimpleDataFromNamed(t,n,s){return this.#t.recordSimpleDataFromNamed(t,n,this.#e),this}recordFutureForcedDependency(t,n){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,n,s,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,n,s,a,o,l),this}recordBBox(t,n,s,a,o,l){return this.#i||this.#t.recordBBox(this.#e,n,s,a,o,l),this}recordCharacterBBox(t,n,s,a,o,l,h){return this.#i||this.#t.recordCharacterBBox(this.#e,n,s,a,o,l,h),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,n){return this.#t.recordDependencies(this.#e,n),this}recordNamedDependency(t,n){return this.#t.recordNamedDependency(this.#e,n),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const An={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Xh(u,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,s),u.clip(a)}class bd{isModifyingCurrentTransform(){return!1}getPattern(){Yt("Abstract method `getPattern` called.")}}class cx extends bd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(t,n,s,a){let o;if(a===Re.STROKE||a===Re.FILL){const l=n.current.getClippedPathBoundingBox(a,ee(t))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=n.cachedCanvases.getCanvas("pattern",h,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=it.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...n.baseTransform),this.matrix&&g.transform(...this.matrix),Xh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(s);o.setTransform(b)}else Xh(t,this._bbox),o=this._createGradient(t);return o}}function Oh(u,t,n,s,a,o,l,h){const d=t.coords,f=t.colors,g=u.data,b=u.width*4;let y;d[n+1]>d[s+1]&&(y=n,n=s,s=y,y=o,o=l,l=y),d[s+1]>d[a+1]&&(y=s,s=a,a=y,y=l,l=h,h=y),d[n+1]>d[s+1]&&(y=n,n=s,s=y,y=o,o=l,l=y);const A=(d[n]+t.offsetX)*t.scaleX,E=(d[n+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,C=(d[s+1]+t.offsetY)*t.scaleY,x=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(E>=T)return;const M=f[o],O=f[o+1],B=f[o+2],j=f[l],P=f[l+1],I=f[l+2],X=f[h],Q=f[h+1],Z=f[h+2],ct=Math.round(E),dt=Math.round(T);let at,et,R,G,J,pt,At,N;for(let q=ct;q<=dt;q++){if(q<C){const lt=q<E?0:(E-q)/(E-C);at=A-(A-S)*lt,et=M-(M-j)*lt,R=O-(O-P)*lt,G=B-(B-I)*lt}else{let lt;q>T?lt=1:C===T?lt=0:lt=(C-q)/(C-T),at=S-(S-x)*lt,et=j-(j-X)*lt,R=P-(P-Q)*lt,G=I-(I-Z)*lt}let W;q<E?W=0:q>T?W=1:W=(E-q)/(E-T),J=A-(A-x)*W,pt=M-(M-X)*W,At=O-(O-Q)*W,N=B-(B-Z)*W;const tt=Math.round(Math.min(at,J)),ot=Math.round(Math.max(at,J));let ft=b*q+tt*4;for(let lt=tt;lt<=ot;lt++)W=(at-lt)/(at-J),W<0?W=0:W>1&&(W=1),g[ft++]=et-(et-pt)*W|0,g[ft++]=R-(R-At)*W|0,g[ft++]=G-(G-N)*W|0,g[ft++]=255}}function ux(u,t,n){const s=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const h=t.verticesPerRow,d=Math.floor(s.length/h)-1,f=h-1;for(o=0;o<d;o++){let g=o*h;for(let b=0;b<f;b++,g++)Oh(u,n,s[g],s[g+1],s[g+h],a[g],a[g+1],a[g+h]),Oh(u,n,s[g+h+1],s[g+1],s[g+h],a[g+h+1],a[g+1],a[g+h])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)Oh(u,n,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class hx extends bd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,n,s){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,b=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/b,E=g/y,S={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/A,scaleY:1/E},C=b+4,x=y+4,T=s.getCanvas("mesh",C,x),M=T.context,O=M.createImageData(b,y);if(n){const j=O.data;for(let P=0,I=j.length;P<I;P+=4)j[P]=n[0],j[P+1]=n[1],j[P+2]=n[2],j[P+3]=255}for(const j of this._figures)ux(O,j,S);return M.putImageData(O,2,2),{canvas:T.canvas,offsetX:h-2*A,offsetY:d-2*E,scaleX:A,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,n,s,a){Xh(t,this._bbox);const o=new Float32Array(2);if(a===Re.SHADING)it.singularValueDecompose2dScale(ee(t),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);const[h,d]=o;it.singularValueDecompose2dScale(n.baseTransform,o),o[0]*=h,o[1]*=d}else it.singularValueDecompose2dScale(n.baseTransform,o);const l=this._createMeshCanvas(o,a===Re.SHADING?null:this._background,n.cachedCanvases);return a!==Re.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class dx extends bd{getPattern(){return"hotpink"}}function fx(u){switch(u[0]){case"RadialAxial":return new cx(u);case"Mesh":return new hx(u);case"Dummy":return new dx}throw new Error(`Unknown IR type: ${u[0]}`)}const s0={COLORED:1,UNCOLORED:2};class yd{static MAX_PATTERN_SIZE=3e3;constructor(t,n,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,n){const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),$l("TilingType: "+l);const b=s[0],y=s[1],A=s[2],E=s[3],S=A-b,C=E-y,x=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,x);const[T,M]=x;it.singularValueDecompose2dScale(this.baseTransform,x);const O=T*x[0],B=M*x[1];let j=S,P=C,I=!1,X=!1;const Q=Math.ceil(f*O),Z=Math.ceil(g*B),ct=Math.ceil(S*O),dt=Math.ceil(C*B);Q>=ct?j=f:I=!0,Z>=dt?P=g:X=!0;const at=this.getSizeAndScale(j,this.ctx.canvas.width,O),et=this.getSizeAndScale(P,this.ctx.canvas.height,B),R=t.cachedCanvases.getCanvas("pattern",at.size,et.size),G=R.context,J=d.createCanvasGraphics(G,n);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,o,h),G.translate(-at.scale*b,-et.scale*y),J.transform(0,at.scale,0,0,et.scale,0,0),G.save(),J.dependencyTracker?.save(),this.clipBbox(J,b,y,A,E),J.baseTransform=ee(J.ctx),J.executeOperatorList(a),J.endDrawing(),J.dependencyTracker?.restore(),G.restore(),I||X){const pt=R.canvas;I&&(j=f),X&&(P=g);const At=this.getSizeAndScale(j,this.ctx.canvas.width,O),N=this.getSizeAndScale(P,this.ctx.canvas.height,B),q=At.size,W=N.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",q,W),ot=tt.context,ft=I?Math.floor(S/f):0,lt=X?Math.floor(C/g):0;for(let $t=0;$t<=ft;$t++)for(let Et=0;Et<=lt;Et++)ot.drawImage(pt,q*$t,W*Et,q,W,0,0,q,W);return{canvas:tt.canvas,scaleX:At.scale,scaleY:N.scale,offsetX:b,offsetY:y}}return{canvas:R.canvas,scaleX:at.scale,scaleY:et.scale,offsetX:b,offsetY:y}}getSizeAndScale(t,n,s){const a=Math.max(yd.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,n,s,a,o){const l=a-n,h=o-s;t.ctx.rect(n,s,l,h),it.axialAlignedBoundingBox([n,s,a,o],ee(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,s){const a=t.ctx,o=t.current;switch(n){case s0.COLORED:const{fillStyle:l,strokeStyle:h}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=h;break;case s0.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new kS(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,s,a,o){let l=s;a!==Re.SHADING&&(l=it.transform(l,n.baseTransform),this.matrix&&(l=it.transform(l,this.matrix)));const h=this.createPatternCanvas(n,o);let d=new DOMMatrix(l);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}}function px({src:u,srcPos:t=0,dest:n,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=xe.isLittleEndian?4278190080:255,[d,f]=l?[o,h]:[h,o],g=s>>3,b=s&7,y=u.length;n=new Uint32Array(n.buffer);let A=0;for(let E=0;E<a;E++){for(const C=t+g;t<C;t++){const x=t<y?u[t]:255;n[A++]=x&128?f:d,n[A++]=x&64?f:d,n[A++]=x&32?f:d,n[A++]=x&16?f:d,n[A++]=x&8?f:d,n[A++]=x&4?f:d,n[A++]=x&2?f:d,n[A++]=x&1?f:d}if(b===0)continue;const S=t<y?u[t++]:255;for(let C=0;C<b;C++)n[A++]=S&1<<7-C?f:d}return{srcPos:t,destPos:A}}const a0=16,r0=100,gx=15,o0=10,Ye=16,kh=new DOMMatrix,on=new Float32Array(2),ga=new Float32Array([1/0,1/0,-1/0,-1/0]);function mx(u,t){if(u._removeMirroring)throw new Error("Context is already forwarding operations.");u.__originalSave=u.save,u.__originalRestore=u.restore,u.__originalRotate=u.rotate,u.__originalScale=u.scale,u.__originalTranslate=u.translate,u.__originalTransform=u.transform,u.__originalSetTransform=u.setTransform,u.__originalResetTransform=u.resetTransform,u.__originalClip=u.clip,u.__originalMoveTo=u.moveTo,u.__originalLineTo=u.lineTo,u.__originalBezierCurveTo=u.bezierCurveTo,u.__originalRect=u.rect,u.__originalClosePath=u.closePath,u.__originalBeginPath=u.beginPath,u._removeMirroring=()=>{u.save=u.__originalSave,u.restore=u.__originalRestore,u.rotate=u.__originalRotate,u.scale=u.__originalScale,u.translate=u.__originalTranslate,u.transform=u.__originalTransform,u.setTransform=u.__originalSetTransform,u.resetTransform=u.__originalResetTransform,u.clip=u.__originalClip,u.moveTo=u.__originalMoveTo,u.lineTo=u.__originalLineTo,u.bezierCurveTo=u.__originalBezierCurveTo,u.rect=u.__originalRect,u.closePath=u.__originalClosePath,u.beginPath=u.__originalBeginPath,delete u._removeMirroring},u.save=function(){t.save(),this.__originalSave()},u.restore=function(){t.restore(),this.__originalRestore()},u.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},u.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},u.transform=function(n,s,a,o,l,h){t.transform(n,s,a,o,l,h),this.__originalTransform(n,s,a,o,l,h)},u.setTransform=function(n,s,a,o,l,h){t.setTransform(n,s,a,o,l,h),this.__originalSetTransform(n,s,a,o,l,h)},u.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},u.rotate=function(n){t.rotate(n),this.__originalRotate(n)},u.clip=function(n){t.clip(n),this.__originalClip(n)},u.moveTo=function(n,s){t.moveTo(n,s),this.__originalMoveTo(n,s)},u.lineTo=function(n,s){t.lineTo(n,s),this.__originalLineTo(n,s)},u.bezierCurveTo=function(n,s,a,o,l,h){t.bezierCurveTo(n,s,a,o,l,h),this.__originalBezierCurveTo(n,s,a,o,l,h)},u.rect=function(n,s,a,o){t.rect(n,s,a,o),this.__originalRect(n,s,a,o)},u.closePath=function(){t.closePath(),this.__originalClosePath()},u.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class bx{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,n,s)):(a=this.canvasFactory.create(n,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function Cl(u,t,n,s,a,o,l,h,d,f){const[g,b,y,A,E,S]=ee(u);if(b===0&&y===0){const T=l*g+E,M=Math.round(T),O=h*A+S,B=Math.round(O),j=(l+d)*g+E,P=Math.abs(Math.round(j)-M)||1,I=(h+f)*A+S,X=Math.abs(Math.round(I)-B)||1;return u.setTransform(Math.sign(g),0,0,Math.sign(A),M,B),u.drawImage(t,n,s,a,o,0,0,P,X),u.setTransform(g,b,y,A,E,S),[P,X]}if(g===0&&A===0){const T=h*y+E,M=Math.round(T),O=l*b+S,B=Math.round(O),j=(h+f)*y+E,P=Math.abs(Math.round(j)-M)||1,I=(l+d)*b+S,X=Math.abs(Math.round(I)-B)||1;return u.setTransform(0,Math.sign(b),Math.sign(y),0,M,B),u.drawImage(t,n,s,a,o,0,0,X,P),u.setTransform(g,b,y,A,E,S),[X,P]}u.drawImage(t,n,s,a,o,l,h,d,f);const C=Math.hypot(g,b),x=Math.hypot(y,A);return[C*d,x*f]}class l0{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Hh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Me.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,n,s){s?.(this),this.clipBox=new Float32Array([0,0,t,n]),this.minMax=ga.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,n=null){const s=this.minMax.slice();if(t===Re.STROKE){n||Yt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(n,on);const a=on[0]*this.lineWidth/2,o=on[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ga,0)}getClippedPathBoundingBox(t=Re.FILL,n=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function c0(u,t){if(t instanceof ImageData){u.putImageData(t,0,0);return}const n=t.height,s=t.width,a=n%Ye,o=(n-a)/Ye,l=a===0?o:o+1,h=u.createImageData(s,Ye);let d=0,f;const g=t.data,b=h.data;let y,A,E,S;if(t.kind===kr.GRAYSCALE_1BPP){const C=g.byteLength,x=new Uint32Array(b.buffer,0,b.byteLength>>2),T=x.length,M=s+7>>3,O=4294967295,B=xe.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(E=y<o?Ye:a,f=0,A=0;A<E;A++){const j=C-d;let P=0;const I=j>M?s:j*8-7,X=I&-8;let Q=0,Z=0;for(;P<X;P+=8)Z=g[d++],x[f++]=Z&128?O:B,x[f++]=Z&64?O:B,x[f++]=Z&32?O:B,x[f++]=Z&16?O:B,x[f++]=Z&8?O:B,x[f++]=Z&4?O:B,x[f++]=Z&2?O:B,x[f++]=Z&1?O:B;for(;P<I;P++)Q===0&&(Z=g[d++],Q=128),x[f++]=Z&Q?O:B,Q>>=1}for(;f<T;)x[f++]=0;u.putImageData(h,0,y*Ye)}}else if(t.kind===kr.RGBA_32BPP){for(A=0,S=s*Ye*4,y=0;y<o;y++)b.set(g.subarray(d,d+S)),d+=S,u.putImageData(h,0,A),A+=Ye;y<l&&(S=s*a*4,b.set(g.subarray(d,d+S)),u.putImageData(h,0,A))}else if(t.kind===kr.RGB_24BPP)for(E=Ye,S=s*E,y=0;y<l;y++){for(y>=o&&(E=a,S=s*E),f=0,A=S;A--;)b[f++]=g[d++],b[f++]=g[d++],b[f++]=g[d++],b[f++]=255;u.putImageData(h,0,y*Ye)}else throw new Error(`bad image kind: ${t.kind}`)}function u0(u,t){if(t.bitmap){u.drawImage(t.bitmap,0,0);return}const n=t.height,s=t.width,a=n%Ye,o=(n-a)/Ye,l=a===0?o:o+1,h=u.createImageData(s,Ye);let d=0;const f=t.data,g=h.data;for(let b=0;b<l;b++){const y=b<o?Ye:a;({srcPos:d}=px({src:f,srcPos:d,dest:g,width:s,height:y,nonBlackColor:0})),u.putImageData(h,0,b*Ye)}}function Cr(u,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)u[s]!==void 0&&(t[s]=u[s]);u.setLineDash!==void 0&&(t.setLineDash(u.getLineDash()),t.lineDashOffset=u.lineDashOffset)}function Tl(u){u.strokeStyle=u.fillStyle="#000000",u.fillRule="nonzero",u.globalAlpha=1,u.lineWidth=1,u.lineCap="butt",u.lineJoin="miter",u.miterLimit=10,u.globalCompositeOperation="source-over",u.font="10px sans-serif",u.setLineDash!==void 0&&(u.setLineDash([]),u.lineDashOffset=0);const{filter:t}=u;t!=="none"&&t!==""&&(u.filter="none")}function h0(u,t){if(t)return!0;it.singularValueDecompose2dScale(u,on);const n=Math.fround(Rn.pixelRatio*Ss.PDF_TO_CSS_UNITS);return on[0]<=n&&on[1]<=n}const yx=["butt","round","square"],vx=["miter","round","bevel"],Ax={},d0={};class ba{constructor(t,n,s,a,o,{optionalContentConfig:l,markedContentStack:h=null},d,f,g){this.ctx=t,this.current=new l0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new bx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,n,s=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(t,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):s}beginDrawing({transform:t,viewport:n,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ee(this.compositeCtx))}this.ctx.save(),Tl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=ee(this.ctx)}executeOperatorList(t,n,s,a,o){const l=t.argsArray,h=t.fnArray;let d=n||0;const f=l.length;if(f===d)return d;const g=f-d>o0&&typeof s=="function",b=g?Date.now()+gx:0;let y=0;const A=this.commonObjs,E=this.objs;let S,C;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=h[d],C=l[d]??null,S!==wa.dependency)C===null?this[S](d):this[S](d,...C);else for(const x of C){this.dependencyTracker?.recordNamedData(x,d);const T=x.startsWith("g_")?A:E;if(!T.has(x))return T.get(x,s),d}if(d++,d===f)return d;if(g&&++y>o0){if(Date.now()>b)return s(),d;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),l=Math.max(Math.hypot(n[2],n[3]),1),h=s,d=a,f="prescale1",g,b;for(;o>2&&h>1||l>2&&d>1;){let y=h,A=d;o>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/y),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(f,y,A),b=g.context,b.clearRect(0,0,y,A),b.drawImage(t,0,0,h,d,0,0,y,A),t=g.canvas,h=y,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,n){const s=this.ctx,{width:a,height:o}=n,l=this.current.fillColor,h=this.current.patternFill,d=ee(s);let f,g,b,y;if((n.bitmap||n.data)&&n.count>1){const Q=n.bitmap||n.data.buffer;g=JSON.stringify(h?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(Q),f||(f=new Map,this._cachedBitmapsMap.set(Q,f));const Z=f.get(g);if(Z&&!h){const ct=Math.round(Math.min(d[0],d[2])+d[4]),dt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,An.transformAndFill),{canvas:Z,offsetX:ct,offsetY:dt}}b=Z}b||(y=this.cachedCanvases.getCanvas("maskCanvas",a,o),u0(y.context,n));let A=it.transform(d,[1/a,0,0,-1/o,0,0]);A=it.transform(A,[1,0,0,1,0,-o]);const E=ga.slice();it.axialAlignedBoundingBox([0,0,a,o],A,E);const[S,C,x,T]=E,M=Math.round(x-S)||1,O=Math.round(T-C)||1,B=this.cachedCanvases.getCanvas("fillCanvas",M,O),j=B.context,P=S,I=C;j.translate(-P,-I),j.transform(...A),b||(b=this._scaleImage(y.canvas,jn(j)),b=b.img,f&&h&&f.set(g,b)),j.imageSmoothingEnabled=h0(ee(j),n.interpolate),Cl(j,b,0,0,b.width,b.height,0,0,a,o),j.globalCompositeOperation="source-in";const X=it.transform(jn(j),[1,0,0,1,-P,-I]);return j.fillStyle=h?l.getPattern(s,this,X,Re.FILL,t):l,j.fillRect(0,0,a,o),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,B.canvas)),this.dependencyTracker?.recordDependencies(t,An.transformAndFill),{canvas:B.canvas,offsetX:Math.round(P),offsetY:Math.round(I)}}setLineWidth(t,n){this.dependencyTracker?.recordSimpleData("lineWidth",t),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(t,n){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=yx[n]}setLineJoin(t,n){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=vx[n]}setMiterLimit(t,n){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=n}setDash(t,n,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(n),a.lineDashOffset=s)}setRenderingIntent(t,n){}setFlatness(t,n){}setGState(t,n){for(const[s,a]of n)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,n,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Cr(this.suspendedCtx,l),mx(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Cr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,s,a){const o=a[0],l=a[1],h=a[2]-o,d=a[3]-l;h===0||d===0||(this.genericComposeSMask(n.context,s,h,d,n.subtype,n.backdrop,n.transferMap,o,l,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,n,s,a,o,l,h,d,f,g,b){let y=t.canvas,A=d-g,E=f-b;if(l)if(A<0||E<0||A+s>y.width||E+a>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,a),x=C.context;x.drawImage(y,-A,-E),x.globalCompositeOperation="destination-atop",x.fillStyle=l,x.fillRect(0,0,s,a),x.globalCompositeOperation="source-over",y=C.canvas,A=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(A,E,s,a),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,E,s,a),t.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?n.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(h));const S=new Path2D;S.rect(d,f,s,a),n.clip(S),n.globalCompositeOperation="destination-in",n.drawImage(y,A,E,s,a,d,f,s,a),n.restore()}save(t){this.inSMaskMode&&Cr(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Cr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,n,s,a,o,l,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(n,s,a,o,l,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[n](t,o);return}if(this.dependencyTracker!==null){const l=n===wa.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let h=0,d=o.length;h<d;)switch(o[h++]){case Al.moveTo:l.moveTo(o[h++],o[h++]);break;case Al.lineTo:l.lineTo(o[h++],o[h++]);break;case Al.curveTo:l.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);break;case Al.closePath:l.closePath();break;default:vt(`Unrecognized drawing path operator: ${o[h-1]}`);break}o=l}it.axialAlignedBoundingBox(a,ee(this.ctx),this.current.minMax),this[n](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,n,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,jn(a),Re.STROKE,t),l){const h=new Path2D;h.addPath(n,a.getTransform().invertSelf().multiplySelf(l)),n=h}this.rescaleAndStroke(n,!1),a.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(t,An.stroke),s&&this.consumePath(t,n,this.current.getClippedPathBoundingBox(Re.STROKE,ee(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,n){this.stroke(t,n)}fill(t,n,s=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let h=!1;if(l){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,jn(a),Re.FILL,t),f){const g=new Path2D;g.addPath(n,a.getTransform().invertSelf().multiplySelf(f)),n=g}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(n,"evenodd"),this.pendingEOFill=!1):a.fill(n)),this.dependencyTracker?.recordDependencies(t,An.fill),h&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,n,d)}eoFill(t,n){this.pendingEOFill=!0,this.fill(t,n)}fillStroke(t,n){this.fill(t,n,!1),this.stroke(t,n,!1),this.consumePath(t,n)}eoFillStroke(t,n){this.pendingEOFill=!0,this.fillStroke(t,n)}closeFillStroke(t,n){this.fillStroke(t,n)}closeEOFillStroke(t,n){this.pendingEOFill=!0,this.fillStroke(t,n)}endPath(t,n){this.consumePath(t,n)}rawFillPath(t,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(t,An.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Ax}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=d0}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const n=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;n!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(n!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:h,y:d,fontSize:f,path:g}of n)g&&a.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(h,d).scale(f,-f));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,n){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=n}setWordSpacing(t,n){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=n}setHScale(t,n){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=n/100}setLeading(t,n){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-n}setFont(t,n,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",n,t);const a=this.commonObjs.get(n),o=this.current;if(!a)throw new Error(`Can't find font for ${n}`);if(o.fontMatrix=a.fontMatrix||Hh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+n),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const l=a.loadedName||"sans-serif",h=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=s;s<a0?g=a0:s>r0&&(g=r0),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${h}`}setTextRenderingMode(t,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=n}setTextRise(t,n){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=n}moveText(t,n,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,n,s){this.setLeading(t,-s),this.moveText(t,n,s)}setTextMatrix(t,n){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=n,s.textMatrixScale=Math.hypot(n[0],n[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,n,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(n)),a}paintChar(t,n,s,a,o,l){const h=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,b=d.fontSize/d.fontSizeScale,y=g&Me.FILL_STROKE_MASK,A=!!(g&Me.ADD_TO_PATH_FLAG),E=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||A||E||S)&&!f.missingFile&&(C=f.getPathGenerator(this.commonObjs,n)),C&&(f.disableFontFace||E||S)){h.save(),h.translate(s,a),h.scale(b,-b),this.dependencyTracker?.recordCharacterBBox(t,h,f);let x;if(y===Me.FILL||y===Me.FILL_STROKE)if(o){x=h.getTransform(),h.setTransform(...o);const T=this.#i(C,x,o);h.fill(T)}else h.fill(C);if(y===Me.STROKE||y===Me.FILL_STROKE)if(l){x||=h.getTransform(),h.setTransform(...l);const{a:T,b:M,c:O,d:B}=x,j=it.inverseTransform(l),P=it.transform([T,M,O,B,0,0],j);it.singularValueDecompose2dScale(P,on),h.lineWidth*=Math.max(on[0],on[1])/b,h.stroke(this.#i(C,x,l))}else h.lineWidth/=b,h.stroke(C);h.restore()}else(y===Me.FILL||y===Me.FILL_STROKE)&&(h.fillText(n,s,a),this.dependencyTracker?.recordCharacterBBox(t,h,f,b,s,a,()=>h.measureText(n))),(y===Me.STROKE||y===Me.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,f,b,s,a,()=>h.measureText(n)).recordDependencies(t,An.stroke),h.strokeText(n,s,a));A&&((this.pendingTextPaths||=[]).push({transform:ee(h),x:s,y:a,fontSize:b,path:C}),this.dependencyTracker?.recordCharacterBBox(t,h,f,b,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<n.length;a+=4)if(n[a]>0&&n[a]<255){s=!0;break}return wt(this,"isFontSubpixelAAEnabled",s)}showText(t,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,An.showText).resetBBox(t),this.current.textRenderingMode&Me.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,n),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,h=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,b=s.textHScale*g,y=n.length,A=a.vertical,E=A?1:-1,S=a.defaultVMetrics,C=o*s.fontMatrix[0],x=s.textRenderingMode===Me.FILL&&!a.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(b,-1):l.scale(b,1);let T,M;if(s.patternFill){l.save();const I=s.fillColor.getPattern(l,this,jn(l),Re.FILL,t);T=ee(l),l.restore(),l.fillStyle=I}if(s.patternStroke){l.save();const I=s.strokeColor.getPattern(l,this,jn(l),Re.STROKE,t);M=ee(l),l.restore(),l.strokeStyle=I}let O=s.lineWidth;const B=s.textMatrixScale;if(B===0||O===0){const I=s.textRenderingMode&Me.FILL_STROKE_MASK;(I===Me.STROKE||I===Me.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=B;if(h!==1&&(l.scale(h,h),O/=h),l.lineWidth=O,a.isInvalidPDFjsFont){const I=[];let X=0;for(const Z of n)I.push(Z.unicode),X+=Z.width;const Q=I.join("");if(l.fillText(Q,0,0),this.dependencyTracker!==null){const Z=l.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=X*C*b,l.restore(),this.compose();return}let j=0,P;for(P=0;P<y;++P){const I=n[P];if(typeof I=="number"){j+=E*I*o/1e3;continue}let X=!1;const Q=(I.isSpace?f:0)+d,Z=I.fontChar,ct=I.accent;let dt,at,et=I.width;if(A){const J=I.vmetric||S,pt=-(I.vmetric?J[1]:et*.5)*C,At=J[2]*C;et=J?-J[0]:et,dt=pt/h,at=(j+At)/h}else dt=j/h,at=0;let R;if(a.remeasure&&et>0){R=l.measureText(Z);const J=R.width*1e3/o*h;if(et<J&&this.isFontSubpixelAAEnabled){const pt=et/J;X=!0,l.save(),l.scale(pt,1),dt/=pt}else et!==J&&(dt+=(et-J)/2e3*o/h)}if(this.contentVisible&&(I.isInFont||a.missingFile)){if(x&&!ct)l.fillText(Z,dt,at),this.dependencyTracker?.recordCharacterBBox(t,l,R?{bbox:null}:a,o/h,dt,at,()=>R??l.measureText(Z));else if(this.paintChar(t,Z,dt,at,T,M),ct){const J=dt+o*ct.offset.x/h,pt=at-o*ct.offset.y/h;this.paintChar(t,ct.fontChar,J,pt,T,M)}}const G=A?et*C-Q*g:et*C+Q*g;j+=G,X&&l.restore()}A?s.y-=j:s.x+=j*b,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,n){const s=this.ctx,a=this.current,o=a.font,l=a.fontSize,h=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,b=a.textHScale*h,y=a.fontMatrix||Hh,A=n.length,E=a.textRenderingMode===Me.INVISIBLE;let S,C,x,T;if(E||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(b,h);const M=this.dependencyTracker;for(this.dependencyTracker=M?new Gl(M,t):null,S=0;S<A;++S){if(C=n[S],typeof C=="number"){T=d*C*l/1e3,this.ctx.translate(T,0),a.x+=T*b;continue}const O=(C.isSpace?g:0)+f,B=o.charProcOperatorList[C.operatorListId];B?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...y),this.executeOperatorList(B),this.restore()):vt(`Type3 character "${C.operatorListId}" is not available.`);const j=[C.width,0];it.applyTransform(j,y),x=j[0]*l+O,s.translate(x,0),a.x+=x*b}s.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,n,s){}setCharWidthAndBounds(t,n,s,a,o,l,h){const d=new Path2D;d.rect(a,o,l-a,h-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,h).recordClipBox(t,this.ctx,a,l,o,h),this.endPath(t)}getColorN_Pattern(t,n){let s;if(n[0]==="TilingPattern"){const a=this.baseTransform||ee(this.ctx),o={createCanvasGraphics:(l,h)=>new ba(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Gl(this.dependencyTracker,h,!0):null)};s=new yd(n,this.ctx,o,a)}else s=this._getPattern(t,n[1],n[2]);return s}setStrokeColorN(t,...n){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,n),this.current.patternStroke=!0}setFillColorN(t,...n){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,n),this.current.patternFill=!0}setStrokeRGBColor(t,n){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,n){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n,s=null){let a;return this.cachedPatterns.has(n)?a=this.cachedPatterns.get(n):(a=fx(this.getObject(t,n)),this.cachedPatterns.set(n,a)),s&&(a.matrix=s),a}shadingFill(t,n){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,n);s.fillStyle=a.getPattern(s,this,jn(s),Re.SHADING,t);const o=jn(s);if(o){const{width:l,height:h}=s.canvas,d=ga.slice();it.axialAlignedBoundingBox([0,0,l,h],o,d);const[f,g,b,y]=d;this.ctx.fillRect(f,g,b-f,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,An.transform).recordDependencies(t,An.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Yt("Should not call beginInlineImage")}beginImageData(){Yt("Should not call beginImageData")}paintFormXObjectBegin(t,n,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),n&&this.transform(t,...n),this.baseTransform=ee(this.ctx),s)){it.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,l,h]=s,d=new Path2D;d.rect(a,o,l-a,h-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,n){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;n.isolated||$l("TODO: Support non-isolated groups."),n.knockout&&vt("Knockout groups not supported.");const a=ee(s);if(n.matrix&&s.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let o=ga.slice();it.axialAlignedBoundingBox(n.bbox,ee(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=it.intersect(o,l)||[0,0,0,0];const h=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-h,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let b="groupAt"+this.groupLevel;n.smask&&(b+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(b,f,g),A=y.context;A.translate(-h,-d),A.transform(...a);let E=new Path2D;const[S,C,x,T]=n.bbox;if(E.rect(S,C,x-S,T-C),n.matrix){const M=new Path2D;M.addPath(E,new DOMMatrix(n.matrix)),E=M}A.clip(E),n.smask&&this.smaskStack.push({canvas:y.canvas,context:A,offsetX:h,offsetY:d,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(h,d),s.save()),Cr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,n){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ee(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ga.slice();it.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,n,s,a,o,l){if(this.#t(),Tl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const h=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=h,s[3]=d,it.singularValueDecompose2dScale(ee(this.ctx),on);const{viewportScale:f}=this,g=Math.ceil(h*this.outputScaleX*f),b=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,b);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(n,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(on[0],0,0,-on[1],0,d*on[1]),Tl(this.ctx)}else{Tl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],h,d),this.ctx.clip(f)}}this.current=new l0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,n){if(!this.contentVisible)return;const s=n.count;n=this.getObject(t,n.data,n),n.count=s;const a=this.ctx,o=this._createMaskCanvas(t,n),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,s,a=0,o=0,l,h){if(!this.contentVisible)return;n=this.getObject(t,n.data,n);const d=this.ctx;d.save();const f=ee(d);d.transform(s,a,o,l,0,0);const g=this._createMaskCanvas(t,n);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let b=0,y=h.length;b<y;b+=2){const A=it.transform(f,[s,a,o,l,h[b],h[b+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,n){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,An.transformAndFill);for(const l of n){const{data:h,width:d,height:f,transform:g}=l,b=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=b.context;y.save();const A=this.getObject(t,h,l);u0(y,A),y.globalCompositeOperation="source-in",y.fillStyle=o?a.getPattern(y,this,jn(s),Re.FILL,t):a,y.fillRect(0,0,d,f),y.restore(),s.save(),s.transform(...g),s.scale(1,-1),Cl(s,b.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,n){if(!this.contentVisible)return;const s=this.getObject(t,n);if(!s){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,n,s,a,o){if(!this.contentVisible)return;const l=this.getObject(t,n);if(!l){vt("Dependent image isn't ready yet");return}const h=l.width,d=l.height,f=[];for(let g=0,b=o.length;g<b;g+=2)f.push({transform:[s,0,0,a,o[g],o[g+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(n,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,n){if(!this.contentVisible)return;const s=n.width,a=n.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/a);let h;if(n.bitmap)h=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)h=n;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,a).context;c0(g,n),h=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(h,jn(o));o.imageSmoothingEnabled=h0(ee(o),n.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,An.imageXObject).recordOperation(t),Cl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,n,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(n.bitmap)o=n.bitmap;else{const l=n.width,h=n.height,f=this.cachedCanvases.getCanvas("inlineImage",l,h).context;c0(f,n),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)a.save(),a.transform(...l.transform),a.scale(1,-1),Cl(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,An.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,n){}markPointProps(t,n,s){}beginMarkedContent(t,n){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n,s){this.dependencyTracker?.beginMarkedContent(t),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,n,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===d0?o.clip(n,"evenodd"):o.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ee(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:s,c:a,d:o}=this.ctx.getTransform();let l,h;if(s===0&&a===0){const d=Math.abs(n),f=Math.abs(o);if(d===f)if(t===0)l=h=1/d;else{const g=d*t;l=h=g<1?1/g:1}else if(t===0)l=1/d,h=1/f;else{const g=d*t,b=f*t;l=g<1?1/g:1,h=b<1?1/b:1}}else{const d=Math.abs(n*o-s*a),f=Math.hypot(n,s),g=Math.hypot(a,o);if(t===0)l=g/d,h=f/d;else{const b=t*d;l=g>b?g/b:1,h=f>b?f/b:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,n){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const h=s.getLineDash();n&&s.save(),s.scale(o,l),kh.a=1/o,kh.d=1/l;const d=new Path2D;if(d.addPath(t,kh),h.length>0){const f=Math.max(o,l);s.setLineDash(h.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=a||1,s.stroke(d),n&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const u in wa)ba.prototype[u]!==void 0&&(ba.prototype[wa[u]]=ba.prototype[u]);class ya{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const n=new TextEncoder,s={};let a=0;for(const f of ya.strings){const g=n.encode(t[f]);s[f]=g,a+=4+g.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),h=new DataView(o);let d=0;for(const f of ya.strings){const g=s[f],b=g.length;h.setUint32(d,b),l.set(g,d+4),d+=4+b}return Lt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Lt(t<ya.strings.length,"Invalid string index");let n=0;for(let a=0;a<t;a++)n+=this.#e.getUint32(n)+4;const s=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class va{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const n=new TextEncoder,s={};let a=0;for(const y of va.strings){const A=n.encode(t[y]);s[y]=A,a+=4+A.length}a+=4;let o,l,h=1+a;t.style&&(o=n.encode(t.style.style),l=n.encode(t.style.weight),h+=4+o.length+4+l.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let b=0;g.setUint8(b++,t.guessFallback?1:0),g.setUint32(b,0),b+=4,a=0;for(const y of va.strings){const A=s[y],E=A.length;a+=4+E,g.setUint32(b,E),f.set(A,b+4),b+=4+E}return g.setUint32(b-a-4,a),t.style&&(g.setUint32(b,o.length),f.set(o,b+4),b+=4+o.length,g.setUint32(b,l.length),f.set(l,b+4),b+=4+l.length),Lt(b<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(b)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Lt(t<va.strings.length,"Invalid string index");let n=5;for(let a=0;a<t;a++)n+=this.#e.getUint32(n)+4;const s=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const n=this.#e.getUint32(t),s=this.#i.decode(new Uint8Array(this.#t,t+4,n));t+=4+n;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class Vt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:n}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),n&&Object.assign(this,n)}#c(t){Lt(t<Vt.bools.length,"Invalid boolean index");const n=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(n)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Lt(t<Vt.numbers.length,"Invalid number index"),this.#o.getFloat64(Vt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Vt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Vt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Vt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Lt(t<Vt.strings.length,"Invalid string index");let n=Vt.#r+4;for(let o=0;o<t;o++)n+=this.#o.getUint32(n)+4;const s=this.#o.getUint32(n),a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,n+4,s)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Vt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=Vt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Vt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#s,t+4,a)),new ya(o.buffer)}get systemFontInfo(){let t=Vt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,t+4,s)),new va(a.buffer)}static write(t){const n=t.systemFontInfo?va.write(t.systemFontInfo):null,s=t.cssFontInfo?ya.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of Vt.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const h=Vt.#r+4+l+4+(n?n.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let b=0;const y=Vt.bools.length;let A=0,E=0;for(let S=0;S<y;S++){const C=t[Vt.bools[S]];A|=(C===void 0?0:C?2:1)<<E,E+=2,(E===8||S===y-1)&&(g.setUint8(b++,A),A=0,E=0)}Lt(b===Vt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Vt.numbers)g.setFloat64(b,t[S]),b+=8;if(Lt(b===Vt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(b++,4);for(const S of t.bbox)g.setInt16(b,S,!0),b+=2}else g.setUint8(b++,0),b+=8;if(Lt(b===Vt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(b++,6);for(const S of t.fontMatrix)g.setFloat64(b,S,!0),b+=8}else g.setUint8(b++,0),b+=48;if(Lt(b===Vt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(b++,1);for(const S of t.defaultVMetrics)g.setInt16(b,S,!0),b+=2}else g.setUint8(b++,0),b+=6;Lt(b===Vt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Vt.#r,0),b+=4;for(const S of Vt.strings){const C=o[S],x=C.length;g.setUint32(b,x),f.set(C,b+4),b+=4+x}if(g.setUint32(Vt.#r,b-Vt.#r-4),!n)g.setUint32(b,0),b+=4;else{const S=n.byteLength;g.setUint32(b,S),Lt(b+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(n),b+4),b+=4+S}if(!s)g.setUint32(b,0),b+=4;else{const S=s.byteLength;g.setUint32(b,S),Lt(b+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),b+4),b+=4+S}return t.data===void 0?(g.setUint32(b,0),b+=4):(g.setUint32(b,t.data.length),f.set(t.data,b+4),b+=4+t.data.length),Lt(b<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(b)}}class Xi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Sx{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const pa=Symbol("INTERNAL");class xx{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:n,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&an.DISPLAY),this.#e=!!(t&an.PRINT),this.name=n,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,s=!1){t!==pa&&Yt("Internal method `_setVisible` called."),this.#i=s,this.#n=n}}class wx{#t=null;#e=new Map;#i=null;#n=null;constructor(t,n=an.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new xx(n,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(pa,!1);for(const s of t.on)this.#e.get(s)._setVisible(pa,!0);for(const s of t.off)this.#e.get(s)._setVisible(pa,!1);this.#i=this.getHash()}}#r(t){const n=t.length;if(n<2)return!0;const s=t[0];for(let a=1;a<n;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return vt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return $l("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(vt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return vt(`Unknown optional content policy ${t.policy}.`),!0}return vt(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,s=!0){const a=this.#e.get(t);if(!a){vt(`Optional content group not found: ${t}`);return}if(s&&n&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(pa,!1,!0);a._setVisible(pa,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,n);break;case"OFF":this.setVisibility(a,!1,n);break;case"Toggle":this.setVisibility(a,!o.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new rb;for(const[n,s]of this.#e)t.update(`${n}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Ex{constructor(t,{disableRange:n=!1,disableStream:s=!1}){Lt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Lt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new _x(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new Cx(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class _x{constructor(t,n,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Wl(a)?a:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Cx{constructor(t,n,s){this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Tx(u){let t=!0,n=s("filename\\*","i").exec(u);if(n){n=n[1];let g=h(n);return g=unescape(g),g=d(g),g=f(g),o(g)}if(n=l(u),n){const g=f(n);return o(g)}if(n=s("filename","i").exec(u),n){n=n[1];let g=h(n);return g=f(g),o(g)}function s(g,b){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(g,b){if(g){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const y=new TextDecoder(g,{fatal:!0}),A=Yr(b);b=y.decode(A),t=!1}catch{}}return b}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const b=[];let y;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=A.exec(g))!==null;){let[,S,C,x]=y;if(S=parseInt(S,10),S in b){if(S===0)break;continue}b[S]=[C,x]}const E=[];for(let S=0;S<b.length&&S in b;++S){let[C,x]=b[S];x=h(x),C&&(x=unescape(x),S===0&&(x=d(x))),E.push(x)}return E.join("")}function h(g){if(g.startsWith('"')){const b=g.slice(1).split('\\"');for(let y=0;y<b.length;++y){const A=b[y].indexOf('"');A!==-1&&(b[y]=b[y].slice(0,A),b.length=y+1),b[y]=b[y].replaceAll(/\\(.)/g,"$1")}g=b.join('"')}return g}function d(g){const b=g.indexOf("'");if(b===-1)return g;const y=g.slice(0,b),E=g.slice(b+1).replace(/^[^']*'/,"");return a(y,E)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,y,A,E){if(A==="q"||A==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),a(y,E);try{E=atob(E)}catch{}return a(y,E)})}return""}function pb(u,t){const n=new Headers;if(!u||!t||typeof t!="object")return n;for(const s in t){const a=t[s];a!==void 0&&n.append(s,a)}return n}function Ql(u){return URL.parse(u)?.origin??null}function gb({responseHeaders:u,isHttp:t,rangeChunkSize:n,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(u.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*n)||s||!t||u.get("Accept-Ranges")!=="bytes"||(u.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function mb(u){const t=u.get("Content-Disposition");if(t){let n=Tx(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(Wl(n))return n}return null}function Zr(u,t){return new zr(`Unexpected server response (${u}) while retrieving PDF "${t}".`,u,u===404||u===0&&t.startsWith("file:"))}function bb(u){return u===200||u===206}function yb(u,t,n){return{method:"GET",headers:u,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function vb(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:(vt(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}class Mx{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=pb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Rx(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new Dx(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Rx{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(t.headers),a=n.url;fetch(a,yb(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Ql(o.url),!bb(o.status))throw Zr(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:d}=gb({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=mb(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:vb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Dx{constructor(t,n,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${s-1}`);const l=a.url;fetch(l,yb(o,this._withCredentials,this._abortController)).then(h=>{const d=Ql(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!bb(h.status))throw Zr(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:vb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Bh=200,Ph=206;function Lx(u){const t=u.response;return typeof t!="string"?t:Yr(t).buffer}class Nx{_responseOrigin=null;constructor({url:t,httpHeaders:n,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=pb(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const n=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,l]of this.headers)n.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Ph):a.expectedStatus=Bh,n.responseType="arraybuffer",Lt(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{t.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,n.send(null),s}onProgress(t,n){const s=this.pendingRequests[t];s&&s.onProgress?.(n)}onStateChange(t,n){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||Bh;if(!(o===Bh&&s.expectedStatus===Ph)&&o!==s.expectedStatus){s.onError(a.status);return}const h=Lx(a);if(o===Ph){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:h}):(vt('Missing or invalid "Content-Range" header.'),s.onError(0))}else h?s.onDone({begin:0,chunk:h}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class Ox{constructor(t){this._source=t,this._manager=new Nx(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new kx(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const s=new Bx(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class kx{constructor(t,n){this._manager=t,this._url=n.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ql(n.responseURL);const s=n.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=gb({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=mb(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Zr(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Bx{constructor(t,n,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:n,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Ql(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Zr(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Px=/^[a-z][a-z0-9\-+.]+:/i;function jx(u){if(Px.test(u))return new URL(u);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(u))}class zx{constructor(t){this.source=t,this.url=jx(t.url),Lt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Fx(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new Ux(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Fx{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Zr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ux{constructor(t,n,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:n,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Tr=Symbol("INITIAL_DATA");class Ab{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Tr}}get(t,n=null){if(n){const a=this.#e(t);return a.promise.then(()=>n(a.data)),null}const s=this.#t[t];if(!s||s.data===Tr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const n=this.#t[t];return!!n&&n.data!==Tr}delete(t){const n=this.#t[t];return!n||n.data===Tr?!1:(delete this.#t[t],!0)}resolve(t,n=null){const s=this.#e(t);s.data=n,s.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==Tr&&(yield[t,n])}}}const Hx=1e5,f0=30;let Ur=class Sn{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#_=new WeakMap;static#w=null;static#A=new Set;constructor({textContentSource:t,container:n,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=n,this.#h=s.scale*Rn.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:h}=s.rawDims;this.#b=[1,0,0,-1,-l,h+o],this.#o=a,this.#a=o,Sn.#R(),$i(n,s),this.#t.promise.finally(()=>{Sn.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=xe.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:n,done:s})=>{if(s){this.#t.resolve();return}this.#r??=n.lang,Object.assign(this.#f,n.styles),this.#T(n.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),Sn.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const s=t.scale*Rn.pixelRatio,a=t.rotation;if(a!==this.#d&&(n?.(),this.#d=a,$i(this.#l,{rotation:a})),s!==this.#h){n?.(),this.#h=s;const o={div:null,properties:null,ctx:Sn.#D(this.#r)};for(const l of this.#u)o.properties=this.#g.get(l),o.div=l,this.#E(o)}}cancel(){const t=new fi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#T(t){if(this.#i)return;this.#s.ctx??=Sn.#D(this.#r);const n=this.#u,s=this.#m;for(const a of t){if(n.length>Hx){vt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#x(a)}}#x(t){const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(n);const a=it.transform(this.#b,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let h=this.#n&&l.fontSubstitution||l.fontFamily;h=Sn.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*Sn.#j(h,l,this.#r);let g,b;o===0?(g=a[4],b=a[5]-f):(g=a[4]+f*Math.sin(o),b=a[5]-f*Math.cos(o));const y="calc(var(--total-scale-factor) *",A=n.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*b/this.#a).toFixed(2)}%`):(A.left=`${y}${g.toFixed(2)}px)`,A.top=`${y}${b.toFixed(2)}px)`),A.fontSize=`${y}${(Sn.#w*d).toFixed(2)}px)`,A.fontFamily=h,s.fontSize=d,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#n&&(n.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);S!==C&&Math.max(S,C)/Math.min(S,C)>1.5&&(E=!0)}if(E&&(s.canvasWidth=l.vertical?t.height:t.width),this.#g.set(n,s),this.#s.div=n,this.#s.properties=s,this.#E(this.#s),s.hasText&&this.#e.append(n),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#E(t){const{div:n,properties:s,ctx:a}=t,{style:o}=n;let l="";if(Sn.#w>1&&(l=`scale(${1/Sn.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=o,{canvasWidth:d,fontSize:f}=s;Sn.#M(a,f*this.#h,h);const{width:g}=a.measureText(n.textContent);g>0&&(l=`scaleX(${d*this.#h/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#D(t=null){let n=this.#y.get(t||="");if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,n),this.#_.set(n,{size:0,family:""})}return n}static#M(t,n,s){const a=this.#_.get(t);n===a.size&&s===a.family||(t.font=`${n}px ${s}`,a.size=n,a.family=s)}static#R(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#j(t,n,s){const a=this.#v.get(t);if(a)return a;const o=this.#D(s);o.canvas.width=o.canvas.height=f0,this.#M(o,f0,t);const l=o.measureText(""),h=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return h?f=h/(h+d):(xe.platform.isFirefox&&vt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?f=n.ascent:n.descent&&(f=1+n.descent)),this.#v.set(t,f),f}};const Ix=100;function vd(u={}){typeof u=="string"||u instanceof URL?u={url:u}:(u instanceof ArrayBuffer||ArrayBuffer.isView(u))&&(u={data:u});const t=new Ad,{docId:n}=t,s=u.url?WS(u.url):null,a=u.data?QS(u.data):null,o=u.httpHeaders||null,l=u.withCredentials===!0,h=u.password??null,d=u.range instanceof Sd?u.range:null,f=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:2**16;let g=u.worker instanceof Ea?u.worker:null;const b=u.verbosity,y=typeof u.docBaseUrl=="string"&&!Kr(u.docBaseUrl)?u.docBaseUrl:null,A=xl(u.cMapUrl),E=u.cMapPacked!==!1,S=u.CMapReaderFactory||(Be?sx:Jm),C=xl(u.iccUrl),x=xl(u.standardFontDataUrl),T=u.StandardFontDataFactory||(Be?ax:t0),M=xl(u.wasmUrl),O=u.WasmFactory||(Be?rx:e0),B=u.stopAtErrors!==!0,j=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,P=u.isEvalSupported!==!1,I=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!Be,X=typeof u.isImageDecoderSupported=="boolean"?u.isImageDecoderSupported:!Be&&(xe.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,Z=typeof u.disableFontFace=="boolean"?u.disableFontFace:Be,ct=u.fontExtraProperties===!0,dt=u.enableXfa===!0,at=u.ownerDocument||globalThis.document,et=u.disableRange===!0,R=u.disableStream===!0,G=u.disableAutoFetch===!0,J=u.pdfBug===!0,pt=u.CanvasFactory||(Be?ix:tx),At=u.FilterFactory||(Be?nx:ex),N=u.enableHWA===!0,q=u.useWasm!==!1,W=d?d.length:u.length??NaN,tt=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!Be&&!Z,ot=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:!!(S===Jm&&T===t0&&O===e0&&A&&x&&M&&Lr(A,document.baseURI)&&Lr(x,document.baseURI)&&Lr(M,document.baseURI)),ft=null;LS(b);const lt={canvasFactory:new pt({ownerDocument:at,enableHWA:N}),filterFactory:new At({docId:n,ownerDocument:at}),cMapReaderFactory:ot?null:new S({baseUrl:A,isCompressed:E}),standardFontDataFactory:ot?null:new T({baseUrl:x}),wasmFactory:ot?null:new O({baseUrl:M})};g||(g=Ea.create({verbosity:b,port:Xi.workerPort}),t._worker=g);const $t={docId:n,apiVersion:"5.4.296",data:a,password:h,disableAutoFetch:G,rangeChunkSize:f,length:W,docBaseUrl:y,enableXfa:dt,evaluatorOptions:{maxImageSize:j,disableFontFace:Z,ignoreErrors:B,isEvalSupported:P,isOffscreenCanvasSupported:I,isImageDecoderSupported:X,canvasMaxAreaInBytes:Q,fontExtraProperties:ct,useSystemFonts:tt,useWasm:q,useWorkerFetch:ot,cMapUrl:A,iccUrl:C,standardFontDataUrl:x,wasmUrl:M}},Et={ownerDocument:at,pdfBug:J,styleElement:ft,loadingParams:{disableAutoFetch:G,enableXfa:dt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const jt=g.messageHandler.sendWithPromise("GetDocRequest",$t,a?[a.buffer]:null);let je;if(d)je=new Ex(d,{disableRange:et,disableStream:R});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const $e=Lr(s)?Mx:Be?zx:Ox;je=new $e({url:s,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:et,disableStream:R})}return jt.then($e=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Nt=new Nr(n,$e,g.port),Ot=new qx(Nt,t,je,Et,lt,N);t._transport=Ot,Nt.send("Ready",null)})}).catch(t._capability.reject),t}class Ad{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Ad.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Sd=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,n,s=!1,a=null){this.length=t,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,n){for(const s of this.#r)s(t,n)}onDataProgress(t,n){this.#t.promise.then(()=>{for(const s of this.#n)s(t,n)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const n of this.#i)n(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,n){Yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Gx{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,n){return this._transport.getAnnotationsByType(t,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Vx{#t=!1;constructor(t,n,s,a=!1){this._pageIndex=t,this._pageInfo=n,this._transport=s,this._stats=a?new Xm:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new Ab,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new $r({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:n=t.canvas,viewport:s,intent:a="display",annotationMode:o=In.ENABLE,transform:l=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:b=null,isEditing:y=!1,recordOperations:A=!1,operationsFilter:E=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,b,y),{renderingIntent:C,cacheKey:x}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(C);let T=this._intentStates.get(x);T||(T=Object.create(null),this._intentStates.set(x,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const M=!!(C&an.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),B=!this.recordedBBoxes&&(A||O),j=X=>{if(T.renderTasks.delete(P),B){const Q=P.gfx?.dependencyTracker.take();Q&&(P.stepper&&P.stepper.setOperatorBBoxes(Q,P.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Q))}M&&(this.#t=!0),this.#e(),X?(P.capability.reject(X),this._abortOperatorList({intentState:T,reason:X instanceof Error?X:new Error(X)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new ma({callback:j,params:{canvas:n,canvasContext:t,dependencyTracker:B?new lx(n,T.operatorList.length,O):null,viewport:s,transform:l,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:E});(T.renderTasks||=new Set).add(P);const I=P.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([X,Q])=>{if(this.destroyed){j();return}if(this._stats?.time("Rendering"),!(Q.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:X,optionalContentConfig:Q}),P.operatorListChanged()}).catch(j),I}getOperatorList({intent:t="display",annotationMode:n=In.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,n,s,a,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Fr.textContent(s));const n=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:f}){if(f){s(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},a)}const l=n.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#e();return t&&n&&(this._stats&&=new Xm),n}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,n){const s=this._intentStates.get(n);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let s=0,a=t.length;s<a;s++)n.operatorList.fnArray.push(t.fnArray[s]),n.operatorList.argsArray.push(t.argsArray[s]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:a},l).getReader(),f=this._intentStates.get(n);f.streamReader=d;const g=()=>{d.read().then(({value:b,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,f),g())},b=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(b);else if(f.opListReadCapability)f.opListReadCapability.reject(b);else throw b}})};g()}_abortOperatorList({intentState:t,reason:n,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof Kl){let a=Ix;n.extraDelay>0&&n.extraDelay<1e3&&(a+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},a);return}}if(t.streamReader.cancel(new fi(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Gi,Tn,ui,ys,Vl,vs,As,Pe,kl,Sb,xb,Or,xa,Bl;const Jt=class Jt{constructor({name:t=null,port:n=null,verbosity:s=NS()}={}){Bn(this,Pe);Bn(this,Gi,Promise.withResolvers());Bn(this,Tn,null);Bn(this,ui,null);Bn(this,ys,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,n){if(Zt(Jt,As).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Zt(Jt,As).set(n,this),Pn(this,Pe,Sb).call(this,n)}else Pn(this,Pe,xb).call(this)}get promise(){return Zt(this,Gi).promise}get port(){return Zt(this,ui)}get messageHandler(){return Zt(this,Tn)}destroy(){this.destroyed=!0,Zt(this,ys)?.terminate(),qe(this,ys,null),Zt(Jt,As).delete(Zt(this,ui)),qe(this,ui,null),Zt(this,Tn)?.destroy(),qe(this,Tn,null)}static create(t){const n=Zt(this,As).get(t?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Jt(t)}static get workerSrc(){if(Xi.workerSrc)return Xi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",(async()=>Zt(this,xa,Bl)?Zt(this,xa,Bl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gi=new WeakMap,Tn=new WeakMap,ui=new WeakMap,ys=new WeakMap,Vl=new WeakMap,vs=new WeakMap,As=new WeakMap,Pe=new WeakSet,kl=function(){Zt(this,Gi).resolve(),Zt(this,Tn).send("configure",{verbosity:this.verbosity})},Sb=function(t){qe(this,ui,t),qe(this,Tn,new Nr("main","worker",t)),Zt(this,Tn).on("ready",()=>{}),Pn(this,Pe,kl).call(this)},xb=function(){if(Zt(Jt,vs)||Zt(Jt,xa,Bl)){Pn(this,Pe,Or).call(this);return}let{workerSrc:t}=Jt;try{Jt._isSameOrigin(window.location,t)||(t=Jt._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),s=new Nr("main","worker",n),a=()=>{o.abort(),s.destroy(),n.terminate(),this.destroyed?Zt(this,Gi).reject(new Error("Worker was destroyed")):Pn(this,Pe,Or).call(this)},o=new AbortController;n.addEventListener("error",()=>{Zt(this,ys)||a()},{signal:o.signal}),s.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}qe(this,Tn,s),qe(this,ui,n),qe(this,ys,n),Pn(this,Pe,kl).call(this)}),s.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{Pn(this,Pe,Or).call(this)}});const l=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};l();return}catch{$l("The worker has been disabled.")}Pn(this,Pe,Or).call(this)},Or=function(){Zt(Jt,vs)||(vt("Setting up fake worker."),qe(Jt,vs,!0)),Jt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Zt(this,Gi).reject(new Error("Worker was destroyed"));return}const n=new JS;qe(this,ui,n);const s=`fake${Cm(Jt,Vl)._++}`,a=new Nr(s+"_worker",s,n);t.setup(a,n),qe(this,Tn,new Nr(s,s+"_worker",n)),Pn(this,Pe,kl).call(this)}).catch(t=>{Zt(this,Gi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},xa=new WeakSet,Bl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Bn(Jt,xa),Bn(Jt,Vl,0),Bn(Jt,vs,!1),Bn(Jt,As,new WeakMap),Be&&(qe(Jt,vs,!0),Xi.workerSrc||="./pdf.worker.mjs"),Jt._isSameOrigin=(t,n)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(n,s);return s.origin===a.origin},Jt._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Jt.fromPort=t=>{if(HS("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Jt.create(t)};let Ea=Jt;class qx{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,n,s,a,o,l){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new Ab,this.fontLoader=new $S({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,n=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,a),a}get annotationStorage(){return wt(this,"annotationStorage",new gd)}getRenderingIntent(t,n=In.ENABLE,s=null,a=!1,o=!1){let l=an.DISPLAY,h=Gh;switch(t){case"any":l=an.ANY;break;case"display":break;case"print":l=an.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&an.PRINT&&s instanceof ob?s:this.annotationStorage;switch(n){case In.DISABLE:l+=an.ANNOTATIONS_DISABLE;break;case In.ENABLE:break;case In.ENABLE_FORMS:l+=an.ANNOTATIONS_FORMS;break;case In.ENABLE_STORAGE:l+=an.ANNOTATIONS_STORAGE,h=d.serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${n}`)}a&&(l+=an.IS_EDITING),o&&(l+=an.OPLIST);const{ids:f,hash:g}=d.modifiedIds,b=[l,h.hash,g];return{renderingIntent:l,cacheKey:b.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Ur.cleanup(),this._networkStream?.cancelAllRequests(new fi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(s,a)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Lt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{n.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){a.close();return}Lt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new Gx(s,this))}),t.on("DocException",s=>{n._capability.reject(Xe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!n.onPassword)throw Xe(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};n.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{n.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const g=o.error;vt(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const l=new Vt(o),h=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,b)=>globalThis.FontInspector.fontAdded(g,b):null,d=new KS(l,h,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Lt(f,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,b]of g.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(s)){if(h._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||n.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,s=this.#i.get(n);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new Vx(n,o,this,this._params.pdfBug);return this.#e.set(n,l),l});return this.#i.set(n,a),a}getPageIndex(t){return Vh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:n})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(n=>new wx(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new Sx(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Ur.cleanup()}}cachedPageNumber(t){if(!Vh(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(n)??null}}class Xx{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class ma{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:b=!1,pageColors:y=null,enableHWA:A=!1,operationsFilter:E=null}){this.callback=t,this.params=n,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=b,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Xx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=A,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(ma.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ma.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ba(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ma.#e.delete(this._canvas),t||=new Kl(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ma.#e.delete(this._canvas),this.callback())))}}const wb="5.4.296",Eb="f56dc8601";class rn{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return wt(this,"_keyboardManager",new Wr([[["Escape","mac+Escape"],rn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],rn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],rn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],rn.prototype._moveToPrevious],[["Home","mac+Home"],rn.prototype._moveToBeginning],[["End","mac+End"],rn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||n,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",rn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const n=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:n}),t.addEventListener("keydown",this.#m.bind(this),{signal:n});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),n=this.#l._signal;t.addEventListener("contextmenu",ln,{signal:n}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",rn.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:n}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:n}),t}#f(t,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Rt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const n=t.target.getAttribute("data-color");n&&this.#f(n,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#n.lastChild?.focus()}#m(t){rn._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#h();this.#t.append(n)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const n=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=n.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Hr{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Hr.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:n,colorValue:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Hr.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(n,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function p0(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}function Mr(u){return Math.max(0,Math.min(255,255*u))}class g0{static CMYK_G([t,n,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*n+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Mr(t),[t,t,t]}static G_HTML([t]){const n=p0(t);return`#${n}${n}${n}`}static RGB_G([t,n,s]){return["G",.3*t+.59*n+.11*s]}static RGB_rgb(t){return t.map(Mr)}static RGB_HTML(t){return`#${t.map(p0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,n+a)]}static CMYK_rgb([t,n,s,a]){return[Mr(1-Math.min(1,t+a)),Mr(1-Math.min(1,s+a)),Mr(1-Math.min(1,n+a))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,s]){const a=1-t,o=1-n,l=1-s,h=Math.min(a,o,l);return["CMYK",a,o,l,h]}}class Yx{create(t,n,s=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${n}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${n}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Yt("Abstract method `_createSVG` called.")}}class Ir extends Yx{_createSVG(t){return document.createElementNS(ci,t)}}const $x=9,xs=new WeakSet,Kx=new Date().getTimezoneOffset()*60*1e3;class m0{static create(t){switch(t.data.annotationType){case ue.LINK:return new xd(t);case ue.TEXT:return new Qx(t);case ue.WIDGET:switch(t.data.fieldType){case"Tx":return new Zx(t);case"Btn":return t.data.radioButton?new _b(t):t.data.checkBox?new tw(t):new ew(t);case"Ch":return new nw(t);case"Sig":return new Jx(t)}return new Cs(t);case ue.POPUP:return new Yh(t);case ue.FREETEXT:return new Cb(t);case ue.LINE:return new sw(t);case ue.SQUARE:return new aw(t);case ue.CIRCLE:return new rw(t);case ue.POLYLINE:return new Tb(t);case ue.CARET:return new lw(t);case ue.INK:return new wd(t);case ue.POLYGON:return new ow(t);case ue.HIGHLIGHT:return new Mb(t);case ue.UNDERLINE:return new cw(t);case ue.SQUIGGLY:return new uw(t);case ue.STRIKEOUT:return new hw(t);case ue.STAMP:return new Rb(t);case ue.FILEATTACHMENT:return new dw(t);default:return new se(t)}}}class se{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:n}){return!!(t?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return se._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,n=this.annotationStorage?.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:s,rect:a}=this.data;let o=-1/0,l=-1/0;if(n?.length>=8){for(let h=0;h<n.length;h+=8)n[h+1]>l?(l=n[h+1],o=n[h+2]):n[h+1]===l&&(o=Math.max(o,n[h+2]));return[o,l]}if(s?.length>=1){for(const h of s)for(let d=0,f=h.length;d<f;d+=2)h[d+1]>l?(l=h[d+1],o=h[d]):h[d+1]===l&&(o=Math.max(o,h[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:n},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=n[3]-t[1]+n[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${jr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:n}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(n.id,{popup:s})||this.annotationStorage.setValue(`${jr}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:n.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:n,popup:s}=t;n&&this.#n(n);let a=this.#i?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#i.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:n},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}}}=this;s?.splice(0,4,...t),n.left=`${100*(t[0]-h)/o}%`,n.top=`${100*(l-t[3]+d)/l}%`,a===0?(n.width=`${100*(t[2]-t[0])/o}%`,n.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:n,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),!(this instanceof Cs)&&!(this instanceof xd)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof Yh){const{rotation:S}=n;return!n.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:h,height:d}=this;if(!t&&n.borderStyle.width>0){l.borderWidth=`${n.borderStyle.width}px`;const S=n.borderStyle.horizontalCornerRadius,C=n.borderStyle.verticalCornerRadius;if(S>0||C>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof _b){const T=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(n.borderStyle.style){case fa.SOLID:l.borderStyle="solid";break;case fa.DASHED:l.borderStyle="dashed";break;case fa.BEVELED:vt("Unimplemented border style: beveled");break;case fa.INSET:vt("Unimplemented border style: inset");break;case fa.UNDERLINE:l.borderBottomStyle="solid";break}const x=n.borderColor||null;x?(this.#e=!0,l.borderColor=it.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):l.borderWidth=0}const f=it.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:b,pageX:y,pageY:A}=a.rawDims;l.left=`${100*(f[0]-y)/g}%`,l.top=`${100*(f[1]-A)/b}%`;const{rotation:E}=n;return n.hasOwnCanvas||E===0?(l.width=`${100*h/g}%`,l.height=`${100*d/b}%`):this.setRotation(E,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),n.style.width=`${100*o/s}%`,n.style.height=`${100*l/a}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,s,a)=>{const o=a.detail[n],l=o[0],h=o.slice(1);a.target.style[s]=g0[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[s]:g0[`${l}_rgb`](h)})};return wt(this,"_commonActions",{display:n=>{const{display:s}=n.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,n){const s=this._commonActions;for(const a of Object.keys(n.detail))(t[a]||s[a])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[a,o]of Object.entries(n)){const l=s[a];if(l){const h={detail:{[a]:o},target:t};l(h),delete n[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,x,T]=t.subarray(2,6);if(a===S&&o===C&&n===x&&s===T)return}const{style:l}=this.container;let h;if(this.#e){const{borderColor:S,borderWidth:C}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=a-n,f=o-s,{svgFactory:g}=this,b=g.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const y=g.createElement("defs");b.append(y);const A=g.createElement("clipPath"),E=`clippath_${this.data.id}`;A.setAttribute("id",E),A.setAttribute("clipPathUnits","objectBoundingBox"),y.append(A);for(let S=2,C=t.length;S<C;S+=8){const x=t[S],T=t[S+1],M=t[S+2],O=t[S+3],B=g.createElement("rect"),j=(M-n)/d,P=(o-T)/f,I=(x-M)/d,X=(T-O)/f;B.setAttribute("x",j),B.setAttribute("y",P),B.setAttribute("width",I),B.setAttribute("height",X),A.append(B),h?.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${P}" width="${I}" height="${X}"/>`)}this.#e&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(b),this.container.style.clipPath=`url(#${E})`}_createPopup(t=null){const{data:n}=this;let s,a;t?(s={str:t.text},a=t.date):(s=n.contentsObj,a=n.modificationDate);const o=this.#i=new Yh({data:{color:n.color,titleObj:n.titleObj,modificationDate:a,contentsObj:s,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:h}of a){if(o===-1||l===n)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!xs.has(f)){vt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:f})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==n&&xs.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Wx extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class xd extends se{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n,s=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(t.title=s),this.#t()}#e(t,n,s="",a=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,a),!1),this.#t()}#i(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1))}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=n,h=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const b of a){const y=this._fieldObjects[b]||[];for(const{id:A}of y)g.add(A)}for(const b of Object.values(this._fieldObjects))for(const y of b)g.has(y.id)===l&&h.push(y)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,f=[];for(const g of h){const{id:b}=g;switch(f.push(b),g.type){case"text":{const A=g.defaultValue||"";d.setValue(b,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(b,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(b,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${b}"]`);if(y){if(!xs.has(y)){vt(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class Qx extends se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Cs extends se{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return xe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!n.focused||!l.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,n,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":it.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||$x,o=t.style;let l;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(f/(Rh*a))||1,b=f/g;l=Math.min(a,d(b/Rh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(a,d(f/Rh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=it.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class Zx extends Cs{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[n]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(n,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),xs.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:b}=this.data,y=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",E=>{t.setValue(n,{value:E.target.value}),this.setPropertyOnSiblings(s,"value",E.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",E=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=E=>{const{formattedValue:S}=d;S!=null&&(E.target.value=S),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:C}=S;if(y&&(C.type=g,b&&(C.step=b)),d.userValue){const x=d.userValue;if(y)if(g==="time"){const T=new Date(x),M=[T.getHours(),T.getMinutes(),T.getSeconds()];C.value=M.map(O=>O.toString().padStart(2,"0")).join(":")}else C.value=new Date(x-Kx).toISOString().split(g==="date"?"T":".",1)[0];else C.value=x}d.lastCommittedValue=C.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const C={value(x){d.userValue=x.detail.value??"",y||t.setValue(n,{value:d.userValue.toString()}),x.target.value=d.userValue},formattedValue(x){const{formattedValue:T}=x.detail;d.formattedValue=T,T!=null&&x.target!==document.activeElement&&(x.target.value=T);const M={formattedValue:T};y&&(M.value=T),t.setValue(n,M)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{const{charLimit:T}=x.detail,{target:M}=x;if(T===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",T);let O=d.userValue;!O||O.length<=T||(O=O.slice(0,T),M.value=d.userValue=O,t.setValue(n,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(C,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let C=-1;if(S.key==="Escape"?C=0:S.key==="Enter"&&!this.data.multiLine?C=2:S.key==="Tab"&&(d.commitKey=3),C===-1)return;const{value:x}=S.target;d.lastCommittedValue!==x&&(d.lastCommittedValue=x,d.userValue=x,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:x,willCommit:!0,commitKey:C,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const E=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:C}=S;let{value:x}=C;if(y){if(x&&g==="time"){const T=x.split(":").map(M=>parseInt(M,10));x=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),C.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();C.type="text"}d.userValue=x,d.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:x,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),E(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:C,target:x}=S,{value:T,selectionStart:M,selectionEnd:O}=x;let B=M,j=O;switch(S.inputType){case"deleteWordBackward":{const P=T.substring(0,M).match(/\w*[^\w]*$/);P&&(B-=P[0].length);break}case"deleteWordForward":{const P=T.substring(M).match(/^[^\w]*\w*/);P&&(j+=P[0].length);break}case"deleteContentBackward":M===O&&(B-=1);break;case"deleteContentForward":M===O&&(j+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,change:C||"",willCommit:!1,selStart:B,selEnd:j}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Jx extends Cs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class tw extends Cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return xs.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const f of this._getElementsByName(h,s)){const g=d&&f.exportValue===n.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const h=n.defaultFieldValue||"Off";l.target.checked=h===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class _b extends Cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof a=="string"&&(a=a!==n.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(n.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(xs.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const f of this._getElementsByName(h,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const h=n.defaultFieldValue;l.target.checked=h!=null&&h===n.buttonValue}),this.enableScripting&&this.hasJSActions){const l=n.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const g=l===f.detail.value;for(const b of this._getElementsByName(f.target.name)){const y=g&&b.id===s;b.domElement&&(b.domElement.checked=y),t.setValue(b.id,{value:y})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class ew extends xd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class nw extends Cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,s=t.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");xs.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const b=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===b});for(const g of this.data.options){const b=document.createElement("option");b.textContent=g.displayValue,b.value=g.exportValue,s.value.includes(g.exportValue)&&(b.setAttribute("selected",!0),o=!1),a.append(b)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const h=g=>{const b=g?"value":"textContent",{options:y,multiple:A}=a;return A?Array.prototype.filter.call(y,E=>E.selected).map(E=>E[b]):y.selectedIndex===-1?null:y[y.selectedIndex][b]};let d=h(!1);const f=g=>{const b=g.target.options;return Array.prototype.map.call(b,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const b={value(y){l?.();const A=y.detail.value,E=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=E.has(S.value);t.setValue(n,{value:h(!0)}),d=h(!1)},multipleSelection(y){a.multiple=!0},remove(y){const A=a.options,E=y.detail.remove;A[E].selected=!1,a.remove(E),A.length>0&&Array.prototype.findIndex.call(A,C=>C.selected)===-1&&(A[0].selected=!0),t.setValue(n,{value:h(!0),items:f(y)}),d=h(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(n,{value:null,items:[]}),d=h(!1)},insert(y){const{index:A,displayValue:E,exportValue:S}=y.detail.insert,C=a.children[A],x=document.createElement("option");x.textContent=E,x.value=S,C?C.before(x):a.append(x),t.setValue(n,{value:h(!0),items:f(y)}),d=h(!1)},items(y){const{items:A}=y.detail;for(;a.length!==0;)a.remove(0);for(const E of A){const{displayValue:S,exportValue:C}=E,x=document.createElement("option");x.textContent=S,x.value=C,a.append(x)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(n,{value:h(!0),items:f(y)}),d=h(!1)},indices(y){const A=new Set(y.detail.indices);for(const E of y.target.options)E.selected=A.has(E.index);t.setValue(n,{value:h(!0)}),d=h(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(b,g)}),a.addEventListener("input",g=>{const b=h(!0),y=h(!1);t.setValue(n,{value:b}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:d,change:y,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(n,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Yh extends se{constructor(t){const{data:n,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&se._hasPopupData(n)}),this.elements=s,o&&se._hasPopupData(n)){const l=this.popup=this.#t();for(const h of s)h.popup=l}else this.popup=null}#t(){return new iw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${ud}${a}`).join(",")),this.container}}class iw{#t=null;#e=this.#V.bind(this);#i=this.#F.bind(this);#n=this.#O.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#b=null;#v=null;#y=null;#_=null;#w=null;#A=null;#T=!1;#x=null;#E=null;constructor({container:t,color:n,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:h,parent:d,rect:f,parentRect:g,open:b,commentManager:y=null}){this.#a=t,this.#w=a,this.#o=l,this.#_=h,this.#d=d,this.#s=n,this.#y=f,this.#h=g,this.#l=s,this.#t=y,this.#x=s[0],this.#c=Hl.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,b&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const n of this.trigger)n.addEventListener("click",this.#r,{signal:t}),n.addEventListener("pointerenter",this.#n,{signal:t}),n.addEventListener("pointerleave",this.#i,{signal:t}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(n=>n.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#b||this.#M(),!this.#b))return;const{signal:t}=this.#p=new AbortController,n=!!this.#x.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!n)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!n)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(n){this.#g=this.#x.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#g=document.createElement("button");l.className="annotationCommentButton";const h=this.#x.container;l.style.zIndex=h.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#j(),this.#R(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),h.after(l)}}#R(){if(this.#x.extraPopupElement&&!this.#x.editor)return;this.renderCommentButton();const[t,n]=this.#b,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${n}% - var(--comment-button-dim))`}#j(){this.#x.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:n}=this.#x.commentData;return t?this.#d._commentManager.makeCommentColor(t,n):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:n,opacity:s,creationDate:a,modificationDate:o}=this.#x.commentData;return{contentsObj:{str:this.comment},richText:t,color:n,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#g}get comment(){return this.#E||=this.#x.commentText,this.#E}set comment(t){t!==this.comment&&(this.#x.commentText=this.#E=t)}get parentBoundingClientRect(){return this.#x.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:n}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=n)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:n,height:s}=this.#g.getBoundingClientRect(),{x:a,y:o,width:l,height:h}=this.#x.layer.getBoundingClientRect();return[(t-a)/l,(n+s-o)/h]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[n,s]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:l,width:h,height:d}=a;this.#t.showDialog(null,this,o+n*h,l+s*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=it.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",n.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(n),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),n.append(s)}dd({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#N(){const t=this.#_,n=this.#o;return t?.str&&(!n?.str||n.str===t.str)&&this.#_.html||null}get#k(){return this.#N?.attributes?.style?.fontSize||0}get#z(){return this.#N?.attributes?.style?.color||null}#B(t){const n=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:this.#z,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:a});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:n,deleted:s}){if(this.#t){s?(this.remove(),this.#E=null):n&&(n.deleted?this.remove():(this.#j(),this.#E=n.text)),t&&(this.#b=null,this.#M(),this.#R());return}if(s||n?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#_},t&&(this.#u=null),n&&n.text&&(this.#_=this.#B(n.text),this.#c=Hl.toDateObject(n.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#_}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,h=l?this.#h:this.#y;for(const E of this.#l)if(!h||it.intersect(E.data.rect,h)!==null){h=E.data.rect,l=!0;break}const d=it.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=l?h[2]-h[0]+5:0,b=d[0]+g,y=d[1];this.#u=[100*(b-a)/n,100*(y-o)/s];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#F(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#O(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#C(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#F(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#T&&(this.#m||this.#O(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class Cb extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=yt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class sw extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class aw extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class rw extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Tb extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!n)return this.container;const h=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,b=n.length;g<b;g+=2){const y=n[g]-t[0],A=t[3]-n[g+1];d.push(`${y},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),h.append(f),this.container.append(h),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ow extends Tb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lw extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class wd extends se{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?yt.HIGHLIGHT:yt.INK}#i(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:h,height:d}=this.#i(n,t),f=this.svgFactory.create(h,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let b=0,y=s.length;b<y;b++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[b].join(",")),g.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:a}=t,o=this.#t;if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let l=0,h=this.#e.length;l<h;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:h,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Mb extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=yt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class cw extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class uw extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class hw extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Rb extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=yt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class dw extends se{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=xe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Ed=class Db{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=n,this.#e=s,this.#r=h||null,this.#s=f||null,this.#i=g||new gd,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,n,s){const a=t.firstChild||t,o=a.id=`${ud}${n}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[h,d]of l)a.setAttribute(h,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:n}=t,s=this.div;$i(s,this.viewport);const a=new Map,o={data:null,layer:s,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ir,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const h=l.annotationType===ue.POPUP;if(h){const g=a.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=m0.create(o);if(!d.isRenderable)continue;if(!h&&l.popupRef){const g=a.get(l.popupRef);g?g.push(d):a.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const n={data:null,layer:this.div,linkService:this.#s,svgFactory:new Ir,parent:this};for(const s of t){s.borderStyle||=Db._defaultBorderStyle,n.data=s;const a=m0.create(n);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,s.id,null)}}update({viewport:t}){const n=this.div;this.viewport=t,$i(n,{rotation:t.rotation}),this.#o(),n.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[n,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#n.get(n);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:n}=this,{id:s,rotation:a}=t,o=new Wx({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return n.append(l),this.#t?.moveElementInDOM(n,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Ml=/\r\n?|\n/g;class Ae extends ht{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ae.prototype,n=o=>o.isEmpty(),s=pi.TRANSLATE_SMALL,a=pi.TRANSLATE_BIG;return wt(this,"_keyboardManager",new Wr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static _type="freetext";static _editorType=yt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ae._defaultColor||ht._defaultLineColor,this.#n=t.fontSize||Ae._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,n){ht.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Rt.FREETEXT_SIZE:Ae._defaultFontSize=n;break;case Rt.FREETEXT_COLOR:Ae._defaultColor=n;break}}updateParams(t,n){switch(t){case Rt.FREETEXT_SIZE:this.#r(n);break;case Rt.FREETEXT_COLOR:this.#s(n);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,Ae._defaultFontSize],[Rt.FREETEXT_COLOR,Ae._defaultColor||ht._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,this.#n],[Rt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Hr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.FREETEXT_COLOR}#r(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},s=this.#n;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const n=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ae._internalPadding*t,-(Ae._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Ae.#c(s)),n=s);return t.join(`
`)}#o(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,n=this.#t=this.#a().trimEnd();if(t===n)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ae._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[f,g]=this.pageDimensions,[b,y]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(l[0]-b)/f,E=n+this.height-(l[1]-y)/g;break;case 90:A=t+(l[0]-b)/f,E=n-(l[1]-y)/g,[h,d]=[d,-h];break;case 180:A=t-this.width+(l[0]-b)/f,E=n-(l[1]-y)/g,[h,d]=[-h,-d];break;case 270:A=t+(l[0]-b-this.height*g)/f,E=n+(l[1]-y-this.width*f)/g,[h,d]=[-d,h];break}this.setAt(A*a,E*o,h,d)}else this._moveAfterPaste(t,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ml,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=Ae.#h(n.getData("text")||"").replaceAll(Ml,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:d}=l,f=[],g=[];if(h.nodeType===Node.TEXT_NODE){const A=h.parentElement;if(g.push(h.nodeValue.slice(d).replaceAll(Ml,"")),A!==this.editorDiv){let E=f;for(const S of this.editorDiv.childNodes){if(S===A){E=g;continue}E.push(Ae.#c(S))}}f.push(h.nodeValue.slice(0,d).replaceAll(Ml,""))}else if(h===this.editorDiv){let A=f,E=0;for(const S of this.editorDiv.childNodes)E++===d&&(A=g),A.push(Ae.#c(S))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const b=new Range;let y=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const E=A.nodeValue.length;if(y<=E){b.setStart(A,y),b.setEnd(A,y);break}y-=E}o.removeAllRanges(),o.addRange(b)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ae._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,s){let a=null;if(t instanceof Cb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:d,rotation:f,id:g,popupRef:b,richText:y,contentsObj:A,creationDate:E,modificationDate:S},textContent:C,textPosition:x,parent:{page:{pageNumber:T}}}=t;if(!C||C.length===0)return null;a=t={annotationType:yt.FREETEXT,color:Array.from(h),fontSize:l,value:C.join(`
`),position:x,pageIndex:T-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:b,comment:A?.str||null,richText:y,creationDate:E,modificationDate:S}}const o=await super.deserialize(t,n,s);return o.#n=t.fontSize,o.color=it.makeHexColor(...t.color),o.#t=Ae.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:n,fontSize:this.#n,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:n,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((l,h)=>l!==a[h])||t.pageIndex!==o}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class nt{static PRECISION=1e-4;toSVGPath(){Yt("Abstract method `toSVGPath` must be implemented.")}get box(){Yt("Abstract getter `box` must be implemented.")}serialize(t,n){Yt("Abstract method `serialize` must be implemented.")}static _rescale(t,n,s,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=n+t[h]*a,l[h+1]=s+t[h+1]*o;return l}static _rescaleAndSwap(t,n,s,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=n+t[h+1]*a,l[h+1]=s+t[h]*o;return l}static _translate(t,n,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=n+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,s,a,o){switch(o){case 90:return[1-n/s,t/a];case 180:return[1-t/s,1-n/a];case 270:return[n/s,1-t/a];default:return[t/s,n/a]}}static _normalizePagePoint(t,n,s){switch(s){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,s,a,o,l){return[(t+5*s)/6,(n+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class bs{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=bs.#m+bs.#p;constructor({x:t,y:n},s,a,o,l,h=0){this.#t=s,this.#h=o*a,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,n],6),this.#i=h,this.#l=bs.#m*a,this.#c=bs.#u*a,this.#d=a,this.#f.push(t,n)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#a+(t[0]-n[0])/2-s)/o,(this.#o+(t[1]-n[1])/2-a)/l,(this.#a+(n[0]-t[0])/2-s)/o,(this.#o+(n[1]-t[1])/2-a)/l]}add({x:t,y:n}){this.#a=t,this.#o=n;const[s,a,o,l]=this.#t;let[h,d,f,g]=this.#s.subarray(8,12);const b=t-f,y=n-g,A=Math.hypot(b,y);if(A<this.#c)return!1;const E=A-this.#l,S=E/A,C=S*b,x=S*y;let T=h,M=d;h=f,d=g,f+=C,g+=x,this.#f?.push(t,n);const O=-x/E,B=C/E,j=O*this.#h,P=B*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+j,g+P],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-j,g-P],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([h+j,d+P],2),this.#r.push(NaN,NaN,NaN,NaN,(h+j-s)/o,(d+P-a)/l),this.#s.set([h-j,d-P],14),this.#e.push(NaN,NaN,NaN,NaN,(h-j-s)/o,(d-P-a)/l)),this.#s.set([T,M,h,d,f,g],6),!this.isEmpty()):(this.#s.set([T,M,h,d,f,g],6),Math.abs(Math.atan2(M-d,T-h)-Math.atan2(x,C))<Math.PI/2?([h,d,f,g]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+f)/2-s)/o,((d+g)/2-a)/l),[h,d,T,M]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+h)/2-s)/o,((M+d)/2-a)/l),!0):([T,M,h,d,f,g]=this.#s.subarray(0,6),this.#r.push(((T+5*h)/6-s)/o,((M+5*d)/6-a)/l,((5*h+f)/6-s)/o,((5*d+g)/6-a)/l,((h+f)/2-s)/o,((d+g)/2-a)/l),[f,g,h,d,T,M]=this.#s.subarray(12,18),this.#e.push(((T+5*h)/6-s)/o,((M+5*d)/6-a)/l,((5*h+f)/6-s)/o,((5*d+g)/6-a)/l,((h+f)/2-s)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,n=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#y(s);for(let a=n.length-6;a>=6;a-=6)isNaN(n[a])?s.push(`L${n[a+4]} ${n[a+5]}`):s.push(`C${n[a]} ${n[a+1]} ${n[a+2]} ${n[a+3]} ${n[a+4]} ${n[a+5]}`);return this.#v(s),s.join(" ")}#b(){const[t,n,s,a]=this.#t,[o,l,h,d]=this.#g();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-n)/a} L${(this.#s[4]-t)/s} ${(this.#s[5]-n)/a} L${o} ${l} L${h} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-n)/a} L${(this.#s[14]-t)/s} ${(this.#s[15]-n)/a} Z`}#v(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#y(t){const[n,s,a,o]=this.#t,l=this.#s.subarray(4,6),h=this.#s.subarray(16,18),[d,f,g,b]=this.#g();t.push(`L${(l[0]-n)/a} ${(l[1]-s)/o} L${d} ${f} L${g} ${b} L${(h[0]-n)/a} ${(h[1]-s)/o}`)}newFreeDrawOutline(t,n,s,a,o,l){return new Lb(t,n,s,a,o,l)}getOutlines(){const t=this.#r,n=this.#e,s=this.#s,[a,o,l,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let b=0,y=d.length-2;b<y;b+=2)d[b]=(this.#f[b]-a)/l,d[b+1]=(this.#f[b+1]-o)/h;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/h,isNaN(s[6])&&!this.isEmpty())return this.#_(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let b=0;b<g;b+=2){if(isNaN(t[b])){f[b]=f[b+1]=NaN;continue}f[b]=t[b],f[b+1]=t[b+1]}g=this.#A(f,g);for(let b=n.length-6;b>=6;b-=6)for(let y=0;y<6;y+=2){if(isNaN(n[b+y])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=n[b+y],f[g+1]=n[b+y+1],g+=2}return this.#w(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#_(t){const n=this.#s,[s,a,o,l]=this.#t,[h,d,f,g]=this.#g(),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(n[2]-s)/o,(n[3]-a)/l,NaN,NaN,NaN,NaN,(n[4]-s)/o,(n[5]-a)/l,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(n[16]-s)/o,(n[17]-a)/l,NaN,NaN,NaN,NaN,(n[14]-s)/o,(n[15]-a)/l],0),this.newFreeDrawOutline(b,t,this.#t,this.#d,this.#i,this.#n)}#w(t,n){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6}#A(t,n){const s=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,h,d]=this.#t,[f,g,b,y]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/h,(s[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,b,y,NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-l)/d],n),n+=24}}class Lb extends nt{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,n,s,a,o,l){super(),this.#a=t,this.#r=n,this.#t=s,this.#s=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[h,d,f,g]=this.#e;for(let b=0,y=t.length;b<y;b+=2)t[b]=(t[b]-h)/f,t[b+1]=(t[b+1]-d)/g;for(let b=0,y=n.length;b<y;b+=2)n[b]=(n[b]-h)/f,n[b+1]=(n[b+1]-d)/g}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let n=6,s=this.#a.length;n<s;n+=6){if(isNaN(this.#a[n])){t.push(`L${this.#a[n+4]} ${this.#a[n+5]}`);continue}t.push(`C${this.#a[n]} ${this.#a[n+1]} ${this.#a[n+2]} ${this.#a[n+3]} ${this.#a[n+4]} ${this.#a[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,a],o){const l=s-t,h=a-n;let d,f;switch(o){case 0:d=nt._rescale(this.#a,t,a,l,-h),f=nt._rescale(this.#r,t,a,l,-h);break;case 90:d=nt._rescaleAndSwap(this.#a,t,n,l,h),f=nt._rescaleAndSwap(this.#r,t,n,l,h);break;case 180:d=nt._rescale(this.#a,s,n,-l,h),f=nt._rescale(this.#r,s,n,-l,h);break;case 270:d=nt._rescaleAndSwap(this.#a,s,a,-l,-h),f=nt._rescaleAndSwap(this.#r,s,a,-l,-h);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const n=this.#a;let s=n[4],a=n[5];const o=[s,a,s,a];let l=s,h=a,d=s,f=a;const g=t?Math.max:Math.min,b=new Float32Array(4);for(let A=6,E=n.length;A<E;A+=6){const S=n[A+4],C=n[A+5];isNaN(n[A])?(it.pointBoundingBox(S,C,o),h>C?(l=S,h=C):h===C&&(l=g(l,S)),f<C?(d=S,f=C):f===C&&(d=g(d,S))):(b[0]=b[1]=1/0,b[2]=b[3]=-1/0,it.bezierBoundingBox(s,a,...n.slice(A,A+6),b),it.rectBoundingBox(b[0],b[1],b[2],b[3],o),h>b[1]?(l=b[0],h=b[1]):h===b[1]&&(l=g(l,b[0])),f<b[3]?(d=b[2],f=b[3]):f===b[3]&&(d=g(d,b[2]))),s=S,a=C}const y=this.#e;y[0]=o[0]-this.#i,y[1]=o[1]-this.#i,y[2]=o[2]-o[0]+2*this.#i,y[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,h],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,n,s,a,o,l=0){return new bs(t,n,s,a,o,l)}getNewOutline(t,n){const[s,a,o,l]=this.#e,[h,d,f,g]=this.#t,b=o*f,y=l*g,A=s*f+h,E=a*g+d,S=this.newOutliner({x:this.#r[0]*b+A,y:this.#r[1]*y+E},this.#t,this.#s,t,this.#n,n??this.#i);for(let C=2;C<this.#r.length;C+=2)S.add({x:this.#r[C]*b+A,y:this.#r[C+1]*y+E});return S.getOutlines()}}class $h{#t;#e;#i;#n=[];#r=[];constructor(t,n=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:C,width:x,height:T}of t){const M=Math.floor((S-n)/l)*l,O=Math.ceil((S+x+n)/l)*l,B=Math.floor((C-n)/l)*l,j=Math.ceil((C+T+n)/l)*l,P=[M,B,j,!0],I=[O,B,j,!1];this.#n.push(P,I),it.rectBoundingBox(M,B,O,j,o)}const h=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let b=a?-1/0:1/0,y=1/0;const A=this.#n.at(a?-1:-2),E=[A[0],A[2]];for(const S of this.#n){const[C,x,T,M]=S;!M&&a?x<y?(y=x,b=C):x===y&&(b=Math.max(b,C)):M&&!a&&(x<y?(y=x,b=C):x===y&&(b=Math.min(b,C))),S[0]=(C-f)/h,S[1]=(x-g)/d,S[2]=(T-g)/d}this.#t=new Float32Array([f,g,h,d]),this.#e=[b,y],this.#i=E}getOutlines(){this.#n.sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const t=[];for(const n of this.#n)n[3]?(t.push(...this.#l(n)),this.#o(n)):(this.#c(n),t.push(...this.#l(n)));return this.#s(t)}#s(t){const n=[],s=new Set;for(const l of t){const[h,d,f]=l;n.push([h,d,l],[h,f,l])}n.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=n.length;l<h;l+=2){const d=n[l][2],f=n[l+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[h,d,f,g,b]=l;s.delete(l);let y=h,A=d;for(o=[h,f],a.push(o);;){let E;if(s.has(g))E=g;else if(s.has(b))E=b;else break;s.delete(E),[h,d,f,g,b]=E,y!==h&&(o.push(y,A,h,A===d?d:f),y=h),A=A===d?f:d}o.push(y,A)}return new fw(a,this.#t,this.#e,this.#i)}#a(t){const n=this.#r;let s=0,a=n.length-1;for(;s<=a;){const o=s+a>>1,l=n[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,n]){const s=this.#a(t);this.#r.splice(s,0,[t,n])}#c([,t,n]){const s=this.#a(t);for(let a=s;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===n){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===n){this.#r.splice(a,1);return}}}#l(t){const[n,s,a]=t,o=[[n,s,a]],l=this.#a(a);for(let h=0;h<l;h++){const[d,f]=this.#r[h];for(let g=0,b=o.length;g<b;g++){const[,y,A]=o[g];if(!(f<=y||A<=d)){if(y>=d){if(A>f)o[g][1]=f;else{if(b===1)return[];o.splice(g,1),g--,b--}continue}o[g][2]=d,A>f&&o.push([n,f,A])}}}return o}}class fw extends nt{#t;#e;constructor(t,n,s,a){super(),this.#e=t,this.#t=n,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const n of this.#e){let[s,a]=n;t.push(`M${s} ${a}`);for(let o=2;o<n.length;o+=2){const l=n[o],h=n[o+1];l===s?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,n,s,a],o){const l=[],h=s-t,d=a-n;for(const f of this.#e){const g=new Array(f.length);for(let b=0;b<f.length;b+=2)g[b]=t+f[b]*h,g[b+1]=a-f[b+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Kh extends bs{newFreeDrawOutline(t,n,s,a,o,l){return new pw(t,n,s,a,o,l)}}class pw extends Lb{newOutliner(t,n,s,a,o,l=0){return new Kh(t,n,s,a,o,l)}}class he extends ht{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=yt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=he.prototype;return wt(this,"_keyboardManager",new Wr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||he._defaultColor,this.#g=t.thickness||he._defaultThickness,this.opacity=t.opacity||he._defaultOpacity,this.#i=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#x()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#x(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new $h(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new $h(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#s;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:n,clipPathId:s}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#g/2+a,.0025),n>=0)this.#d=n,this.#n=s,this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:he.#E(this.#l.box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:he.#E(this.#s.box,b),path:{d:this.#s.toSVGPath()}})}const[o,l,h,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=h,this.height=d;break;case 90:{const[b,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=h*y/b,this.height=d*b/y;break}case 180:this.x=1-o,this.y=1-l,this.width=h,this.height=d;break;case 270:{const[b,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=h*y/b,this.height=d*b/y;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/h,(f[1]-l)/d];const{lastPoint:g}=this.#s;this.#m=[(g[0]-o)/h,(g[1]-l)/d]}static initialize(t,n){ht.initialize(t,n),he._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case Rt.HIGHLIGHT_COLOR:he._defaultColor=n;break;case Rt.HIGHLIGHT_THICKNESS:he._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,n){switch(t){case Rt.HIGHLIGHT_COLOR:this.#_(n);break;case Rt.HIGHLIGHT_THICKNESS:this.#w(n);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,he._defaultColor],[Rt.HIGHLIGHT_THICKNESS,he._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||he._defaultColor],[Rt.HIGHLIGHT_THICKNESS,this.#g||he._defaultThickness],[Rt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#_(t){const n=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,t,he._defaultOpacity),undo:n.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const n=this.#g,s=a=>{this.#g=a,this.#A(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new rn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#x(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#T():t&&(this.#x(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#A(t){this.#h&&(this.#y({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#x(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([t,n,s,a],o){switch(o){case 90:return[1-n-a,t,a,s];case 180:return[1-t-s,1-n-a,s,a];case 270:return[n,1-t-s,a,s]}return[t,n,s,a]}rotate(t){const{drawLayer:n}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=he.#E(this.#l.box,t)):s=he.#E([this.x,this.y,this.width,this.height],t),n.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(this.#p,{bbox:he.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const n=this.#c=document.createElement("div");return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(this.width,this.height),ab(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){he._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#j(){if(this.#h)return null;const[t,n]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let h=0;for(const{x:d,y:f,width:g,height:b}of o){const y=d*t+s,A=(1-f)*n+a;l[h]=l[h+4]=y,l[h+1]=l[h+3]=A,l[h+2]=l[h+6]=y+g*t,l[h+5]=l[h+7]=A-b*n,h+=8}return l}#N(t){return this.#l.serialize(t,this.#R())}static startHighlighting(t,n,{target:s,x:a,y:o}){const{x:l,y:h,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,b=t.combinedSignal(g),y=A=>{g.abort(),this.#z(t,A)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",ln,{signal:b}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:b}),this._freeHighlight=new Kh({x:a,y:o},[l,h,d,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#z(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,s){let a=null;if(t instanceof Mb){const{data:{quadPoints:E,rect:S,rotation:C,id:x,color:T,opacity:M,popupRef:O,richText:B,contentsObj:j,creationDate:P,modificationDate:I},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:yt.HIGHLIGHT,color:Array.from(T),opacity:M,quadPoints:E,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:C,annotationElementId:x,id:x,deleted:!1,popupRef:O,richText:B,comment:j?.str||null,creationDate:P,modificationDate:I}}else if(t instanceof wd){const{data:{inkLists:E,rect:S,rotation:C,id:x,color:T,borderStyle:{rawWidth:M},popupRef:O,richText:B,contentsObj:j,creationDate:P,modificationDate:I},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:yt.HIGHLIGHT,color:Array.from(T),thickness:M,inkLists:E,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:C,annotationElementId:x,id:x,deleted:!1,popupRef:O,richText:B,comment:j?.str||null,creationDate:P,modificationDate:I}}const{color:o,quadPoints:l,inkLists:h,opacity:d}=t,f=await super.deserialize(t,n,s);f.color=it.makeHexColor(...o),f.opacity=d||1,h&&(f.#g=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,b]=f.pageDimensions,[y,A]=f.pageTranslation;if(l){const E=f.#i=[];for(let S=0;S<l.length;S+=8)E.push({x:(l[S]-y)/g,y:1-(l[S+1]-A)/b,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/b});f.#v(),f.#x(),f.rotate(f.rotation)}else if(h){f.#h=!0;const E=h[0],S={x:E[0]-y,y:b-(E[1]-A)},C=new Kh(S,[0,0,g,b],1,f.#g/2,!0,.001);for(let M=0,O=E.length;M<O;M+=2)S.x=E[M]-y,S.y=b-(E[M+1]-A),C.add(S);const{id:x,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);f.#y({highlightOutlines:C.getOutlines(),highlightId:x,clipPathId:T}),f.#x(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:n,opacity:this.opacity,thickness:this.#g,quadPoints:this.#j(),outlines:this.#N(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==n[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Nb{#t=Object.create(null);updateProperty(t,n){this[t]=n,this.updateSVGProperty(t,n)}updateProperties(t){if(t)for(const[n,s]of Object.entries(t))n.startsWith("_")||this.updateProperty(n,s)}updateSVGProperty(t,n){this.#t[t]=n}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Yt("Not implemented")}}class mt extends ht{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:n,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,n){const{id:s}=n.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(n))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Yt("Not implemented")}static get typesMap(){Yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(mt.#i.updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,n[a]]);return t}_updateProperty(t,n,s){const a=this._drawingOptions,o=a[n],l=h=>{a.updateProperty(n,h);const d=this.#t.updateProperty(n,h);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,n,s,a]){const{parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[n,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-n,s,a];case 270:return[1-n,t,s*(l/o),a*(o/l)];default:return[t,n,s,a]}}#p(){const{x:t,y:n,width:s,height:a,parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[1-n,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-n,s,a];case 270:return[n,1-t,s*(o/l),a*(l/o)];default:return[t,n,s,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:n,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[h,d]}=this;switch((o*4+l)/90){case 1:return[1-n-a,t,a,s];case 2:return[1-t-s,1-n-a,s,a];case 3:return[n,1-t-s,a,s];case 4:return[t,n-s*(h/d),a*(d/h),s*(h/d)];case 5:return[1-n,t,s*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-n,a*(d/h),s*(h/d)];case 7:return[n-s*(h/d),1-t-a*(d/h),s*(h/d),a*(d/h)];case 8:return[t-s,n-a,s,a];case 9:return[1-n,t-s,a,s];case 10:return[1-t,1-n,s,a];case 11:return[n-a,1-t,a,s];case 12:return[t-a*(d/h),n,a*(d/h),s*(h/d)];case 13:return[1-n-s*(h/d),t-a*(d/h),s*(h/d),a*(d/h)];case 14:return[1-t,1-n-s*(h/d),a*(d/h),s*(h/d)];case 15:return[n,1-t,s*(h/d),a*(d/h)];default:return[t,n,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,a,o){Yt("Not implemented")}static startDrawing(t,n,s,a){const{target:o,offsetX:l,offsetY:h,pointerId:d,pointerType:f}=a;if(mt.#a&&mt.#a!==f)return;const{viewport:{rotation:g}}=t,{width:b,height:y}=o.getBoundingClientRect(),A=mt.#n=new AbortController,E=t.combinedSignal(A);if(mt.#s||=d,mt.#a??=f,window.addEventListener("pointerup",S=>{mt.#s===S.pointerId?this._endDraw(S):mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointercancel",S=>{mt.#s===S.pointerId?this._currentParent.endDrawingSession():mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointerdown",S=>{mt.#a===S.pointerType&&((mt.#o||=new Set).add(S.pointerId),mt.#i.isCancellable()&&(mt.#i.removeLastElement(),mt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",ln,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",S=>{S.timeStamp===mt.#c&&ne(S)},{signal:E}),t.toggleDrawing(),n._editorUndoBar?.hide(),mt.#i){t.drawLayer.updateProperties(this._currentDrawId,mt.#i.startNew(l,h,b,y,g));return}n.updateUIForDefaultProperties(this),mt.#i=this.createDrawerInstance(l,h,b,y,g),mt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(mt.#r.toSVGProperties(),mt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(mt.#c=-1,!mt.#i)return;const{offsetX:n,offsetY:s,pointerId:a}=t;if(mt.#s===a){if(mt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,mt.#i.add(n,s)),mt.#c=t.timeStamp,ne(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,mt.#i=null,mt.#r=null,mt.#a=null,mt.#c=NaN),mt.#n&&(mt.#n.abort(),mt.#n=null,mt.#s=NaN,mt.#o=null)}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,mt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=mt.#i,a=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Rt.DRAW_STEP),!mt.#i.isEmpty()){const{pageDimensions:[s,a],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:mt.#i.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:mt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,a,o,l){Yt("Not implemented")}static async deserialize(t,n,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:h}}=n.viewport,d=this.deserializeDraw(l,h,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,n,s);return f.createDrawingOptions(t),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[n,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([n,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class gw{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new Jr;#l;#d;constructor(t,n,s,a,o,l){this.#l=s,this.#d=a,this.#n=o,this.#r=l,[t,n]=this.#h(t,n);const h=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n],this.#i=[{line:h,points:this.#s}],this.#t.set(h,0)}updateProperty(t,n){t==="stroke-width"&&(this.#r=n)}#h(t,n){return nt._normalizePoint(t,n,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,n){[t,n]=this.#h(t,n);const[s,a,o,l]=this.#t.subarray(2,6),h=t-o,d=n-l;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#s.push(t,n),isNaN(s)?(this.#t.set([o,l,t,n],2),this.#e.push(NaN,NaN,NaN,NaN,t,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,n],0),this.#e.push(...nt.createBezierPoints(s,a,o,l,t,n)),{path:{d:this.toSVGPath()}}))}end(t,n){const s=this.add(t,n);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,n,s,a,o){this.#l=s,this.#d=a,this.#n=o,[t,n]=this.#h(t,n);const l=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n];const h=this.#i.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,n=this.#i.length;t<n;t++){const{line:s,points:a}=this.#i[t];this.#e=s,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=nt.svgRound(this.#e[4]),n=nt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${n} Z`,this.#a;if(this.#s.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${n}`,this.#o=6}if(this.#s.length===4){const a=nt.svgRound(this.#e[10]),o=nt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${n}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,h,d,f,g,b]=this.#e.slice(a,a+6).map(nt.svgRound);s.push(`C${l} ${h} ${d} ${f} ${g} ${b}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,n,s,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,n,s,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Jr extends nt{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,n,s,a,o,l,h){this.#r=n,this.#s=s,this.#a=a,this.#o=o,this.#c=l,this.#i=h??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of this.#n){if(t.push(`M${nt.svgRound(n[4])} ${nt.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${nt.svgRound(n[10])} ${nt.svgRound(n[11])}`);continue}for(let s=6,a=n.length;s<a;s+=6){const[o,l,h,d,f,g]=n.subarray(s,s+6).map(nt.svgRound);t.push(`C${o} ${l} ${h} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,n,s,a],o){const l=[],h=[],[d,f,g,b]=this.#d();let y,A,E,S,C,x,T,M,O;switch(this.#o){case 0:O=nt._rescale,y=t,A=n+a,E=s,S=-a,C=t+d*s,x=n+(1-f-b)*a,T=t+(d+g)*s,M=n+(1-f)*a;break;case 90:O=nt._rescaleAndSwap,y=t,A=n,E=s,S=a,C=t+f*s,x=n+d*a,T=t+(f+b)*s,M=n+(d+g)*a;break;case 180:O=nt._rescale,y=t+s,A=n,E=-s,S=a,C=t+(1-d-g)*s,x=n+f*a,T=t+(1-d)*s,M=n+(f+b)*a;break;case 270:O=nt._rescaleAndSwap,y=t+s,A=n+a,E=-s,S=-a,C=t+(1-f-b)*s,x=n+(1-d-g)*a,T=t+(1-f)*s,M=n+(1-d)*a;break}for(const{line:B,points:j}of this.#n)l.push(O(B,y,A,E,S,o?new Array(B.length):null)),h.push(O(j,y,A,E,S,o?new Array(j.length):null));return{lines:l,points:h,rect:[C,x,T,M]}}static deserialize(t,n,s,a,o,{paths:{lines:l,points:h},rotation:d,thickness:f}){const g=[];let b,y,A,E,S;switch(d){case 0:S=nt._rescale,b=-t/s,y=n/a+1,A=1/s,E=-1/a;break;case 90:S=nt._rescaleAndSwap,b=-n/a,y=-t/s,A=1/a,E=1/s;break;case 180:S=nt._rescale,b=t/s+1,y=-n/a,A=-1/s,E=1/a;break;case 270:S=nt._rescaleAndSwap,b=n/a+1,y=t/s+1,A=-1/a,E=-1/s;break}if(!l){l=[];for(const x of h){const T=x.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const M=new Float32Array(3*(T-2));l.push(M);let[O,B,j,P]=x.subarray(0,4);M.set([NaN,NaN,NaN,NaN,O,B],0);for(let I=4;I<T;I+=2){const X=x[I],Q=x[I+1];M.set(nt.createBezierPoints(O,B,j,P,X,Q),(I-2)*3),[O,B,j,P]=[j,P,X,Q]}}}for(let x=0,T=l.length;x<T;x++)g.push({line:S(l[x].map(M=>M??NaN),b,y,A,E),points:S(h[x].map(M=>M??NaN),b,y,A,E)});const C=new this.prototype.constructor;return C.build(g,s,a,1,d,f,o),C}#l(t=this.#c){const n=this.#i+t/2*this.#a;return this.#o%180===0?[n/this.#r,n/this.#s]:[n/this.#s,n/this.#r]}#d(){const[t,n,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,n+l,s-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)it.pointBoundingBox(a[h],a[h+1],t);continue}let o=a[4],l=a[5];for(let h=6,d=a.length;h<d;h+=6){const[f,g,b,y,A,E]=a.subarray(h,h+6);it.bezierBoundingBox(o,l,f,g,b,y,A,E,t),o=A,l=E}}const[n,s]=this.#l();t[0]=Le(t[0]-n,0,1),t[1]=Le(t[1]-s,0,1),t[2]=Le(t[2]+n,0,1),t[3]=Le(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,n){return t==="stroke-width"?this.#f(n):null}#f(t){const[n,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,h]=[a-n,o-s],d=this.#t;return d[0]-=l,d[1]-=h,d[2]+=2*l,d[3]+=2*h,d}updateParentDimensions([t,n],s){const[a,o]=this.#l();this.#r=t,this.#s=n,this.#a=s;const[l,h]=this.#l(),d=l-a,f=h-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(nt.svgRound).join(" ")}get defaultProperties(){const[t,n]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=this.#t;let s=0,a=0,o=0,l=0,h=0,d=0;switch(this.#e){case 90:a=n/t,o=-t/n,h=t;break;case 180:s=-1,l=-1,h=t,d=n;break;case 270:a=-n/t,o=t/n,d=n;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${nt.svgRound(h)} ${nt.svgRound(d)})`}getPathResizingSVGProperties([t,n,s,a]){const[o,l]=this.#l(),[h,d,f,g]=this.#t;if(Math.abs(f-o)<=nt.PRECISION||Math.abs(g-l)<=nt.PRECISION){const S=t+s/2-(h+f/2),C=n+a/2-(d+g/2);return{path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${C})`}}}const b=(s-2*o)/(f-2*o),y=(a-2*l)/(g-2*l),A=f/s,E=g/a;return{path:{"transform-origin":`${nt.svgRound(h)} ${nt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${E}) translate(${nt.svgRound(o)} ${nt.svgRound(l)}) scale(${b} ${y}) translate(${nt.svgRound(-o)} ${nt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,s,a]){const[o,l]=this.#l(),h=this.#t,[d,f,g,b]=h;if(h[0]=t,h[1]=n,h[2]=s,h[3]=a,Math.abs(g-o)<=nt.PRECISION||Math.abs(b-l)<=nt.PRECISION){const C=t+s/2-(d+g/2),x=n+a/2-(f+b/2);for(const{line:T,points:M}of this.#n)nt._translate(T,C,x,T),nt._translate(M,C,x,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*o)/(g-2*o),A=(a-2*l)/(b-2*l),E=-y*(d+o)+t+o,S=-A*(f+l)+n+l;if(y!==1||A!==1||E!==0||S!==0)for(const{line:C,points:x}of this.#n)nt._rescale(C,E,S,y,A,C),nt._rescale(x,E,S,y,A,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[a,o]=s,l=this.#t,h=t-l[0],d=n-l[1];if(this.#r===a&&this.#s===o)for(const{line:f,points:g}of this.#n)nt._translate(f,h,d,f),nt._translate(g,h,d,g);else{const f=this.#r/a,g=this.#s/o;this.#r=a,this.#s=o;for(const{line:b,points:y}of this.#n)nt._rescale(b,h,d,f,g,b),nt._rescale(y,h,d,f,g,y);l[2]*=f,l[3]*=g}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(n)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t[0])} ${nt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Zl extends Nb{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ht._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(t,n)}clone(){const t=new Zl(this._viewParameters);return t.updateAll(this),t}}class _d extends mt{static _type="ink";static _editorType=yt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){ht.initialize(t,n),this._defaultDrawingOptions=new Zl(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[Rt.INK_THICKNESS,"stroke-width"],[Rt.INK_COLOR,"stroke"],[Rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,a,o){return new gw(t,n,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,a,o,l){return Jr.deserialize(t,n,s,a,o,l)}static async deserialize(t,n,s){let a=null;if(t instanceof wd){const{data:{inkLists:l,rect:h,rotation:d,id:f,color:g,opacity:b,borderStyle:{rawWidth:y},popupRef:A,richText:E,contentsObj:S,creationDate:C,modificationDate:x},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:yt.INK,color:Array.from(g),thickness:y,opacity:b,paths:{points:l},boxes:null,pageIndex:T-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:E,comment:S?.str||null,creationDate:C,modificationDate:x}}const o=await super.deserialize(t,n,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Hr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=_d.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,h=Object.assign(super.serialize(t),{color:ht._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:n,points:s}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:n,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,h)=>l!==n[h])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class Wh extends Jr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Rl=8,Rr=3;class ms{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,n,s,a){return s-=t,a-=n,s===0?a>0?0:4:s===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,n,s,a,o,l,h){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(-f+d-h+16)%8,b=this.#i[2*g],y=this.#i[2*g+1];if(t[(s+b)*n+(a+y)]!==0)return g}return-1}static#r(t,n,s,a,o,l,h){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(f+d+h+16)%8,b=this.#i[2*g],y=this.#i[2*g+1];if(t[(s+b)*n+(a+y)]!==0)return g}return-1}static#s(t,n,s,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)l[g*n]=l[g*n+n-1]=0;for(let g=0;g<n;g++)l[g]=l[n*s-1-g]=0;let h=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let b=1;b<n-1;b++){const y=g*n+b,A=l[y];if(A===0)continue;let E=g,S=b;if(A===1&&l[y-1]===0)h+=1,S-=1;else if(A>=1&&l[y+1]===0)h+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const C=[b,g],x=S===b+1,T={isHole:x,points:C,id:h,parent:0};f.push(T);let M;for(const Z of f)if(Z.id===d){M=Z;break}M?M.isHole?T.parent=x?M.parent:d:T.parent=x?d:M.parent:T.parent=x?d:0;const O=this.#n(l,n,g,b,E,S,0);if(O===-1){l[y]=-h,l[y]!==1&&(d=Math.abs(l[y]));continue}let B=this.#i[2*O],j=this.#i[2*O+1];const P=g+B,I=b+j;E=P,S=I;let X=g,Q=b;for(;;){const Z=this.#r(l,n,X,Q,E,S,1);B=this.#i[2*Z],j=this.#i[2*Z+1];const ct=X+B,dt=Q+j;C.push(dt,ct);const at=X*n+Q;if(l[at+1]===0?l[at]=-h:l[at]===1&&(l[at]=h),ct===g&&dt===b&&X===P&&Q===I){l[y]!==1&&(d=Math.abs(l[y]));break}else E=X,S=Q,X=ct,Q=dt}}}return f}static#a(t,n,s,a){if(s-n<=4){for(let P=n;P<s-2;P+=2)a.push(t[P],t[P+1]);return}const o=t[n],l=t[n+1],h=t[s-4]-o,d=t[s-3]-l,f=Math.hypot(h,d),g=h/f,b=d/f,y=g*l-b*o,A=d/h,E=1/f,S=Math.atan(A),C=Math.cos(S),x=Math.sin(S),T=E*(Math.abs(C)+Math.abs(x)),M=E*(1-T+T**2),O=Math.max(Math.atan(Math.abs(x+C)*M),Math.atan(Math.abs(x-C)*M));let B=0,j=n;for(let P=n+2;P<s-2;P+=2){const I=Math.abs(y-g*t[P+1]+b*t[P]);I>B&&(j=P,B=I)}B>(f*O)**2?(this.#a(t,n,j+2,a),this.#a(t,j,s,a)):a.push(o,l)}static#o(t){const n=[],s=t.length;return this.#a(t,0,s,n),n.push(t[s-2],t[s-1]),n.length<=4?null:n}static#c(t,n,s,a,o,l){const h=new Float32Array(l**2),d=-2*a**2,f=l>>1;for(let S=0;S<l;S++){const C=(S-f)**2;for(let x=0;x<l;x++)h[S*l+x]=Math.exp((C+(x-f)**2)/d)}const g=new Float32Array(256),b=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/b);const y=t.length,A=new Uint8Array(y),E=new Uint32Array(256);for(let S=0;S<s;S++)for(let C=0;C<n;C++){const x=S*n+C,T=t[x];let M=0,O=0;for(let j=0;j<l;j++){const P=S+j-f;if(!(P<0||P>=s))for(let I=0;I<l;I++){const X=C+I-f;if(X<0||X>=n)continue;const Q=t[P*n+X],Z=h[j*l+I]*g[Math.abs(Q-T)];M+=Q*Z,O+=Z}}const B=A[x]=Math.round(M/O);E[B]++}return[A,E]}static#l(t){const n=new Uint32Array(256);for(const s of t)n[s]++;return n}static#d(t){const n=t.length,s=new Uint8ClampedArray(n>>2);let a=-1/0,o=1/0;for(let h=0,d=s.length;h<d;h++){const f=s[h]=t[h<<2];a=Math.max(a,f),o=Math.min(o,f)}const l=255/(a-o);for(let h=0,d=s.length;h<d;h++)s[h]=(s[h]-o)*l;return s}static#h(t){let n,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,h=o;for(n=o;n<256;n++){const d=t[n];d>s&&(n-l>a&&(a=n-l,h=n-1),s=d,l=n)}for(n=h-1;n>=0&&!(t[n]>t[n+1]);n--);return n}static#f(t){const n=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,h=a;if(s>o||a>o){let y=s,A=a,E=Math.log2(Math.max(s,a)/o);const S=Math.floor(E);E=E===S?S-1:S;for(let x=0;x<E;x++){l=Math.ceil(y/2),h=Math.ceil(A/2);const T=new OffscreenCanvas(l,h);T.getContext("2d").drawImage(t,0,0,y,A,0,0,l,h),y=l,A=h,t!==n&&t.close(),t=T.transferToImageBitmap()}const C=Math.min(o/l,o/h);l=Math.round(l*C),h=Math.round(h*C)}const f=new OffscreenCanvas(l,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,h);const g=f.getImageData(0,0,l,h).data;return[this.#d(g),l,h]}static extractContoursFromText(t,{fontFamily:n,fontStyle:s,fontWeight:a},o,l,h,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const b=200,y=g.font=`${s} ${a} ${b}px ${n}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:C,fontBoundingBoxAscent:x,fontBoundingBoxDescent:T,width:M}=g.measureText(t),O=1.5,B=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||0,M)*O),j=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||b,Math.abs(x)+Math.abs(T)||b)*O);f=new OffscreenCanvas(B,j),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=y,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,B,j),g.fillStyle="black",g.fillText(t,B*(O-1)/2,j*(3-O)/2);const P=this.#d(g.getImageData(0,0,B,j).data),I=this.#l(P),X=this.#h(I),Q=this.#s(P,B,j,X);return this.processDrawnLines({lines:{curves:Q,width:B,height:j},pageWidth:o,pageHeight:l,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,n,s,a,o){const[l,h,d]=this.#f(t),[f,g]=this.#c(l,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),b=this.#h(g),y=this.#s(f,h,d,b);return this.processDrawnLines({lines:{curves:y,width:h,height:d},pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:h}){a%180!==0&&([n,s]=[s,n]);const{curves:d,width:f,height:g}=t,b=t.thickness??0,y=[],A=Math.min(n/f,s/g),E=A/n,S=A/s,C=[];for(const{points:T}of d){const M=l?this.#o(T):T;if(!M)continue;C.push(M);const O=M.length,B=new Float32Array(O),j=new Float32Array(3*(O===2?2:O-2));if(y.push({line:j,points:B}),O===2){B[0]=M[0]*E,B[1]=M[1]*S,j.set([NaN,NaN,NaN,NaN,B[0],B[1]],0);continue}let[P,I,X,Q]=M;P*=E,I*=S,X*=E,Q*=S,B.set([P,I,X,Q],0),j.set([NaN,NaN,NaN,NaN,P,I],0);for(let Z=4;Z<O;Z+=2){const ct=B[Z]=M[Z]*E,dt=B[Z+1]=M[Z+1]*S;j.set(nt.createBezierPoints(P,I,X,Q,ct,dt),(Z-2)*3),[P,I,X,Q]=[X,Q,ct,dt]}}if(y.length===0)return null;const x=h?new Wh:new Jr;return x.build(y,n,s,1,a,h?0:b,o),{outline:x,newCurves:C,areContours:h,thickness:b,width:f,height:g}}static async compressSignature({outlines:t,areContours:n,thickness:s,width:a,height:o}){let l=1/0,h=-1/0,d=0;for(const M of t){d+=M.length;for(let O=2,B=M.length;O<B;O++){const j=M[O]-M[O-2];l=Math.min(l,j),h=Math.max(h,j)}}let f;l>=-128&&h<=127?f=Int8Array:l>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const g=t.length,b=Rl+Rr*g,y=new Uint32Array(b);let A=0;y[A++]=b*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,y[A++]=0,y[A++]=a,y[A++]=o,y[A++]=n?0:1,y[A++]=Math.max(0,Math.floor(s??0)),y[A++]=g,y[A++]=f.BYTES_PER_ELEMENT;for(const M of t)y[A++]=M.length-2,y[A++]=M[0],y[A++]=M[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(y);const C=f.prototype.constructor;for(const M of t){const O=new C(M.length-2);for(let B=2,j=M.length;B<j;B++)O[B-2]=M[B]-M[B-2];S.write(O)}S.close();const x=await new Response(E.readable).arrayBuffer(),T=new Uint8Array(x);return Z0(T)}static async decompressSignature(t){try{const n=US(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(n).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,h=0;for await(const M of s)l||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),l.set(M,h),h+=M.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],b=d[3],y=d[4]===0,A=d[5],E=d[6],S=d[7],C=[],x=(Rl+Rr*E)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,x);break}h=0;for(let M=0;M<E;M++){const O=d[Rr*M+Rl],B=new Float32Array(O+2);C.push(B);for(let j=0;j<Rr-1;j++)B[j]=d[Rr*M+Rl+j+1];for(let j=0;j<O;j++)B[j+2]=B[j]+T[h++]}return{areContours:y,thickness:A,outlines:C,width:g,height:b}}catch(n){return vt(`decompressSignature: ${n}`),null}}}class Cd extends Nb{constructor(){super(),super.updateProperties({fill:ht._defaultLineColor,"stroke-width":0})}clone(){const t=new Cd;return t.updateAll(this),t}}class Td extends Zl{constructor(t){super(t),super.updateProperties({stroke:ht._defaultLineColor,"stroke-width":1})}clone(){const t=new Td(this._viewParameters);return t.updateAll(this),t}}class Fn extends mt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=yt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){ht.initialize(t,n),this._defaultDrawingOptions=new Cd,this._defaultDrawnSignatureOptions=new Td(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:h,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:g,pageHeight:b},rotation:y}=this.parent.viewport,A=ms.processDrawnLines({lines:a,pageWidth:g,pageHeight:b,rotation:y,innerMargin:Fn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,f,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:a,height:o}=this.#i,l=Math.max(a,o),h=ms.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,s,a){const{x:o,y:l}=this,{outline:h}=this.#i=t;this.#t=h instanceof Wh,this.description=s;let d;this.#t?d=Fn.getDefaultDrawingOptions():(d=Fn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return ms.process(t,n,s,a,Fn._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return ms.extractContoursFromText(t,n,s,a,o,Fn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return ms.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:Fn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Fn.getDefaultDrawingOptions():(this._drawingOptions=Fn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:n,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=n,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,n,s,a,o,l){return l.areContours?Wh.deserialize(t,n,s,a,o,l):Jr.deserialize(t,n,s,a,o,l)}static async deserialize(t,n,s){const a=await super.deserialize(t,n,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class mw extends ht{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=yt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){ht.initialize(t,n)}static isHandlingMimeForPasting(t){return Il.includes(t)}static paste(t,n){n.pasteEditor({mode:yt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#h(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Il.join(",");const n=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:n,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*a,s=this.height*o;else if(n>l*a||s>l*o){const d=Math.min(l*a/n,l*o/s);n*=d,s*=d}this._uiManager.enableWaiting(!1);const h=this.#a=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=n/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,n,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Rn;let h=this.#t,d=a,f=o,g=null;if(n){if(a>n||o>n){const j=Math.min(n/a,n/o);d=Math.floor(a*j),f=Math.floor(o*j)}g=document.createElement("canvas");const y=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(f*l.sy);this.#l||(h=this.#u(y,A));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":GS.isDarkMode&&(S="#8f8f9d",C="#42414d");const x=15,T=x*l.sx,M=x*l.sy,O=new OffscreenCanvas(T*2,M*2),B=O.getContext("2d");B.fillStyle=S,B.fillRect(0,0,T*2,M*2),B.fillStyle=C,B.fillRect(0,0,T,M),B.fillRect(T,M,T,M),E.fillStyle=E.createPattern(O,"repeat"),E.fillRect(0,0,y,A),E.drawImage(h,0,0,h.width,h.height,0,0,y,A)}let b=null;if(s){let y,A;if(l.symmetric&&h.width<t&&h.height<t)y=h.width,A=h.height;else if(h=this.#t,a>t||o>t){const C=Math.min(t/a,t/o);y=Math.floor(a*C),A=Math.floor(o*C),this.#l||(h=this.#u(y,A))}const S=new OffscreenCanvas(y,A).getContext("2d",{willReadFrequently:!0});S.drawImage(h,0,0,h.width,h.height,0,0,y,A),b={width:y,height:A,data:S.getImageData(0,0,y,A).data}}return{canvas:g,width:d,height:f,imageData:b}}#u(t,n){const{width:s,height:a}=this.#t;let o=s,l=a,h=this.#t;for(;o>2*t||l>2*n;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(h,0,0,d,f,0,0,o,l),h=g.transferToImageBitmap()}return h}#g(){const[t,n]=this.parentDimensions,{width:s,height:a}=this,o=new Rn,l=Math.ceil(s*t*o.sx),h=Math.ceil(a*n*o.sy),d=this.#a;if(!d||d.width===l&&d.height===h)return;d.width=l,d.height=h;const f=this.#l?this.#t:this.#u(l,h),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,l,h)}#b(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#l){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*Ss.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Ss.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,n,s){let a=null,o=!1;if(t instanceof Rb){const{data:{rect:S,rotation:C,id:x,structParent:T,popupRef:M,richText:O,contentsObj:B,creationDate:j,modificationDate:P},container:I,parent:{page:{pageNumber:X}},canvas:Q}=t;let Z,ct;Q?(delete t.canvas,{id:Z,bitmap:ct}=s.imageManager.getFromCanvas(I.id,Q),Q.remove()):(o=!0,t._hasNoCanvas=!0);const dt=(await n._structTree.getAriaAttributes(`${ud}${x}`))?.get("aria-label")||"";a=t={annotationType:yt.STAMP,bitmapId:Z,bitmap:ct,pageIndex:X-1,rect:S.slice(0),rotation:C,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:dt},isSvg:!1,structParent:T,popupRef:M,richText:O,comment:B?.str||null,creationDate:j,modificationDate:P}}const l=await super.deserialize(t,n,s),{rect:h,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:b,accessibilityData:y}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#n=f,l.#l=b;const[A,E]=l.pageDimensions;return l.width=(h[2]-h[0])/A,l.height=(h[3]-h[1])/E,y&&(l.altTextData=y),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=this.#v(s);return h.isSame?null:(h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#b(!1);else if(this.#l){const h=n.stamps.get(this.#e);l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=this.#b(!1))}return s}#v(t){const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===n,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Hn{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([Ae,_d,mw,he,Fn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:d,viewport:f,l10n:g}){const b=[...Hn.#g.values()];if(!Hn._initialized){Hn._initialized=!0;for(const y of b)y.initialize(g,t)}t.registerEditorTypes(b),this.#u=t,this.pageIndex=n,this.div=s,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=h,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===yt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case yt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case yt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case yt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),t===yt.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const s of Hn.#g.values())n.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#b(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#b)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const n=this.#i;if(n)for(const s of n.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:h,timeStamp:d}=a,f=this.#p;if(d-f>500){this.#p=d;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const b=document.elementsFromPoint(l,h);if(g.toggle("getElements",!1),!this.div.contains(b[0]))return;let y;const A=new RegExp(`^${jr}[0-9]+$`);for(const S of b)if(A.test(S.id)){y=S.id;break}if(!y)return;const E=this.#s.get(y);E?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),E.dblclick(a))},{signal:s,capture:!0})}const t=this.#i;if(t){const s=new Map,a=new Map;for(const l of this.#b){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:h}=l.data;if(this.#u.isDeletedAnnotationElement(h)){l.updateEdited({deleted:!0});continue}let d=a.get(h);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(h),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of Hn.#g.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:n}=t;if(n===this.#h.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#h.div.contains(n)){const{isMac:s}=xe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),he.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:n}=t;n&&this.#u.isDeletedAnnotationElement(n)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ht.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getEditorByUID(t){for(const n of this.#s.values())if(n.uid===t)return n;return null}getNextId(){return this.#u.getId()}get#y(){return Hn.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#_(t){const n=this.#y;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,n){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#w(),o=this.getNextId(),l=this.#_({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...n});l&&this.add(l)}async deserialize(t){return await Hn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,n,s={}){const a=this.getNextId(),o=this.#_({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:n,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:n,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,n),h=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,n+a),f=(o+h)/2-t,g=(l+d)/2-n,[b,y]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:b,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:n}=xe.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===yt.STAMP||s===yt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===yt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:n}=xe.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:n}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:n}=document;this.div.contains(n)&&(this.#d=n);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,n,s){const a=this.#u.findParent(n,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,$i(this.div,t);for(const n of this.#u.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,$i(this.div,{rotation:s}),n!==s)for(const a of this.#s.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#u.viewParameters.realScale}}class Se{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const n of this.#e.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return wt(this,"_svgFactory",new Ir)}static#r(t,[n,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*n}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Se._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,n){const s=Se._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${n}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Se._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),a}#o(t,n){for(const[s,a]of Object.entries(n))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,n=!1,s=!1){const a=Se.#n++,o=this.#s(),l=Se._svgFactory.createElement("defs");o.append(l);const h=Se._svgFactory.createElement("path");l.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#i.set(a,h);const f=s?this.#a(l,d):null,g=Se._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,n){const s=Se.#n++,a=this.#s(),o=Se._svgFactory.createElement("defs");a.append(o);const l=Se._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(n){const b=Se._svgFactory.createElement("mask");o.append(b),d=`mask_p${this.pageIndex}_${s}`,b.setAttribute("id",d),b.setAttribute("maskUnits","objectBoundingBox");const y=Se._svgFactory.createElement("rect");b.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const A=Se._svgFactory.createElement("use");b.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Se._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,n){this.#i.delete(t),this.updateProperties(t,n)}updateProperties(t,n){if(!n)return;const{root:s,bbox:a,rootClass:o,path:l}=n,h=typeof t=="number"?this.#e.get(t):t;if(h){if(s&&this.#o(h,s),a&&Se.#r(h,a),o){const{classList:d}=h;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(l){const f=h.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,n){if(n===this)return;const s=this.#e.get(t);s&&(n.#t.append(s),this.#e.delete(t),n.#e.set(t,s))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:$h};globalThis.pdfjsLib={AbortException:fi,AnnotationEditorLayer:Hn,AnnotationEditorParamsType:Rt,AnnotationEditorType:yt,AnnotationEditorUIManager:pi,AnnotationLayer:Ed,AnnotationMode:In,AnnotationType:ue,applyOpacity:ib,build:Eb,ColorPicker:rn,createValidAbsoluteUrl:od,CSSConstants:nb,DOMSVGFactory:Ir,DrawLayer:Se,FeatureTest:xe,fetchData:Ma,findContrastColor:sb,getDocument:vd,getFilenameFromUrl:J0,getPdfFilenameFromUrl:tb,getRGB:Ra,getUuid:cd,getXfaPageViewport:eb,GlobalWorkerOptions:Xi,ImageKind:kr,InvalidPDFException:Ul,isDataScheme:Kr,isPdfFile:Wl,isValidExplicitDest:lb,MathClamp:Le,noContextMenu:ln,normalizeUnicode:Q0,OPS:wa,OutputScale:Rn,PasswordResponses:K0,PDFDataRangeTransport:Sd,PDFDateString:Hl,PDFWorker:Ea,PermissionFlag:$0,PixelsPerInch:Ss,RenderingCancelledException:Kl,renderRichText:dd,ResponseException:zr,setLayerDimensions:$i,shadow:wt,SignatureExtractor:ms,stopEvent:ne,SupportedImageMimeTypes:Il,TextLayer:Ur,TouchManager:Qr,updateUrlHash:ld,Util:it,VerbosityLevel:Xr,version:wb,XfaLayer:hd};const bw=Object.freeze(Object.defineProperty({__proto__:null,AbortException:fi,AnnotationEditorLayer:Hn,AnnotationEditorParamsType:Rt,AnnotationEditorType:yt,AnnotationEditorUIManager:pi,AnnotationLayer:Ed,AnnotationMode:In,AnnotationType:ue,CSSConstants:nb,ColorPicker:rn,DOMSVGFactory:Ir,DrawLayer:Se,FeatureTest:xe,GlobalWorkerOptions:Xi,ImageKind:kr,InvalidPDFException:Ul,MathClamp:Le,OPS:wa,OutputScale:Rn,PDFDataRangeTransport:Sd,PDFDateString:Hl,PDFWorker:Ea,PasswordResponses:K0,PermissionFlag:$0,PixelsPerInch:Ss,RenderingCancelledException:Kl,ResponseException:zr,SignatureExtractor:ms,SupportedImageMimeTypes:Il,TextLayer:Ur,TouchManager:Qr,Util:it,VerbosityLevel:Xr,XfaLayer:hd,applyOpacity:ib,build:Eb,createValidAbsoluteUrl:od,fetchData:Ma,findContrastColor:sb,getDocument:vd,getFilenameFromUrl:J0,getPdfFilenameFromUrl:tb,getRGB:Ra,getUuid:cd,getXfaPageViewport:eb,isDataScheme:Kr,isPdfFile:Wl,isValidExplicitDest:lb,noContextMenu:ln,normalizeUnicode:Q0,renderRichText:dd,setLayerDimensions:$i,shadow:wt,stopEvent:ne,updateUrlHash:ld,version:wb},Symbol.toStringTag,{value:"Module"}));function Ob(u){var t,n,s="";if(typeof u=="string"||typeof u=="number")s+=u;else if(typeof u=="object")if(Array.isArray(u)){var a=u.length;for(t=0;t<a;t++)u[t]&&(n=Ob(u[t]))&&(s&&(s+=" "),s+=n)}else for(n in u)u[n]&&(s&&(s+=" "),s+=n);return s}function Jl(){for(var u,t,n=0,s="",a=arguments.length;n<a;n++)(u=arguments[n])&&(t=Ob(u))&&(s&&(s+=" "),s+=t);return s}var b0=Object.prototype.hasOwnProperty;function y0(u,t,n){for(n of u.keys())if(Aa(n,t))return n}function Aa(u,t){var n,s,a;if(u===t)return!0;if(u&&t&&(n=u.constructor)===t.constructor){if(n===Date)return u.getTime()===t.getTime();if(n===RegExp)return u.toString()===t.toString();if(n===Array){if((s=u.length)===t.length)for(;s--&&Aa(u[s],t[s]););return s===-1}if(n===Set){if(u.size!==t.size)return!1;for(s of u)if(a=s,a&&typeof a=="object"&&(a=y0(t,a),!a)||!t.has(a))return!1;return!0}if(n===Map){if(u.size!==t.size)return!1;for(s of u)if(a=s[0],a&&typeof a=="object"&&(a=y0(t,a),!a)||!Aa(s[1],t.get(a)))return!1;return!0}if(n===ArrayBuffer)u=new Uint8Array(u),t=new Uint8Array(t);else if(n===DataView){if((s=u.byteLength)===t.byteLength)for(;s--&&u.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(u)){if((s=u.byteLength)===t.byteLength)for(;s--&&u[s]===t[s];);return s===-1}if(!n||typeof u=="object"){s=0;for(n in u)if(b0.call(u,n)&&++s&&!b0.call(t,n)||!(n in t)||!Aa(u[n],t[n]))return!1;return Object.keys(t).length===s}}return u!==u&&t!==t}function to(u){let t=!1;return{promise:new Promise((s,a)=>{u.then(o=>!t&&s(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const yw=["onCopy","onCut","onPaste"],vw=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Aw=["onFocus","onBlur"],Sw=["onInput","onInvalid","onReset","onSubmit"],xw=["onLoad","onError"],ww=["onKeyDown","onKeyPress","onKeyUp"],Ew=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],_w=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Cw=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Tw=["onSelect"],Mw=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Rw=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Dw=["onScroll"],Lw=["onWheel"],Nw=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Ow=["onTransitionEnd"],kw=["onToggle"],Bw=["onChange"],Pw=[...yw,...vw,...Aw,...Sw,...xw,...ww,...Ew,..._w,...Cw,...Tw,...Mw,...Rw,...Dw,...Lw,...Nw,...Ow,...Bw,...kw];function kb(u,t){const n={};for(const s of Pw){const a=u[s];a&&(t?n[s]=(o=>a(o,t(s))):n[s]=a)}return n}var jw="Invariant failed";function Xt(u,t){if(!u)throw new Error(jw)}var jh,v0;function zw(){if(v0)return jh;v0=1;var u=function(){};return jh=u,jh}var Fw=zw();const Ne=Jh(Fw),Bb=L.createContext(null),Uw="noopener noreferrer nofollow";class Hw{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Xt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Xt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,n,s){t.href=n,t.rel=this.externalLinkRel||Uw,t.target=s?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(n=>{Xt(this.pdfDocument),Xt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{Xt(Array.isArray(n));const s=n[0];new Promise(a=>{Xt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{a(o)}).catch(()=>{Xt(!1)}):typeof s=="number"?a(s):Xt(!1)}).then(a=>{const o=a+1;Xt(this.pdfViewer),Xt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:a,pageNumber:o})})})}goToPage(t){const n=t-1;Xt(this.pdfViewer),Xt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Sa({children:u,type:t}){return w.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:u})}const A0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function Iw(u,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return u}}function _a(){return L.useReducer(Iw,{value:void 0,error:void 0})}const tc=typeof window<"u",Pb=tc&&window.location.protocol==="file:";function Gw(u){return typeof u<"u"}function gs(u){return Gw(u)&&u!==null}function Vw(u){return typeof u=="string"}function qw(u){return u instanceof ArrayBuffer}function Xw(u){return Xt(tc),u instanceof Blob}function Qh(u){return Vw(u)&&/^data:/.test(u)}function S0(u){Xt(Qh(u));const[t="",n=""]=u.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function Yw(){return tc&&window.devicePixelRatio||1}const jb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function x0(){Ne(!Pb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${jb}`)}function $w(){Ne(!Pb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${jb}`)}function ws(u){u?.cancel&&u.cancel()}function Zh(u,t){return Object.defineProperty(u,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(u,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(u,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(u,"originalHeight",{get(){return this.view[3]},configurable:!0}),u}function Kw(u){return u.name==="RenderingCancelledException"}function Ww(u){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return n(new Error("Error while reading a file."));t(s.result)},s.onerror=a=>{if(!a.target)return n(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return n(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},s.readAsArrayBuffer(u)})}const{PDFDataRangeTransport:Qw}=bw,Zw=(u,t)=>{switch(t){case A0.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");u(n);break}case A0.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");u(n);break}}};function w0(u){return typeof u=="object"&&u!==null&&("data"in u||"range"in u||"url"in u)}const E0=L.forwardRef(function({children:t,className:n,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:h,imageResourcesPath:d,loading:f="Loading PDF",noData:g="No PDF file specified.",onItemClick:b,onLoadError:y,onLoadProgress:A,onLoadSuccess:E,onPassword:S=Zw,onSourceError:C,onSourceSuccess:x,options:T,renderMode:M,rotate:O,scale:B,...j},P){const[I,X]=_a(),{value:Q,error:Z}=I,[ct,dt]=_a(),{value:at,error:et}=ct,R=L.useRef(new Hw),G=L.useRef([]),J=L.useRef(void 0),pt=L.useRef(void 0);l&&l!==J.current&&w0(l)&&(Ne(!Aa(l,J.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),J.current=l),T&&T!==pt.current&&(Ne(!Aa(T,pt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),pt.current=T);const At=L.useRef({scrollPageIntoView:Nt=>{const{dest:Ot,pageNumber:te,pageIndex:ae=te-1}=Nt;if(b){b({dest:Ot,pageIndex:ae,pageNumber:te});return}const gi=G.current[ae];if(gi){gi.scrollIntoView();return}Ne(!1,`An internal link leading to page ${te} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});L.useImperativeHandle(P,()=>({linkService:R,pages:G,viewer:At}),[]);function N(){x&&x()}function q(){Z&&(Ne(!1,Z.toString()),C&&C(Z))}function W(){X({type:"RESET"})}L.useEffect(W,[l,X]);const tt=L.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Qh(l)?{data:S0(l)}:(x0(),{url:l});if(l instanceof Qw)return{range:l};if(qw(l))return{data:l};if(tc&&Xw(l))return{data:await Ww(l)};if(Xt(typeof l=="object"),Xt(w0(l)),"url"in l&&typeof l.url=="string"){if(Qh(l.url)){const{url:Nt,...Ot}=l;return{data:S0(Nt),...Ot}}x0()}return l},[l]);L.useEffect(()=>{const Nt=to(tt());return Nt.promise.then(Ot=>{X({type:"RESOLVE",value:Ot})}).catch(Ot=>{X({type:"REJECT",error:Ot})}),()=>{ws(Nt)}},[tt,X]),L.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){q();return}N()}},[Q]);function ot(){at&&(E&&E(at),G.current=new Array(at.numPages),R.current.setDocument(at))}function ft(){et&&(Ne(!1,et.toString()),y&&y(et))}L.useEffect(function(){dt({type:"RESET"})},[dt,Q]),L.useEffect(function(){if(!Q)return;const Ot=T?{...Q,...T}:Q,te=vd(Ot);A&&(te.onProgress=A),S&&(te.onPassword=S);const ae=te,gi=ae.promise.then(mi=>{dt({type:"RESOLVE",value:mi})}).catch(mi=>{ae.destroyed||dt({type:"REJECT",error:mi})});return()=>{gi.finally(()=>ae.destroy())}},[T,dt,Q]),L.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){ft();return}ot()}},[at]),L.useEffect(function(){R.current.setViewer(At.current),R.current.setExternalLinkRel(a),R.current.setExternalLinkTarget(o)},[a,o]);const lt=L.useCallback((Nt,Ot)=>{G.current[Nt]=Ot},[]),$t=L.useCallback(Nt=>{delete G.current[Nt]},[]),Et=L.useMemo(()=>({imageResourcesPath:d,linkService:R.current,onItemClick:b,pdf:at,registerPage:lt,renderMode:M,rotate:O,scale:B,unregisterPage:$t}),[d,b,at,lt,M,O,B,$t]),jt=L.useMemo(()=>kb(j,()=>at),[j,at]);function je(){function Nt(te){return!!te?.pdf}if(!Nt(Et))throw new Error("pdf is undefined");const Ot=typeof t=="function"?t(Et):t;return w.jsx(Bb.Provider,{value:Et,children:Ot})}function $e(){return l?at==null?w.jsx(Sa,{type:"loading",children:typeof f=="function"?f():f}):at===!1?w.jsx(Sa,{type:"error",children:typeof s=="function"?s():s}):je():w.jsx(Sa,{type:"no-data",children:typeof g=="function"?g():g})}return w.jsx("div",{className:Jl("react-pdf__Document",n),ref:h,...jt,children:$e()})});function zb(){return L.useContext(Bb)}function Fb(){for(var u=[],t=0;t<arguments.length;t++)u[t]=arguments[t];var n=u.filter(Boolean);if(n.length<=1){var s=n[0];return s||null}return function(o){for(var l=0,h=n;l<h.length;l++){var d=h[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const Ub=L.createContext(null);function ec(){return L.useContext(Ub)}function Jw(){const u=zb(),t=ec();Xt(t);const n={...u,...t},{imageResourcesPath:s,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:f,pdf:g,renderForms:b,rotate:y,scale:A=1}=n;Xt(g),Xt(f),Xt(a);const[E,S]=_a(),{value:C,error:x}=E,T=L.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function M(){C&&l&&l(C)}function O(){x&&(Ne(!1,x.toString()),o&&o(x))}L.useEffect(function(){S({type:"RESET"})},[S,f]),L.useEffect(function(){if(!f)return;const X=to(f.getAnnotations()),Q=X;return X.promise.then(Z=>{S({type:"RESOLVE",value:Z})}).catch(Z=>{S({type:"REJECT",error:Z})}),()=>{ws(Q)}},[S,f]),L.useEffect(()=>{if(C!==void 0){if(C===!1){O();return}M()}},[C]);function B(){d&&d()}function j(I){Ne(!1,`${I}`),h&&h(I)}const P=L.useMemo(()=>f.getViewport({scale:A,rotation:y}),[f,y,A]);return L.useEffect(function(){if(!g||!f||!a||!C)return;const{current:X}=T;if(!X)return;const Q=P.clone({dontFlip:!0}),Z={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:X,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:Q},ct={annotations:C,annotationStorage:g.annotationStorage,div:X,imageResourcesPath:s,linkService:a,page:f,renderForms:b,viewport:Q};X.innerHTML="";try{new Ed(Z).render(ct),B()}catch(dt){j(dt)}return()=>{}},[C,s,a,f,g,b,P]),w.jsx("div",{className:Jl("react-pdf__Page__annotations","annotationLayer"),ref:T})}const Hb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},t2=/^H(\d+)$/;function e2(u){return u in Hb}function nc(u){return"children"in u}function Ib(u){return nc(u)?u.children.length===1&&0 in u.children&&"id"in u.children[0]:!1}function n2(u){const t={};if(nc(u)){const{role:n}=u,s=n.match(t2);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(e2(n)){const a=Hb[n];a&&(t.role=a)}}return t}function Gb(u){const t={};if(nc(u)){if(u.alt!==void 0&&(t["aria-label"]=u.alt),u.lang!==void 0&&(t.lang=u.lang),Ib(u)){const[n]=u.children;if(n){const s=Gb(n);return{...t,...s}}}}else"id"in u&&(t["aria-owns"]=u.id);return t}function i2(u){return u?{...n2(u),...Gb(u)}:null}function Vb({className:u,node:t}){const n=L.useMemo(()=>i2(t),[t]),s=L.useMemo(()=>!nc(t)||Ib(t)?null:t.children.map((a,o)=>w.jsx(Vb,{node:a},o)),[t]);return w.jsx("span",{className:u,...n,children:s})}function s2(){const u=ec();Xt(u);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=u,[s,a]=_a(),{value:o,error:l}=s,{customTextRenderer:h,page:d}=u;function f(){o&&n&&n(o)}function g(){l&&(Ne(!1,l.toString()),t&&t(l))}return L.useEffect(function(){a({type:"RESET"})},[a,d]),L.useEffect(function(){if(h||!d)return;const y=to(d.getStructTree()),A=y;return y.promise.then(E=>{a({type:"RESOLVE",value:E})}).catch(E=>{a({type:"REJECT",error:E})}),()=>ws(A)},[h,d,a]),L.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}f()}},[o]),o?w.jsx(Vb,{className:"react-pdf__Page__structTree structTree",node:o}):null}const _0=In;function a2(u){const t=ec();Xt(t);const n={...t,...u},{_className:s,canvasBackground:a,devicePixelRatio:o=Yw(),onRenderError:l,onRenderSuccess:h,page:d,renderForms:f,renderTextLayer:g,rotate:b,scale:y}=n,{canvasRef:A}=u;Xt(d);const E=L.useRef(null);function S(){d&&h&&h(Zh(d,y))}function C(O){Kw(O)||(Ne(!1,O.toString()),l&&l(O))}const x=L.useMemo(()=>d.getViewport({scale:y*o,rotation:b}),[o,d,b,y]),T=L.useMemo(()=>d.getViewport({scale:y,rotation:b}),[d,b,y]);L.useEffect(function(){if(!d)return;d.cleanup();const{current:B}=E;if(!B)return;B.width=x.width,B.height=x.height,B.style.width=`${Math.floor(T.width)}px`,B.style.height=`${Math.floor(T.height)}px`,B.style.visibility="hidden";const j={annotationMode:f?_0.ENABLE_FORMS:_0.ENABLE,canvas:B,canvasContext:B.getContext("2d",{alpha:!1}),viewport:x};a&&(j.background=a);const P=d.render(j),I=P;return P.promise.then(()=>{B.style.visibility="",S()}).catch(C),()=>ws(I)},[a,d,f,x,T]);const M=L.useCallback(()=>{const{current:O}=E;O&&(O.width=0,O.height=0)},[]);return L.useEffect(()=>M,[M]),w.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:Fb(A,E),style:{display:"block",userSelect:"none"},children:g?w.jsx(s2,{}):null})}function r2(u){return"str"in u}function o2(){const u=ec();Xt(u);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:h,pageNumber:d,rotate:f,scale:g}=u;Xt(l);const[b,y]=_a(),{value:A,error:E}=b,S=L.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){A&&s&&s(A)}function x(){E&&(Ne(!1,E.toString()),n&&n(E))}L.useEffect(function(){y({type:"RESET"})},[l,y]),L.useEffect(function(){if(!l)return;const I=to(l.getTextContent()),X=I;return I.promise.then(Q=>{y({type:"RESOLVE",value:Q})}).catch(Q=>{y({type:"REJECT",error:Q})}),()=>ws(X)},[l,y]),L.useEffect(()=>{if(A!==void 0){if(A===!1){x();return}C()}},[A]);const T=L.useCallback(()=>{o&&o()},[o]),M=L.useCallback(P=>{Ne(!1,P.toString()),a&&a(P)},[a]);function O(){const P=S.current;P&&P.classList.add("selecting")}function B(){const P=S.current;P&&P.classList.remove("selecting")}const j=L.useMemo(()=>l.getViewport({scale:g,rotation:f}),[l,f,g]);return L.useLayoutEffect(function(){if(!l||!A)return;const{current:I}=S;if(!I)return;I.innerHTML="";const X=l.streamTextContent({includeMarkedContent:!0}),Q={container:I,textContentSource:X,viewport:j},Z=new Ur(Q),ct=Z;return Z.render().then(()=>{const dt=document.createElement("div");dt.className="endOfContent",I.append(dt);const at=I.querySelectorAll('[role="presentation"]');if(t){let et=0;A.items.forEach((R,G)=>{if(!r2(R))return;const J=at[et];if(!J)return;const pt=t({pageIndex:h,pageNumber:d,itemIndex:G,...R});J.innerHTML=pt,et+=R.str&&R.hasEOL?2:1})}T()}).catch(M),()=>ws(ct)},[t,M,T,l,h,d,A,j]),w.jsx("div",{className:Jl("react-pdf__Page__textContent","textLayer"),onMouseUp:B,onMouseDown:O,ref:S})}const C0=1;function T0(u){const n={...zb(),...u},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:h,className:d,customRenderer:f,customTextRenderer:g,devicePixelRatio:b,error:y="Failed to load the page.",height:A,inputRef:E,loading:S="Loading page",noData:C="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:T,onGetStructTreeError:M,onGetStructTreeSuccess:O,onGetTextError:B,onGetTextSuccess:j,onLoadError:P,onLoadSuccess:I,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:ct,onRenderTextLayerError:dt,onRenderTextLayerSuccess:at,pageIndex:et,pageNumber:R,pdf:G,registerPage:J,renderAnnotationLayer:pt=!0,renderForms:At=!1,renderMode:N="canvas",renderTextLayer:q=!0,rotate:W,scale:tt=C0,unregisterPage:ot,width:ft,...lt}=n,[$t,Et]=_a(),{value:jt,error:je}=$t,$e=L.useRef(null);Xt(G);const Nt=gs(R)?R-1:et??null,Ot=R??(gs(et)?et+1:null),te=W??(jt?jt.rotate:null),ae=L.useMemo(()=>{if(!jt)return null;let xn=1;const wn=tt??C0;if(ft||A){const Dn=jt.getViewport({scale:1,rotation:te});ft?xn=ft/Dn.width:A&&(xn=A/Dn.height)}return wn*xn},[A,jt,te,tt,ft]);L.useEffect(function(){return()=>{gs(Nt)&&a&&ot&&ot(Nt)}},[a,G,Nt,ot]);function gi(){if(I){if(!jt||!ae)return;I(Zh(jt,ae))}if(a&&J){if(!gs(Nt)||!$e.current)return;J(Nt,$e.current)}}function mi(){je&&(Ne(!1,je.toString()),P&&P(je))}L.useEffect(function(){Et({type:"RESET"})},[Et,G,Nt]),L.useEffect(function(){if(!G||!Ot)return;const wn=to(G.getPage(Ot)),Dn=wn;return wn.promise.then(Ts=>{Et({type:"RESOLVE",value:Ts})}).catch(Ts=>{Et({type:"REJECT",error:Ts})}),()=>ws(Dn)},[Et,G,Ot]),L.useEffect(()=>{if(jt!==void 0){if(jt===!1){mi();return}gi()}},[jt,ae]);const Wi=L.useMemo(()=>gs(Nt)&&Ot&&gs(te)&&gs(ae)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:b,onGetAnnotationsError:x,onGetAnnotationsSuccess:T,onGetStructTreeError:M,onGetStructTreeSuccess:O,onGetTextError:B,onGetTextSuccess:j,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:ct,onRenderTextLayerError:dt,onRenderTextLayerSuccess:at,page:jt,pageIndex:Nt,pageNumber:Ot,renderForms:At,renderTextLayer:q,rotate:te,scale:ae}:null,[s,o,g,b,x,T,M,O,B,j,X,Q,Z,ct,dt,at,jt,Nt,Ot,At,q,te,ae]),Da=L.useMemo(()=>kb(lt,()=>jt&&(ae?Zh(jt,ae):void 0)),[lt,jt,ae]),bi=`${Nt}@${ae}/${te}`;function ic(){switch(N){case"custom":return Xt(f),w.jsx(f,{},`${bi}_custom`);case"none":return null;case"canvas":default:return w.jsx(a2,{canvasRef:l},`${bi}_canvas`)}}function sc(){return q?w.jsx(o2,{},`${bi}_text`):null}function Oe(){return pt?w.jsx(Jw,{},`${bi}_annotations`):null}function ac(){function xn(Dn){return!!Dn?.page}if(!xn(Wi))throw new Error("page is undefined");const wn=typeof h=="function"?h(Wi):h;return w.jsxs(Ub.Provider,{value:Wi,children:[ic(),sc(),Oe(),wn]})}function eo(){return Ot?G===null||jt===void 0||jt===null?w.jsx(Sa,{type:"loading",children:typeof S=="function"?S():S}):G===!1||jt===!1?w.jsx(Sa,{type:"error",children:typeof y=="function"?y():y}):ac():w.jsx(Sa,{type:"no-data",children:typeof C=="function"?C():C})}return w.jsx("div",{className:Jl(s,d),"data-page-number":Ot,ref:Fb(E,$e),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ae}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Da,children:eo()})}$w();Xi.workerSrc="pdf.worker.mjs";Xi.workerSrc=new URL("/ludusregula/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();function l2({file:u,links:t={},initialScale:n=.5,minScale:s=.5,maxScale:a=2,step:o=.1}){const l=L.useRef(null),[h,d]=L.useState(null),[f,g]=L.useState(1),[b,y]=L.useState(n),[A,E]=L.useState(0),[S,C]=L.useState(800),[x,T]=L.useState("1");L.useEffect(()=>{const et=()=>{const R=Math.min(1200,Math.max(320,l.current?.clientWidth??800));C(R)};return et(),window.addEventListener("resize",et),()=>window.removeEventListener("resize",et)},[]),L.useEffect(()=>{h&&g(et=>Math.min(Math.max(1,et),h))},[h]);const M=f>1,O=h?f<h:!1,B=({numPages:et})=>{d(et),g(1),T("1")},j=()=>M&&(g(f-1),T(String(f-1))),P=()=>O&&(g(f+1),T(String(f+1))),I=()=>y(et=>Math.min(a,+(et+o).toFixed(2))),X=()=>y(et=>Math.max(s,+(et-o).toFixed(2))),Q=()=>y(1),Z=()=>E(et=>(et+90)%360);L.useEffect(()=>{const et=R=>{R.key==="ArrowRight"&&O&&P(),R.key==="ArrowLeft"&&M&&j(),(R.ctrlKey||R.metaKey)&&R.key==="+"&&(R.preventDefault(),I()),(R.ctrlKey||R.metaKey)&&R.key==="-"&&(R.preventDefault(),X()),(R.ctrlKey||R.metaKey)&&R.key.toLowerCase()==="0"&&(R.preventDefault(),Q()),(R.ctrlKey||R.metaKey)&&R.key.toLowerCase()==="r"&&(R.preventDefault(),Z())};return window.addEventListener("keydown",et),()=>window.removeEventListener("keydown",et)},[O,M]);const ct=et=>{et.preventDefault();const R=parseInt(x,10);!Number.isNaN(R)&&R>=1&&R<=(h??1)?g(R):T(String(f))},dt=L.useMemo(()=>w.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 p-2 border border-slate-200 bg-white rounded-md",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("button",{onClick:j,disabled:!M,className:"relative group p-2 rounded-lg border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50","aria-label":"Page prcdente",children:[w.jsx(iS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Page prcdente"})]}),w.jsxs("form",{onSubmit:ct,className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm text-slate-600",children:"Page"}),w.jsx("input",{value:x,onChange:et=>T(et.target.value.replace(/[^\d]/g,"")),className:"w-16 text-center h-9 rounded-lg border border-slate-300 bg-white outline-none focus:ring-4 focus:ring-[#0abde3]/30",inputMode:"numeric"}),h&&w.jsxs("span",{className:"text-sm text-slate-600",children:["/ ",h]})]}),w.jsxs("button",{onClick:P,disabled:!O,className:"relative group p-2 rounded-lg border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50","aria-label":"Page suivante",children:[w.jsx(aS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Page suivante"})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("button",{onClick:X,className:"relative group p-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50","aria-label":"Zoom -",children:[w.jsx(pS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Zoom -"})]}),w.jsxs("div",{className:"w-16 text-center text-sm tabular-nums text-slate-700",children:[Math.round(b*100),"%"]}),w.jsxs("button",{onClick:I,className:"relative group p-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50","aria-label":"Zoom +",children:[w.jsx(nS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Zoom +"})]}),w.jsxs("button",{onClick:Q,className:"relative group p-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50","aria-label":"Ajuster  la largeur",children:[w.jsx(gS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Ajuster  la largeur"})]}),w.jsxs("button",{onClick:Z,className:"relative group p-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50","aria-label":"Pivoter 90",children:[w.jsx(fS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Pivoter 90"})]}),w.jsxs("a",{href:u,download:!0,className:"relative group p-2 rounded-lg bg-[#0abde3] text-white hover:brightness-110","aria-label":"Tlcharger le PDF",children:[w.jsx(oS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Tlcharger le PDF"})]}),w.jsxs("a",{href:u,target:"_blank",rel:"noreferrer",className:"relative group p-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50","aria-label":"Ouvrir dans un onglet",children:[w.jsx(hS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Ouvrir dans un onglet"})]}),w.jsxs("a",{href:u,target:"_blank",rel:"noreferrer",className:"relative group p-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50","aria-label":"Imprimer",children:[w.jsx(dS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Imprimer"})]})]})]}),[f,x,h,b,M,O,u,t]),at=L.useMemo(()=>w.jsx("div",{className:"w-28 shrink-0 overflow-auto border border-slate-200 rounded-md bg-white p-2 max-h-[70vh]",children:w.jsx(E0,{file:u,loading:w.jsx("div",{className:"text-xs text-slate-500 p-2",children:"Miniatures"}),children:Array.from(new Array(h||0),(et,R)=>w.jsx("button",{onClick:()=>{g(R+1),T(String(R+1))},className:`block w-full mb-2 rounded-lg overflow-hidden border ${f===R+1?"border-[#0abde3]":"border-slate-200"} hover:border-[#0abde3]`,title:`Aller  la page ${R+1}`,children:w.jsx(T0,{pageNumber:R+1,width:92,renderAnnotationLayer:!1,renderTextLayer:!1})},`t_${R+1}`))})}),[u,h,f]);return w.jsxs("div",{className:"space-y-3",children:[dt,w.jsxs("div",{className:"flex items-start gap-3",children:[h?at:null,w.jsx("div",{ref:l,className:"rounded-2xl p-3 bg-white border border-slate-200 shadow-sm overflow-x-auto w-full self-start",children:w.jsx(E0,{file:u,onLoadSuccess:B,loading:w.jsx("div",{className:"p-6 text-slate-600",children:"Chargement du document"}),error:w.jsx("div",{className:"p-6 text-[#ee5253]",children:"Impossible de charger le PDF."}),children:w.jsx(T0,{pageNumber:f,width:Math.round(S*b),rotate:A,renderAnnotationLayer:!1,renderTextLayer:!1})})})]}),w.jsx("style",{children:`
        .tooltip {
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          background-color: #1f2937;
          color: #fff;
          font-size: 0.75rem;
          padding: 0.25rem 0.5rem;
          border-radius: 0.375rem;
          opacity: 0;
          pointer-events: none;
          white-space: nowrap;
          transition: opacity 0.15s ease-in-out, transform 0.15s ease-in-out;
          margin-bottom: 0.25rem;
        }
        .group:hover .tooltip {
          opacity: 1;
          transform: translateX(-50%) translateY(-2px);
        }
      `})]})}function c2(){const{id:u}=Q1(),[t,n]=L.useState(null),[s,a]=L.useState(!1);if(L.useEffect(()=>{fetch(Yi("/data/games.json")).then(h=>h.json()).then(h=>n(h.find(d=>d.id===u)||null))},[u]),!t)return w.jsx("div",{className:"p-4",children:"Chargement"});const o=h=>typeof h=="string"&&h.trim().length>0,l=async()=>{const h=window.location.href,d=t.name,f=`Dcouvrez les rgles de "${t.name}" sur LudusRegula !`;if(navigator.share)try{await navigator.share({title:d,text:f,url:h})}catch{}else try{await navigator.clipboard.writeText(h),a(!0),setTimeout(()=>a(!1),2500)}catch(g){console.error("Erreur lors de la copie :",g)}};return w.jsxs("div",{className:"space-y-5",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-[11px] font-semibold rounded-md bg-[#10ac84]/15 text-[#10ac84]",children:"PDF"}),w.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t.name})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("button",{onClick:l,className:"relative group inline-flex items-center justify-center rounded-md border border-slate-300 bg-white p-2 text-slate-700 hover:bg-slate-50 transition","aria-label":"Partager cette fiche",children:[w.jsx(bS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:s?"Lien copi !":"Partager"})]}),w.jsxs(Es,{to:"/",className:"relative group inline-flex items-center justify-center rounded-md border border-slate-300 bg-white p-2 hover:bg-slate-50 transition","aria-label":"Retour  la liste",children:[w.jsx(sS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Retour"})]})]})]}),w.jsxs("div",{className:"rounded-2xl p-5 bg-white border border-slate-200 shadow-sm",children:[w.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Description"}),w.jsx("div",{children:t.summary}),w.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[o(t.rules?.official.site_url)&&w.jsxs("a",{href:t.rules.external_url,target:"_blank",rel:"noreferrer",className:"relative group inline-flex items-center justify-center rounded-md bg-[#10ac84] p-2 text-white hover:brightness-110 transition","aria-label":"Site officiel",children:[w.jsx(lS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Site officiel"})]}),o(t.rules?.links?.rules_url)&&w.jsxs("a",{href:t.rules.links.rules_url,target:"_blank",rel:"noreferrer",className:"relative group inline-flex items-center justify-center rounded-md border border-slate-300 bg-white p-2 hover:bg-slate-50 transition","aria-label":"Page officielle des rgles",children:[w.jsx(rS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Page des rgles"})]}),o(t.rules?.links?.video_url)&&w.jsxs("a",{href:t.rules.links.video_url,target:"_blank",rel:"noreferrer",className:"relative group inline-flex items-center justify-center rounded-md border border-slate-300 bg-white p-2 hover:bg-slate-50 transition","aria-label":"Vido dexplication",children:[w.jsx(cS,{className:"h-5 w-5"}),w.jsx("span",{className:"tooltip",children:"Vido dexplication"})]})]}),(o(t.rules?.official?.publisher)||o(t.rules?.official?.site_url))&&w.jsxs("p",{className:"mt-3 text-xs text-slate-500",children:["Source : ",t.rules.official.publisher||"diteur"," "," ",o(t.rules.official.site_url)?w.jsx("a",{className:"underline",href:t.rules.official.site_url,target:"_blank",rel:"noreferrer",children:t.rules.official.site_url}):"Site diteur"]})]}),t.rules?.type==="hosted"&&o(t.rules?.pdf)?w.jsx(l2,{file:Yi(t.rules.pdf),links:{site:t.rules.offical?.site_url,video:t.rules.links?.video_url,quickstart:t.rules.links?.quickstart_url}}):w.jsxs("div",{className:"rounded-2xl p-5 bg-white border border-slate-200 shadow-sm",children:[w.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Rgle indisponible"}),w.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Nous navons pas lautorisation de diffuser cette rgle ici."})]}),w.jsx("style",{children:`
        .tooltip {
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          background-color: #1f2937;
          color: #fff;
          font-size: 0.75rem;
          padding: 0.25rem 0.5rem;
          border-radius: 0.375rem;
          opacity: 0;
          pointer-events: none;
          white-space: nowrap;
          transition: opacity 0.15s ease-in-out, transform 0.15s ease-in-out;
          margin-bottom: 0.25rem;
        }
        .group:hover .tooltip {
          opacity: 1;
          transform: translateX(-50%) translateY(-2px);
        }
      `})]})}function u2(u){return Ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M443.5 420.2L336.7 312.4c20.9-26.2 33.5-59.4 33.5-95.5 0-84.5-68.5-153-153.1-153S64 132.5 64 217s68.5 153 153.1 153c36.6 0 70.1-12.8 96.5-34.2l106.1 107.1c3.2 3.4 7.6 5.1 11.9 5.1 4.1 0 8.2-1.5 11.3-4.5 6.6-6.3 6.8-16.7.6-23.3zm-226.4-83.1c-32.1 0-62.3-12.5-85-35.2-22.7-22.7-35.2-52.9-35.2-84.9 0-32.1 12.5-62.3 35.2-84.9 22.7-22.7 52.9-35.2 85-35.2s62.3 12.5 85 35.2c22.7 22.7 35.2 52.9 35.2 84.9 0 32.1-12.5 62.3-35.2 84.9-22.7 22.7-52.9 35.2-85 35.2z"},child:[]}]})(u)}function h2(u){return Ut({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828zM3.794 1.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387A1.73 1.73 0 0 0 4.593 5.69l-.387 1.162a.217.217 0 0 1-.412 0L3.407 5.69A1.73 1.73 0 0 0 2.31 4.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387A1.73 1.73 0 0 0 3.407 2.31zM10.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732L9.1 2.137a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"},child:[]}]})(u)}function qb(u){return Ut({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M6,16 L16,16 L6,16 L6,16 Z M6,12 L18,12 L6,12 L6,12 Z M6,8 L11,8 L6,8 L6,8 Z M14,1 L14,8 L21,8 M3,23 L3,1 L15,1 L21,7 L21,23 L3,23 Z"},child:[]}]})(u)}function d2(u){return Ut({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M272.2 64.6l-51.1 51.1c-15.3 4.2-29.5 11.9-41.5 22.5L153 161.9C142.8 171 129.5 176 115.8 176L96 176l0 128c20.4 .6 39.8 8.9 54.3 23.4l35.6 35.6 7 7c0 0 0 0 0 0L219.9 397c6.2 6.2 16.4 6.2 22.6 0c1.7-1.7 3-3.7 3.7-5.8c2.8-7.7 9.3-13.5 17.3-15.3s16.4 .6 22.2 6.5L296.5 393c11.6 11.6 30.4 11.6 41.9 0c5.4-5.4 8.3-12.3 8.6-19.4c.4-8.8 5.6-16.6 13.6-20.4s17.3-3 24.4 2.1c9.4 6.7 22.5 5.8 30.9-2.6c9.4-9.4 9.4-24.6 0-33.9L340.1 243l-35.8 33c-27.3 25.2-69.2 25.6-97 .9c-31.7-28.2-32.4-77.4-1.6-106.5l70.1-66.2C303.2 78.4 339.4 64 377.1 64c36.1 0 71 13.3 97.9 37.2L505.1 128l38.9 0 40 0 40 0c8.8 0 16 7.2 16 16l0 208c0 17.7-14.3 32-32 32l-32 0c-11.8 0-22.2-6.4-27.7-16l-84.9 0c-3.4 6.7-7.9 13.1-13.5 18.7c-17.1 17.1-40.8 23.8-63 20.1c-3.6 7.3-8.5 14.1-14.6 20.2c-27.3 27.3-70 30-100.4 8.1c-25.1 20.8-62.5 19.5-86-4.1L159 404l-7-7-35.6-35.6c-5.5-5.5-12.7-8.7-20.4-9.3C96 369.7 81.6 384 64 384l-32 0c-17.7 0-32-14.3-32-32L0 144c0-8.8 7.2-16 16-16l40 0 40 0 19.8 0c2 0 3.9-.7 5.3-2l26.5-23.6C175.5 77.7 211.4 64 248.7 64L259 64c4.4 0 8.9 .2 13.2 .6zM544 320l0-144-48 0c-5.9 0-11.6-2.2-15.9-6.1l-36.9-32.8c-18.2-16.2-41.7-25.1-66.1-25.1c-25.4 0-49.8 9.7-68.3 27.1l-70.1 66.2c-10.3 9.8-10.1 26.3 .5 35.7c9.3 8.3 23.4 8.1 32.5-.3l71.9-66.4c9.7-9 24.9-8.4 33.9 1.4s8.4 24.9-1.4 33.9l-.8 .8 74.4 74.4c10 10 16.5 22.3 19.4 35.1l74.8 0zM64 336a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm528 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"},child:[]}]})(u)}function f2(u){return Ut({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.727 6h6l-6-6v6zm0 .727H14V0H4.91c-.905 0-1.637.732-1.637 1.636v20.728c0 .904.732 1.636 1.636 1.636h14.182c.904 0 1.636-.732 1.636-1.636V6.727h-6zM7.91 17.318a.819.819 0 1 1 .001-1.638.819.819 0 0 1 0 1.638zm0-3.273a.819.819 0 1 1 .001-1.637.819.819 0 0 1 0 1.637zm0-3.272a.819.819 0 1 1 .001-1.638.819.819 0 0 1 0 1.638zm9 6.409h-6.818v-1.364h6.818v1.364zm0-3.273h-6.818v-1.364h6.818v1.364zm0-3.273h-6.818V9.273h6.818v1.363z"},child:[]}]})(u)}function Xb(u){return Ut({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M7 14C8.10457 14 9 13.1046 9 12C9 10.8954 8.10457 10 7 10C5.89543 10 5 10.8954 5 12C5 13.1046 5.89543 14 7 14Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M17 14C18.1046 14 19 13.1046 19 12C19 10.8954 18.1046 10 17 10C15.8954 10 15 10.8954 15 12C15 13.1046 15.8954 14 17 14Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12ZM22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",fill:"currentColor"},child:[]}]})(u)}const p2="https://github.com/plumedours/ludusregula/issues/new?template=proposer-une-regle.yml",g2="https://forms.gle/LePSjkMjRGj9MQFc8",m2="https://discord.gg/Wffka998Xk";function b2(){const u=Yi("icon.svg");return w.jsxs("div",{className:"space-y-8",children:[w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Dl,{}),w.jsxs("div",{className:"relative z-10 p-6 md:p-8 flex items-start gap-5",children:[w.jsx("img",{src:u,alt:"LudusRegula",className:"h-12 w-12 rounded-md ring-1 ring-slate-200",loading:"eager"}),w.jsxs("div",{children:[w.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-slate-900",children:[" propos de ",w.jsx("span",{className:"text-[#0abde3]",children:"LudusRegula"})]}),w.jsxs("p",{className:"mt-2 text-slate-700 max-w-3xl",children:["LudusRegula est une ",w.jsx("strong",{children:"bibliothque communautaire"})," de rgles de jeux de socit. Lobjectif : retrouver rapidement les rgles, les consulter en ligne, les tlcharger, et dcouvrir de nouveaux jeux grce aux vignettes, aux tags et  la recherche."]})]})]})]}),w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Dl,{colorA:"#0abde3",colorB:"#10ac84"}),w.jsxs("div",{className:"relative z-10 p-6 md:p-8",children:[w.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Comment a marche ?"}),w.jsxs("ul",{className:"mt-3 grid gap-3 md:grid-cols-2 text-slate-700",children:[w.jsxs("li",{className:"flex gap-3",children:[w.jsx("div",{className:"mt-0.5 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-sm bg-[#0abde3]/15 text-[#0abde3] text-sm",children:w.jsx(u2,{})}),w.jsxs("div",{children:[w.jsx("strong",{children:"Rechercher"})," un jeu par son nom, filtrer par"," ",w.jsx("em",{children:"tags"})," (famille, stratgie, cartes)."]})]}),w.jsxs("li",{className:"flex gap-3",children:[w.jsx("div",{className:"mt-0.5 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-sm bg-[#0abde3]/15 text-[#0abde3] text-sm",children:w.jsx(qb,{})}),w.jsxs("div",{children:[w.jsx("strong",{children:"Prvisualiser le PDF"})," des rgles directement dans le navigateur, puis le tlcharger si besoin."]})]}),w.jsxs("li",{className:"flex gap-3",children:[w.jsx("div",{className:"mt-0.5 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-sm bg-[#0abde3]/15 text-[#0abde3] text-sm",children:w.jsx(h2,{})}),w.jsxs("div",{children:["Interface ",w.jsx("strong",{children:"simple et lisible"})," (mobile/desktop), avec pagination (application PWA  venir)."]})]}),w.jsxs("li",{className:"flex gap-3",children:[w.jsx("div",{className:"mt-0.5 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-sm bg-[#0abde3]/15 text-[#0abde3] text-sm",children:w.jsx(d2,{})}),w.jsxs("div",{children:["Projet ",w.jsx("strong",{children:"ouvert"})," : chacun peut proposer une rgle de jeu et enrichir la bibliothque."]})]})]})]})]}),w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Dl,{colorA:"#ff9f43",colorB:"#0abde3"}),w.jsxs("div",{className:"relative z-10 p-6 md:p-8 space-y-4",children:[w.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Ajouter une rgle"}),w.jsx("p",{className:"text-slate-700",children:"Deux options simples. Si vous avez un compte GitHub, utilisez le formulaire guid. Sinon, choisissez le Google Forms : je reois votre proposition par e-mail."}),w.jsxs("div",{className:"flex flex-wrap gap-3",children:[w.jsxs("a",{href:p2,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-md bg-[#10ac84] px-4 py-2 text-sm font-semibold text-white hover:brightness-110 transition",children:[w.jsx(Fl,{})," Formulaire GitHub (recommand)"]}),w.jsxs("a",{href:g2,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-md bg-[#ff9f43] px-4 py-2 text-sm font-semibold text-white hover:brightness-110 transition",children:[w.jsx(f2,{})," Google Forms (simple)"]}),w.jsxs(Es,{to:"/contribute",className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium hover:bg-slate-50 transition",children:[w.jsx(Xb,{})," Plus de dtails"]})]}),w.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50/60 p-4 text-sm text-slate-700",children:[w.jsx("strong",{children:"Fichiers attendus :"})," 1 image (webp/jpg/png,  200KB, ~3:2) + 1 PDF des rgles ( 20MB). En proposant du contenu, vous confirmez disposer des droits de diffusion."]})]})]}),w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Dl,{colorA:"#ee5253",colorB:"#10ac84"}),w.jsxs("div",{className:"relative z-10 p-6 md:p-8 grid gap-6 md:grid-cols-2",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold tracking-tight",children:"Respect des diteurs & auteurs"}),w.jsx("p",{className:"mt-2 text-slate-700",children:"LudusRegula rfrence des rgles pour faciliter la vie des joueurs. Si un diteur ou un auteur souhaite la mise  jour ou le retrait dun document, il suffit de nous le signaler : nous intervenons rapidement."})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold tracking-tight",children:"Rejoindre la communaut"}),w.jsx("p",{className:"mt-2 text-slate-700",children:"changer, proposer des ides, suivre les nouveauts :"}),w.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[w.jsxs("a",{href:m2,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-md bg-[#5865F2] px-4 py-2 text-sm font-semibold text-white hover:brightness-110 transition",children:[w.jsx(rd,{})," Rejoindre le Discord"]}),w.jsxs("a",{href:"https://github.com/plumedours/ludusregula",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium hover:bg-slate-50 transition",children:[w.jsx(Fl,{})," Voir le projet sur GitHub"]})]})]})]})]})]})}function Dl({colorA:u="#0abde3",colorB:t="#10ac84"}){return w.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[w.jsx("div",{className:"absolute -top-16 -left-10 h-40 w-40 rounded-full opacity-15 blur-2xl",style:{background:`radial-gradient(circle, ${u} 0%, transparent 60%)`}}),w.jsx("div",{className:"absolute -bottom-16 -right-10 h-48 w-48 rounded-full opacity-10 blur-2xl",style:{background:`radial-gradient(circle, ${t} 0%, transparent 60%)`}})]})}const y2="https://github.com/plumedours/ludusregula/issues/new?template=proposer-une-regle.yml",v2="https://forms.gle/LePSjkMjRGj9MQFc8";function A2(){const[u,t]=L.useState([]),[n,s]=L.useState(!0);L.useEffect(()=>{const o="contributors-cache",l=sessionStorage.getItem(o);if(l)try{t(JSON.parse(l)),s(!1)}catch{}fetch(Yi("/data/contributors.json")).then(h=>h.json()).then(h=>{const d=Array.isArray(h)?h:[];t(d),sessionStorage.setItem(o,JSON.stringify(d))}).catch(()=>t([])).finally(()=>s(!1))},[]);const a=L.useMemo(()=>[...u].sort((o,l)=>String(o.name||"").localeCompare(String(l.name||""),"fr")),[u]);return w.jsxs("div",{className:"space-y-8",children:[w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Ll,{}),w.jsxs("div",{className:"relative z-10 p-6 md:p-7",children:[w.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Contribuer  LudusRegula"}),w.jsx("p",{className:"mt-2 text-slate-700",children:"Deux faons simples dajouter une rgle : via un formulaire GitHub ou, pour les non-initis, via un Google Forms qui menverra votre proposition par e-mail."})]})]}),w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Ll,{colorA:"#0abde3",colorB:"#10ac84"}),w.jsxs("div",{className:"relative z-10 p-6 md:p-7 space-y-4",children:[w.jsx(M0,{title:"Option A  Recommande",color:"#10ac84"}),w.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Proposer une rgle via GitHub"}),w.jsxs("p",{className:"text-slate-700",children:["Le formulaire guid cre automatiquement une issue bien structure. Dposez ",w.jsx("strong",{children:"exactement 2 fichiers"})," : 1 image (webp/jpg/png,  200 KB, ratio ~3:2) et 1 PDF ( 20 MB). Laissez l",w.jsx("em",{children:"Identifiant"})," vide si besoin : un bot vous proposera une suggestion ",w.jsx("em",{children:"kebab-case"}),"."]}),w.jsxs("ol",{className:"list-decimal pl-5 space-y-1 text-slate-700",children:[w.jsx("li",{children:"Cliquez sur le bouton ci-dessous."}),w.jsx("li",{children:"Remplissez les champs requis (Nom + Rsum)."}),w.jsx("li",{children:"Dposez 1 image et 1 PDF dans la zone prvue."}),w.jsx("li",{children:"Soumettez  on soccupe du reste !"})]}),w.jsxs("div",{className:"flex flex-wrap gap-3 pt-1",children:[w.jsxs("a",{href:y2,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-md bg-[#10ac84] px-4 py-2 text-sm font-semibold text-white hover:brightness-110 transition",children:[w.jsx(Fl,{}),"Ouvrir le formulaire GitHub"]}),w.jsxs(Es,{to:"/about",className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium hover:bg-slate-50 transition",children:[w.jsx(Xb,{})," En savoir plus"]})]})]})]}),w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Ll,{colorA:"#ff9f43",colorB:"#ee5253"}),w.jsxs("div",{className:"relative z-10 p-6 md:p-7 space-y-4",children:[w.jsx(M0,{title:"Option B  Formulaire simplifi",color:"#ff9f43"}),w.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Formulaire Google Forms (sans compte GitHub)"}),w.jsx("p",{className:"text-slate-700",children:"Si vous prfrez une voie plus simple, utilisez ce formulaire ; je recevrai votre proposition par e-mail et lintgrerai au site."}),w.jsxs("div",{className:"flex flex-wrap gap-3",children:[w.jsxs("a",{href:v2,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-md bg-[#ff9f43] px-4 py-2 text-sm font-semibold text-white hover:brightness-110 transition",children:[w.jsx(qb,{}),"Ouvrir le Google Forms"]}),w.jsxs("a",{href:"mailto:bory.maxime@gmail.com?subject=Proposition%20de%20r%C3%A8gle%20de%20jeu",className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium hover:bg-slate-50 transition",children:[w.jsx(uS,{}),"Ou mcrire par e-mail"]})]})]})]}),w.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[w.jsx(Ll,{colorA:"#0abde3",colorB:"#ff9f43"}),w.jsxs("div",{className:"relative z-10 p-6 md:p-7",children:[w.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Contributeurs"}),w.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Merci  toutes les personnes qui aident  enrichir la bibliothque !"}),n?w.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Array.from({length:6}).map((o,l)=>w.jsx("div",{className:"h-16 rounded-md border border-slate-200 bg-slate-100 animate-pulse"},l))}):a.length?w.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:a.map((o,l)=>w.jsx(S2,{contributor:o},l))}):w.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"Aucun contributeur list pour le moment."})]})]})]})}function Ll({colorA:u="#0abde3",colorB:t="#10ac84"}){return w.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[w.jsx("div",{className:"absolute -top-16 -left-10 h-40 w-40 rounded-full opacity-15 blur-2xl",style:{background:`radial-gradient(circle, ${u} 0%, transparent 60%)`}}),w.jsx("div",{className:"absolute -bottom-16 -right-10 h-48 w-48 rounded-full opacity-10 blur-2xl",style:{background:`radial-gradient(circle, ${t} 0%, transparent 60%)`}})]})}function M0({title:u,color:t}){return w.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-0.5 text-[11px] font-semibold",style:{backgroundColor:`${t}20`,color:t},children:u})}function S2({contributor:u}){const{name:t="Anonyme",handle:n,website:s,github:a,avatar:o,role:l}=u,h=t.split(" ").map(f=>f[0]).join("").slice(0,2).toUpperCase(),d=()=>w.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-md border border-slate-200 bg-white hover:shadow-md transition",children:[o?w.jsx("img",{src:o,alt:"",className:"h-10 w-10 rounded-lg object-cover",loading:"lazy",referrerPolicy:"no-referrer"}):w.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-slate-900 text-white text-sm font-bold",children:h}),w.jsxs("div",{className:"min-w-0",children:[w.jsx("div",{className:"truncate font-semibold text-slate-900",children:t}),w.jsxs("div",{className:"truncate text-sm text-slate-600",children:[n||a?n||`@${a}`:"Contributeur",l?`  ${l}`:""]})]})]});return s?w.jsx("a",{href:s,target:"_blank",rel:"noreferrer",className:"block",children:w.jsx(d,{})}):w.jsx(d,{})}function x2(){return w.jsx(PA,{basename:"/ludusregula/",children:w.jsxs("div",{className:"min-h-screen flex flex-col bg-[#f6f7fb] text-slate-900",children:[w.jsx(tS,{}),w.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8 w-full flex-1",children:w.jsxs(dA,{children:[w.jsx(Dr,{path:"/",element:w.jsx(RS,{})}),w.jsx(Dr,{path:"/game/:id",element:w.jsx(c2,{})}),w.jsx(Dr,{path:"/about",element:w.jsx(b2,{})}),w.jsx(Dr,{path:"/contribute",element:w.jsx(A2,{})})]})}),w.jsx(eS,{})]})})}S1.createRoot(document.getElementById("root")).render(w.jsx(qi.StrictMode,{children:w.jsx(x2,{})}));
