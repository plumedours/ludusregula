var Sm=h=>{throw TypeError(h)};var ph=(h,t,n)=>t.has(h)||Sm("Cannot "+n);var Qt=(h,t,n)=>(ph(h,t,"read from private field"),n?n.call(h):t.get(h)),Bn=(h,t,n)=>t.has(h)?Sm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,n),Ve=(h,t,n,s)=>(ph(h,t,"write to private field"),s?s.call(h,n):t.set(h,n),n),Pn=(h,t,n)=>(ph(h,t,"access private method"),n);var wm=(h,t,n,s)=>({set _(a){Ve(h,t,a,n)},get _(){return Qt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Wh(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var gh={exports:{}},wr={};var Em;function sA(){if(Em)return wr;Em=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:s,key:l,ref:a!==void 0?a:null,props:o}}return wr.Fragment=t,wr.jsx=n,wr.jsxs=n,wr}var xm;function aA(){return xm||(xm=1,gh.exports=sA()),gh.exports}var R=aA(),mh={exports:{}},yt={};var _m;function rA(){if(_m)return yt;_m=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function w(D,q,W){this.props=D,this.context=q,this.refs=_,this.updater=W||E}w.prototype.isReactComponent={},w.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function T(){}T.prototype=w.prototype;function C(D,q,W){this.props=D,this.context=q,this.refs=_,this.updater=W||E}var O=C.prototype=new T;O.constructor=C,S(O,w.prototype),O.isPureReactComponent=!0;var k=Array.isArray;function z(){}var P={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function X(D,q,W){var nt=W.ref;return{$$typeof:h,type:D,key:q,ref:nt!==void 0?nt:null,props:W}}function Q(D,q){return X(D.type,q,D.props)}function Z(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function ct(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(W){return q[W]})}var dt=/\/+/g;function tt(D,q){return typeof D=="object"&&D!==null&&D.key!=null?ct(""+D.key):q.toString(36)}function et(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(z,z):(D.status="pending",D.then(function(q){D.status==="pending"&&(D.status="fulfilled",D.value=q)},function(q){D.status==="pending"&&(D.status="rejected",D.reason=q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,q,W,nt,ot){var ft=typeof D;(ft==="undefined"||ft==="boolean")&&(D=null);var lt=!1;if(D===null)lt=!0;else switch(ft){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(D.$$typeof){case h:case t:lt=!0;break;case g:return lt=D._init,B(lt(D._payload),q,W,nt,ot)}}if(lt)return ot=ot(D),lt=nt===""?"."+tt(D,0):nt,k(ot)?(W="",lt!=null&&(W=lt.replace(dt,"$&/")+"/"),B(ot,q,W,"",function(zt){return zt})):ot!=null&&(Z(ot)&&(ot=Q(ot,W+(ot.key==null||D&&D.key===ot.key?"":(""+ot.key).replace(dt,"$&/")+"/")+lt)),q.push(ot)),1;lt=0;var Yt=nt===""?".":nt+":";if(k(D))for(var xt=0;xt<D.length;xt++)nt=D[xt],ft=Yt+tt(nt,xt),lt+=B(nt,q,W,ft,ot);else if(xt=A(D),typeof xt=="function")for(D=xt.call(D),xt=0;!(nt=D.next()).done;)nt=nt.value,ft=Yt+tt(nt,xt++),lt+=B(nt,q,W,ft,ot);else if(ft==="object"){if(typeof D.then=="function")return B(et(D),q,W,nt,ot);throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return lt}function G(D,q,W){if(D==null)return D;var nt=[],ot=0;return B(D,nt,"","",function(ft){return q.call(W,ft,ot++)}),nt}function J(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(W){(D._status===0||D._status===-1)&&(D._status=1,D._result=W)},function(W){(D._status===0||D._status===-1)&&(D._status=2,D._result=W)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var pt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},At={map:G,forEach:function(D,q,W){G(D,function(){q.apply(this,arguments)},W)},count:function(D){var q=0;return G(D,function(){q++}),q},toArray:function(D){return G(D,function(q){return q})||[]},only:function(D){if(!Z(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return yt.Activity=y,yt.Children=At,yt.Component=w,yt.Fragment=n,yt.Profiler=a,yt.PureComponent=C,yt.StrictMode=s,yt.Suspense=d,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,yt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return P.H.useMemoCache(D)}},yt.cache=function(D){return function(){return D.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(D,q,W){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var nt=S({},D.props),ot=D.key;if(q!=null)for(ft in q.key!==void 0&&(ot=""+q.key),q)!I.call(q,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&q.ref===void 0||(nt[ft]=q[ft]);var ft=arguments.length-2;if(ft===1)nt.children=W;else if(1<ft){for(var lt=Array(ft),Yt=0;Yt<ft;Yt++)lt[Yt]=arguments[Yt+2];nt.children=lt}return X(D.type,ot,nt)},yt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},yt.createElement=function(D,q,W){var nt,ot={},ft=null;if(q!=null)for(nt in q.key!==void 0&&(ft=""+q.key),q)I.call(q,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(ot[nt]=q[nt]);var lt=arguments.length-2;if(lt===1)ot.children=W;else if(1<lt){for(var Yt=Array(lt),xt=0;xt<lt;xt++)Yt[xt]=arguments[xt+2];ot.children=Yt}if(D&&D.defaultProps)for(nt in lt=D.defaultProps,lt)ot[nt]===void 0&&(ot[nt]=lt[nt]);return X(D,ft,ot)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(D){return{$$typeof:u,render:D}},yt.isValidElement=Z,yt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:J}},yt.memo=function(D,q){return{$$typeof:f,type:D,compare:q===void 0?null:q}},yt.startTransition=function(D){var q=P.T,W={};P.T=W;try{var nt=D(),ot=P.S;ot!==null&&ot(W,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(z,pt)}catch(ft){pt(ft)}finally{q!==null&&W.types!==null&&(q.types=W.types),P.T=q}},yt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},yt.use=function(D){return P.H.use(D)},yt.useActionState=function(D,q,W){return P.H.useActionState(D,q,W)},yt.useCallback=function(D,q){return P.H.useCallback(D,q)},yt.useContext=function(D){return P.H.useContext(D)},yt.useDebugValue=function(){},yt.useDeferredValue=function(D,q){return P.H.useDeferredValue(D,q)},yt.useEffect=function(D,q){return P.H.useEffect(D,q)},yt.useEffectEvent=function(D){return P.H.useEffectEvent(D)},yt.useId=function(){return P.H.useId()},yt.useImperativeHandle=function(D,q,W){return P.H.useImperativeHandle(D,q,W)},yt.useInsertionEffect=function(D,q){return P.H.useInsertionEffect(D,q)},yt.useLayoutEffect=function(D,q){return P.H.useLayoutEffect(D,q)},yt.useMemo=function(D,q){return P.H.useMemo(D,q)},yt.useOptimistic=function(D,q){return P.H.useOptimistic(D,q)},yt.useReducer=function(D,q,W){return P.H.useReducer(D,q,W)},yt.useRef=function(D){return P.H.useRef(D)},yt.useState=function(D){return P.H.useState(D)},yt.useSyncExternalStore=function(D,q,W){return P.H.useSyncExternalStore(D,q,W)},yt.useTransition=function(){return P.H.useTransition()},yt.version="19.2.0",yt}var Tm;function Qh(){return Tm||(Tm=1,mh.exports=rA()),mh.exports}var L=Qh();const Vi=Wh(L);var yh={exports:{}},Er={},bh={exports:{}},vh={};var Cm;function oA(){return Cm||(Cm=1,(function(h){function t(B,G){var J=B.length;B.push(G);t:for(;0<J;){var pt=J-1>>>1,At=B[pt];if(0<a(At,G))B[pt]=G,B[J]=At,J=pt;else break t}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var G=B[0],J=B.pop();if(J!==G){B[0]=J;t:for(var pt=0,At=B.length,D=At>>>1;pt<D;){var q=2*(pt+1)-1,W=B[q],nt=q+1,ot=B[nt];if(0>a(W,J))nt<At&&0>a(ot,W)?(B[pt]=ot,B[nt]=J,pt=nt):(B[pt]=W,B[q]=J,pt=q);else if(nt<At&&0>a(ot,J))B[pt]=ot,B[nt]=J,pt=nt;else break t}}return G}function a(B,G){var J=B.sortIndex-G.sortIndex;return J!==0?J:B.id-G.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,y=null,b=3,A=!1,E=!1,S=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(B){for(var G=n(f);G!==null;){if(G.callback===null)s(f);else if(G.startTime<=B)s(f),G.sortIndex=G.expirationTime,t(d,G);else break;G=n(f)}}function k(B){if(S=!1,O(B),!E)if(n(d)!==null)E=!0,z||(z=!0,ct());else{var G=n(f);G!==null&&et(k,G.startTime-B)}}var z=!1,P=-1,I=5,X=-1;function Q(){return _?!0:!(h.unstable_now()-X<I)}function Z(){if(_=!1,z){var B=h.unstable_now();X=B;var G=!0;try{t:{E=!1,S&&(S=!1,T(P),P=-1),A=!0;var J=b;try{e:{for(O(B),y=n(d);y!==null&&!(y.expirationTime>B&&Q());){var pt=y.callback;if(typeof pt=="function"){y.callback=null,b=y.priorityLevel;var At=pt(y.expirationTime<=B);if(B=h.unstable_now(),typeof At=="function"){y.callback=At,O(B),G=!0;break e}y===n(d)&&s(d),O(B)}else s(d);y=n(d)}if(y!==null)G=!0;else{var D=n(f);D!==null&&et(k,D.startTime-B),G=!1}}break t}finally{y=null,b=J,A=!1}G=void 0}}finally{G?ct():z=!1}}}var ct;if(typeof C=="function")ct=function(){C(Z)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,tt=dt.port2;dt.port1.onmessage=Z,ct=function(){tt.postMessage(null)}}else ct=function(){w(Z,0)};function et(B,G){P=w(function(){B(h.unstable_now())},G)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(B){B.callback=null},h.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(B){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var J=b;b=G;try{return B()}finally{b=J}},h.unstable_requestPaint=function(){_=!0},h.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=b;b=B;try{return G()}finally{b=J}},h.unstable_scheduleCallback=function(B,G,J){var pt=h.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pt+J:pt):J=pt,B){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=J+At,B={id:g++,callback:G,priorityLevel:B,startTime:J,expirationTime:At,sortIndex:-1},J>pt?(B.sortIndex=J,t(f,B),n(d)===null&&B===n(f)&&(S?(T(P),P=-1):S=!0,et(k,J-pt))):(B.sortIndex=At,t(d,B),E||A||(E=!0,z||(z=!0,ct()))),B},h.unstable_shouldYield=Q,h.unstable_wrapCallback=function(B){var G=b;return function(){var J=b;b=G;try{return B.apply(this,arguments)}finally{b=J}}}})(vh)),vh}var Rm;function lA(){return Rm||(Rm=1,bh.exports=oA()),bh.exports}var Ah={exports:{}},Me={};var Mm;function cA(){if(Mm)return Me;Mm=1;var h=Qh();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Me.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Me.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},Me.flushSync=function(d){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=g,s.d.f()}},Me.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},Me.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Me.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Me.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},Me.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Me.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},Me.requestFormReset=function(d){s.d.r(d)},Me.unstable_batchedUpdates=function(d,f){return d(f)},Me.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},Me.useFormStatus=function(){return l.H.useHostTransitionStatus()},Me.version="19.2.0",Me}var Dm;function uA(){if(Dm)return Ah.exports;Dm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Ah.exports=cA(),Ah.exports}var Lm;function hA(){if(Lm)return Er;Lm=1;var h=lA(),t=Qh(),n=uA();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,r=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(r=i.return),e=i.return;while(e)}return i.tag===3?r:null}function l(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function u(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function f(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(s(188));return i!==e?null:e}for(var r=e,c=i;;){var p=r.return;if(p===null)break;var m=p.alternate;if(m===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===r)return d(p),e;if(m===c)return d(p),i;m=m.sibling}throw Error(s(188))}if(r.return!==c.return)r=p,c=m;else{for(var v=!1,x=p.child;x;){if(x===r){v=!0,r=p,c=m;break}if(x===c){v=!0,c=p,r=m;break}x=x.sibling}if(!v){for(x=m.child;x;){if(x===r){v=!0,r=m,c=p;break}if(x===c){v=!0,c=m,r=p;break}x=x.sibling}if(!v)throw Error(s(189))}}if(r.alternate!==c)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ct(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Symbol.for("react.client.reference");function tt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===dt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case w:return"Profiler";case _:return"StrictMode";case k:return"Suspense";case z:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case C:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return i=e.displayName||null,i!==null?i:tt(e.type)||"Memo";case I:i=e._payload,e=e._init;try{return tt(e(i))}catch{}}return null}var et=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},pt=[],At=-1;function D(e){return{current:e}}function q(e){0>At||(e.current=pt[At],pt[At]=null,At--)}function W(e,i){At++,pt[At]=e.current,e.current=i}var nt=D(null),ot=D(null),ft=D(null),lt=D(null);function Yt(e,i){switch(W(ft,i),W(ot,e),W(nt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Vg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Vg(i),e=qg(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(nt),W(nt,e)}function xt(){q(nt),q(ot),q(ft)}function zt(e){e.memoizedState!==null&&W(lt,e);var i=nt.current,r=qg(i,e.type);i!==r&&(W(ot,e),W(nt,r))}function Pe(e){ot.current===e&&(q(nt),q(ot)),lt.current===e&&(q(lt),br._currentValue=J)}var Ye,Nt;function Ot(e){if(Ye===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Ye=i&&i[1]||"",Nt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+e+Nt}var Jt=!1;function se(e,i){if(!e||Jt)return"";Jt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(V){var H=V}Reflect.construct(e,[],K)}else{try{K.call()}catch(V){H=V}e.call(K.prototype)}}else{try{throw Error()}catch(V){H=V}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],x=m[1];if(v&&x){var M=v.split(`
`),U=x.split(`
`);for(p=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(c===M.length||p===U.length)for(c=M.length-1,p=U.length-1;1<=c&&0<=p&&M[c]!==U[p];)p--;for(;1<=c&&0<=p;c--,p--)if(M[c]!==U[p]){if(c!==1||p!==1)do if(c--,p--,0>p||M[c]!==U[p]){var Y=`
`+M[c].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=c&&0<=p);break}}}finally{Jt=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Ot(r):""}function gi(e,i){switch(e.tag){case 26:case 27:case 5:return Ot(e.type);case 16:return Ot("Lazy");case 13:return e.child!==i&&i!==null?Ot("Suspense Fallback"):Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return se(e.type,!1);case 11:return se(e.type.render,!1);case 1:return se(e.type,!0);case 31:return Ot("Activity");default:return""}}function mi(e){try{var i="",r=null;do i+=gi(e,r),r=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var $i=Object.prototype.hasOwnProperty,Ma=h.unstable_scheduleCallback,yi=h.unstable_cancelCallback,Jl=h.unstable_shouldYield,tc=h.unstable_requestPaint,Ne=h.unstable_now,ec=h.unstable_getCurrentPriorityLevel,to=h.unstable_ImmediatePriority,Sn=h.unstable_UserBlockingPriority,wn=h.unstable_NormalPriority,Dn=h.unstable_LowPriority,_s=h.unstable_IdlePriority,Ub=h.log,Hb=h.unstable_setDisableYieldValue,Da=null,$e=null;function bi(e){if(typeof Ub=="function"&&Hb(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Da,e)}catch{}}var Ke=Math.clz32?Math.clz32:Vb,Ib=Math.log,Gb=Math.LN2;function Vb(e){return e>>>=0,e===0?32:31-(Ib(e)/Gb|0)|0}var eo=256,no=262144,io=4194304;function Ki(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function so(e,i,r){var c=e.pendingLanes;if(c===0)return 0;var p=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var x=c&134217727;return x!==0?(c=x&~m,c!==0?p=Ki(c):(v&=x,v!==0?p=Ki(v):r||(r=x&~e,r!==0&&(p=Ki(r))))):(x=c&~m,x!==0?p=Ki(x):v!==0?p=Ki(v):r||(r=c&~e,r!==0&&(p=Ki(r)))),p===0?0:i!==0&&i!==p&&(i&m)===0&&(m=p&-p,r=i&-i,m>=r||m===32&&(r&4194048)!==0)?i:p}function La(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function qb(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xd(){var e=io;return io<<=1,(io&62914560)===0&&(io=4194304),e}function nc(e){for(var i=[],r=0;31>r;r++)i.push(e);return i}function Na(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Xb(e,i,r,c,p,m){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var x=e.entanglements,M=e.expirationTimes,U=e.hiddenUpdates;for(r=v&~r;0<r;){var Y=31-Ke(r),K=1<<Y;x[Y]=0,M[Y]=-1;var H=U[Y];if(H!==null)for(U[Y]=null,Y=0;Y<H.length;Y++){var V=H[Y];V!==null&&(V.lane&=-536870913)}r&=~K}c!==0&&_d(e,c,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~i))}function _d(e,i,r){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-Ke(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|r&261930}function Td(e,i){var r=e.entangledLanes|=i;for(e=e.entanglements;r;){var c=31-Ke(r),p=1<<c;p&i|e[c]&i&&(e[c]|=i),r&=~p}}function Cd(e,i){var r=i&-i;return r=(r&42)!==0?1:ic(r),(r&(e.suspendedLanes|i))!==0?0:r}function ic(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Rd(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:pm(e.type))}function Md(e,i){var r=G.p;try{return G.p=e,i()}finally{G.p=r}}var vi=Math.random().toString(36).slice(2),we="__reactFiber$"+vi,ze="__reactProps$"+vi,Ts="__reactContainer$"+vi,ac="__reactEvents$"+vi,Yb="__reactListeners$"+vi,$b="__reactHandles$"+vi,Dd="__reactResources$"+vi,Oa="__reactMarker$"+vi;function rc(e){delete e[we],delete e[ze],delete e[ac],delete e[Yb],delete e[$b]}function Cs(e){var i=e[we];if(i)return i;for(var r=e.parentNode;r;){if(i=r[Ts]||r[we]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(e=Zg(e);e!==null;){if(r=e[we])return r;e=Zg(e)}return i}e=r,r=e.parentNode}return null}function Rs(e){if(e=e[we]||e[Ts]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function ka(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Ms(e){var i=e[Dd];return i||(i=e[Dd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ye(e){e[Oa]=!0}var Ld=new Set,Nd={};function Wi(e,i){Ds(e,i),Ds(e+"Capture",i)}function Ds(e,i){for(Nd[e]=i,e=0;e<i.length;e++)Ld.add(i[e])}var Kb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Od={},kd={};function Wb(e){return $i.call(kd,e)?!0:$i.call(Od,e)?!1:Kb.test(e)?kd[e]=!0:(Od[e]=!0,!1)}function ao(e,i,r){if(Wb(i))if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+r)}}function ro(e,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+r)}}function qn(e,i,r,c){if(c===null)e.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(i,r,""+c)}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bd(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qb(e,i,r){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,m=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function oc(e){if(!e._valueTracker){var i=Bd(e)?"checked":"value";e._valueTracker=Qb(e,i,""+e[i])}}function Pd(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return e&&(c=Bd(e)?e.checked?"true":"false":e.value),e=c,e!==r?(i.setValue(e),!0):!1}function oo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zb=/[\n"\\]/g;function cn(e){return e.replace(Zb,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function lc(e,i,r,c,p,m,v,x){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+ln(i)):e.value!==""+ln(i)&&(e.value=""+ln(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?cc(e,v,ln(i)):r!=null?cc(e,v,ln(r)):c!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+ln(x):e.removeAttribute("name")}function zd(e,i,r,c,p,m,v,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){oc(e);return}r=r!=null?""+ln(r):"",i=i!=null?""+ln(i):r,x||i===e.value||(e.value=i),e.defaultValue=i}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=x?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),oc(e)}function cc(e,i,r){i==="number"&&oo(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Ls(e,i,r,c){if(e=e.options,i){i={};for(var p=0;p<r.length;p++)i["$"+r[p]]=!0;for(r=0;r<e.length;r++)p=i.hasOwnProperty("$"+e[r].value),e[r].selected!==p&&(e[r].selected=p),p&&c&&(e[r].defaultSelected=!0)}else{for(r=""+ln(r),i=null,p=0;p<e.length;p++){if(e[p].value===r){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function jd(e,i,r){if(i!=null&&(i=""+ln(i),i!==e.value&&(e.value=i),r==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=r!=null?""+ln(r):""}function Fd(e,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(s(92));if(et(c)){if(1<c.length)throw Error(s(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=ln(i),e.defaultValue=r,c=e.textContent,c===r&&c!==""&&c!==null&&(e.value=c),oc(e)}function Ns(e,i){if(i){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=i;return}}e.textContent=i}var Jb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ud(e,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,r):typeof r!="number"||r===0||Jb.has(i)?i==="float"?e.cssFloat=r:e[i]=(""+r).trim():e[i]=r+"px"}function Hd(e,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in i)c=i[p],i.hasOwnProperty(p)&&r[p]!==c&&Ud(e,p,c)}else for(var m in i)i.hasOwnProperty(m)&&Ud(e,m,i[m])}function uc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),e0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lo(e){return e0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Xn(){}var hc=null;function dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Os=null,ks=null;function Id(e){var i=Rs(e);if(i&&(e=i.stateNode)){var r=e[ze]||null;t:switch(e=i.stateNode,i.type){case"input":if(lc(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+cn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==e&&c.form===e.form){var p=c[ze]||null;if(!p)throw Error(s(90));lc(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===e.form&&Pd(c)}break t;case"textarea":jd(e,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&Ls(e,!!r.multiple,i,!1)}}}var fc=!1;function Gd(e,i,r){if(fc)return e(i,r);fc=!0;try{var c=e(i);return c}finally{if(fc=!1,(Os!==null||ks!==null)&&(Wo(),Os&&(i=Os,e=ks,ks=Os=null,Id(i),e)))for(i=0;i<e.length;i++)Id(e[i])}}function Ba(e,i){var r=e.stateNode;if(r===null)return null;var c=r[ze]||null;if(c===null)return null;r=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=!1;if(Yn)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){pc=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{pc=!1}var Ai=null,gc=null,co=null;function Vd(){if(co)return co;var e,i=gc,r=i.length,c,p="value"in Ai?Ai.value:Ai.textContent,m=p.length;for(e=0;e<r&&i[e]===p[e];e++);var v=r-e;for(c=1;c<=v&&i[r-c]===p[m-c];c++);return co=p.slice(e,1<c?1-c:void 0)}function uo(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ho(){return!0}function qd(){return!1}function je(e){function i(r,c,p,m,v){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ho:qd,this.isPropagationStopped=qd,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),i}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=je(Qi),za=y({},Qi,{view:0,detail:0}),n0=je(za),mc,yc,ja,po=y({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ja&&(ja&&e.type==="mousemove"?(mc=e.screenX-ja.screenX,yc=e.screenY-ja.screenY):yc=mc=0,ja=e),mc)},movementY:function(e){return"movementY"in e?e.movementY:yc}}),Xd=je(po),i0=y({},po,{dataTransfer:0}),s0=je(i0),a0=y({},za,{relatedTarget:0}),bc=je(a0),r0=y({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),o0=je(r0),l0=y({},Qi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),c0=je(l0),u0=y({},Qi,{data:0}),Yd=je(u0),h0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p0(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=f0[e])?!!i[e]:!1}function vc(){return p0}var g0=y({},za,{key:function(e){if(e.key){var i=h0[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?d0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(e){return e.type==="keypress"?uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),m0=je(g0),y0=y({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=je(y0),b0=y({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),v0=je(b0),A0=y({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S0=je(A0),w0=y({},po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),E0=je(w0),x0=y({},Qi,{newState:0,oldState:0}),_0=je(x0),T0=[9,13,27,32],Ac=Yn&&"CompositionEvent"in window,Fa=null;Yn&&"documentMode"in document&&(Fa=document.documentMode);var C0=Yn&&"TextEvent"in window&&!Fa,Kd=Yn&&(!Ac||Fa&&8<Fa&&11>=Fa),Wd=" ",Qd=!1;function Zd(e,i){switch(e){case"keyup":return T0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bs=!1;function R0(e,i){switch(e){case"compositionend":return Jd(i);case"keypress":return i.which!==32?null:(Qd=!0,Wd);case"textInput":return e=i.data,e===Wd&&Qd?null:e;default:return null}}function M0(e,i){if(Bs)return e==="compositionend"||!Ac&&Zd(e,i)?(e=Vd(),co=gc=Ai=null,Bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Kd&&i.locale!=="ko"?null:i.data;default:return null}}var D0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!D0[e.type]:i==="textarea"}function ef(e,i,r,c){Os?ks?ks.push(c):ks=[c]:Os=c,i=il(i,"onChange"),0<i.length&&(r=new fo("onChange","change",null,r,c),e.push({event:r,listeners:i}))}var Ua=null,Ha=null;function L0(e){jg(e,0)}function go(e){var i=ka(e);if(Pd(i))return e}function nf(e,i){if(e==="change")return i}var sf=!1;if(Yn){var Sc;if(Yn){var wc="oninput"in document;if(!wc){var af=document.createElement("div");af.setAttribute("oninput","return;"),wc=typeof af.oninput=="function"}Sc=wc}else Sc=!1;sf=Sc&&(!document.documentMode||9<document.documentMode)}function rf(){Ua&&(Ua.detachEvent("onpropertychange",of),Ha=Ua=null)}function of(e){if(e.propertyName==="value"&&go(Ha)){var i=[];ef(i,Ha,e,dc(e)),Gd(L0,i)}}function N0(e,i,r){e==="focusin"?(rf(),Ua=i,Ha=r,Ua.attachEvent("onpropertychange",of)):e==="focusout"&&rf()}function O0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return go(Ha)}function k0(e,i){if(e==="click")return go(i)}function B0(e,i){if(e==="input"||e==="change")return go(i)}function P0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var We=typeof Object.is=="function"?Object.is:P0;function Ia(e,i){if(We(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var r=Object.keys(e),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!$i.call(i,p)||!We(e[p],i[p]))return!1}return!0}function lf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cf(e,i){var r=lf(e);e=0;for(var c;r;){if(r.nodeType===3){if(c=e+r.textContent.length,e<=i&&c>=i)return{node:r,offset:i-e};e=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lf(r)}}function uf(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?uf(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function hf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=oo(e.document);i instanceof e.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)e=i.contentWindow;else break;i=oo(e.document)}return i}function Ec(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var z0=Yn&&"documentMode"in document&&11>=document.documentMode,Ps=null,xc=null,Ga=null,_c=!1;function df(e,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_c||Ps==null||Ps!==oo(c)||(c=Ps,"selectionStart"in c&&Ec(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ga&&Ia(Ga,c)||(Ga=c,c=il(xc,"onSelect"),0<c.length&&(i=new fo("onSelect","select",null,i,r),e.push({event:i,listeners:c}),i.target=Ps)))}function Zi(e,i){var r={};return r[e.toLowerCase()]=i.toLowerCase(),r["Webkit"+e]="webkit"+i,r["Moz"+e]="moz"+i,r}var zs={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Tc={},ff={};Yn&&(ff=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Ji(e){if(Tc[e])return Tc[e];if(!zs[e])return e;var i=zs[e],r;for(r in i)if(i.hasOwnProperty(r)&&r in ff)return Tc[e]=i[r];return e}var pf=Ji("animationend"),gf=Ji("animationiteration"),mf=Ji("animationstart"),j0=Ji("transitionrun"),F0=Ji("transitionstart"),U0=Ji("transitioncancel"),yf=Ji("transitionend"),bf=new Map,Cc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cc.push("scrollEnd");function En(e,i){bf.set(e,i),Wi(i,[e])}var mo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},un=[],js=0,Rc=0;function yo(){for(var e=js,i=Rc=js=0;i<e;){var r=un[i];un[i++]=null;var c=un[i];un[i++]=null;var p=un[i];un[i++]=null;var m=un[i];if(un[i++]=null,c!==null&&p!==null){var v=c.pending;v===null?p.next=p:(p.next=v.next,v.next=p),c.pending=p}m!==0&&vf(r,p,m)}}function bo(e,i,r,c){un[js++]=e,un[js++]=i,un[js++]=r,un[js++]=c,Rc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Mc(e,i,r,c){return bo(e,i,r,c),vo(e)}function ts(e,i){return bo(e,null,null,i),vo(e)}function vf(e,i,r){e.lanes|=r;var c=e.alternate;c!==null&&(c.lanes|=r);for(var p=!1,m=e.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&i!==null&&(p=31-Ke(r),e=m.hiddenUpdates,c=e[p],c===null?e[p]=[i]:c.push(i),i.lane=r|536870912),m):null}function vo(e){if(50<hr)throw hr=0,ju=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Fs={};function H0(e,i,r,c){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,i,r,c){return new H0(e,i,r,c)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $n(e,i){var r=e.alternate;return r===null?(r=Qe(e.tag,i,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=i,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,i=e.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Af(e,i){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,i=r.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Ao(e,i,r,c,p,m){var v=0;if(c=e,typeof e=="function")Dc(e)&&(v=1);else if(typeof e=="string")v=Xv(e,r,nt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case X:return e=Qe(31,r,i,p),e.elementType=X,e.lanes=m,e;case S:return es(r.children,p,m,i);case _:v=8,p|=24;break;case w:return e=Qe(12,r,i,p|2),e.elementType=w,e.lanes=m,e;case k:return e=Qe(13,r,i,p),e.elementType=k,e.lanes=m,e;case z:return e=Qe(19,r,i,p),e.elementType=z,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break t;case T:v=9;break t;case O:v=11;break t;case P:v=14;break t;case I:v=16,c=null;break t}v=29,r=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=Qe(v,r,i,p),i.elementType=e,i.type=c,i.lanes=m,i}function es(e,i,r,c){return e=Qe(7,e,c,i),e.lanes=r,e}function Lc(e,i,r){return e=Qe(6,e,null,i),e.lanes=r,e}function Sf(e){var i=Qe(18,null,null,0);return i.stateNode=e,i}function Nc(e,i,r){return i=Qe(4,e.children!==null?e.children:[],e.key,i),i.lanes=r,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var wf=new WeakMap;function hn(e,i){if(typeof e=="object"&&e!==null){var r=wf.get(e);return r!==void 0?r:(i={value:e,source:i,stack:mi(i)},wf.set(e,i),i)}return{value:e,source:i,stack:mi(i)}}var Us=[],Hs=0,So=null,Va=0,dn=[],fn=0,Si=null,Ln=1,Nn="";function Kn(e,i){Us[Hs++]=Va,Us[Hs++]=So,So=e,Va=i}function Ef(e,i,r){dn[fn++]=Ln,dn[fn++]=Nn,dn[fn++]=Si,Si=e;var c=Ln;e=Nn;var p=32-Ke(c)-1;c&=~(1<<p),r+=1;var m=32-Ke(i)+p;if(30<m){var v=p-p%5;m=(c&(1<<v)-1).toString(32),c>>=v,p-=v,Ln=1<<32-Ke(i)+p|r<<p|c,Nn=m+e}else Ln=1<<m|r<<p|c,Nn=e}function Oc(e){e.return!==null&&(Kn(e,1),Ef(e,1,0))}function kc(e){for(;e===So;)So=Us[--Hs],Us[Hs]=null,Va=Us[--Hs],Us[Hs]=null;for(;e===Si;)Si=dn[--fn],dn[fn]=null,Nn=dn[--fn],dn[fn]=null,Ln=dn[--fn],dn[fn]=null}function xf(e,i){dn[fn++]=Ln,dn[fn++]=Nn,dn[fn++]=Si,Ln=i.id,Nn=i.overflow,Si=e}var Ee=null,$t=null,Dt=!1,wi=null,pn=!1,Bc=Error(s(519));function Ei(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qa(hn(i,e)),Bc}function _f(e){var i=e.stateNode,r=e.type,c=e.memoizedProps;switch(i[we]=e,i[ze]=c,r){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(r=0;r<fr.length;r++)Tt(fr[r],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":Tt("invalid",i),zd(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Tt("invalid",i);break;case"textarea":Tt("invalid",i),Fd(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||Ig(i.textContent,r)?(c.popover!=null&&(Tt("beforetoggle",i),Tt("toggle",i)),c.onScroll!=null&&Tt("scroll",i),c.onScrollEnd!=null&&Tt("scrollend",i),c.onClick!=null&&(i.onclick=Xn),i=!0):i=!1,i||Ei(e,!0)}function Tf(e){for(Ee=e.return;Ee;)switch(Ee.tag){case 5:case 31:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:Ee=Ee.return}}function Is(e){if(e!==Ee)return!1;if(!Dt)return Tf(e),Dt=!0,!1;var i=e.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Ju(e.type,e.memoizedProps)),r=!r),r&&$t&&Ei(e),Tf(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=Qg(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=Qg(e)}else i===27?(i=$t,zi(e.type)?(e=sh,sh=null,$t=e):$t=i):$t=Ee?mn(e.stateNode.nextSibling):null;return!0}function ns(){$t=Ee=null,Dt=!1}function Pc(){var e=wi;return e!==null&&(Ie===null?Ie=e:Ie.push.apply(Ie,e),wi=null),e}function qa(e){wi===null?wi=[e]:wi.push(e)}var zc=D(null),is=null,Wn=null;function xi(e,i,r){W(zc,i._currentValue),i._currentValue=r}function Qn(e){e._currentValue=zc.current,q(zc)}function jc(e,i,r){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===r)break;e=e.return}}function Fc(e,i,r,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var v=p.child;m=m.firstContext;t:for(;m!==null;){var x=m;m=p;for(var M=0;M<i.length;M++)if(x.context===i[M]){m.lanes|=r,x=m.alternate,x!==null&&(x.lanes|=r),jc(m.return,r,e),c||(v=null);break t}m=x.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(s(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),jc(v,r,e),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===e){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function Gs(e,i,r,c){e=null;for(var p=i,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var x=p.type;We(p.pendingProps.value,v.value)||(e!==null?e.push(x):e=[x])}}else if(p===lt.current){if(v=p.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(br):e=[br])}p=p.return}e!==null&&Fc(i,e,r,c),i.flags|=262144}function wo(e){for(e=e.firstContext;e!==null;){if(!We(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ss(e){is=e,Wn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xe(e){return Cf(is,e)}function Eo(e,i){return is===null&&ss(e),Cf(e,i)}function Cf(e,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Wn===null){if(e===null)throw Error(s(308));Wn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Wn=Wn.next=i;return r}var I0=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(r,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(r){return r()})}},G0=h.unstable_scheduleCallback,V0=h.unstable_NormalPriority,he={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new I0,data:new Map,refCount:0}}function Xa(e){e.refCount--,e.refCount===0&&G0(V0,function(){e.controller.abort()})}var Ya=null,Hc=0,Vs=0,qs=null;function q0(e,i){if(Ya===null){var r=Ya=[];Hc=0,Vs=Vu(),qs={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Hc++,i.then(Rf,Rf),i}function Rf(){if(--Hc===0&&Ya!==null){qs!==null&&(qs.status="fulfilled");var e=Ya;Ya=null,Vs=0,qs=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function X0(e,i){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var p=0;p<r.length;p++)(0,r[p])(i)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var Mf=B.S;B.S=function(e,i){dg=Ne(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&q0(e,i),Mf!==null&&Mf(e,i)};var as=D(null);function Ic(){var e=as.current;return e!==null?e:Vt.pooledCache}function xo(e,i){i===null?W(as,as.current):W(as,i.pool)}function Df(){var e=Ic();return e===null?null:{parent:he._currentValue,pool:e}}var Xs=Error(s(460)),Gc=Error(s(474)),_o=Error(s(542)),To={then:function(){}};function Lf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nf(e,i,r){switch(r=e[r],r===void 0?e.push(i):r!==i&&(i.then(Xn,Xn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,kf(e),e;default:if(typeof i.status=="string")i.then(Xn,Xn);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=c}},function(c){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,kf(e),e}throw os=i,Xs}}function rs(e){try{var i=e._init;return i(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(os=r,Xs):r}}var os=null;function Of(){if(os===null)throw Error(s(459));var e=os;return os=null,e}function kf(e){if(e===Xs||e===_o)throw Error(s(483))}var Ys=null,$a=0;function Co(e){var i=$a;return $a+=1,Ys===null&&(Ys=[]),Nf(Ys,e,i)}function Ka(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ro(e,i){throw i.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Bf(e){function i(j,N){if(e){var F=j.deletions;F===null?(j.deletions=[N],j.flags|=16):F.push(N)}}function r(j,N){if(!e)return null;for(;N!==null;)i(j,N),N=N.sibling;return null}function c(j){for(var N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function p(j,N){return j=$n(j,N),j.index=0,j.sibling=null,j}function m(j,N,F){return j.index=F,e?(F=j.alternate,F!==null?(F=F.index,F<N?(j.flags|=67108866,N):F):(j.flags|=67108866,N)):(j.flags|=1048576,N)}function v(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function x(j,N,F,$){return N===null||N.tag!==6?(N=Lc(F,j.mode,$),N.return=j,N):(N=p(N,F),N.return=j,N)}function M(j,N,F,$){var ut=F.type;return ut===S?Y(j,N,F.props.children,$,F.key):N!==null&&(N.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===I&&rs(ut)===N.type)?(N=p(N,F.props),Ka(N,F),N.return=j,N):(N=Ao(F.type,F.key,F.props,null,j.mode,$),Ka(N,F),N.return=j,N)}function U(j,N,F,$){return N===null||N.tag!==4||N.stateNode.containerInfo!==F.containerInfo||N.stateNode.implementation!==F.implementation?(N=Nc(F,j.mode,$),N.return=j,N):(N=p(N,F.children||[]),N.return=j,N)}function Y(j,N,F,$,ut){return N===null||N.tag!==7?(N=es(F,j.mode,$,ut),N.return=j,N):(N=p(N,F),N.return=j,N)}function K(j,N,F){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Lc(""+N,j.mode,F),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return F=Ao(N.type,N.key,N.props,null,j.mode,F),Ka(F,N),F.return=j,F;case E:return N=Nc(N,j.mode,F),N.return=j,N;case I:return N=rs(N),K(j,N,F)}if(et(N)||ct(N))return N=es(N,j.mode,F,null),N.return=j,N;if(typeof N.then=="function")return K(j,Co(N),F);if(N.$$typeof===C)return K(j,Eo(j,N),F);Ro(j,N)}return null}function H(j,N,F,$){var ut=N!==null?N.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ut!==null?null:x(j,N,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===ut?M(j,N,F,$):null;case E:return F.key===ut?U(j,N,F,$):null;case I:return F=rs(F),H(j,N,F,$)}if(et(F)||ct(F))return ut!==null?null:Y(j,N,F,$,null);if(typeof F.then=="function")return H(j,N,Co(F),$);if(F.$$typeof===C)return H(j,N,Eo(j,F),$);Ro(j,F)}return null}function V(j,N,F,$,ut){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return j=j.get(F)||null,x(N,j,""+$,ut);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return j=j.get($.key===null?F:$.key)||null,M(N,j,$,ut);case E:return j=j.get($.key===null?F:$.key)||null,U(N,j,$,ut);case I:return $=rs($),V(j,N,F,$,ut)}if(et($)||ct($))return j=j.get(F)||null,Y(N,j,$,ut,null);if(typeof $.then=="function")return V(j,N,F,Co($),ut);if($.$$typeof===C)return V(j,N,F,Eo(N,$),ut);Ro(N,$)}return null}function at(j,N,F,$){for(var ut=null,kt=null,rt=N,wt=N=0,Rt=null;rt!==null&&wt<F.length;wt++){rt.index>wt?(Rt=rt,rt=null):Rt=rt.sibling;var Bt=H(j,rt,F[wt],$);if(Bt===null){rt===null&&(rt=Rt);break}e&&rt&&Bt.alternate===null&&i(j,rt),N=m(Bt,N,wt),kt===null?ut=Bt:kt.sibling=Bt,kt=Bt,rt=Rt}if(wt===F.length)return r(j,rt),Dt&&Kn(j,wt),ut;if(rt===null){for(;wt<F.length;wt++)rt=K(j,F[wt],$),rt!==null&&(N=m(rt,N,wt),kt===null?ut=rt:kt.sibling=rt,kt=rt);return Dt&&Kn(j,wt),ut}for(rt=c(rt);wt<F.length;wt++)Rt=V(rt,j,wt,F[wt],$),Rt!==null&&(e&&Rt.alternate!==null&&rt.delete(Rt.key===null?wt:Rt.key),N=m(Rt,N,wt),kt===null?ut=Rt:kt.sibling=Rt,kt=Rt);return e&&rt.forEach(function(Ii){return i(j,Ii)}),Dt&&Kn(j,wt),ut}function gt(j,N,F,$){if(F==null)throw Error(s(151));for(var ut=null,kt=null,rt=N,wt=N=0,Rt=null,Bt=F.next();rt!==null&&!Bt.done;wt++,Bt=F.next()){rt.index>wt?(Rt=rt,rt=null):Rt=rt.sibling;var Ii=H(j,rt,Bt.value,$);if(Ii===null){rt===null&&(rt=Rt);break}e&&rt&&Ii.alternate===null&&i(j,rt),N=m(Ii,N,wt),kt===null?ut=Ii:kt.sibling=Ii,kt=Ii,rt=Rt}if(Bt.done)return r(j,rt),Dt&&Kn(j,wt),ut;if(rt===null){for(;!Bt.done;wt++,Bt=F.next())Bt=K(j,Bt.value,$),Bt!==null&&(N=m(Bt,N,wt),kt===null?ut=Bt:kt.sibling=Bt,kt=Bt);return Dt&&Kn(j,wt),ut}for(rt=c(rt);!Bt.done;wt++,Bt=F.next())Bt=V(rt,j,wt,Bt.value,$),Bt!==null&&(e&&Bt.alternate!==null&&rt.delete(Bt.key===null?wt:Bt.key),N=m(Bt,N,wt),kt===null?ut=Bt:kt.sibling=Bt,kt=Bt);return e&&rt.forEach(function(iA){return i(j,iA)}),Dt&&Kn(j,wt),ut}function It(j,N,F,$){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var ut=F.key;N!==null;){if(N.key===ut){if(ut=F.type,ut===S){if(N.tag===7){r(j,N.sibling),$=p(N,F.props.children),$.return=j,j=$;break t}}else if(N.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===I&&rs(ut)===N.type){r(j,N.sibling),$=p(N,F.props),Ka($,F),$.return=j,j=$;break t}r(j,N);break}else i(j,N);N=N.sibling}F.type===S?($=es(F.props.children,j.mode,$,F.key),$.return=j,j=$):($=Ao(F.type,F.key,F.props,null,j.mode,$),Ka($,F),$.return=j,j=$)}return v(j);case E:t:{for(ut=F.key;N!==null;){if(N.key===ut)if(N.tag===4&&N.stateNode.containerInfo===F.containerInfo&&N.stateNode.implementation===F.implementation){r(j,N.sibling),$=p(N,F.children||[]),$.return=j,j=$;break t}else{r(j,N);break}else i(j,N);N=N.sibling}$=Nc(F,j.mode,$),$.return=j,j=$}return v(j);case I:return F=rs(F),It(j,N,F,$)}if(et(F))return at(j,N,F,$);if(ct(F)){if(ut=ct(F),typeof ut!="function")throw Error(s(150));return F=ut.call(F),gt(j,N,F,$)}if(typeof F.then=="function")return It(j,N,Co(F),$);if(F.$$typeof===C)return It(j,N,Eo(j,F),$);Ro(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,N!==null&&N.tag===6?(r(j,N.sibling),$=p(N,F),$.return=j,j=$):(r(j,N),$=Lc(F,j.mode,$),$.return=j,j=$),v(j)):r(j,N)}return function(j,N,F,$){try{$a=0;var ut=It(j,N,F,$);return Ys=null,ut}catch(rt){if(rt===Xs||rt===_o)throw rt;var kt=Qe(29,rt,null,j.mode);return kt.lanes=$,kt.return=j,kt}finally{}}}var ls=Bf(!0),Pf=Bf(!1),_i=!1;function Vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ti(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ci(e,i,r){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Pt&2)!==0){var p=c.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),c.pending=i,i=vo(e),vf(e,null,r),i}return bo(e,c,i,r),vo(e)}function Wa(e,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,r|=c,i.lanes=r,Td(e,r)}}function Xc(e,i){var r=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?p=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?p=m=i:m=m.next=i}else p=m=i;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=i:e.next=i,r.lastBaseUpdate=i}var Yc=!1;function Qa(){if(Yc){var e=qs;if(e!==null)throw e}}function Za(e,i,r,c){Yc=!1;var p=e.updateQueue;_i=!1;var m=p.firstBaseUpdate,v=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var M=x,U=M.next;M.next=null,v===null?m=U:v.next=U,v=M;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,x=Y.lastBaseUpdate,x!==v&&(x===null?Y.firstBaseUpdate=U:x.next=U,Y.lastBaseUpdate=M))}if(m!==null){var K=p.baseState;v=0,Y=U=M=null,x=m;do{var H=x.lane&-536870913,V=H!==x.lane;if(V?(Ct&H)===H:(c&H)===H){H!==0&&H===Vs&&(Yc=!0),Y!==null&&(Y=Y.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var at=e,gt=x;H=i;var It=r;switch(gt.tag){case 1:if(at=gt.payload,typeof at=="function"){K=at.call(It,K,H);break t}K=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=gt.payload,H=typeof at=="function"?at.call(It,K,H):at,H==null)break t;K=y({},K,H);break t;case 2:_i=!0}}H=x.callback,H!==null&&(e.flags|=64,V&&(e.flags|=8192),V=p.callbacks,V===null?p.callbacks=[H]:V.push(H))}else V={lane:H,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Y===null?(U=Y=V,M=K):Y=Y.next=V,v|=H;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;V=x,x=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);Y===null&&(M=K),p.baseState=M,p.firstBaseUpdate=U,p.lastBaseUpdate=Y,m===null&&(p.shared.lanes=0),Ni|=v,e.lanes=v,e.memoizedState=K}}function zf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function jf(e,i){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)zf(r[e],i)}var $s=D(null),Mo=D(0);function Ff(e,i){e=ri,W(Mo,e),W($s,i),ri=e|i.baseLanes}function $c(){W(Mo,ri),W($s,$s.current)}function Kc(){ri=Mo.current,q($s),q(Mo)}var Ze=D(null),gn=null;function Ri(e){var i=e.alternate;W(oe,oe.current&1),W(Ze,e),gn===null&&(i===null||$s.current!==null||i.memoizedState!==null)&&(gn=e)}function Wc(e){W(oe,oe.current),W(Ze,e),gn===null&&(gn=e)}function Uf(e){e.tag===22?(W(oe,oe.current),W(Ze,e),gn===null&&(gn=e)):Mi()}function Mi(){W(oe,oe.current),W(Ze,Ze.current)}function Je(e){q(Ze),gn===e&&(gn=null),q(oe)}var oe=D(0);function Do(e){for(var i=e;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||nh(r)||ih(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zn=0,St=null,Ut=null,de=null,Lo=!1,Ks=!1,cs=!1,No=0,Ja=0,Ws=null,Y0=0;function ae(){throw Error(s(321))}function Qc(e,i){if(i===null)return!1;for(var r=0;r<i.length&&r<e.length;r++)if(!We(e[r],i[r]))return!1;return!0}function Zc(e,i,r,c,p,m){return Zn=m,St=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?Ep:fu,cs=!1,m=r(c,p),cs=!1,Ks&&(m=If(i,r,c,p)),Hf(e),m}function Hf(e){B.H=nr;var i=Ut!==null&&Ut.next!==null;if(Zn=0,de=Ut=St=null,Lo=!1,Ja=0,Ws=null,i)throw Error(s(300));e===null||fe||(e=e.dependencies,e!==null&&wo(e)&&(fe=!0))}function If(e,i,r,c){St=e;var p=0;do{if(Ks&&(Ws=null),Ja=0,Ks=!1,25<=p)throw Error(s(301));if(p+=1,de=Ut=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=xp,m=i(r,c)}while(Ks);return m}function $0(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?tr(i):i,e=e.useState()[0],(Ut!==null?Ut.memoizedState:null)!==e&&(St.flags|=1024),i}function Jc(){var e=No!==0;return No=0,e}function tu(e,i,r){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r}function eu(e){if(Lo){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Lo=!1}Zn=0,de=Ut=St=null,Ks=!1,Ja=No=0,Ws=null}function Oe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?St.memoizedState=de=e:de=de.next=e,de}function le(){if(Ut===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var i=de===null?St.memoizedState:de.next;if(i!==null)de=i,Ut=e;else{if(e===null)throw St.alternate===null?Error(s(467)):Error(s(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},de===null?St.memoizedState=de=e:de=de.next=e}return de}function Oo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tr(e){var i=Ja;return Ja+=1,Ws===null&&(Ws=[]),e=Nf(Ws,e,i),i=St,(de===null?i.memoizedState:de.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?Ep:fu),e}function ko(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tr(e);if(e.$$typeof===C)return xe(e)}throw Error(s(438,String(e)))}function nu(e){var i=null,r=St.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=Oo(),St.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(e),c=0;c<e;c++)r[c]=Q;return i.index++,r}function Jn(e,i){return typeof i=="function"?i(e):i}function Bo(e){var i=le();return iu(i,Ut,e)}function iu(e,i,r){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var p=e.baseQueue,m=c.pending;if(m!==null){if(p!==null){var v=p.next;p.next=m.next,m.next=v}i.baseQueue=p=m,c.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{i=p.next;var x=v=null,M=null,U=i,Y=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(Ct&K)===K:(Zn&K)===K){var H=U.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Vs&&(Y=!0);else if((Zn&H)===H){U=U.next,H===Vs&&(Y=!0);continue}else K={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(x=M=K,v=m):M=M.next=K,St.lanes|=H,Ni|=H;K=U.action,cs&&r(m,K),m=U.hasEagerState?U.eagerState:r(m,K)}else H={lane:K,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(x=M=H,v=m):M=M.next=H,St.lanes|=K,Ni|=K;U=U.next}while(U!==null&&U!==i);if(M===null?v=m:M.next=x,!We(m,e.memoizedState)&&(fe=!0,Y&&(r=qs,r!==null)))throw r;e.memoizedState=m,e.baseState=v,e.baseQueue=M,c.lastRenderedState=m}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function su(e){var i=le(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var c=r.dispatch,p=r.pending,m=i.memoizedState;if(p!==null){r.pending=null;var v=p=p.next;do m=e(m,v.action),v=v.next;while(v!==p);We(m,i.memoizedState)||(fe=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),r.lastRenderedState=m}return[m,c]}function Gf(e,i,r){var c=St,p=le(),m=Dt;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=i();var v=!We((Ut||p).memoizedState,r);if(v&&(p.memoizedState=r,fe=!0),p=p.queue,ou(Xf.bind(null,c,p,e),[e]),p.getSnapshot!==i||v||de!==null&&de.memoizedState.tag&1){if(c.flags|=2048,Qs(9,{destroy:void 0},qf.bind(null,c,p,r,i),null),Vt===null)throw Error(s(349));m||(Zn&127)!==0||Vf(c,i,r)}return r}function Vf(e,i,r){e.flags|=16384,e={getSnapshot:i,value:r},i=St.updateQueue,i===null?(i=Oo(),St.updateQueue=i,i.stores=[e]):(r=i.stores,r===null?i.stores=[e]:r.push(e))}function qf(e,i,r,c){i.value=r,i.getSnapshot=c,Yf(i)&&$f(e)}function Xf(e,i,r){return r(function(){Yf(i)&&$f(e)})}function Yf(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!We(e,r)}catch{return!0}}function $f(e){var i=ts(e,2);i!==null&&Ge(i,e,2)}function au(e){var i=Oe();if(typeof e=="function"){var r=e;if(e=r(),cs){bi(!0);try{r()}finally{bi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:e},i}function Kf(e,i,r,c){return e.baseState=r,iu(e,Ut,typeof c=="function"?c:Jn)}function K0(e,i,r,c,p){if(jo(e))throw Error(s(485));if(e=i.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};B.T!==null?r(!0):m.isTransition=!1,c(m),r=i.pending,r===null?(m.next=i.pending=m,Wf(i,m)):(m.next=r.next,i.pending=r.next=m)}}function Wf(e,i){var r=i.action,c=i.payload,p=e.state;if(i.isTransition){var m=B.T,v={};B.T=v;try{var x=r(p,c),M=B.S;M!==null&&M(v,x),Qf(e,i,x)}catch(U){ru(e,i,U)}finally{m!==null&&v.types!==null&&(m.types=v.types),B.T=m}}else try{m=r(p,c),Qf(e,i,m)}catch(U){ru(e,i,U)}}function Qf(e,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Zf(e,i,c)},function(c){return ru(e,i,c)}):Zf(e,i,r)}function Zf(e,i,r){i.status="fulfilled",i.value=r,Jf(i),e.state=r,i=e.pending,i!==null&&(r=i.next,r===i?e.pending=null:(r=r.next,i.next=r,Wf(e,r)))}function ru(e,i,r){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,Jf(i),i=i.next;while(i!==c)}e.action=null}function Jf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function tp(e,i){return i}function ep(e,i){if(Dt){var r=Vt.formState;if(r!==null){t:{var c=St;if(Dt){if($t){e:{for(var p=$t,m=pn;p.nodeType!==8;){if(!m){p=null;break e}if(p=mn(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){$t=mn(p.nextSibling),c=p.data==="F!";break t}}Ei(c)}c=!1}c&&(i=r[0])}}return r=Oe(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:i},r.queue=c,r=Ap.bind(null,St,c),c.dispatch=r,c=au(!1),m=du.bind(null,St,!1,c.queue),c=Oe(),p={state:i,dispatch:null,action:e,pending:null},c.queue=p,r=K0.bind(null,St,p,m,r),p.dispatch=r,c.memoizedState=e,[i,r,!1]}function np(e){var i=le();return ip(i,Ut,e)}function ip(e,i,r){if(i=iu(e,i,tp)[0],e=Bo(Jn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=tr(i)}catch(v){throw v===Xs?_o:v}else c=i;i=le();var p=i.queue,m=p.dispatch;return r!==i.memoizedState&&(St.flags|=2048,Qs(9,{destroy:void 0},W0.bind(null,p,r),null)),[c,m,e]}function W0(e,i){e.action=i}function sp(e){var i=le(),r=Ut;if(r!==null)return ip(i,r,e);le(),i=i.memoizedState,r=le();var c=r.queue.dispatch;return r.memoizedState=e,[i,c,!1]}function Qs(e,i,r,c){return e={tag:e,create:r,deps:c,inst:i,next:null},i=St.updateQueue,i===null&&(i=Oo(),St.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=e.next=e:(c=r.next,r.next=e,e.next=c,i.lastEffect=e),e}function ap(){return le().memoizedState}function Po(e,i,r,c){var p=Oe();St.flags|=e,p.memoizedState=Qs(1|i,{destroy:void 0},r,c===void 0?null:c)}function zo(e,i,r,c){var p=le();c=c===void 0?null:c;var m=p.memoizedState.inst;Ut!==null&&c!==null&&Qc(c,Ut.memoizedState.deps)?p.memoizedState=Qs(i,m,r,c):(St.flags|=e,p.memoizedState=Qs(1|i,m,r,c))}function rp(e,i){Po(8390656,8,e,i)}function ou(e,i){zo(2048,8,e,i)}function Q0(e){St.flags|=4;var i=St.updateQueue;if(i===null)i=Oo(),St.updateQueue=i,i.events=[e];else{var r=i.events;r===null?i.events=[e]:r.push(e)}}function op(e){var i=le().memoizedState;return Q0({ref:i,nextImpl:e}),function(){if((Pt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function lp(e,i){return zo(4,2,e,i)}function cp(e,i){return zo(4,4,e,i)}function up(e,i){if(typeof i=="function"){e=e();var r=i(e);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function hp(e,i,r){r=r!=null?r.concat([e]):null,zo(4,4,up.bind(null,i,e),r)}function lu(){}function dp(e,i){var r=le();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&Qc(i,c[1])?c[0]:(r.memoizedState=[e,i],e)}function fp(e,i){var r=le();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&Qc(i,c[1]))return c[0];if(c=e(),cs){bi(!0);try{e()}finally{bi(!1)}}return r.memoizedState=[c,i],c}function cu(e,i,r){return r===void 0||(Zn&1073741824)!==0&&(Ct&261930)===0?e.memoizedState=i:(e.memoizedState=r,e=pg(),St.lanes|=e,Ni|=e,r)}function pp(e,i,r,c){return We(r,i)?r:$s.current!==null?(e=cu(e,r,c),We(e,i)||(fe=!0),e):(Zn&42)===0||(Zn&1073741824)!==0&&(Ct&261930)===0?(fe=!0,e.memoizedState=r):(e=pg(),St.lanes|=e,Ni|=e,i)}function gp(e,i,r,c,p){var m=G.p;G.p=m!==0&&8>m?m:8;var v=B.T,x={};B.T=x,du(e,!1,i,r);try{var M=p(),U=B.S;if(U!==null&&U(x,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Y=X0(M,c);er(e,i,Y,nn(e))}else er(e,i,c,nn(e))}catch(K){er(e,i,{then:function(){},status:"rejected",reason:K},nn())}finally{G.p=m,v!==null&&x.types!==null&&(v.types=x.types),B.T=v}}function Z0(){}function uu(e,i,r,c){if(e.tag!==5)throw Error(s(476));var p=mp(e).queue;gp(e,p,i,J,r===null?Z0:function(){return yp(e),r(c)})}function mp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:J},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:r},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function yp(e){var i=mp(e);i.next===null&&(i=e.alternate.memoizedState),er(e,i.next.queue,{},nn())}function hu(){return xe(br)}function bp(){return le().memoizedState}function vp(){return le().memoizedState}function J0(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var r=nn();e=Ti(r);var c=Ci(i,e,r);c!==null&&(Ge(c,i,r),Wa(c,i,r)),i={cache:Uc()},e.payload=i;return}i=i.return}}function tv(e,i,r){var c=nn();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},jo(e)?Sp(i,r):(r=Mc(e,i,r,c),r!==null&&(Ge(r,e,c),wp(r,i,c)))}function Ap(e,i,r){var c=nn();er(e,i,r,c)}function er(e,i,r,c){var p={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(jo(e))Sp(i,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,x=m(v,r);if(p.hasEagerState=!0,p.eagerState=x,We(x,v))return bo(e,i,p,0),Vt===null&&yo(),!1}catch{}finally{}if(r=Mc(e,i,p,c),r!==null)return Ge(r,e,c),wp(r,i,c),!0}return!1}function du(e,i,r,c){if(c={lane:2,revertLane:Vu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jo(e)){if(i)throw Error(s(479))}else i=Mc(e,r,c,2),i!==null&&Ge(i,e,2)}function jo(e){var i=e.alternate;return e===St||i!==null&&i===St}function Sp(e,i){Ks=Lo=!0;var r=e.pending;r===null?i.next=i:(i.next=r.next,r.next=i),e.pending=i}function wp(e,i,r){if((r&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,r|=c,i.lanes=r,Td(e,r)}}var nr={readContext:xe,use:ko,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useLayoutEffect:ae,useInsertionEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useSyncExternalStore:ae,useId:ae,useHostTransitionStatus:ae,useFormState:ae,useActionState:ae,useOptimistic:ae,useMemoCache:ae,useCacheRefresh:ae};nr.useEffectEvent=ae;var Ep={readContext:xe,use:ko,useCallback:function(e,i){return Oe().memoizedState=[e,i===void 0?null:i],e},useContext:xe,useEffect:rp,useImperativeHandle:function(e,i,r){r=r!=null?r.concat([e]):null,Po(4194308,4,up.bind(null,i,e),r)},useLayoutEffect:function(e,i){return Po(4194308,4,e,i)},useInsertionEffect:function(e,i){Po(4,2,e,i)},useMemo:function(e,i){var r=Oe();i=i===void 0?null:i;var c=e();if(cs){bi(!0);try{e()}finally{bi(!1)}}return r.memoizedState=[c,i],c},useReducer:function(e,i,r){var c=Oe();if(r!==void 0){var p=r(i);if(cs){bi(!0);try{r(i)}finally{bi(!1)}}}else p=i;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=tv.bind(null,St,e),[c.memoizedState,e]},useRef:function(e){var i=Oe();return e={current:e},i.memoizedState=e},useState:function(e){e=au(e);var i=e.queue,r=Ap.bind(null,St,i);return i.dispatch=r,[e.memoizedState,r]},useDebugValue:lu,useDeferredValue:function(e,i){var r=Oe();return cu(r,e,i)},useTransition:function(){var e=au(!1);return e=gp.bind(null,St,e.queue,!0,!1),Oe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,r){var c=St,p=Oe();if(Dt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),Vt===null)throw Error(s(349));(Ct&127)!==0||Vf(c,i,r)}p.memoizedState=r;var m={value:r,getSnapshot:i};return p.queue=m,rp(Xf.bind(null,c,m,e),[e]),c.flags|=2048,Qs(9,{destroy:void 0},qf.bind(null,c,m,r,i),null),r},useId:function(){var e=Oe(),i=Vt.identifierPrefix;if(Dt){var r=Nn,c=Ln;r=(c&~(1<<32-Ke(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=No++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=Y0++,i="_"+i+"r_"+r.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:hu,useFormState:ep,useActionState:ep,useOptimistic:function(e){var i=Oe();i.memoizedState=i.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=du.bind(null,St,!0,r),r.dispatch=i,[e,i]},useMemoCache:nu,useCacheRefresh:function(){return Oe().memoizedState=J0.bind(null,St)},useEffectEvent:function(e){var i=Oe(),r={impl:e};return i.memoizedState=r,function(){if((Pt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},fu={readContext:xe,use:ko,useCallback:dp,useContext:xe,useEffect:ou,useImperativeHandle:hp,useInsertionEffect:lp,useLayoutEffect:cp,useMemo:fp,useReducer:Bo,useRef:ap,useState:function(){return Bo(Jn)},useDebugValue:lu,useDeferredValue:function(e,i){var r=le();return pp(r,Ut.memoizedState,e,i)},useTransition:function(){var e=Bo(Jn)[0],i=le().memoizedState;return[typeof e=="boolean"?e:tr(e),i]},useSyncExternalStore:Gf,useId:bp,useHostTransitionStatus:hu,useFormState:np,useActionState:np,useOptimistic:function(e,i){var r=le();return Kf(r,Ut,e,i)},useMemoCache:nu,useCacheRefresh:vp};fu.useEffectEvent=op;var xp={readContext:xe,use:ko,useCallback:dp,useContext:xe,useEffect:ou,useImperativeHandle:hp,useInsertionEffect:lp,useLayoutEffect:cp,useMemo:fp,useReducer:su,useRef:ap,useState:function(){return su(Jn)},useDebugValue:lu,useDeferredValue:function(e,i){var r=le();return Ut===null?cu(r,e,i):pp(r,Ut.memoizedState,e,i)},useTransition:function(){var e=su(Jn)[0],i=le().memoizedState;return[typeof e=="boolean"?e:tr(e),i]},useSyncExternalStore:Gf,useId:bp,useHostTransitionStatus:hu,useFormState:sp,useActionState:sp,useOptimistic:function(e,i){var r=le();return Ut!==null?Kf(r,Ut,e,i):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:nu,useCacheRefresh:vp};xp.useEffectEvent=op;function pu(e,i,r,c){i=e.memoizedState,r=r(c,i),r=r==null?i:y({},i,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gu={enqueueSetState:function(e,i,r){e=e._reactInternals;var c=nn(),p=Ti(c);p.payload=i,r!=null&&(p.callback=r),i=Ci(e,p,c),i!==null&&(Ge(i,e,c),Wa(i,e,c))},enqueueReplaceState:function(e,i,r){e=e._reactInternals;var c=nn(),p=Ti(c);p.tag=1,p.payload=i,r!=null&&(p.callback=r),i=Ci(e,p,c),i!==null&&(Ge(i,e,c),Wa(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var r=nn(),c=Ti(r);c.tag=2,i!=null&&(c.callback=i),i=Ci(e,c,r),i!==null&&(Ge(i,e,r),Wa(i,e,r))}};function _p(e,i,r,c,p,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,v):i.prototype&&i.prototype.isPureReactComponent?!Ia(r,c)||!Ia(p,m):!0}function Tp(e,i,r,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==e&&gu.enqueueReplaceState(i,i.state,null)}function us(e,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(e=e.defaultProps){r===i&&(r=y({},r));for(var p in e)r[p]===void 0&&(r[p]=e[p])}return r}function Cp(e){mo(e)}function Rp(e){console.error(e)}function Mp(e){mo(e)}function Fo(e,i){try{var r=e.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Dp(e,i,r){try{var c=e.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function mu(e,i,r){return r=Ti(r),r.tag=3,r.payload={element:null},r.callback=function(){Fo(e,i)},r}function Lp(e){return e=Ti(e),e.tag=3,e}function Np(e,i,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var m=c.value;e.payload=function(){return p(m)},e.callback=function(){Dp(i,r,c)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Dp(i,r,c),typeof p!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function ev(e,i,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&Gs(i,r,p,!0),r=Ze.current,r!==null){switch(r.tag){case 31:case 13:return gn===null?Qo():r.alternate===null&&re===0&&(re=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===To?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),Hu(e,c,p)),!1;case 22:return r.flags|=65536,c===To?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),Hu(e,c,p)),!1}throw Error(s(435,r.tag))}return Hu(e,c,p),Qo(),!1}if(Dt)return i=Ze.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,c!==Bc&&(e=Error(s(422),{cause:c}),qa(hn(e,r)))):(c!==Bc&&(i=Error(s(423),{cause:c}),qa(hn(i,r))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=hn(c,r),p=mu(e.stateNode,c,p),Xc(e,p),re!==4&&(re=2)),!1;var m=Error(s(520),{cause:c});if(m=hn(m,r),ur===null?ur=[m]:ur.push(m),re!==4&&(re=2),i===null)return!0;c=hn(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,e=p&-p,r.lanes|=e,e=mu(r.stateNode,c,e),Xc(r,e),!1;case 1:if(i=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Oi===null||!Oi.has(m))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Lp(p),Np(p,e,r,c),Xc(r,p),!1}r=r.return}while(r!==null);return!1}var yu=Error(s(461)),fe=!1;function _e(e,i,r,c){i.child=e===null?Pf(i,null,r,c):ls(i,e.child,r,c)}function Op(e,i,r,c,p){r=r.render;var m=i.ref;if("ref"in c){var v={};for(var x in c)x!=="ref"&&(v[x]=c[x])}else v=c;return ss(i),c=Zc(e,i,r,v,m,p),x=Jc(),e!==null&&!fe?(tu(e,i,p),ti(e,i,p)):(Dt&&x&&Oc(i),i.flags|=1,_e(e,i,c,p),i.child)}function kp(e,i,r,c,p){if(e===null){var m=r.type;return typeof m=="function"&&!Dc(m)&&m.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=m,Bp(e,i,m,c,p)):(e=Ao(r.type,null,c,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!_u(e,p)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:Ia,r(v,c)&&e.ref===i.ref)return ti(e,i,p)}return i.flags|=1,e=$n(m,c),e.ref=i.ref,e.return=i,i.child=e}function Bp(e,i,r,c,p){if(e!==null){var m=e.memoizedProps;if(Ia(m,c)&&e.ref===i.ref)if(fe=!1,i.pendingProps=c=m,_u(e,p))(e.flags&131072)!==0&&(fe=!0);else return i.lanes=e.lanes,ti(e,i,p)}return bu(e,i,r,c,p)}function Pp(e,i,r,c){var p=c.children,m=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,e!==null){for(c=i.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~m}else c=0,i.child=null;return zp(e,i,m,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&xo(i,m!==null?m.cachePool:null),m!==null?Ff(i,m):$c(),Uf(i);else return c=i.lanes=536870912,zp(e,i,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(xo(i,m.cachePool),Ff(i,m),Mi(),i.memoizedState=null):(e!==null&&xo(i,null),$c(),Mi());return _e(e,i,p,r),i.child}function ir(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function zp(e,i,r,c,p){var m=Ic();return m=m===null?null:{parent:he._currentValue,pool:m},i.memoizedState={baseLanes:r,cachePool:m},e!==null&&xo(i,null),$c(),Uf(i),e!==null&&Gs(e,i,c,!0),i.childLanes=p,null}function Uo(e,i){return i=Io({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function jp(e,i,r){return ls(i,e.child,null,r),e=Uo(i,i.pendingProps),e.flags|=2,Je(i),i.memoizedState=null,e}function nv(e,i,r){var c=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Dt){if(c.mode==="hidden")return e=Uo(i,c),i.lanes=536870912,ir(null,e);if(Wc(i),(e=$t)?(e=Wg(e,pn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Si!==null?{id:Ln,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},r=Sf(e),r.return=i,i.child=r,Ee=i,$t=null)):e=null,e===null)throw Ei(i);return i.lanes=536870912,null}return Uo(i,c)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(Wc(i),p)if(i.flags&256)i.flags&=-257,i=jp(e,i,r);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(fe||Gs(e,i,r,!1),p=(r&e.childLanes)!==0,fe||p){if(c=Vt,c!==null&&(v=Cd(c,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,ts(e,v),Ge(c,e,v),yu;Qo(),i=jp(e,i,r)}else e=m.treeContext,$t=mn(v.nextSibling),Ee=i,Dt=!0,wi=null,pn=!1,e!==null&&xf(i,e),i=Uo(i,c),i.flags|=4096;return i}return e=$n(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Ho(e,i){var r=i.ref;if(r===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(i.flags|=4194816)}}function bu(e,i,r,c,p){return ss(i),r=Zc(e,i,r,c,void 0,p),c=Jc(),e!==null&&!fe?(tu(e,i,p),ti(e,i,p)):(Dt&&c&&Oc(i),i.flags|=1,_e(e,i,r,p),i.child)}function Fp(e,i,r,c,p,m){return ss(i),i.updateQueue=null,r=If(i,c,r,p),Hf(e),c=Jc(),e!==null&&!fe?(tu(e,i,m),ti(e,i,m)):(Dt&&c&&Oc(i),i.flags|=1,_e(e,i,r,m),i.child)}function Up(e,i,r,c,p){if(ss(i),i.stateNode===null){var m=Fs,v=r.contextType;typeof v=="object"&&v!==null&&(m=xe(v)),m=new r(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},Vc(i),v=r.contextType,m.context=typeof v=="object"&&v!==null?xe(v):Fs,m.state=i.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(pu(i,r,v,c),m.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&gu.enqueueReplaceState(m,m.state,null),Za(i,c,m,p),Qa(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){m=i.stateNode;var x=i.memoizedProps,M=us(r,x);m.props=M;var U=m.context,Y=r.contextType;v=Fs,typeof Y=="object"&&Y!==null&&(v=xe(Y));var K=r.getDerivedStateFromProps;Y=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||U!==v)&&Tp(i,m,c,v),_i=!1;var H=i.memoizedState;m.state=H,Za(i,c,m,p),Qa(),U=i.memoizedState,x||H!==U||_i?(typeof K=="function"&&(pu(i,r,K,c),U=i.memoizedState),(M=_i||_p(i,r,M,c,H,U,v))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=U),m.props=c,m.state=U,m.context=v,c=M):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,qc(e,i),v=i.memoizedProps,Y=us(r,v),m.props=Y,K=i.pendingProps,H=m.context,U=r.contextType,M=Fs,typeof U=="object"&&U!==null&&(M=xe(U)),x=r.getDerivedStateFromProps,(U=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==K||H!==M)&&Tp(i,m,c,M),_i=!1,H=i.memoizedState,m.state=H,Za(i,c,m,p),Qa();var V=i.memoizedState;v!==K||H!==V||_i||e!==null&&e.dependencies!==null&&wo(e.dependencies)?(typeof x=="function"&&(pu(i,r,x,c),V=i.memoizedState),(Y=_i||_p(i,r,Y,c,H,V,M)||e!==null&&e.dependencies!==null&&wo(e.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,V,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,V,M)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=V),m.props=c,m.state=V,m.context=M,c=Y):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),c=!1)}return m=c,Ho(e,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&c?(i.child=ls(i,e.child,null,p),i.child=ls(i,null,r,p)):_e(e,i,r,p),i.memoizedState=m.state,e=i.child):e=ti(e,i,p),e}function Hp(e,i,r,c){return ns(),i.flags|=256,_e(e,i,r,c),i.child}var vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Au(e){return{baseLanes:e,cachePool:Df()}}function Su(e,i,r){return e=e!==null?e.childLanes&~r:0,i&&(e|=en),e}function Ip(e,i,r){var c=i.pendingProps,p=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(oe.current&2)!==0),v&&(p=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Dt){if(p?Ri(i):Mi(),(e=$t)?(e=Wg(e,pn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Si!==null?{id:Ln,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},r=Sf(e),r.return=i,i.child=r,Ee=i,$t=null)):e=null,e===null)throw Ei(i);return ih(e)?i.lanes=32:i.lanes=536870912,null}var x=c.children;return c=c.fallback,p?(Mi(),p=i.mode,x=Io({mode:"hidden",children:x},p),c=es(c,p,r,null),x.return=i,c.return=i,x.sibling=c,i.child=x,c=i.child,c.memoizedState=Au(r),c.childLanes=Su(e,v,r),i.memoizedState=vu,ir(null,c)):(Ri(i),wu(i,x))}var M=e.memoizedState;if(M!==null&&(x=M.dehydrated,x!==null)){if(m)i.flags&256?(Ri(i),i.flags&=-257,i=Eu(e,i,r)):i.memoizedState!==null?(Mi(),i.child=e.child,i.flags|=128,i=null):(Mi(),x=c.fallback,p=i.mode,c=Io({mode:"visible",children:c.children},p),x=es(x,p,r,null),x.flags|=2,c.return=i,x.return=i,c.sibling=x,i.child=c,ls(i,e.child,null,r),c=i.child,c.memoizedState=Au(r),c.childLanes=Su(e,v,r),i.memoizedState=vu,i=ir(null,c));else if(Ri(i),ih(x)){if(v=x.nextSibling&&x.nextSibling.dataset,v)var U=v.dgst;v=U,c=Error(s(419)),c.stack="",c.digest=v,qa({value:c,source:null,stack:null}),i=Eu(e,i,r)}else if(fe||Gs(e,i,r,!1),v=(r&e.childLanes)!==0,fe||v){if(v=Vt,v!==null&&(c=Cd(v,r),c!==0&&c!==M.retryLane))throw M.retryLane=c,ts(e,c),Ge(v,e,c),yu;nh(x)||Qo(),i=Eu(e,i,r)}else nh(x)?(i.flags|=192,i.child=e.child,i=null):(e=M.treeContext,$t=mn(x.nextSibling),Ee=i,Dt=!0,wi=null,pn=!1,e!==null&&xf(i,e),i=wu(i,c.children),i.flags|=4096);return i}return p?(Mi(),x=c.fallback,p=i.mode,M=e.child,U=M.sibling,c=$n(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,U!==null?x=$n(U,x):(x=es(x,p,r,null),x.flags|=2),x.return=i,c.return=i,c.sibling=x,i.child=c,ir(null,c),c=i.child,x=e.child.memoizedState,x===null?x=Au(r):(p=x.cachePool,p!==null?(M=he._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=Df(),x={baseLanes:x.baseLanes|r,cachePool:p}),c.memoizedState=x,c.childLanes=Su(e,v,r),i.memoizedState=vu,ir(e.child,c)):(Ri(i),r=e.child,e=r.sibling,r=$n(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=r,i.memoizedState=null,r)}function wu(e,i){return i=Io({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Io(e,i){return e=Qe(22,e,null,i),e.lanes=0,e}function Eu(e,i,r){return ls(i,e.child,null,r),e=wu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Gp(e,i,r){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),jc(e.return,i,r)}function xu(e,i,r,c,p,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=p,v.treeForkCount=m)}function Vp(e,i,r){var c=i.pendingProps,p=c.revealOrder,m=c.tail;c=c.children;var v=oe.current,x=(v&2)!==0;if(x?(v=v&1|2,i.flags|=128):v&=1,W(oe,v),_e(e,i,c,r),c=Dt?Va:0,!x&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gp(e,r,i);else if(e.tag===19)Gp(e,r,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(r=i.child,p=null;r!==null;)e=r.alternate,e!==null&&Do(e)===null&&(p=r),r=r.sibling;r=p,r===null?(p=i.child,i.child=null):(p=r.sibling,r.sibling=null),xu(i,!1,p,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Do(e)===null){i.child=p;break}e=p.sibling,p.sibling=r,r=p,p=e}xu(i,!0,r,null,m,c);break;case"together":xu(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ti(e,i,r){if(e!==null&&(i.dependencies=e.dependencies),Ni|=i.lanes,(r&i.childLanes)===0)if(e!==null){if(Gs(e,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,r=$n(e,e.pendingProps),i.child=r,r.return=i;e.sibling!==null;)e=e.sibling,r=r.sibling=$n(e,e.pendingProps),r.return=i;r.sibling=null}return i.child}function _u(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&wo(e)))}function iv(e,i,r){switch(i.tag){case 3:Yt(i,i.stateNode.containerInfo),xi(i,he,e.memoizedState.cache),ns();break;case 27:case 5:zt(i);break;case 4:Yt(i,i.stateNode.containerInfo);break;case 10:xi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Wc(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ri(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Ip(e,i,r):(Ri(i),e=ti(e,i,r),e!==null?e.sibling:null);Ri(i);break;case 19:var p=(e.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(Gs(e,i,r,!1),c=(r&i.childLanes)!==0),p){if(c)return Vp(e,i,r);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(oe,oe.current),c)break;return null;case 22:return i.lanes=0,Pp(e,i,r,i.pendingProps);case 24:xi(i,he,e.memoizedState.cache)}return ti(e,i,r)}function qp(e,i,r){if(e!==null)if(e.memoizedProps!==i.pendingProps)fe=!0;else{if(!_u(e,r)&&(i.flags&128)===0)return fe=!1,iv(e,i,r);fe=(e.flags&131072)!==0}else fe=!1,Dt&&(i.flags&1048576)!==0&&Ef(i,Va,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=rs(i.elementType),i.type=e,typeof e=="function")Dc(e)?(c=us(e,c),i.tag=1,i=Up(null,i,e,c,r)):(i.tag=0,i=bu(null,i,e,c,r));else{if(e!=null){var p=e.$$typeof;if(p===O){i.tag=11,i=Op(null,i,e,c,r);break t}else if(p===P){i.tag=14,i=kp(null,i,e,c,r);break t}}throw i=tt(e)||e,Error(s(306,i,""))}}return i;case 0:return bu(e,i,i.type,i.pendingProps,r);case 1:return c=i.type,p=us(c,i.pendingProps),Up(e,i,c,p,r);case 3:t:{if(Yt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;p=m.element,qc(e,i),Za(i,c,null,r);var v=i.memoizedState;if(c=v.cache,xi(i,he,c),c!==m.cache&&Fc(i,[he],r,!0),Qa(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Hp(e,i,c,r);break t}else if(c!==p){p=hn(Error(s(424)),i),qa(p),i=Hp(e,i,c,r);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=mn(e.firstChild),Ee=i,Dt=!0,wi=null,pn=!0,r=Pf(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ns(),c===p){i=ti(e,i,r);break t}_e(e,i,c,r)}i=i.child}return i;case 26:return Ho(e,i),e===null?(r=nm(i.type,null,i.pendingProps,null))?i.memoizedState=r:Dt||(r=i.type,e=i.pendingProps,c=sl(ft.current).createElement(r),c[we]=i,c[ze]=e,Te(c,r,e),ye(c),i.stateNode=c):i.memoizedState=nm(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return zt(i),e===null&&Dt&&(c=i.stateNode=Jg(i.type,i.pendingProps,ft.current),Ee=i,pn=!0,p=$t,zi(i.type)?(sh=p,$t=mn(c.firstChild)):$t=p),_e(e,i,i.pendingProps.children,r),Ho(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Dt&&((p=c=$t)&&(c=Ov(c,i.type,i.pendingProps,pn),c!==null?(i.stateNode=c,Ee=i,$t=mn(c.firstChild),pn=!1,p=!0):p=!1),p||Ei(i)),zt(i),p=i.type,m=i.pendingProps,v=e!==null?e.memoizedProps:null,c=m.children,Ju(p,m)?c=null:v!==null&&Ju(p,v)&&(i.flags|=32),i.memoizedState!==null&&(p=Zc(e,i,$0,null,null,r),br._currentValue=p),Ho(e,i),_e(e,i,c,r),i.child;case 6:return e===null&&Dt&&((e=r=$t)&&(r=kv(r,i.pendingProps,pn),r!==null?(i.stateNode=r,Ee=i,$t=null,e=!0):e=!1),e||Ei(i)),null;case 13:return Ip(e,i,r);case 4:return Yt(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=ls(i,null,c,r):_e(e,i,c,r),i.child;case 11:return Op(e,i,i.type,i.pendingProps,r);case 7:return _e(e,i,i.pendingProps,r),i.child;case 8:return _e(e,i,i.pendingProps.children,r),i.child;case 12:return _e(e,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,xi(i,i.type,c.value),_e(e,i,c.children,r),i.child;case 9:return p=i.type._context,c=i.pendingProps.children,ss(i),p=xe(p),c=c(p),i.flags|=1,_e(e,i,c,r),i.child;case 14:return kp(e,i,i.type,i.pendingProps,r);case 15:return Bp(e,i,i.type,i.pendingProps,r);case 19:return Vp(e,i,r);case 31:return nv(e,i,r);case 22:return Pp(e,i,r,i.pendingProps);case 24:return ss(i),c=xe(he),e===null?(p=Ic(),p===null&&(p=Vt,m=Uc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=r),p=m),i.memoizedState={parent:c,cache:p},Vc(i),xi(i,he,p)):((e.lanes&r)!==0&&(qc(e,i),Za(i,null,null,r),Qa()),p=e.memoizedState,m=i.memoizedState,p.parent!==c?(p={parent:c,cache:c},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),xi(i,he,c)):(c=m.cache,xi(i,he,c),c!==p.cache&&Fc(i,[he],r,!0))),_e(e,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ei(e){e.flags|=4}function Tu(e,i,r,c,p){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(bg())e.flags|=8192;else throw os=To,Gc}else e.flags&=-16777217}function Xp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!om(i))if(bg())e.flags|=8192;else throw os=To,Gc}function Go(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?xd():536870912,e.lanes|=i,ea|=i)}function sr(e,i){if(!Dt)switch(e.tailMode){case"hidden":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Kt(e){var i=e.alternate!==null&&e.alternate.child===e.child,r=0,c=0;if(i)for(var p=e.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=r,i}function sv(e,i,r){var c=i.pendingProps;switch(kc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(i),null;case 1:return Kt(i),null;case 3:return r=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Qn(he),xt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Is(i)?ei(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pc())),Kt(i),null;case 26:var p=i.type,m=i.memoizedState;return e===null?(ei(i),m!==null?(Kt(i),Xp(i,m)):(Kt(i),Tu(i,p,null,c,r))):m?m!==e.memoizedState?(ei(i),Kt(i),Xp(i,m)):(Kt(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&ei(i),Kt(i),Tu(i,p,e,c,r)),null;case 27:if(Pe(i),r=ft.current,p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}e=nt.current,Is(i)?_f(i):(e=Jg(p,c,r),i.stateNode=e,ei(i))}return Kt(i),null;case 5:if(Pe(i),p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}if(m=nt.current,Is(i))_f(i);else{var v=sl(ft.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(p,{is:c.is}):v.createElement(p)}}m[we]=i,m[ze]=c;t:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break t;for(;v.sibling===null;){if(v.return===null||v.return===i)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;t:switch(Te(m,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ei(i)}}return Kt(i),Tu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,r),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=ft.current,Is(i)){if(e=i.stateNode,r=i.memoizedProps,c=null,p=Ee,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[we]=i,e=!!(e.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Ig(e.nodeValue,r)),e||Ei(i,!0)}else e=sl(e).createTextNode(c),e[we]=i,i.stateNode=e}return Kt(i),null;case 31:if(r=i.memoizedState,e===null||e.memoizedState!==null){if(c=Is(i),r!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[we]=i}else ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),e=!1}else r=Pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return i.flags&256?(Je(i),i):(Je(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Kt(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Is(i),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[we]=i}else ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),p=!1}else p=Pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(Je(i),i):(Je(i),null)}return Je(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,e=e!==null&&e.memoizedState!==null,r&&(c=i.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==p&&(c.flags|=2048)),r!==e&&r&&(i.child.flags|=8192),Go(i,i.updateQueue),Kt(i),null);case 4:return xt(),e===null&&$u(i.stateNode.containerInfo),Kt(i),null;case 10:return Qn(i.type),Kt(i),null;case 19:if(q(oe),c=i.memoizedState,c===null)return Kt(i),null;if(p=(i.flags&128)!==0,m=c.rendering,m===null)if(p)sr(c,!1);else{if(re!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=Do(e),m!==null){for(i.flags|=128,sr(c,!1),e=m.updateQueue,i.updateQueue=e,Go(i,e),i.subtreeFlags=0,e=r,r=i.child;r!==null;)Af(r,e),r=r.sibling;return W(oe,oe.current&1|2),Dt&&Kn(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&Ne()>$o&&(i.flags|=128,p=!0,sr(c,!1),i.lanes=4194304)}else{if(!p)if(e=Do(m),e!==null){if(i.flags|=128,p=!0,e=e.updateQueue,i.updateQueue=e,Go(i,e),sr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Dt)return Kt(i),null}else 2*Ne()-c.renderingStartTime>$o&&r!==536870912&&(i.flags|=128,p=!0,sr(c,!1),i.lanes=4194304);c.isBackwards?(m.sibling=i.child,i.child=m):(e=c.last,e!==null?e.sibling=m:i.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Ne(),e.sibling=null,r=oe.current,W(oe,p?r&1|2:r&1),Dt&&Kn(i,c.treeForkCount),e):(Kt(i),null);case 22:case 23:return Je(i),Kc(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(Kt(i),i.subtreeFlags&6&&(i.flags|=8192)):Kt(i),r=i.updateQueue,r!==null&&Go(i,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),e!==null&&q(as),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Qn(he),Kt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function av(e,i){switch(kc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Qn(he),xt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Pe(i),null;case 31:if(i.memoizedState!==null){if(Je(i),i.alternate===null)throw Error(s(340));ns()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Je(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ns()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return q(oe),null;case 4:return xt(),null;case 10:return Qn(i.type),null;case 22:case 23:return Je(i),Kc(),e!==null&&q(as),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Qn(he),null;case 25:return null;default:return null}}function Yp(e,i){switch(kc(i),i.tag){case 3:Qn(he),xt();break;case 26:case 27:case 5:Pe(i);break;case 4:xt();break;case 31:i.memoizedState!==null&&Je(i);break;case 13:Je(i);break;case 19:q(oe);break;case 10:Qn(i.type);break;case 22:case 23:Je(i),Kc(),e!==null&&q(as);break;case 24:Qn(he)}}function ar(e,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&e)===e){c=void 0;var m=r.create,v=r.inst;c=m(),v.destroy=c}r=r.next}while(r!==p)}}catch(x){Ft(i,i.return,x)}}function Di(e,i,r){try{var c=i.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var m=p.next;c=m;do{if((c.tag&e)===e){var v=c.inst,x=v.destroy;if(x!==void 0){v.destroy=void 0,p=i;var M=r,U=x;try{U()}catch(Y){Ft(p,M,Y)}}}c=c.next}while(c!==m)}}catch(Y){Ft(i,i.return,Y)}}function $p(e){var i=e.updateQueue;if(i!==null){var r=e.stateNode;try{jf(i,r)}catch(c){Ft(e,e.return,c)}}}function Kp(e,i,r){r.props=us(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(c){Ft(e,i,c)}}function rr(e,i){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof r=="function"?e.refCleanup=r(c):r.current=c}}catch(p){Ft(e,i,p)}}function On(e,i){var r=e.ref,c=e.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){Ft(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Ft(e,i,p)}else r.current=null}function Wp(e){var i=e.type,r=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){Ft(e,e.return,p)}}function Cu(e,i,r){try{var c=e.stateNode;Cv(c,e.type,r,i),c[ze]=i}catch(p){Ft(e,e.return,p)}}function Qp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zi(e.type)||e.tag===4}function Ru(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Qp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mu(e,i,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(e),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Xn));else if(c!==4&&(c===27&&zi(e.type)&&(r=e.stateNode,i=null),e=e.child,e!==null))for(Mu(e,i,r),e=e.sibling;e!==null;)Mu(e,i,r),e=e.sibling}function Vo(e,i,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?r.insertBefore(e,i):r.appendChild(e);else if(c!==4&&(c===27&&zi(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Vo(e,i,r),e=e.sibling;e!==null;)Vo(e,i,r),e=e.sibling}function Zp(e){var i=e.stateNode,r=e.memoizedProps;try{for(var c=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Te(i,c,r),i[we]=e,i[ze]=r}catch(m){Ft(e,e.return,m)}}var ni=!1,pe=!1,Du=!1,Jp=typeof WeakSet=="function"?WeakSet:Set,be=null;function rv(e,i){if(e=e.containerInfo,Qu=hl,e=hf(e),Ec(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var v=0,x=-1,M=-1,U=0,Y=0,K=e,H=null;e:for(;;){for(var V;K!==r||p!==0&&K.nodeType!==3||(x=v+p),K!==m||c!==0&&K.nodeType!==3||(M=v+c),K.nodeType===3&&(v+=K.nodeValue.length),(V=K.firstChild)!==null;)H=K,K=V;for(;;){if(K===e)break e;if(H===r&&++U===p&&(x=v),H===m&&++Y===c&&(M=v),(V=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=V}r=x===-1||M===-1?null:{start:x,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zu={focusedElem:e,selectionRange:r},hl=!1,be=i;be!==null;)if(i=be,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,be=e;else for(;be!==null;){switch(i=be,m=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)p=e[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=i,p=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var at=us(r.type,p);e=c.getSnapshotBeforeUpdate(at,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(gt){Ft(r,r.return,gt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,r=e.nodeType,r===9)eh(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":eh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,be=e;break}be=i.return}}function tg(e,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:si(e,r),c&4&&ar(5,r);break;case 1:if(si(e,r),c&4)if(e=r.stateNode,i===null)try{e.componentDidMount()}catch(v){Ft(r,r.return,v)}else{var p=us(r.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ft(r,r.return,v)}}c&64&&$p(r),c&512&&rr(r,r.return);break;case 3:if(si(e,r),c&64&&(e=r.updateQueue,e!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{jf(e,i)}catch(v){Ft(r,r.return,v)}}break;case 27:i===null&&c&4&&Zp(r);case 26:case 5:si(e,r),i===null&&c&4&&Wp(r),c&512&&rr(r,r.return);break;case 12:si(e,r);break;case 31:si(e,r),c&4&&ig(e,r);break;case 13:si(e,r),c&4&&sg(e,r),c&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=gv.bind(null,r),Bv(e,r))));break;case 22:if(c=r.memoizedState!==null||ni,!c){i=i!==null&&i.memoizedState!==null||pe,p=ni;var m=pe;ni=c,(pe=i)&&!m?ai(e,r,(r.subtreeFlags&8772)!==0):si(e,r),ni=p,pe=m}break;case 30:break;default:si(e,r)}}function eg(e){var i=e.alternate;i!==null&&(e.alternate=null,eg(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&rc(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Fe=!1;function ii(e,i,r){for(r=r.child;r!==null;)ng(e,i,r),r=r.sibling}function ng(e,i,r){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Da,r)}catch{}switch(r.tag){case 26:pe||On(r,i),ii(e,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:pe||On(r,i);var c=Wt,p=Fe;zi(r.type)&&(Wt=r.stateNode,Fe=!1),ii(e,i,r),gr(r.stateNode),Wt=c,Fe=p;break;case 5:pe||On(r,i);case 6:if(c=Wt,p=Fe,Wt=null,ii(e,i,r),Wt=c,Fe=p,Wt!==null)if(Fe)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(r.stateNode)}catch(m){Ft(r,i,m)}else try{Wt.removeChild(r.stateNode)}catch(m){Ft(r,i,m)}break;case 18:Wt!==null&&(Fe?(e=Wt,$g(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),ca(e)):$g(Wt,r.stateNode));break;case 4:c=Wt,p=Fe,Wt=r.stateNode.containerInfo,Fe=!0,ii(e,i,r),Wt=c,Fe=p;break;case 0:case 11:case 14:case 15:Di(2,r,i),pe||Di(4,r,i),ii(e,i,r);break;case 1:pe||(On(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Kp(r,i,c)),ii(e,i,r);break;case 21:ii(e,i,r);break;case 22:pe=(c=pe)||r.memoizedState!==null,ii(e,i,r),pe=c;break;default:ii(e,i,r)}}function ig(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ca(e)}catch(r){Ft(i,i.return,r)}}}function sg(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ca(e)}catch(r){Ft(i,i.return,r)}}function ov(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Jp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Jp),i;default:throw Error(s(435,e.tag))}}function qo(e,i){var r=ov(e);i.forEach(function(c){if(!r.has(c)){r.add(c);var p=mv.bind(null,e,c);c.then(p,p)}})}function Ue(e,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],m=e,v=i,x=v;t:for(;x!==null;){switch(x.tag){case 27:if(zi(x.type)){Wt=x.stateNode,Fe=!1;break t}break;case 5:Wt=x.stateNode,Fe=!1;break t;case 3:case 4:Wt=x.stateNode.containerInfo,Fe=!0;break t}x=x.return}if(Wt===null)throw Error(s(160));ng(m,v,p),Wt=null,Fe=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)ag(i,e),i=i.sibling}var xn=null;function ag(e,i){var r=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ue(i,e),He(e),c&4&&(Di(3,e,e.return),ar(3,e),Di(5,e,e.return));break;case 1:Ue(i,e),He(e),c&512&&(pe||r===null||On(r,r.return)),c&64&&ni&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=xn;if(Ue(i,e),He(e),c&512&&(pe||r===null||On(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=e.memoizedState,r===null)if(c===null)if(e.stateNode===null){t:{c=e.type,r=e.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":m=p.getElementsByTagName("title")[0],(!m||m[Oa]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(c),p.head.insertBefore(m,p.querySelector("head > title"))),Te(m,c,r),m[we]=e,ye(m),c=m;break t;case"link":var v=am("link","href",p).get(c+(r.href||""));if(v){for(var x=0;x<v.length;x++)if(m=v[x],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(x,1);break e}}m=p.createElement(c),Te(m,c,r),p.head.appendChild(m);break;case"meta":if(v=am("meta","content",p).get(c+(r.content||""))){for(x=0;x<v.length;x++)if(m=v[x],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(x,1);break e}}m=p.createElement(c),Te(m,c,r),p.head.appendChild(m);break;default:throw Error(s(468,c))}m[we]=e,ye(m),c=m}e.stateNode=c}else rm(p,e.type,e.stateNode);else e.stateNode=sm(p,c,e.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?rm(p,e.type,e.stateNode):sm(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Cu(e,e.memoizedProps,r.memoizedProps)}break;case 27:Ue(i,e),He(e),c&512&&(pe||r===null||On(r,r.return)),r!==null&&c&4&&Cu(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Ue(i,e),He(e),c&512&&(pe||r===null||On(r,r.return)),e.flags&32){p=e.stateNode;try{Ns(p,"")}catch(at){Ft(e,e.return,at)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,Cu(e,p,r!==null?r.memoizedProps:p)),c&1024&&(Du=!0);break;case 6:if(Ue(i,e),He(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,r=e.stateNode;try{r.nodeValue=c}catch(at){Ft(e,e.return,at)}}break;case 3:if(ol=null,p=xn,xn=al(i.containerInfo),Ue(i,e),xn=p,He(e),c&4&&r!==null&&r.memoizedState.isDehydrated)try{ca(i.containerInfo)}catch(at){Ft(e,e.return,at)}Du&&(Du=!1,rg(e));break;case 4:c=xn,xn=al(e.stateNode.containerInfo),Ue(i,e),He(e),xn=c;break;case 12:Ue(i,e),He(e);break;case 31:Ue(i,e),He(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,qo(e,c)));break;case 13:Ue(i,e),He(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Yo=Ne()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,qo(e,c)));break;case 22:p=e.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,U=ni,Y=pe;if(ni=U||p,pe=Y||M,Ue(i,e),pe=Y,ni=U,He(e),c&8192)t:for(i=e.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(r===null||M||ni||pe||hs(e)),r=null,i=e;;){if(i.tag===5||i.tag===26){if(r===null){M=r=i;try{if(m=M.stateNode,p)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{x=M.stateNode;var K=M.memoizedProps.style,H=K!=null&&K.hasOwnProperty("display")?K.display:null;x.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(at){Ft(M,M.return,at)}}}else if(i.tag===6){if(r===null){M=i;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(at){Ft(M,M.return,at)}}}else if(i.tag===18){if(r===null){M=i;try{var V=M.stateNode;p?Kg(V,!0):Kg(M.stateNode,!1)}catch(at){Ft(M,M.return,at)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,qo(e,r))));break;case 19:Ue(i,e),He(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,qo(e,c)));break;case 30:break;case 21:break;default:Ue(i,e),He(e)}}function He(e){var i=e.flags;if(i&2){try{for(var r,c=e.return;c!==null;){if(Qp(c)){r=c;break}c=c.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,m=Ru(e);Vo(e,m,p);break;case 5:var v=r.stateNode;r.flags&32&&(Ns(v,""),r.flags&=-33);var x=Ru(e);Vo(e,x,v);break;case 3:case 4:var M=r.stateNode.containerInfo,U=Ru(e);Mu(e,U,M);break;default:throw Error(s(161))}}catch(Y){Ft(e,e.return,Y)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function rg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;rg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function si(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)tg(e,i.alternate,i),i=i.sibling}function hs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Di(4,i,i.return),hs(i);break;case 1:On(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Kp(i,i.return,r),hs(i);break;case 27:gr(i.stateNode);case 26:case 5:On(i,i.return),hs(i);break;case 22:i.memoizedState===null&&hs(i);break;case 30:hs(i);break;default:hs(i)}e=e.sibling}}function ai(e,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,p=e,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:ai(p,m,r),ar(4,m);break;case 1:if(ai(p,m,r),c=m,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){Ft(c,c.return,U)}if(c=m,p=c.updateQueue,p!==null){var x=c.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)zf(M[p],x)}catch(U){Ft(c,c.return,U)}}r&&v&64&&$p(m),rr(m,m.return);break;case 27:Zp(m);case 26:case 5:ai(p,m,r),r&&c===null&&v&4&&Wp(m),rr(m,m.return);break;case 12:ai(p,m,r);break;case 31:ai(p,m,r),r&&v&4&&ig(p,m);break;case 13:ai(p,m,r),r&&v&4&&sg(p,m);break;case 22:m.memoizedState===null&&ai(p,m,r),rr(m,m.return);break;case 30:break;default:ai(p,m,r)}i=i.sibling}}function Lu(e,i){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Xa(r))}function Nu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Xa(e))}function _n(e,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)og(e,i,r,c),i=i.sibling}function og(e,i,r,c){var p=i.flags;switch(i.tag){case 0:case 11:case 15:_n(e,i,r,c),p&2048&&ar(9,i);break;case 1:_n(e,i,r,c);break;case 3:_n(e,i,r,c),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Xa(e)));break;case 12:if(p&2048){_n(e,i,r,c),e=i.stateNode;try{var m=i.memoizedProps,v=m.id,x=m.onPostCommit;typeof x=="function"&&x(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Ft(i,i.return,M)}}else _n(e,i,r,c);break;case 31:_n(e,i,r,c);break;case 13:_n(e,i,r,c);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?_n(e,i,r,c):or(e,i):m._visibility&2?_n(e,i,r,c):(m._visibility|=2,Zs(e,i,r,c,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Lu(v,i);break;case 24:_n(e,i,r,c),p&2048&&Nu(i.alternate,i);break;default:_n(e,i,r,c)}}function Zs(e,i,r,c,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=e,v=i,x=r,M=c,U=v.flags;switch(v.tag){case 0:case 11:case 15:Zs(m,v,x,M,p),ar(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?Zs(m,v,x,M,p):or(m,v):(Y._visibility|=2,Zs(m,v,x,M,p)),p&&U&2048&&Lu(v.alternate,v);break;case 24:Zs(m,v,x,M,p),p&&U&2048&&Nu(v.alternate,v);break;default:Zs(m,v,x,M,p)}i=i.sibling}}function or(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=e,c=i,p=c.flags;switch(c.tag){case 22:or(r,c),p&2048&&Lu(c.alternate,c);break;case 24:or(r,c),p&2048&&Nu(c.alternate,c);break;default:or(r,c)}i=i.sibling}}var lr=8192;function Js(e,i,r){if(e.subtreeFlags&lr)for(e=e.child;e!==null;)lg(e,i,r),e=e.sibling}function lg(e,i,r){switch(e.tag){case 26:Js(e,i,r),e.flags&lr&&e.memoizedState!==null&&Yv(r,xn,e.memoizedState,e.memoizedProps);break;case 5:Js(e,i,r);break;case 3:case 4:var c=xn;xn=al(e.stateNode.containerInfo),Js(e,i,r),xn=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=lr,lr=16777216,Js(e,i,r),lr=c):Js(e,i,r));break;default:Js(e,i,r)}}function cg(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function cr(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];be=c,hg(c,e)}cg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ug(e),e=e.sibling}function ug(e){switch(e.tag){case 0:case 11:case 15:cr(e),e.flags&2048&&Di(9,e,e.return);break;case 3:cr(e);break;case 12:cr(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Xo(e)):cr(e);break;default:cr(e)}}function Xo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];be=c,hg(c,e)}cg(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Di(8,i,i.return),Xo(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Xo(i));break;default:Xo(i)}e=e.sibling}}function hg(e,i){for(;be!==null;){var r=be;switch(r.tag){case 0:case 11:case 15:Di(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Xa(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,be=c;else t:for(r=e;be!==null;){c=be;var p=c.sibling,m=c.return;if(eg(c),c===r){be=null;break t}if(p!==null){p.return=m,be=p;break t}be=m}}}var lv={getCacheForType:function(e){var i=xe(he),r=i.data.get(e);return r===void 0&&(r=e(),i.data.set(e,r)),r},cacheSignal:function(){return xe(he).controller.signal}},cv=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Vt=null,_t=null,Ct=0,jt=0,tn=null,Li=!1,ta=!1,Ou=!1,ri=0,re=0,Ni=0,ds=0,ku=0,en=0,ea=0,ur=null,Ie=null,Bu=!1,Yo=0,dg=0,$o=1/0,Ko=null,Oi=null,me=0,ki=null,na=null,oi=0,Pu=0,zu=null,fg=null,hr=0,ju=null;function nn(){return(Pt&2)!==0&&Ct!==0?Ct&-Ct:B.T!==null?Vu():Rd()}function pg(){if(en===0)if((Ct&536870912)===0||Dt){var e=no;no<<=1,(no&3932160)===0&&(no=262144),en=e}else en=536870912;return e=Ze.current,e!==null&&(e.flags|=32),en}function Ge(e,i,r){(e===Vt&&(jt===2||jt===9)||e.cancelPendingCommit!==null)&&(ia(e,0),Bi(e,Ct,en,!1)),Na(e,r),((Pt&2)===0||e!==Vt)&&(e===Vt&&((Pt&2)===0&&(ds|=r),re===4&&Bi(e,Ct,en,!1)),kn(e))}function gg(e,i,r){if((Pt&6)!==0)throw Error(s(327));var c=!r&&(i&127)===0&&(i&e.expiredLanes)===0||La(e,i),p=c?dv(e,i):Uu(e,i,!0),m=c;do{if(p===0){ta&&!c&&Bi(e,i,0,!1);break}else{if(r=e.current.alternate,m&&!uv(r)){p=Uu(e,i,!1),m=!1;continue}if(p===2){if(m=i,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var x=e;p=ur;var M=x.current.memoizedState.isDehydrated;if(M&&(ia(x,v).flags|=256),v=Uu(x,v,!1),v!==2){if(Ou&&!M){x.errorRecoveryDisabledLanes|=m,ds|=m,p=4;break t}m=Ie,Ie=p,m!==null&&(Ie===null?Ie=m:Ie.push.apply(Ie,m))}p=v}if(m=!1,p!==2)continue}}if(p===1){ia(e,0),Bi(e,i,0,!0);break}t:{switch(c=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Bi(c,i,en,!Li);break t;case 2:Ie=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=Yo+300-Ne(),10<p)){if(Bi(c,i,en,!Li),so(c,0,!0)!==0)break t;oi=i,c.timeoutHandle=Xg(mg.bind(null,c,r,Ie,Ko,Bu,i,en,ds,ea,Li,m,"Throttled",-0,0),p);break t}mg(c,r,Ie,Ko,Bu,i,en,ds,ea,Li,m,null,-0,0)}}break}while(!0);kn(e)}function mg(e,i,r,c,p,m,v,x,M,U,Y,K,H,V){if(e.timeoutHandle=-1,K=i.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},lg(i,m,K);var at=(m&62914560)===m?Yo-Ne():(m&4194048)===m?dg-Ne():0;if(at=$v(K,at),at!==null){oi=m,e.cancelPendingCommit=at(xg.bind(null,e,i,m,r,c,p,v,x,M,Y,K,null,H,V)),Bi(e,m,v,!U);return}}xg(e,i,m,r,c,p,v,x,M)}function uv(e){for(var i=e;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],m=p.getSnapshot;p=p.value;try{if(!We(m(),p))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bi(e,i,r,c){i&=~ku,i&=~ds,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var p=i;0<p;){var m=31-Ke(p),v=1<<m;c[m]=-1,p&=~v}r!==0&&_d(e,r,i)}function Wo(){return(Pt&6)===0?(dr(0),!1):!0}function Fu(){if(_t!==null){if(jt===0)var e=_t.return;else e=_t,Wn=is=null,eu(e),Ys=null,$a=0,e=_t;for(;e!==null;)Yp(e.alternate,e),e=e.return;_t=null}}function ia(e,i){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Dv(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),oi=0,Fu(),Vt=e,_t=r=$n(e.current,null),Ct=i,jt=0,tn=null,Li=!1,ta=La(e,i),Ou=!1,ea=en=ku=ds=Ni=re=0,Ie=ur=null,Bu=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var p=31-Ke(c),m=1<<p;i|=e[p],c&=~m}return ri=i,yo(),r}function yg(e,i){St=null,B.H=nr,i===Xs||i===_o?(i=Of(),jt=3):i===Gc?(i=Of(),jt=4):jt=i===yu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,tn=i,_t===null&&(re=1,Fo(e,hn(i,e.current)))}function bg(){var e=Ze.current;return e===null?!0:(Ct&4194048)===Ct?gn===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?e===gn:!1}function vg(){var e=B.H;return B.H=nr,e===null?nr:e}function Ag(){var e=B.A;return B.A=lv,e}function Qo(){re=4,Li||(Ct&4194048)!==Ct&&Ze.current!==null||(ta=!0),(Ni&134217727)===0&&(ds&134217727)===0||Vt===null||Bi(Vt,Ct,en,!1)}function Uu(e,i,r){var c=Pt;Pt|=2;var p=vg(),m=Ag();(Vt!==e||Ct!==i)&&(Ko=null,ia(e,i)),i=!1;var v=re;t:do try{if(jt!==0&&_t!==null){var x=_t,M=tn;switch(jt){case 8:Fu(),v=6;break t;case 3:case 2:case 9:case 6:Ze.current===null&&(i=!0);var U=jt;if(jt=0,tn=null,sa(e,x,M,U),r&&ta){v=0;break t}break;default:U=jt,jt=0,tn=null,sa(e,x,M,U)}}hv(),v=re;break}catch(Y){yg(e,Y)}while(!0);return i&&e.shellSuspendCounter++,Wn=is=null,Pt=c,B.H=p,B.A=m,_t===null&&(Vt=null,Ct=0,yo()),v}function hv(){for(;_t!==null;)Sg(_t)}function dv(e,i){var r=Pt;Pt|=2;var c=vg(),p=Ag();Vt!==e||Ct!==i?(Ko=null,$o=Ne()+500,ia(e,i)):ta=La(e,i);t:do try{if(jt!==0&&_t!==null){i=_t;var m=tn;e:switch(jt){case 1:jt=0,tn=null,sa(e,i,m,1);break;case 2:case 9:if(Lf(m)){jt=0,tn=null,wg(i);break}i=function(){jt!==2&&jt!==9||Vt!==e||(jt=7),kn(e)},m.then(i,i);break t;case 3:jt=7;break t;case 4:jt=5;break t;case 7:Lf(m)?(jt=0,tn=null,wg(i)):(jt=0,tn=null,sa(e,i,m,7));break;case 5:var v=null;switch(_t.tag){case 26:v=_t.memoizedState;case 5:case 27:var x=_t;if(v?om(v):x.stateNode.complete){jt=0,tn=null;var M=x.sibling;if(M!==null)_t=M;else{var U=x.return;U!==null?(_t=U,Zo(U)):_t=null}break e}}jt=0,tn=null,sa(e,i,m,5);break;case 6:jt=0,tn=null,sa(e,i,m,6);break;case 8:Fu(),re=6;break t;default:throw Error(s(462))}}fv();break}catch(Y){yg(e,Y)}while(!0);return Wn=is=null,B.H=c,B.A=p,Pt=r,_t!==null?0:(Vt=null,Ct=0,yo(),re)}function fv(){for(;_t!==null&&!Jl();)Sg(_t)}function Sg(e){var i=qp(e.alternate,e,ri);e.memoizedProps=e.pendingProps,i===null?Zo(e):_t=i}function wg(e){var i=e,r=i.alternate;switch(i.tag){case 15:case 0:i=Fp(r,i,i.pendingProps,i.type,void 0,Ct);break;case 11:i=Fp(r,i,i.pendingProps,i.type.render,i.ref,Ct);break;case 5:eu(i);default:Yp(r,i),i=_t=Af(i,ri),i=qp(r,i,ri)}e.memoizedProps=e.pendingProps,i===null?Zo(e):_t=i}function sa(e,i,r,c){Wn=is=null,eu(i),Ys=null,$a=0;var p=i.return;try{if(ev(e,p,i,r,Ct)){re=1,Fo(e,hn(r,e.current)),_t=null;return}}catch(m){if(p!==null)throw _t=p,m;re=1,Fo(e,hn(r,e.current)),_t=null;return}i.flags&32768?(Dt||c===1?e=!0:ta||(Ct&536870912)!==0?e=!1:(Li=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ze.current,c!==null&&c.tag===13&&(c.flags|=16384))),Eg(i,e)):Zo(i)}function Zo(e){var i=e;do{if((i.flags&32768)!==0){Eg(i,Li);return}e=i.return;var r=sv(i.alternate,i,ri);if(r!==null){_t=r;return}if(i=i.sibling,i!==null){_t=i;return}_t=i=e}while(i!==null);re===0&&(re=5)}function Eg(e,i){do{var r=av(e.alternate,e);if(r!==null){r.flags&=32767,_t=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(e=e.sibling,e!==null)){_t=e;return}_t=e=r}while(e!==null);re=6,_t=null}function xg(e,i,r,c,p,m,v,x,M){e.cancelPendingCommit=null;do Jo();while(me!==0);if((Pt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Rc,Xb(e,r,m,v,x,M),e===Vt&&(_t=Vt=null,Ct=0),na=i,ki=e,oi=r,Pu=m,zu=p,fg=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yv(wn,function(){return Mg(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,p=G.p,G.p=2,v=Pt,Pt|=4;try{rv(e,i,r)}finally{Pt=v,G.p=p,B.T=c}}me=1,_g(),Tg(),Cg()}}function _g(){if(me===1){me=0;var e=ki,i=na,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var c=G.p;G.p=2;var p=Pt;Pt|=4;try{ag(i,e);var m=Zu,v=hf(e.containerInfo),x=m.focusedElem,M=m.selectionRange;if(v!==x&&x&&x.ownerDocument&&uf(x.ownerDocument.documentElement,x)){if(M!==null&&Ec(x)){var U=M.start,Y=M.end;if(Y===void 0&&(Y=U),"selectionStart"in x)x.selectionStart=U,x.selectionEnd=Math.min(Y,x.value.length);else{var K=x.ownerDocument||document,H=K&&K.defaultView||window;if(H.getSelection){var V=H.getSelection(),at=x.textContent.length,gt=Math.min(M.start,at),It=M.end===void 0?gt:Math.min(M.end,at);!V.extend&&gt>It&&(v=It,It=gt,gt=v);var j=cf(x,gt),N=cf(x,It);if(j&&N&&(V.rangeCount!==1||V.anchorNode!==j.node||V.anchorOffset!==j.offset||V.focusNode!==N.node||V.focusOffset!==N.offset)){var F=K.createRange();F.setStart(j.node,j.offset),V.removeAllRanges(),gt>It?(V.addRange(F),V.extend(N.node,N.offset)):(F.setEnd(N.node,N.offset),V.addRange(F))}}}}for(K=[],V=x;V=V.parentNode;)V.nodeType===1&&K.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<K.length;x++){var $=K[x];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}hl=!!Qu,Zu=Qu=null}finally{Pt=p,G.p=c,B.T=r}}e.current=i,me=2}}function Tg(){if(me===2){me=0;var e=ki,i=na,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var c=G.p;G.p=2;var p=Pt;Pt|=4;try{tg(e,i.alternate,i)}finally{Pt=p,G.p=c,B.T=r}}me=3}}function Cg(){if(me===4||me===3){me=0,tc();var e=ki,i=na,r=oi,c=fg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?me=5:(me=0,na=ki=null,Rg(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(Oi=null),sc(r),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Da,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=B.T,p=G.p,G.p=2,B.T=null;try{for(var m=e.onRecoverableError,v=0;v<c.length;v++){var x=c[v];m(x.value,{componentStack:x.stack})}}finally{B.T=i,G.p=p}}(oi&3)!==0&&Jo(),kn(e),p=e.pendingLanes,(r&261930)!==0&&(p&42)!==0?e===ju?hr++:(hr=0,ju=e):hr=0,dr(0)}}function Rg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Xa(i)))}function Jo(){return _g(),Tg(),Cg(),Mg()}function Mg(){if(me!==5)return!1;var e=ki,i=Pu;Pu=0;var r=sc(oi),c=B.T,p=G.p;try{G.p=32>r?32:r,B.T=null,r=zu,zu=null;var m=ki,v=oi;if(me=0,na=ki=null,oi=0,(Pt&6)!==0)throw Error(s(331));var x=Pt;if(Pt|=4,ug(m.current),og(m,m.current,v,r),Pt=x,dr(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Da,m)}catch{}return!0}finally{G.p=p,B.T=c,Rg(e,i)}}function Dg(e,i,r){i=hn(r,i),i=mu(e.stateNode,i,2),e=Ci(e,i,2),e!==null&&(Na(e,2),kn(e))}function Ft(e,i,r){if(e.tag===3)Dg(e,e,r);else for(;i!==null;){if(i.tag===3){Dg(i,e,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Oi===null||!Oi.has(c))){e=hn(r,e),r=Lp(2),c=Ci(i,r,2),c!==null&&(Np(r,c,i,e),Na(c,2),kn(c));break}}i=i.return}}function Hu(e,i,r){var c=e.pingCache;if(c===null){c=e.pingCache=new cv;var p=new Set;c.set(i,p)}else p=c.get(i),p===void 0&&(p=new Set,c.set(i,p));p.has(r)||(Ou=!0,p.add(r),e=pv.bind(null,e,i,r),i.then(e,e))}function pv(e,i,r){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Vt===e&&(Ct&r)===r&&(re===4||re===3&&(Ct&62914560)===Ct&&300>Ne()-Yo?(Pt&2)===0&&ia(e,0):ku|=r,ea===Ct&&(ea=0)),kn(e)}function Lg(e,i){i===0&&(i=xd()),e=ts(e,i),e!==null&&(Na(e,i),kn(e))}function gv(e){var i=e.memoizedState,r=0;i!==null&&(r=i.retryLane),Lg(e,r)}function mv(e,i){var r=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Lg(e,r)}function yv(e,i){return Ma(e,i)}var tl=null,aa=null,Iu=!1,el=!1,Gu=!1,Pi=0;function kn(e){e!==aa&&e.next===null&&(aa===null?tl=aa=e:aa=aa.next=e),el=!0,Iu||(Iu=!0,vv())}function dr(e,i){if(!Gu&&el){Gu=!0;do for(var r=!1,c=tl;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var m=0;else{var v=c.suspendedLanes,x=c.pingedLanes;m=(1<<31-Ke(42|e)+1)-1,m&=p&~(v&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Bg(c,m))}else m=Ct,m=so(c,c===Vt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||La(c,m)||(r=!0,Bg(c,m));c=c.next}while(r);Gu=!1}}function bv(){Ng()}function Ng(){el=Iu=!1;var e=0;Pi!==0&&Mv()&&(e=Pi);for(var i=Ne(),r=null,c=tl;c!==null;){var p=c.next,m=Og(c,i);m===0?(c.next=null,r===null?tl=p:r.next=p,p===null&&(aa=r)):(r=c,(e!==0||(m&3)!==0)&&(el=!0)),c=p}me!==0&&me!==5||dr(e),Pi!==0&&(Pi=0)}function Og(e,i){for(var r=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Ke(m),x=1<<v,M=p[v];M===-1?((x&r)===0||(x&c)!==0)&&(p[v]=qb(x,i)):M<=i&&(e.expiredLanes|=x),m&=~x}if(i=Vt,r=Ct,r=so(e,e===i?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,r===0||e===i&&(jt===2||jt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&yi(c),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||La(e,r)){if(i=r&-r,i===e.callbackPriority)return i;switch(c!==null&&yi(c),sc(r)){case 2:case 8:r=Sn;break;case 32:r=wn;break;case 268435456:r=_s;break;default:r=wn}return c=kg.bind(null,e),r=Ma(r,c),e.callbackPriority=i,e.callbackNode=r,i}return c!==null&&c!==null&&yi(c),e.callbackPriority=2,e.callbackNode=null,2}function kg(e,i){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Jo()&&e.callbackNode!==r)return null;var c=Ct;return c=so(e,e===Vt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(gg(e,c,i),Og(e,Ne()),e.callbackNode!=null&&e.callbackNode===r?kg.bind(null,e):null)}function Bg(e,i){if(Jo())return null;gg(e,i,!0)}function vv(){Lv(function(){(Pt&6)!==0?Ma(to,bv):Ng()})}function Vu(){if(Pi===0){var e=Vs;e===0&&(e=eo,eo<<=1,(eo&261888)===0&&(eo=256)),Pi=e}return Pi}function Pg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:lo(""+e)}function zg(e,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,e.id&&r.setAttribute("form",e.id),i.parentNode.insertBefore(r,i),e=new FormData(e),r.parentNode.removeChild(r),e}function Av(e,i,r,c,p){if(i==="submit"&&r&&r.stateNode===p){var m=Pg((p[ze]||null).action),v=c.submitter;v&&(i=(i=v[ze]||null)?Pg(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var x=new fo("action","action",null,c,p);e.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Pi!==0){var M=v?zg(p,v):new FormData(p);uu(r,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(x.preventDefault(),M=v?zg(p,v):new FormData(p),uu(r,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var qu=0;qu<Cc.length;qu++){var Xu=Cc[qu],Sv=Xu.toLowerCase(),wv=Xu[0].toUpperCase()+Xu.slice(1);En(Sv,"on"+wv)}En(pf,"onAnimationEnd"),En(gf,"onAnimationIteration"),En(mf,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(j0,"onTransitionRun"),En(F0,"onTransitionStart"),En(U0,"onTransitionCancel"),En(yf,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ev=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fr));function jg(e,i){i=(i&4)!==0;for(var r=0;r<e.length;r++){var c=e[r],p=c.event;c=c.listeners;t:{var m=void 0;if(i)for(var v=c.length-1;0<=v;v--){var x=c[v],M=x.instance,U=x.currentTarget;if(x=x.listener,M!==m&&p.isPropagationStopped())break t;m=x,p.currentTarget=U;try{m(p)}catch(Y){mo(Y)}p.currentTarget=null,m=M}else for(v=0;v<c.length;v++){if(x=c[v],M=x.instance,U=x.currentTarget,x=x.listener,M!==m&&p.isPropagationStopped())break t;m=x,p.currentTarget=U;try{m(p)}catch(Y){mo(Y)}p.currentTarget=null,m=M}}}}function Tt(e,i){var r=i[ac];r===void 0&&(r=i[ac]=new Set);var c=e+"__bubble";r.has(c)||(Fg(i,e,2,!1),r.add(c))}function Yu(e,i,r){var c=0;i&&(c|=4),Fg(r,e,c,i)}var nl="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[nl]){e[nl]=!0,Ld.forEach(function(r){r!=="selectionchange"&&(Ev.has(r)||Yu(r,!1,e),Yu(r,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[nl]||(i[nl]=!0,Yu("selectionchange",!1,i))}}function Fg(e,i,r,c){switch(pm(i)){case 2:var p=Qv;break;case 8:p=Zv;break;default:p=ch}r=p.bind(null,i,r,e),p=void 0,!pc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(i,r,{capture:!0,passive:p}):e.addEventListener(i,r,!0):p!==void 0?e.addEventListener(i,r,{passive:p}):e.addEventListener(i,r,!1)}function Ku(e,i,r,c,p){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var x=c.stateNode.containerInfo;if(x===p)break;if(v===4)for(v=c.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;x!==null;){if(v=Cs(x),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){c=m=v;continue t}x=x.parentNode}}c=c.return}Gd(function(){var U=m,Y=dc(r),K=[];t:{var H=bf.get(e);if(H!==void 0){var V=fo,at=e;switch(e){case"keypress":if(uo(r)===0)break t;case"keydown":case"keyup":V=m0;break;case"focusin":at="focus",V=bc;break;case"focusout":at="blur",V=bc;break;case"beforeblur":case"afterblur":V=bc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=s0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=v0;break;case pf:case gf:case mf:V=o0;break;case yf:V=S0;break;case"scroll":case"scrollend":V=n0;break;case"wheel":V=E0;break;case"copy":case"cut":case"paste":V=c0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=$d;break;case"toggle":case"beforetoggle":V=_0}var gt=(i&4)!==0,It=!gt&&(e==="scroll"||e==="scrollend"),j=gt?H!==null?H+"Capture":null:H;gt=[];for(var N=U,F;N!==null;){var $=N;if(F=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||F===null||j===null||($=Ba(N,j),$!=null&&gt.push(pr(N,$,F))),It)break;N=N.return}0<gt.length&&(H=new V(H,at,null,r,Y),K.push({event:H,listeners:gt}))}}if((i&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",H&&r!==hc&&(at=r.relatedTarget||r.fromElement)&&(Cs(at)||at[Ts]))break t;if((V||H)&&(H=Y.window===Y?Y:(H=Y.ownerDocument)?H.defaultView||H.parentWindow:window,V?(at=r.relatedTarget||r.toElement,V=U,at=at?Cs(at):null,at!==null&&(It=o(at),gt=at.tag,at!==It||gt!==5&&gt!==27&&gt!==6)&&(at=null)):(V=null,at=U),V!==at)){if(gt=Xd,$="onMouseLeave",j="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(gt=$d,$="onPointerLeave",j="onPointerEnter",N="pointer"),It=V==null?H:ka(V),F=at==null?H:ka(at),H=new gt($,N+"leave",V,r,Y),H.target=It,H.relatedTarget=F,$=null,Cs(Y)===U&&(gt=new gt(j,N+"enter",at,r,Y),gt.target=F,gt.relatedTarget=It,$=gt),It=$,V&&at)e:{for(gt=xv,j=V,N=at,F=0,$=j;$;$=gt($))F++;$=0;for(var ut=N;ut;ut=gt(ut))$++;for(;0<F-$;)j=gt(j),F--;for(;0<$-F;)N=gt(N),$--;for(;F--;){if(j===N||N!==null&&j===N.alternate){gt=j;break e}j=gt(j),N=gt(N)}gt=null}else gt=null;V!==null&&Ug(K,H,V,gt,!1),at!==null&&It!==null&&Ug(K,It,at,gt,!0)}}t:{if(H=U?ka(U):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var kt=nf;else if(tf(H))if(sf)kt=B0;else{kt=O0;var rt=N0}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?U&&uc(U.elementType)&&(kt=nf):kt=k0;if(kt&&(kt=kt(e,U))){ef(K,kt,r,Y);break t}rt&&rt(e,H,U),e==="focusout"&&U&&H.type==="number"&&U.memoizedProps.value!=null&&cc(H,"number",H.value)}switch(rt=U?ka(U):window,e){case"focusin":(tf(rt)||rt.contentEditable==="true")&&(Ps=rt,xc=U,Ga=null);break;case"focusout":Ga=xc=Ps=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,df(K,r,Y);break;case"selectionchange":if(z0)break;case"keydown":case"keyup":df(K,r,Y)}var wt;if(Ac)t:{switch(e){case"compositionstart":var Rt="onCompositionStart";break t;case"compositionend":Rt="onCompositionEnd";break t;case"compositionupdate":Rt="onCompositionUpdate";break t}Rt=void 0}else Bs?Zd(e,r)&&(Rt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Rt="onCompositionStart");Rt&&(Kd&&r.locale!=="ko"&&(Bs||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Bs&&(wt=Vd()):(Ai=Y,gc="value"in Ai?Ai.value:Ai.textContent,Bs=!0)),rt=il(U,Rt),0<rt.length&&(Rt=new Yd(Rt,e,null,r,Y),K.push({event:Rt,listeners:rt}),wt?Rt.data=wt:(wt=Jd(r),wt!==null&&(Rt.data=wt)))),(wt=C0?R0(e,r):M0(e,r))&&(Rt=il(U,"onBeforeInput"),0<Rt.length&&(rt=new Yd("onBeforeInput","beforeinput",null,r,Y),K.push({event:rt,listeners:Rt}),rt.data=wt)),Av(K,e,U,r,Y)}jg(K,i)})}function pr(e,i,r){return{instance:e,listener:i,currentTarget:r}}function il(e,i){for(var r=i+"Capture",c=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Ba(e,r),p!=null&&c.unshift(pr(e,p,m)),p=Ba(e,i),p!=null&&c.push(pr(e,p,m))),e.tag===3)return c;e=e.return}return[]}function xv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ug(e,i,r,c,p){for(var m=i._reactName,v=[];r!==null&&r!==c;){var x=r,M=x.alternate,U=x.stateNode;if(x=x.tag,M!==null&&M===c)break;x!==5&&x!==26&&x!==27||U===null||(M=U,p?(U=Ba(r,m),U!=null&&v.unshift(pr(r,U,M))):p||(U=Ba(r,m),U!=null&&v.push(pr(r,U,M)))),r=r.return}v.length!==0&&e.push({event:i,listeners:v})}var _v=/\r\n?/g,Tv=/\u0000|\uFFFD/g;function Hg(e){return(typeof e=="string"?e:""+e).replace(_v,`
`).replace(Tv,"")}function Ig(e,i){return i=Hg(i),Hg(e)===i}function Ht(e,i,r,c,p,m){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Ns(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Ns(e,""+c);break;case"className":ro(e,"class",c);break;case"tabIndex":ro(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ro(e,r,c);break;case"style":Hd(e,c,m);break;case"data":if(i!=="object"){ro(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){e.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=lo(""+c),e.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(i!=="input"&&Ht(e,i,"name",p.name,p,null),Ht(e,i,"formEncType",p.formEncType,p,null),Ht(e,i,"formMethod",p.formMethod,p,null),Ht(e,i,"formTarget",p.formTarget,p,null)):(Ht(e,i,"encType",p.encType,p,null),Ht(e,i,"method",p.method,p,null),Ht(e,i,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=lo(""+c),e.setAttribute(r,c);break;case"onClick":c!=null&&(e.onclick=Xn);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}r=lo(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""+c):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":c===!0?e.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,c):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(r,c):e.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(r):e.setAttribute(r,c);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),ao(e,"popover",c);break;case"xlinkActuate":qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ao(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=t0.get(r)||r,ao(e,r,c))}}function Wu(e,i,r,c,p,m){switch(r){case"style":Hd(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof c=="string"?Ns(e,c):(typeof c=="number"||typeof c=="bigint")&&Ns(e,""+c);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nd.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),i=r.slice(2,p?r.length-7:void 0),m=e[ze]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(i,m,p),typeof c=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(i,c,p);break t}r in e?e[r]=c:c===!0?e.setAttribute(r,""):ao(e,r,c)}}}function Te(e,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var c=!1,p=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ht(e,i,m,v,r,null)}}p&&Ht(e,i,"srcSet",r.srcSet,r,null),c&&Ht(e,i,"src",r.src,r,null);return;case"input":Tt("invalid",e);var x=m=v=p=null,M=null,U=null;for(c in r)if(r.hasOwnProperty(c)){var Y=r[c];if(Y!=null)switch(c){case"name":p=Y;break;case"type":v=Y;break;case"checked":M=Y;break;case"defaultChecked":U=Y;break;case"value":m=Y;break;case"defaultValue":x=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Ht(e,i,c,Y,r,null)}}zd(e,m,x,M,U,v,p,!1);return;case"select":Tt("invalid",e),c=v=m=null;for(p in r)if(r.hasOwnProperty(p)&&(x=r[p],x!=null))switch(p){case"value":m=x;break;case"defaultValue":v=x;break;case"multiple":c=x;default:Ht(e,i,p,x,r,null)}i=m,r=v,e.multiple=!!c,i!=null?Ls(e,!!c,i,!1):r!=null&&Ls(e,!!c,r,!0);return;case"textarea":Tt("invalid",e),m=p=c=null;for(v in r)if(r.hasOwnProperty(v)&&(x=r[v],x!=null))switch(v){case"value":c=x;break;case"defaultValue":p=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:Ht(e,i,v,x,r,null)}Fd(e,c,p,m);return;case"option":for(M in r)if(r.hasOwnProperty(M)&&(c=r[M],c!=null))switch(M){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ht(e,i,M,c,r,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(c=0;c<fr.length;c++)Tt(fr[c],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(c=r[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ht(e,i,U,c,r,null)}return;default:if(uc(i)){for(Y in r)r.hasOwnProperty(Y)&&(c=r[Y],c!==void 0&&Wu(e,i,Y,c,r,void 0));return}}for(x in r)r.hasOwnProperty(x)&&(c=r[x],c!=null&&Ht(e,i,x,c,r,null))}function Cv(e,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,v=null,x=null,M=null,U=null,Y=null;for(V in r){var K=r[V];if(r.hasOwnProperty(V)&&K!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":M=K;default:c.hasOwnProperty(V)||Ht(e,i,V,null,c,K)}}for(var H in c){var V=c[H];if(K=r[H],c.hasOwnProperty(H)&&(V!=null||K!=null))switch(H){case"type":m=V;break;case"name":p=V;break;case"checked":U=V;break;case"defaultChecked":Y=V;break;case"value":v=V;break;case"defaultValue":x=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,i));break;default:V!==K&&Ht(e,i,H,V,c,K)}}lc(e,v,x,M,U,Y,m,p);return;case"select":V=v=x=H=null;for(m in r)if(M=r[m],r.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":V=M;default:c.hasOwnProperty(m)||Ht(e,i,m,null,c,M)}for(p in c)if(m=c[p],M=r[p],c.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":H=m;break;case"defaultValue":x=m;break;case"multiple":v=m;default:m!==M&&Ht(e,i,p,m,c,M)}i=x,r=v,c=V,H!=null?Ls(e,!!r,H,!1):!!c!=!!r&&(i!=null?Ls(e,!!r,i,!0):Ls(e,!!r,r?[]:"",!1));return;case"textarea":V=H=null;for(x in r)if(p=r[x],r.hasOwnProperty(x)&&p!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ht(e,i,x,null,c,p)}for(v in c)if(p=c[v],m=r[v],c.hasOwnProperty(v)&&(p!=null||m!=null))switch(v){case"value":H=p;break;case"defaultValue":V=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&Ht(e,i,v,p,c,m)}jd(e,H,V);return;case"option":for(var at in r)if(H=r[at],r.hasOwnProperty(at)&&H!=null&&!c.hasOwnProperty(at))switch(at){case"selected":e.selected=!1;break;default:Ht(e,i,at,null,c,H)}for(M in c)if(H=c[M],V=r[M],c.hasOwnProperty(M)&&H!==V&&(H!=null||V!=null))switch(M){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ht(e,i,M,H,c,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in r)H=r[gt],r.hasOwnProperty(gt)&&H!=null&&!c.hasOwnProperty(gt)&&Ht(e,i,gt,null,c,H);for(U in c)if(H=c[U],V=r[U],c.hasOwnProperty(U)&&H!==V&&(H!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Ht(e,i,U,H,c,V)}return;default:if(uc(i)){for(var It in r)H=r[It],r.hasOwnProperty(It)&&H!==void 0&&!c.hasOwnProperty(It)&&Wu(e,i,It,void 0,c,H);for(Y in c)H=c[Y],V=r[Y],!c.hasOwnProperty(Y)||H===V||H===void 0&&V===void 0||Wu(e,i,Y,H,c,V);return}}for(var j in r)H=r[j],r.hasOwnProperty(j)&&H!=null&&!c.hasOwnProperty(j)&&Ht(e,i,j,null,c,H);for(K in c)H=c[K],V=r[K],!c.hasOwnProperty(K)||H===V||H==null&&V==null||Ht(e,i,K,H,c,V)}function Gg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var p=r[c],m=p.transferSize,v=p.initiatorType,x=p.duration;if(m&&x&&Gg(v)){for(v=0,x=p.responseEnd,c+=1;c<r.length;c++){var M=r[c],U=M.startTime;if(U>x)break;var Y=M.transferSize,K=M.initiatorType;Y&&Gg(K)&&(M=M.responseEnd,v+=Y*(M<x?1:(x-U)/(M-U)))}if(--c,i+=8*(m+v)/(p.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Qu=null,Zu=null;function sl(e){return e.nodeType===9?e:e.ownerDocument}function Vg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qg(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Ju(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var th=null;function Mv(){var e=window.event;return e&&e.type==="popstate"?e===th?!1:(th=e,!0):(th=null,!1)}var Xg=typeof setTimeout=="function"?setTimeout:void 0,Dv=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,Lv=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(e){return Yg.resolve(null).then(e).catch(Nv)}:Xg;function Nv(e){setTimeout(function(){throw e})}function zi(e){return e==="head"}function $g(e,i){var r=i,c=0;do{var p=r.nextSibling;if(e.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(c===0){e.removeChild(p),ca(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")gr(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,gr(r);for(var m=r.firstChild;m;){var v=m.nextSibling,x=m.nodeName;m[Oa]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&gr(e.ownerDocument.body);r=p}while(r);ca(i)}function Kg(e,i){var r=e;e=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=c}while(r)}function eh(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":eh(r),rc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Ov(e,i,r,c){for(;e.nodeType===1;){var p=r;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Oa])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=mn(e.nextSibling),e===null)break}return null}function kv(e,i,r){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=mn(e.nextSibling),e===null))return null;return e}function Wg(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=mn(e.nextSibling),e===null))return null;return e}function nh(e){return e.data==="$?"||e.data==="$~"}function ih(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Bv(e,i){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function mn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var sh=null;function Qg(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(i===0)return mn(e.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}e=e.nextSibling}return null}function Zg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return e;i--}else r!=="/$"&&r!=="/&"||i++}e=e.previousSibling}return null}function Jg(e,i,r){switch(i=sl(r),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function gr(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);rc(e)}var yn=new Map,tm=new Set;function al(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var li=G.d;G.d={f:Pv,r:zv,D:jv,C:Fv,L:Uv,m:Hv,X:Gv,S:Iv,M:Vv};function Pv(){var e=li.f(),i=Wo();return e||i}function zv(e){var i=Rs(e);i!==null&&i.tag===5&&i.type==="form"?yp(i):li.r(e)}var ra=typeof document>"u"?null:document;function em(e,i,r){var c=ra;if(c&&typeof i=="string"&&i){var p=cn(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),tm.has(p)||(tm.add(p),e={rel:e,crossOrigin:r,href:i},c.querySelector(p)===null&&(i=c.createElement("link"),Te(i,"link",e),ye(i),c.head.appendChild(i)))}}function jv(e){li.D(e),em("dns-prefetch",e,null)}function Fv(e,i){li.C(e,i),em("preconnect",e,i)}function Uv(e,i,r){li.L(e,i,r);var c=ra;if(c&&e&&i){var p='link[rel="preload"][as="'+cn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+cn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+cn(r.imageSizes)+'"]')):p+='[href="'+cn(e)+'"]';var m=p;switch(i){case"style":m=oa(e);break;case"script":m=la(e)}yn.has(m)||(e=y({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:e,as:i},r),yn.set(m,e),c.querySelector(p)!==null||i==="style"&&c.querySelector(mr(m))||i==="script"&&c.querySelector(yr(m))||(i=c.createElement("link"),Te(i,"link",e),ye(i),c.head.appendChild(i)))}}function Hv(e,i){li.m(e,i);var r=ra;if(r&&e){var c=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+cn(c)+'"][href="'+cn(e)+'"]',m=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=la(e)}if(!yn.has(m)&&(e=y({rel:"modulepreload",href:e},i),yn.set(m,e),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(yr(m)))return}c=r.createElement("link"),Te(c,"link",e),ye(c),r.head.appendChild(c)}}}function Iv(e,i,r){li.S(e,i,r);var c=ra;if(c&&e){var p=Ms(c).hoistableStyles,m=oa(e);i=i||"default";var v=p.get(m);if(!v){var x={loading:0,preload:null};if(v=c.querySelector(mr(m)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":i},r),(r=yn.get(m))&&ah(e,r);var M=v=c.createElement("link");ye(M),Te(M,"link",e),M._p=new Promise(function(U,Y){M.onload=U,M.onerror=Y}),M.addEventListener("load",function(){x.loading|=1}),M.addEventListener("error",function(){x.loading|=2}),x.loading|=4,rl(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:x},p.set(m,v)}}}function Gv(e,i){li.X(e,i);var r=ra;if(r&&e){var c=Ms(r).hoistableScripts,p=la(e),m=c.get(p);m||(m=r.querySelector(yr(p)),m||(e=y({src:e,async:!0},i),(i=yn.get(p))&&rh(e,i),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function Vv(e,i){li.M(e,i);var r=ra;if(r&&e){var c=Ms(r).hoistableScripts,p=la(e),m=c.get(p);m||(m=r.querySelector(yr(p)),m||(e=y({src:e,async:!0,type:"module"},i),(i=yn.get(p))&&rh(e,i),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function nm(e,i,r,c){var p=(p=ft.current)?al(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=oa(r.href),r=Ms(p).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=oa(r.href);var m=Ms(p).hoistableStyles,v=m.get(e);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=p.querySelector(mr(e)))&&!m._p&&(v.instance=m,v.state.loading=5),yn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},yn.set(e,r),m||qv(p,e,r,v.state))),i&&c===null)throw Error(s(528,""));return v}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=la(r),r=Ms(p).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function oa(e){return'href="'+cn(e)+'"'}function mr(e){return'link[rel="stylesheet"]['+e+"]"}function im(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function qv(e,i,r,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Te(i,"link",r),ye(i),e.head.appendChild(i))}function la(e){return'[src="'+cn(e)+'"]'}function yr(e){return"script[async]"+e}function sm(e,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+cn(r.href)+'"]');if(c)return i.instance=c,ye(c),c;var p=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ye(c),Te(c,"style",p),rl(c,r.precedence,e),i.instance=c;case"stylesheet":p=oa(r.href);var m=e.querySelector(mr(p));if(m)return i.state.loading|=4,i.instance=m,ye(m),m;c=im(r),(p=yn.get(p))&&ah(c,p),m=(e.ownerDocument||e).createElement("link"),ye(m);var v=m;return v._p=new Promise(function(x,M){v.onload=x,v.onerror=M}),Te(m,"link",c),i.state.loading|=4,rl(m,r.precedence,e),i.instance=m;case"script":return m=la(r.src),(p=e.querySelector(yr(m)))?(i.instance=p,ye(p),p):(c=r,(p=yn.get(m))&&(c=y({},r),rh(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),ye(p),Te(p,"link",c),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,rl(c,r.precedence,e));return i.instance}function rl(e,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,m=p,v=0;v<c.length;v++){var x=c[v];if(x.dataset.precedence===i)m=x;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(e,i.firstChild))}function ah(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function rh(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ol=null;function am(e,i,r){if(ol===null){var c=new Map,p=ol=new Map;p.set(r,c)}else p=ol,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(e))return c;for(c.set(e,null),r=r.getElementsByTagName(e),p=0;p<r.length;p++){var m=r[p];if(!(m[Oa]||m[we]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=e+v;var x=c.get(v);x?x.push(m):c.set(v,[m])}}return c}function rm(e,i,r){e=e.ownerDocument||e,e.head.insertBefore(r,i==="title"?e.querySelector("head > title"):null)}function Xv(e,i,r){if(r===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function om(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Yv(e,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=oa(c.href),m=i.querySelector(mr(p));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=ll.bind(e),i.then(e,e)),r.state.loading|=4,r.instance=m,ye(m);return}m=i.ownerDocument||i,c=im(c),(p=yn.get(p))&&ah(c,p),m=m.createElement("link"),ye(m);var v=m;v._p=new Promise(function(x,M){v.onload=x,v.onerror=M}),Te(m,"link",c),r.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=ll.bind(e),i.addEventListener("load",r),i.addEventListener("error",r))}}var oh=0;function $v(e,i){return e.stylesheets&&e.count===0&&ul(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var c=setTimeout(function(){if(e.stylesheets&&ul(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+i);0<e.imgBytes&&oh===0&&(oh=62500*Rv());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ul(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>oh?50:800)+i);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function ll(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ul(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var cl=null;function ul(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,cl=new Map,i.forEach(Kv,e),cl=null,ll.call(e))}function Kv(e,i){if(!(i.state.loading&4)){var r=cl.get(e);if(r)var c=r.get(null);else{r=new Map,cl.set(e,r);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var v=p[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),c=v)}c&&r.set(null,c)}p=i.instance,v=p.getAttribute("data-precedence"),m=r.get(v)||c,m===c&&r.set(null,p),r.set(v,p),this.count++,c=ll.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var br={$$typeof:C,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Wv(e,i,r,c,p,m,v,x,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.hiddenUpdates=nc(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function lm(e,i,r,c,p,m,v,x,M,U,Y,K){return e=new Wv(e,i,r,v,M,U,Y,K,x),i=1,m===!0&&(i|=24),m=Qe(3,null,null,i),e.current=m,m.stateNode=e,i=Uc(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:i},Vc(m),e}function cm(e){return e?(e=Fs,e):Fs}function um(e,i,r,c,p,m){p=cm(p),c.context===null?c.context=p:c.pendingContext=p,c=Ti(i),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Ci(e,c,i),r!==null&&(Ge(r,e,i),Wa(r,e,i))}function hm(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<i?r:i}}function lh(e,i){hm(e,i),(e=e.alternate)&&hm(e,i)}function dm(e){if(e.tag===13||e.tag===31){var i=ts(e,67108864);i!==null&&Ge(i,e,67108864),lh(e,67108864)}}function fm(e){if(e.tag===13||e.tag===31){var i=nn();i=ic(i);var r=ts(e,i);r!==null&&Ge(r,e,i),lh(e,i)}}var hl=!0;function Qv(e,i,r,c){var p=B.T;B.T=null;var m=G.p;try{G.p=2,ch(e,i,r,c)}finally{G.p=m,B.T=p}}function Zv(e,i,r,c){var p=B.T;B.T=null;var m=G.p;try{G.p=8,ch(e,i,r,c)}finally{G.p=m,B.T=p}}function ch(e,i,r,c){if(hl){var p=uh(c);if(p===null)Ku(e,i,c,dl,r),gm(e,c);else if(tA(p,e,i,r,c))c.stopPropagation();else if(gm(e,c),i&4&&-1<Jv.indexOf(e)){for(;p!==null;){var m=Rs(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ki(m.pendingLanes);if(v!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;v;){var M=1<<31-Ke(v);x.entanglements[1]|=M,v&=~M}kn(m),(Pt&6)===0&&($o=Ne()+500,dr(0))}}break;case 31:case 13:x=ts(m,2),x!==null&&Ge(x,m,2),Wo(),lh(m,2)}if(m=uh(c),m===null&&Ku(e,i,c,dl,r),m===p)break;p=m}p!==null&&c.stopPropagation()}else Ku(e,i,c,null,r)}}function uh(e){return e=dc(e),hh(e)}var dl=null;function hh(e){if(dl=null,e=Cs(e),e!==null){var i=o(e);if(i===null)e=null;else{var r=i.tag;if(r===13){if(e=l(i),e!==null)return e;e=null}else if(r===31){if(e=u(i),e!==null)return e;e=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return dl=e,null}function pm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ec()){case to:return 2;case Sn:return 8;case wn:case Dn:return 32;case _s:return 268435456;default:return 32}default:return 32}}var dh=!1,ji=null,Fi=null,Ui=null,vr=new Map,Ar=new Map,Hi=[],Jv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gm(e,i){switch(e){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":vr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(i.pointerId)}}function Sr(e,i,r,c,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[p]},i!==null&&(i=Rs(i),i!==null&&dm(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function tA(e,i,r,c,p){switch(i){case"focusin":return ji=Sr(ji,e,i,r,c,p),!0;case"dragenter":return Fi=Sr(Fi,e,i,r,c,p),!0;case"mouseover":return Ui=Sr(Ui,e,i,r,c,p),!0;case"pointerover":var m=p.pointerId;return vr.set(m,Sr(vr.get(m)||null,e,i,r,c,p)),!0;case"gotpointercapture":return m=p.pointerId,Ar.set(m,Sr(Ar.get(m)||null,e,i,r,c,p)),!0}return!1}function mm(e){var i=Cs(e.target);if(i!==null){var r=o(i);if(r!==null){if(i=r.tag,i===13){if(i=l(r),i!==null){e.blockedOn=i,Md(e.priority,function(){fm(r)});return}}else if(i===31){if(i=u(r),i!==null){e.blockedOn=i,Md(e.priority,function(){fm(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fl(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var r=uh(e.nativeEvent);if(r===null){r=e.nativeEvent;var c=new r.constructor(r.type,r);hc=c,r.target.dispatchEvent(c),hc=null}else return i=Rs(r),i!==null&&dm(i),e.blockedOn=r,!1;i.shift()}return!0}function ym(e,i,r){fl(e)&&r.delete(i)}function eA(){dh=!1,ji!==null&&fl(ji)&&(ji=null),Fi!==null&&fl(Fi)&&(Fi=null),Ui!==null&&fl(Ui)&&(Ui=null),vr.forEach(ym),Ar.forEach(ym)}function pl(e,i){e.blockedOn===i&&(e.blockedOn=null,dh||(dh=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,eA)))}var gl=null;function bm(e){gl!==e&&(gl=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){gl===e&&(gl=null);for(var i=0;i<e.length;i+=3){var r=e[i],c=e[i+1],p=e[i+2];if(typeof c!="function"){if(hh(c||r)===null)continue;break}var m=Rs(r);m!==null&&(e.splice(i,3),i-=3,uu(m,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function ca(e){function i(M){return pl(M,e)}ji!==null&&pl(ji,e),Fi!==null&&pl(Fi,e),Ui!==null&&pl(Ui,e),vr.forEach(i),Ar.forEach(i);for(var r=0;r<Hi.length;r++){var c=Hi[r];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Hi.length&&(r=Hi[0],r.blockedOn===null);)mm(r),r.blockedOn===null&&Hi.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],m=r[c+1],v=p[ze]||null;if(typeof m=="function")v||bm(r);else if(v){var x=null;if(m&&m.hasAttribute("formAction")){if(p=m,v=m[ze]||null)x=v.formAction;else if(hh(p)!==null)continue}else x=v.action;typeof x=="function"?r[c+1]=x:(r.splice(c,3),c-=3),bm(r)}}}function vm(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function fh(e){this._internalRoot=e}ml.prototype.render=fh.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,c=nn();um(r,c,e,i,null,null)},ml.prototype.unmount=fh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;um(e.current,2,null,e,null,null),Wo(),i[Ts]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var i=Rd();e={blockedOn:null,target:e,priority:i};for(var r=0;r<Hi.length&&i!==0&&i<Hi[r].priority;r++);Hi.splice(r,0,e),r===0&&mm(e)}};var Am=t.version;if(Am!=="19.2.0")throw Error(s(527,Am,"19.2.0"));G.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var nA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{Da=yl.inject(nA),$e=yl}catch{}}return Er.createRoot=function(e,i){if(!a(e))throw Error(s(299));var r=!1,c="",p=Cp,m=Rp,v=Mp;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=lm(e,1,!1,null,null,r,c,null,p,m,v,vm),e[Ts]=i.current,$u(e),new fh(i)},Er.hydrateRoot=function(e,i,r){if(!a(e))throw Error(s(299));var c=!1,p="",m=Cp,v=Rp,x=Mp,M=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),i=lm(e,1,!0,i,r??null,c,p,M,m,v,x,vm),i.context=cm(null),r=i.current,c=nn(),c=ic(c),p=Ti(c),p.callback=null,Ci(r,p,c),r=c,i.current.lanes=r,Na(i,r),kn(i),e[Ts]=i.current,$u(e),new ml(i)},Er.version="19.2.0",Er}var Nm;function dA(){if(Nm)return yh.exports;Nm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),yh.exports=hA(),yh.exports}var fA=dA();const pA=Wh(fA);var Om="popstate";function gA(h={}){function t(s,a){let{pathname:o,search:l,hash:u}=s.location;return kh("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Br(a)}return yA(t,n,null,h)}function ne(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function Rn(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mA(){return Math.random().toString(36).substring(2,10)}function km(h,t){return{usr:h.state,key:h.key,idx:t}}function kh(h,t,n=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?_a(t):t,state:n,key:t&&t.key||s||mA()}}function Br({pathname:h="/",search:t="",hash:n=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(h+=n.charAt(0)==="#"?n:"#"+n),h}function _a(h){let t={};if(h){let n=h.indexOf("#");n>=0&&(t.hash=h.substring(n),h=h.substring(0,n));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function yA(h,t,n,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let _=g(),w=_==null?null:_-f;f=_,d&&d({action:u,location:S.location,delta:w})}function b(_,w){u="PUSH";let T=kh(S.location,_,w);f=g()+1;let C=km(T,f),O=S.createHref(T);try{l.pushState(C,"",O)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(O)}o&&d&&d({action:u,location:S.location,delta:1})}function A(_,w){u="REPLACE";let T=kh(S.location,_,w);f=g();let C=km(T,f),O=S.createHref(T);l.replaceState(C,"",O),o&&d&&d({action:u,location:S.location,delta:0})}function E(_){return bA(_)}let S={get action(){return u},get location(){return h(a,l)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Om,y),d=_,()=>{a.removeEventListener(Om,y),d=null}},createHref(_){return t(a,_)},createURL:E,encodeLocation(_){let w=E(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:A,go(_){return l.go(_)}};return S}function bA(h,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ne(n,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:Br(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function xy(h,t,n="/"){return vA(h,t,n,!1)}function vA(h,t,n,s){let a=typeof t=="string"?_a(t):t,o=di(a.pathname||"/",n);if(o==null)return null;let l=_y(h);AA(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=LA(o);u=MA(l[d],f,s)}return u}function _y(h,t=[],n=[],s="",a=!1){let o=(l,u,d=a,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;ne(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=hi([s,g.relativePath]),b=n.concat(g);l.children&&l.children.length>0&&(ne(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),_y(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:CA(y,l.index),routesMeta:b})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of Ty(l.path))o(l,u,!0,d)}),t}function Ty(h){let t=h.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=Ty(s.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function AA(h){h.sort((t,n)=>t.score!==n.score?n.score-t.score:RA(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var SA=/^:[\w-]+$/,wA=3,EA=2,xA=1,_A=10,TA=-2,Bm=h=>h==="*";function CA(h,t){let n=h.split("/"),s=n.length;return n.some(Bm)&&(s+=TA),t&&(s+=EA),n.filter(a=>!Bm(a)).reduce((a,o)=>a+(SA.test(o)?wA:o===""?xA:_A),s)}function RA(h,t){return h.length===t.length&&h.slice(0,-1).every((s,a)=>s===t[a])?h[h.length-1]-t[t.length-1]:0}function MA(h,t,n=!1){let{routesMeta:s}=h,a={},o="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],f=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Ol({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),b=d.route;if(!y&&f&&n&&!s[s.length-1].route.index&&(y=Ol({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:hi([o,y.pathname]),pathnameBase:BA(hi([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=hi([o,y.pathnameBase]))}return l}function Ol(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[n,s]=DA(h.path,h.caseSensitive,h.end),a=t.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let E=u[b]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?f[g]=void 0:f[g]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:h}}function DA(h,t=!1,n=!0){Rn(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function LA(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rn(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function di(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=h.charAt(n);return s&&s!=="/"?null:h.slice(n)||"/"}function NA(h,t="/"){let{pathname:n,search:s="",hash:a=""}=typeof h=="string"?_a(h):h;return{pathname:n?n.startsWith("/")?n:OA(n,t):t,search:PA(s),hash:zA(a)}}function OA(h,t){let n=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Sh(h,t,n,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kA(h){return h.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Cy(h){let t=kA(h);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function Ry(h,t,n,s=!1){let a;typeof h=="string"?a=_a(h):(a={...h},ne(!a.pathname||!a.pathname.includes("?"),Sh("?","pathname","search",a)),ne(!a.pathname||!a.pathname.includes("#"),Sh("#","pathname","hash",a)),ne(!a.search||!a.search.includes("#"),Sh("#","search","hash",a)));let o=h===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=n;else{let y=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=NA(a,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var hi=h=>h.join("/").replace(/\/\/+/g,"/"),BA=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),PA=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,zA=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function jA(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var My=["POST","PUT","PATCH","DELETE"];new Set(My);var FA=["GET",...My];new Set(FA);var Ta=L.createContext(null);Ta.displayName="DataRouter";var Hl=L.createContext(null);Hl.displayName="DataRouterState";L.createContext(!1);var Dy=L.createContext({isTransitioning:!1});Dy.displayName="ViewTransition";var UA=L.createContext(new Map);UA.displayName="Fetchers";var HA=L.createContext(null);HA.displayName="Await";var Gn=L.createContext(null);Gn.displayName="Navigation";var Ir=L.createContext(null);Ir.displayName="Location";var Vn=L.createContext({outlet:null,matches:[],isDataRoute:!1});Vn.displayName="Route";var Zh=L.createContext(null);Zh.displayName="RouteError";function IA(h,{relative:t}={}){ne(Gr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=L.useContext(Gn),{hash:a,pathname:o,search:l}=Vr(h,{relative:t}),u=o;return n!=="/"&&(u=o==="/"?n:hi([n,o])),s.createHref({pathname:u,search:l,hash:a})}function Gr(){return L.useContext(Ir)!=null}function Yi(){return ne(Gr(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Ir).location}var Ly="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ny(h){L.useContext(Gn).static||L.useLayoutEffect(h)}function Oy(){let{isDataRoute:h}=L.useContext(Vn);return h?nS():GA()}function GA(){ne(Gr(),"useNavigate() may be used only in the context of a <Router> component.");let h=L.useContext(Ta),{basename:t,navigator:n}=L.useContext(Gn),{matches:s}=L.useContext(Vn),{pathname:a}=Yi(),o=JSON.stringify(Cy(s)),l=L.useRef(!1);return Ny(()=>{l.current=!0}),L.useCallback((d,f={})=>{if(Rn(l.current,Ly),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=Ry(d,JSON.parse(o),a,f.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:hi([t,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[t,n,o,a,h])}L.createContext(null);function VA(){let{matches:h}=L.useContext(Vn),t=h[h.length-1];return t?t.params:{}}function Vr(h,{relative:t}={}){let{matches:n}=L.useContext(Vn),{pathname:s}=Yi(),a=JSON.stringify(Cy(n));return L.useMemo(()=>Ry(h,JSON.parse(a),s,t==="path"),[h,a,s,t])}function qA(h,t){return ky(h,t)}function ky(h,t,n,s,a){ne(Gr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(Gn),{matches:l}=L.useContext(Vn),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let T=y&&y.path||"";By(f,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=Yi(),A;if(t){let T=typeof t=="string"?_a(t):t;ne(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),A=T}else A=b;let E=A.pathname||"/",S=E;if(g!=="/"){let T=g.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=xy(h,{pathname:S});Rn(y||_!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Rn(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=WA(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:hi([g,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:hi([g,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,n,s,a);return t&&w?L.createElement(Ir.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},w):w}function XA(){let h=eS(),t=jA(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),n=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),n?L.createElement("pre",{style:a},n):null,l)}var YA=L.createElement(XA,null),$A=class extends L.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.unstable_onError?this.props.unstable_onError(h,t):console.error("React Router caught the following error during render",h)}render(){return this.state.error!==void 0?L.createElement(Vn.Provider,{value:this.props.routeContext},L.createElement(Zh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KA({routeContext:h,match:t,children:n}){let s=L.useContext(Ta);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(Vn.Provider,{value:h},n)}function WA(h,t=[],n=null,s=null,a=null){if(h==null){if(!n)return null;if(n.errors)h=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)h=n.matches;else return null}let o=h,l=n?.errors;if(l!=null){let f=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);ne(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:y,errors:b}=n,A=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,y)=>{let b,A=!1,E=null,S=null;n&&(b=l&&g.route.id?l[g.route.id]:void 0,E=g.route.errorElement||YA,u&&(d<0&&y===0?(By("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,S=null):d===y&&(A=!0,S=g.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,y+1)),w=()=>{let T;return b?T=E:A?T=S:g.route.Component?T=L.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=f,L.createElement(KA,{match:g,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:T})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?L.createElement($A,{location:n.location,revalidation:n.revalidation,component:E,error:b,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:s}):w()},null)}function Jh(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QA(h){let t=L.useContext(Ta);return ne(t,Jh(h)),t}function ZA(h){let t=L.useContext(Hl);return ne(t,Jh(h)),t}function JA(h){let t=L.useContext(Vn);return ne(t,Jh(h)),t}function td(h){let t=JA(h),n=t.matches[t.matches.length-1];return ne(n.route.id,`${h} can only be used on routes that contain a unique "id"`),n.route.id}function tS(){return td("useRouteId")}function eS(){let h=L.useContext(Zh),t=ZA("useRouteError"),n=td("useRouteError");return h!==void 0?h:t.errors?.[n]}function nS(){let{router:h}=QA("useNavigate"),t=td("useNavigate"),n=L.useRef(!1);return Ny(()=>{n.current=!0}),L.useCallback(async(a,o={})=>{Rn(n.current,Ly),n.current&&(typeof a=="number"?h.navigate(a):await h.navigate(a,{fromRouteId:t,...o}))},[h,t])}var Pm={};function By(h,t,n){!t&&!Pm[h]&&(Pm[h]=!0,Rn(!1,n))}L.memo(iS);function iS({routes:h,future:t,state:n,unstable_onError:s}){return ky(h,void 0,n,s,t)}function Mr(h){ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sS({basename:h="/",children:t=null,location:n,navigationType:s="POP",navigator:a,static:o=!1}){ne(!Gr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=h.replace(/^\/*/,"/"),u=L.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=_a(n));let{pathname:d="/",search:f="",hash:g="",state:y=null,key:b="default"}=n,A=L.useMemo(()=>{let E=di(d,l);return E==null?null:{location:{pathname:E,search:f,hash:g,state:y,key:b},navigationType:s}},[l,d,f,g,y,b,s]);return Rn(A!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:L.createElement(Gn.Provider,{value:u},L.createElement(Ir.Provider,{children:t,value:A}))}function aS({children:h,location:t}){return qA(Bh(h),t)}function Bh(h,t=[]){let n=[];return L.Children.forEach(h,(s,a)=>{if(!L.isValidElement(s))return;let o=[...t,a];if(s.type===L.Fragment){n.push.apply(n,Bh(s.props.children,o));return}ne(s.type===Mr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ne(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Bh(s.props.children,o)),n.push(l)}),n}var Ml="get",Dl="application/x-www-form-urlencoded";function Il(h){return h!=null&&typeof h.tagName=="string"}function rS(h){return Il(h)&&h.tagName.toLowerCase()==="button"}function oS(h){return Il(h)&&h.tagName.toLowerCase()==="form"}function lS(h){return Il(h)&&h.tagName.toLowerCase()==="input"}function cS(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function uS(h,t){return h.button===0&&(!t||t==="_self")&&!cS(h)}function Ph(h=""){return new URLSearchParams(typeof h=="string"||Array.isArray(h)||h instanceof URLSearchParams?h:Object.keys(h).reduce((t,n)=>{let s=h[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function hS(h,t){let n=Ph(h);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(o=>{n.append(a,o)})}),n}var bl=null;function dS(){if(bl===null)try{new FormData(document.createElement("form"),0),bl=!1}catch{bl=!0}return bl}var fS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wh(h){return h!=null&&!fS.has(h)?(Rn(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dl}"`),null):h}function pS(h,t){let n,s,a,o,l;if(oS(h)){let u=h.getAttribute("action");s=u?di(u,t):null,n=h.getAttribute("method")||Ml,a=wh(h.getAttribute("enctype"))||Dl,o=new FormData(h)}else if(rS(h)||lS(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?di(d,t):null,n=h.getAttribute("formmethod")||u.getAttribute("method")||Ml,a=wh(h.getAttribute("formenctype"))||wh(u.getAttribute("enctype"))||Dl,o=new FormData(u,h),!dS()){let{name:f,type:g,value:y}=h;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(Il(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ml,s=null,a=Dl,l=h}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ed(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function gS(h,t,n){let s=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&di(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function mS(h,t){if(h.id in t)return t[h.id];try{let n=await import(h.module);return t[h.id]=n,n}catch(n){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yS(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function bS(h,t,n){let s=await Promise.all(h.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await mS(o,n);return l.links?l.links():[]}return[]}));return wS(s.flat(1).filter(yS).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function zm(h,t,n,s,a,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function vS(h,t,{includeHydrateFallback:n}={}){return AS(h.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function AS(h){return[...new Set(h)]}function SS(h){let t={},n=Object.keys(h).sort();for(let s of n)t[s]=h[s];return t}function wS(h,t){let n=new Set;return new Set(t),h.reduce((s,a)=>{let o=JSON.stringify(SS(a));return n.has(o)||(n.add(o),s.push({key:o,link:a})),s},[])}function Py(){let h=L.useContext(Ta);return ed(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function ES(){let h=L.useContext(Hl);return ed(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var nd=L.createContext(void 0);nd.displayName="FrameworkContext";function zy(){let h=L.useContext(nd);return ed(h,"You must render this element inside a <HydratedRouter> element"),h}function xS(h,t){let n=L.useContext(nd),[s,a]=L.useState(!1),[o,l]=L.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=L.useRef(null);L.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let S=w=>{w.forEach(T=>{l(T.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[h]),L.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{a(!0)},E=()=>{a(!1),l(!1)};return n?h!=="intent"?[o,b,{}]:[o,b,{onFocus:xr(u,A),onBlur:xr(d,E),onMouseEnter:xr(f,A),onMouseLeave:xr(g,E),onTouchStart:xr(y,A)}]:[!1,b,{}]}function xr(h,t){return n=>{h&&h(n),n.defaultPrevented||t(n)}}function _S({page:h,...t}){let{router:n}=Py(),s=L.useMemo(()=>xy(n.routes,h,n.basename),[n.routes,h,n.basename]);return s?L.createElement(CS,{page:h,matches:s,...t}):null}function TS(h){let{manifest:t,routeModules:n}=zy(),[s,a]=L.useState([]);return L.useEffect(()=>{let o=!1;return bS(h,t,n).then(l=>{o||a(l)}),()=>{o=!0}},[h,t,n]),s}function CS({page:h,matches:t,...n}){let s=Yi(),{manifest:a,routeModules:o}=zy(),{basename:l}=Py(),{loaderData:u,matches:d}=ES(),f=L.useMemo(()=>zm(h,t,d,a,s,"data"),[h,t,d,a,s]),g=L.useMemo(()=>zm(h,t,d,a,s,"assets"),[h,t,d,a,s]),y=L.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let E=new Set,S=!1;if(t.forEach(w=>{let T=a.routes[w.route.id];!T||!T.hasLoader||(!f.some(C=>C.route.id===w.route.id)&&w.route.id in u&&o[w.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:E.add(w.route.id))}),E.size===0)return[];let _=gS(h,l,"data");return S&&E.size>0&&_.searchParams.set("_routes",t.filter(w=>E.has(w.route.id)).map(w=>w.route.id).join(",")),[_.pathname+_.search]},[l,u,s,a,f,t,h,o]),b=L.useMemo(()=>vS(g,a),[g,a]),A=TS(g);return L.createElement(L.Fragment,null,y.map(E=>L.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),b.map(E=>L.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),A.map(({key:E,link:S})=>L.createElement("link",{key:E,nonce:n.nonce,...S})))}function RS(...h){return t=>{h.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var jy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jy&&(window.__reactRouterVersion="7.9.5")}catch{}function MS({basename:h,children:t,window:n}){let s=L.useRef();s.current==null&&(s.current=gA({window:n,v5Compat:!0}));let a=s.current,[o,l]=L.useState({action:a.action,location:a.location}),u=L.useCallback(d=>{L.startTransition(()=>l(d))},[l]);return L.useLayoutEffect(()=>a.listen(u),[a,u]),L.createElement(sS,{basename:h,children:t,location:o.location,navigationType:o.action,navigator:a})}var Fy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vs=L.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...b},A){let{basename:E}=L.useContext(Gn),S=typeof f=="string"&&Fy.test(f),_,w=!1;if(typeof f=="string"&&S&&(_=f,jy))try{let X=new URL(window.location.href),Q=f.startsWith("//")?new URL(X.protocol+f):new URL(f),Z=di(Q.pathname,E);Q.origin===X.origin&&Z!=null?f=Z+Q.search+Q.hash:w=!0}catch{Rn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=IA(f,{relative:a}),[C,O,k]=xS(s,b),z=NS(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y});function P(X){t&&t(X),X.defaultPrevented||z(X)}let I=L.createElement("a",{...b,...k,href:_||T,onClick:w||o?t:P,ref:RS(A,O),target:d,"data-discover":!S&&n==="render"?"true":void 0});return C&&!S?L.createElement(L.Fragment,null,I,L.createElement(_S,{page:T})):I});vs.displayName="Link";var zh=L.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let y=Vr(l,{relative:f.relative}),b=Yi(),A=L.useContext(Hl),{navigator:E,basename:S}=L.useContext(Gn),_=A!=null&&jS(y)&&u===!0,w=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,T=b.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&S&&(C=di(C,S)||C);const O=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let k=T===w||!a&&T.startsWith(w)&&T.charAt(O)==="/",z=C!=null&&(C===w||!a&&C.startsWith(w)&&C.charAt(w.length)==="/"),P={isActive:k,isPending:z,isTransitioning:_},I=k?t:void 0,X;typeof s=="function"?X=s(P):X=[s,k?"active":null,z?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(P):o;return L.createElement(vs,{...f,"aria-current":I,className:X,ref:g,style:Q,to:l,viewTransition:u},typeof d=="function"?d(P):d)});zh.displayName="NavLink";var DS=L.forwardRef(({discover:h="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:a,state:o,method:l=Ml,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...b},A)=>{let E=PS(),S=zS(u,{relative:f}),_=l.toLowerCase()==="get"?"get":"post",w=typeof u=="string"&&Fy.test(u),T=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,k=O?.getAttribute("formmethod")||l;E(O||C.currentTarget,{fetcherKey:t,method:k,navigate:n,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:y})};return L.createElement("form",{ref:A,method:_,action:S,onSubmit:s?d:T,...b,"data-discover":!w&&h==="render"?"true":void 0})});DS.displayName="Form";function LS(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uy(h){let t=L.useContext(Ta);return ne(t,LS(h)),t}function NS(h,{target:t,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=Oy(),d=Yi(),f=Vr(h,{relative:o});return L.useCallback(g=>{if(uS(g,t)){g.preventDefault();let y=n!==void 0?n:Br(d)===Br(f);u(h,{replace:y,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,f,n,s,t,h,a,o,l])}function OS(h){Rn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=L.useRef(Ph(h)),n=L.useRef(!1),s=Yi(),a=L.useMemo(()=>hS(s.search,n.current?null:t.current),[s.search]),o=Oy(),l=L.useCallback((u,d)=>{const f=Ph(typeof u=="function"?u(new URLSearchParams(a)):u);n.current=!0,o("?"+f,d)},[o,a]);return[a,l]}var kS=0,BS=()=>`__${String(++kS)}__`;function PS(){let{router:h}=Uy("useSubmit"),{basename:t}=L.useContext(Gn),n=tS();return L.useCallback(async(s,a={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=pS(s,t);if(a.navigate===!1){let g=a.fetcherKey||BS();await h.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await h.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[h,t,n])}function zS(h,{relative:t}={}){let{basename:n}=L.useContext(Gn),s=L.useContext(Vn);ne(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...Vr(h||".",{relative:t})},l=Yi();if(h==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!h||h===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:hi([n,o.pathname])),Br(o)}function jS(h,{relative:t}={}){let n=L.useContext(Dy);ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Uy("useViewTransitionState"),a=Vr(h,{relative:t});if(!n.isTransitioning)return!1;let o=di(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=di(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ol(a.pathname,l)!=null||Ol(a.pathname,o)!=null}function Cn(h){const t="/ludusregula/",n=String(h||"").replace(/^\//,"");return(t.endsWith("/")?t:t+"/")+n}function FS(){const[h,t]=L.useState(!1),n=Cn("icon.svg"),s=[{to:"/",label:"Accueil",end:!0},{to:"/about",label:" propos"},{to:"/contribute",label:"Contribuer"}];return R.jsxs("header",{className:"sticky top-0 z-50",children:[R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"bg-gradient-to-r from-[#0abde3] via-[#10ac84] to-[#0abde3]",children:R.jsxs("div",{className:"max-w-6xl mx-auto h-16 px-4 flex items-center justify-between",children:[R.jsxs(vs,{to:"/",className:"group flex items-center gap-2",children:[R.jsx("img",{src:n,alt:"LudusRegula",className:"h-8 w-8 rounded-lg ring-1 ring-white/20 group-hover:ring-white/40 transition",loading:"eager",fetchPriority:"high"}),R.jsx("span",{className:"text-white/95 font-semibold tracking-tight text-lg",children:"LudusRegula"})]}),R.jsx("nav",{className:"hidden sm:flex items-center gap-2",children:s.map(({to:a,label:o,end:l})=>R.jsx(zh,{to:a,end:l,className:({isActive:u})=>["relative px-3 py-2 text-sm font-medium text-white/90","hover:text-white transition"].filter(Boolean).join(" "),children:({isActive:u})=>R.jsxs("span",{className:"relative inline-flex items-center",children:[o,R.jsx("span",{className:["absolute -bottom-1 left-0 h-[2px] w-full origin-left rounded","transition-transform duration-300",u?"scale-x-100 bg-white":"scale-x-0 bg-white/70 group-hover:scale-x-100"].join(" ")})]})},a))}),R.jsx("button",{onClick:()=>t(a=>!a),"aria-expanded":h,"aria-controls":"mobile-menu","aria-label":"Ouvrir le menu",className:"sm:hidden inline-flex h-10 w-10 items-center justify-center rounded-xl text-white/95 hover:bg-white/15 focus:outline-none focus:ring-4 focus:ring-white/30 transition",children:R.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:R.jsx("path",{d:"M4 7h16M4 12h16M4 17h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]})}),R.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[R.jsx("div",{className:"absolute -top-16 -left-10 h-40 w-40 rounded-full opacity-20 blur-2xl",style:{background:"radial-gradient(circle, #0abde3 0%, transparent 60%)"}}),R.jsx("div",{className:"absolute -bottom-16 -right-10 h-48 w-48 rounded-full opacity-15 blur-2xl",style:{background:"radial-gradient(circle, #10ac84 0%, transparent 60%)"}})]})]}),R.jsx("div",{className:["sm:hidden fixed inset-0 bg-black/40 transition-opacity",h?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"].join(" "),onClick:()=>t(!1)}),R.jsx("div",{id:"mobile-menu",className:["sm:hidden fixed top-0 left-0 right-0 z-50","origin-top transform transition-transform duration-300",h?"translate-y-0":"-translate-y-full"].join(" "),children:R.jsx("div",{className:"bg-white rounded-b-2xl shadow-xl border border-slate-200",children:R.jsxs("div",{className:"max-w-6xl mx-auto px-4 pt-4 pb-6",children:[R.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("img",{src:n,alt:"",className:"h-7 w-7 rounded-lg"}),R.jsx("span",{className:"font-semibold text-slate-900",children:"Menu"})]}),R.jsx("button",{onClick:()=>t(!1),className:"inline-flex h-9 w-9 items-center justify-center rounded-lg text-slate-500 hover:bg-slate-100","aria-label":"Fermer le menu",children:R.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:R.jsx("path",{d:"M6 6l12 12M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),R.jsx("nav",{className:"flex flex-col gap-1",children:s.map(({to:a,label:o,end:l})=>R.jsx(zh,{to:a,end:l,onClick:()=>t(!1),className:({isActive:u})=>["block rounded-xl px-3 py-3 text-base font-medium transition",u?"bg-slate-900 text-white":"text-slate-800 hover:bg-slate-100"].join(" "),children:o},a))})]})})})]})}function US({q:h,onChange:t,total:n=0,filtered:s=0}){const a=L.useId(),o=(h??"").length>0;return R.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[R.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[R.jsx("div",{className:"absolute -top-24 -left-16 h-56 w-56 rounded-full opacity-20 blur-2xl",style:{background:"radial-gradient(circle, #0abde3 0%, transparent 60%)"}}),R.jsx("div",{className:"absolute -bottom-20 -right-10 h-64 w-64 rounded-full opacity-15 blur-2xl",style:{background:"radial-gradient(circle, #10ac84 0%, transparent 60%)"}}),R.jsx("div",{className:"absolute top-1/2 left-1/3 -translate-x-1/2 -translate-y-1/2 h-48 w-48 rotate-12 opacity-10 blur-2xl",style:{background:"linear-gradient(135deg, #ff9f43 0%, #ee5253 100%)"}})]}),R.jsxs("div",{className:"relative z-10 p-6 md:p-7",children:[R.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"h-7 w-7 rounded-md",style:{background:"linear-gradient(90deg,#0abde3,#10ac84)"}}),R.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Trouvez vos rgles en un clin dil"})]}),R.jsxs("div",{className:"inline-flex items-center rounded-full bg-slate-900/90 px-3 py-1 text-xs font-semibold text-white",children:[n," rgle",n>1?"s":""," disponible",n>1?"s":""]})]}),R.jsx("label",{htmlFor:a,className:"sr-only",children:"Rechercher un jeu"}),R.jsxs("div",{className:"flex items-stretch gap-2",children:[R.jsxs("div",{className:"group relative flex-1",children:[R.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:R.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"transition opacity-80 group-focus-within:opacity-100",children:R.jsx("path",{d:"M21 21l-4.2-4.2m1.2-5A7 7 0 1 1 5 5a7 7 0 0 1 13 6.8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),R.jsx("input",{id:a,value:h,onChange:l=>t?.(l.target.value),placeholder:"Rechercher par nom, description","aria-label":"Rechercher un jeu",className:"h-12 w-full rounded-xl border border-slate-300 bg-white pl-10 pr-10 outline-none ring-0 transition placeholder:text-slate-400 focus:border-[#0abde3] focus:ring-4 focus:ring-[#0abde3]/25"}),o&&R.jsx("button",{type:"button",onClick:()=>t?.(""),className:"absolute inset-y-0 right-0 mr-2 inline-flex h-8 w-8 items-center justify-center rounded-lg text-slate-400 hover:bg-slate-100 hover:text-slate-700",title:"Effacer","aria-label":"Effacer la recherche",children:R.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:R.jsx("path",{d:"M6 6l12 12M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),R.jsxs("div",{className:"hidden md:flex items-center gap-1 rounded-xl border border-slate-300 bg-white px-2",children:[R.jsx("kbd",{className:"rounded-md border border-slate-300 bg-slate-50 px-1.5 py-0.5 text-xs text-slate-600",children:"Ctrl"}),R.jsx("kbd",{className:"rounded-md border border-slate-300 bg-slate-50 px-1.5 py-0.5 text-xs text-slate-600",children:"K"})]})]}),R.jsxs("p",{className:"mt-3 text-sm text-slate-600",children:[s," rsultat",s>1?"s":""," sur ",n]})]})]})}function HS({allTags:h,active:t=[],onToggle:n,onClear:s}){return h.length?R.jsxs("div",{className:"relative rounded-2xl p-4 bg-white border border-slate-200 shadow-sm overflow-hidden",children:[R.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[R.jsx("div",{className:"absolute -top-16 -left-10 h-40 w-40 rounded-full opacity-15 blur-2xl",style:{background:"radial-gradient(circle, #0abde3 0%, transparent 60%)"}}),R.jsx("div",{className:"absolute -bottom-16 -right-10 h-48 w-48 rounded-full opacity-10 blur-2xl",style:{background:"radial-gradient(circle, #10ac84 0%, transparent 60%)"}})]}),R.jsxs("div",{className:"relative z-10 flex items-center justify-between gap-2 mb-3",children:[R.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Filtrer par tags"}),t.length>0&&R.jsx("button",{onClick:s,className:"text-xs text-slate-600 hover:text-slate-900 underline underline-offset-2",children:"Rinitialiser"})]}),R.jsx("div",{className:"relative z-10 flex flex-wrap gap-2",children:h.map(a=>{const o=t.includes(a);return R.jsxs("button",{onClick:()=>n(a),className:`px-2.5 py-1 rounded-lg text-xs font-semibold border transition cursor-pointer ${o?"bg-[#0abde3]/15 text-[#0abde3] border-[#0abde3]/30":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:["#",a]},a)})})]}):null}function IS({alt:h,sources:t=[],className:n="",onFailPlaceholder:s=null}){const[a,o]=L.useState(null),[l,u]=L.useState(!1);return L.useEffect(()=>{let d=!1;return(async()=>{for(const g of t.filter(Boolean)){const y=Cn(g);try{const b=await GS(y);if(!d&&b){o(y);return}}catch{}}d||(o(null),u(!0))})(),()=>{d=!0}},[t]),a?R.jsx("img",{src:a,alt:h,loading:"lazy",className:n}):l?s:R.jsx("div",{className:`animate-pulse bg-slate-200 ${n}`,"aria-hidden":!0})}function GS(h){return new Promise(t=>{const n=new Image;n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=h})}function VS({game:h}){const t=[h.thumb?.webp,h.thumb?.jpg,h.thumb?.png].filter(Boolean),n=h.tags||[];return R.jsxs("article",{className:"relative rounded-2xl bg-white border border-slate-200 shadow-sm hover:shadow-md transition hover:-translate-y-0.5 overflow-hidden",children:[R.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[R.jsx("div",{className:"absolute -top-24 left-1/3 h-56 w-56 rounded-full opacity-10 blur-2xl",style:{background:"radial-gradient(circle, #ff9f43 0%, transparent 60%)"}}),R.jsx("div",{className:"absolute -bottom-24 right-0 h-64 w-64 rounded-full opacity-10 blur-2xl",style:{background:"radial-gradient(circle, #ee5253 0%, transparent 60%)"}})]}),R.jsx("div",{className:"relative aspect-[3/2] w-full bg-slate-100 z-10",children:t.length?R.jsx(IS,{alt:h.name,sources:t,className:"h-full w-full object-cover",onFailPlaceholder:R.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400 text-sm",children:"Image introuvable"})}):R.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400 text-sm",children:"Aucune image"})}),R.jsxs("div",{className:"relative z-10 p-5",children:[R.jsxs("div",{className:"flex items-start justify-between gap-3",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold tracking-tight text-slate-900",children:h.name}),R.jsx("p",{className:"text-sm text-slate-600 mt-1 line-clamp-3",children:h.summary})]}),R.jsx("div",{className:"h-9 w-9 rounded-lg shrink-0 bg-[#0abde3]","aria-hidden":!0})]}),!!n.length&&R.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:n.map(s=>R.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[11px] font-semibold bg-[#0abde3]/15 text-[#0abde3]",children:["#",s]},s))}),R.jsxs("div",{className:"mt-4 flex gap-2",children:[R.jsx(vs,{className:"inline-flex items-center justify-center px-3 py-2 rounded-xl text-sm font-semibold text-white bg-[#0abde3] hover:brightness-110 transition",to:`/game/${h.id}`,children:"Ouvrir"}),R.jsx("a",{className:"inline-flex items-center justify-center px-3 py-2 rounded-xl text-sm font-medium border border-slate-300 bg-white hover:bg-slate-50 transition",href:Cn(h.pdf),download:!0,children:"Tlcharger"})]})]})]})}function qS({page:h,pageCount:t,onPage:n}){if(t<=1)return null;const s=XS(h,t);return R.jsxs("nav",{className:"flex items-center justify-between mt-4","aria-label":"Pagination",children:[R.jsx("button",{onClick:()=>n(Math.max(1,h-1)),disabled:h<=1,className:"px-3 py-2 rounded-xl text-sm font-medium border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50",children:" Prcdent"}),R.jsx("div",{className:"flex items-center gap-1",children:s.map((a,o)=>a===""?R.jsx("span",{className:"px-2 text-slate-500",children:""},`dots-${o}`):R.jsx("button",{onClick:()=>n(a),className:`h-9 min-w-9 px-3 rounded-lg text-sm font-medium border ${a===h?"bg-[#0abde3] text-white border-[#0abde3]":"bg-white text-slate-800 border-slate-300 hover:bg-slate-50"}`,children:a},a))}),R.jsx("button",{onClick:()=>n(Math.min(t,h+1)),disabled:h>=t,className:"px-3 py-2 rounded-xl text-sm font-medium border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50",children:"Suivant "})]})}function XS(h,t){const s=[...new Set([1,t,h,h-1,h+1,2,t-1])].filter(o=>o>=1&&o<=t).sort((o,l)=>o-l),a=[];for(let o=0;o<s.length;o++)a.push(s[o]),o<s.length-1&&s[o+1]-s[o]>1&&a.push("");return a}function Eh(h){return(h||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const xh=12;function YS(){const[h,t]=OS(),[n,s]=L.useState([]),[a,o]=L.useState(""),[l,u]=L.useState([]),[d,f]=L.useState(1);L.useEffect(()=>{fetch(Cn("/data/games.json")).then(w=>w.json()).then(w=>{const T=new Map;for(const C of Array.isArray(w)?w:[])C?.id&&T.set(String(C.id),C);s([...T.values()])}).catch(()=>s([]))},[]),L.useEffect(()=>{const w=h.get("q")??"",T=(h.get("tags")??"").split(",").map(O=>O.trim()).filter(Boolean),C=parseInt(h.get("page")??"1",10)||1;a!==w&&o(w),$S(l,T)||u(T),d!==C&&f(C)},[h]);const g=L.useMemo(()=>{const w=new Set;for(const T of n)(T.tags||[]).forEach(C=>w.add(C));return Array.from(w).sort((T,C)=>T.localeCompare(C,"fr"))},[n]),y=L.useMemo(()=>{const w=Eh(a);return n.filter(T=>{const C=Eh(T.name).includes(w)||Eh(T.summary||"").includes(w),O=T.tags||[],k=l.every(z=>O.includes(z));return C&&k})},[a,l,n]),b=Math.max(1,Math.ceil(y.length/xh)),A=Math.min(Math.max(1,d),b),E=L.useMemo(()=>{const w=(A-1)*xh;return y.slice(w,w+xh)},[y,A]);L.useEffect(()=>f(1),[a,l]),L.useEffect(()=>{const w={};a&&(w.q=a),l.length&&(w.tags=l.join(",")),A>1&&(w.page=String(A)),t(w,{replace:!0})},[a,l,A,t]),L.useEffect(()=>{const w=T=>{(T.ctrlKey||T.metaKey)&&T.key.toLowerCase()==="k"&&(T.preventDefault(),document.querySelector('input[aria-label="Rechercher un jeu"]')?.focus())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[]);const S=w=>u(T=>T.includes(w)?T.filter(C=>C!==w):[...T,w]),_=()=>u([]);return R.jsxs("div",{className:"space-y-6",children:[R.jsx(US,{q:a,onChange:o,total:n.length,filtered:y.length}),R.jsx(HS,{allTags:g,active:l,onToggle:S,onClear:_}),R.jsx("section",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(w=>R.jsx(VS,{game:w},w.id))}),R.jsxs("div",{className:"text-xs text-slate-500",children:["Affichs: ",E.length," / Page ",A," sur ",b]}),y.length===0&&R.jsxs("div",{className:"text-slate-600 text-sm",children:["Aucun rsultat pour  ",a," ",l.length?` avec les tags ${l.join(", ")}`:"","."]}),R.jsx(qS,{page:A,pageCount:b,onPage:f})]})}function $S(h,t){if(h.length!==t.length)return!1;const n=[...h].sort(),s=[...t].sort();for(let a=0;a<n.length;a++)if(n[a]!==s[a])return!1;return!0}const ke=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),jh=[.001,0,0,.001,0,0],_h=1.35,sn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},In={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Pr="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Hy={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ce={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Or={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ce={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},da={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qr={ERRORS:0,WARNINGS:1,INFOS:5},wa={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},vl={moveTo:0,lineTo:1,curveTo:2,closePath:3},Iy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Gl=qr.WARNINGS;function KS(h){Number.isInteger(h)&&(Gl=h)}function WS(){return Gl}function Vl(h){Gl>=qr.INFOS&&console.info(`Info: ${h}`)}function vt(h){Gl>=qr.WARNINGS&&console.warn(`Warning: ${h}`)}function Xt(h){throw new Error(h)}function Lt(h,t){h||Xt(t)}function QS(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function id(h,t=null,n=null){if(!h)return null;if(n&&typeof h=="string"&&(n.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),n.tryConvertEncoding))try{h=n1(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return QS(s)?s:null}function sd(h,t,n=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):n&&id(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Et(h,t,n,s=!1){return Object.defineProperty(h,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const Es=(function(){function t(n,s){this.message=n,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class jm extends Es{constructor(t,n){super(t,"PasswordException"),this.code=n}}class Th extends Es{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class kl extends Es{constructor(t){super(t,"InvalidPDFException")}}class zr extends Es{constructor(t,n,s){super(t,"ResponseException"),this.status=n,this.missing=s}}class ZS extends Es{constructor(t){super(t,"FormatError")}}class fi extends Es{constructor(t){super(t,"AbortException")}}function Gy(h){(typeof h!="object"||h?.length===void 0)&&Xt("Invalid argument for bytesToString");const t=h.length,n=8192;if(t<n)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=n){const o=Math.min(a+n,t),l=h.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Xr(h){typeof h!="string"&&Xt("Invalid argument for stringToBytes");const t=h.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=h.charCodeAt(s)&255;return n}function JS(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function t1(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function e1(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return Et(this,"isLittleEndian",t1())}static get isEvalSupported(){return Et(this,"isEvalSupported",e1())}static get isOffscreenCanvasSupported(){return Et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:n}=navigator;return Et(this,"platform",{isAndroid:n.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return Et(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ch=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class st{static makeHexColor(t,n,s){return`#${Ch[t]}${Ch[n]}${Ch[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,n){let s;t[0]?(t[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[3],n[3]*=t[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,t[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static multiplyByDOMMatrix(t,n){return[t[0]*n.a+t[2]*n.b,t[1]*n.a+t[3]*n.b,t[0]*n.c+t[2]*n.d,t[1]*n.c+t[3]*n.d,t[0]*n.e+t[2]*n.f+t[4],t[1]*n.e+t[3]*n.f+t[5]]}static applyTransform(t,n,s=0){const a=t[s],o=t[s+1];t[s]=a*n[0]+o*n[2]+n[4],t[s+1]=a*n[1]+o*n[3]+n[5]}static applyTransformToBezier(t,n,s=0){const a=n[0],o=n[1],l=n[2],u=n[3],d=n[4],f=n[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*a+b*l+d,t[s+g+1]=y*o+b*u+f}}static applyInverseTransform(t,n){const s=t[0],a=t[1],o=n[0]*n[3]-n[1]*n[2];t[0]=(s*n[3]-a*n[2]+n[2]*n[5]-n[4]*n[3])/o,t[1]=(-s*n[1]+a*n[0]+n[4]*n[1]-n[5]*n[0])/o}static axialAlignedBoundingBox(t,n,s){const a=n[0],o=n[1],l=n[2],u=n[3],d=n[4],f=n[5],g=t[0],y=t[1],b=t[2],A=t[3];let E=a*g+d,S=E,_=a*b+d,w=_,T=u*y+f,C=T,O=u*A+f,k=O;if(o!==0||l!==0){const z=o*g,P=o*b,I=l*y,X=l*A;E+=I,w+=I,_+=X,S+=X,T+=z,k+=z,O+=P,C+=P}s[0]=Math.min(s[0],E,_,S,w),s[1]=Math.min(s[1],T,O,C,k),s[2]=Math.max(s[2],E,_,S,w),s[3]=Math.max(s[3],T,O,C,k)}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t,n){const s=t[0],a=t[1],o=t[2],l=t[3],u=s**2+a**2,d=s*o+a*l,f=o**2+l**2,g=(u+f)/2,y=Math.sqrt(g**2-(u*f-d**2));n[0]=Math.sqrt(g+y||1),n[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const s=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,n,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],n)}static rectBoundingBox(t,n,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],n,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],n,a)}static#t(t,n,s,a,o,l,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,E=y*(y*(y*t+3*f*n)+3*b*s)+A*a,S=y*(y*(y*o+3*f*l)+3*b*u)+A*d;g[0]=Math.min(g[0],E),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],E),g[3]=Math.max(g[3],S)}static#e(t,n,s,a,o,l,u,d,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,n,s,a,o,l,u,d,-y/g,b);return}const A=g**2-4*y*f;if(A<0)return;const E=Math.sqrt(A),S=2*f;this.#t(t,n,s,a,o,l,u,d,(-g+E)/S,b),this.#t(t,n,s,a,o,l,u,d,(-g-E)/S,b)}static bezierBoundingBox(t,n,s,a,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],n,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],n,d),this.#e(t,s,o,u,n,a,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,n,a,l,d,3*(-n+3*(a-l)+d),6*(n-2*a+l),3*(a-n),f)}}function n1(h){return decodeURIComponent(escape(h))}let Rh=null,Fm=null;function Vy(h){return Rh||(Rh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Fm=new Map([["","t"]])),h.replaceAll(Rh,(t,n,s)=>n?n.normalize("NFKC"):Fm.get(s))}function ad(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Gy(h)}const rd="pdfjs_internal_id_";function i1(h,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,a,...o]=n;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let u=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function De(h,t,n){return Math.min(Math.max(h,t),n)}function qy(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Gy(h))}function s1(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Xr(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(n=>{n(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,n)=>t+n,0)});class jr{static textContent(t){const n=[],s={items:n,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(jr.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&n.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class od{static setupStorage(t,n,s,a,o){const l=a.getValue(n,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(n,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(n,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(n,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(n,{value:f})});break}}static setAttributes({html:t,element:n,storage:s=null,intent:a,linkService:o}){const{attributes:l}=n,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,n,s)}static render(t){const n=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),u&&jr.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const g=[[a,-1,l]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const E=y.children[++g.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const w=document.createTextNode(E.value);f.push(w),A.append(w);continue}const _=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(A.append(_),E.attributes&&this.setAttributes({html:_,element:E,storage:n,intent:o,linkService:s}),E.children?.length>0)g.push([E,-1,_]);else if(E.value){const w=document.createTextNode(E.value);u&&jr.shouldBuildText(S)&&f.push(w),_.append(w)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const ci="http://www.w3.org/2000/svg";class As{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ca(h,t="text"){if(Dr(h,document.baseURI)){const n=await fetch(h);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(a.response);return}n(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class Yr{constructor({viewBox:t,userUnit:n,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=n;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,A;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let E,S,_,w;g===0?(E=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+l,_=(t[3]-t[1])*s,w=(t[2]-t[0])*s):(E=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+l,_=(t[2]-t[0])*s,w=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,E-g*s*d-b*s*f,S-y*s*d-A*s*f],this.width=_,this.height=w}get rawDims(){const t=this.viewBox;return Et(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Yr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,n){const s=[t,n];return st.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const n=[t[0],t[1]];st.applyTransform(n,this.transform);const s=[t[2],t[3]];return st.applyTransform(s,this.transform),[n[0],n[1],s[0],s[1]]}convertToPdfPoint(t,n){const s=[t,n];return st.applyInverseTransform(s,this.transform),s}}class ql extends Es{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function $r(h){const t=h.length;let n=0;for(;n<t&&h[n].trim()==="";)n++;return h.substring(n,n+5).toLowerCase()==="data:"}function Xl(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function Xy(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function Yy(h,t="document.pdf"){if(typeof h!="string")return t;if($r(h))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class Um{started=Object.create(null);times=[];time(t){t in this.started&&vt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||vt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(n)} ${o-a}ms
`);return t.join("")}}function Dr(h,t){const n=t?URL.parse(h,t):URL.parse(h);return n?.protocol==="http:"||n?.protocol==="https:"}function on(h){h.preventDefault()}function ee(h){h.preventDefault(),h.stopPropagation()}function a1(h){console.log("Deprecated API usage: "+h)}class Bl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const s=parseInt(n[1],10);let a=parseInt(n[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(n[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(n[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(n[6],10);d=d>=0&&d<=59?d:0;const f=n[7]||"Z";let g=parseInt(n[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(n[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=g,u+=y):f==="+"&&(l-=g,u-=y),new Date(Date.UTC(s,a,o,l,u,d))}}function $y(h,{scale:t=1,rotation:n=0}){const{width:s,height:a}=h.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new Yr({viewBox:o,userUnit:1,scale:t,rotation:n})}function Ra(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(vt(`Not a valid color format: "${h}"`),[0,0,0])}function r1(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of h.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;h.set(n,Ra(s))}t.remove()}function te(h){const{a:t,b:n,c:s,d:a,e:o,f:l}=h.getTransform();return[t,n,s,a,o,l]}function zn(h){const{a:t,b:n,c:s,d:a,e:o,f:l}=h.getTransform().invertSelf();return[t,n,s,a,o,l]}function Xi(h,t,n=!1,s=!0){if(t instanceof Yr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=h,u=Se.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!n||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Mn{constructor(){const{pixelRatio:t}=Mn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,s,a,o=-1){let l=1/0,u=1/0,d=1/0;s=Mn.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*n))),a!==-1&&(u=a/t,d=a/n);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,n){if(n>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return t>0?Math.min(t,s):s}return t}}const Pl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class o1{static get isDarkMode(){return Et(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Ky{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:n}=t;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),Et(this,"commentForegroundColor",Ra(s))}}function Wy(h,t,n,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return h=Math.round(h*s+a),t=Math.round(t*s+a),n=Math.round(n*s+a),[h,t,n]}function Hm(h,t){const n=h[0]/255,s=h[1]/255,a=h[2]/255,o=Math.max(n,s,a),l=Math.min(n,s,a),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case n:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-n)/d+2)*60;break;case a:t[0]=((n-s)/d+4)*60;break}}t[2]=u}function Fh(h,t){const n=h[0],s=h[1],a=h[2],o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(n/60%2-1)),u=a-o/2;switch(Math.floor(n/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function Im(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function Gm(h,t,n){Fh(h,n),n.map(Im);const s=.2126*n[0]+.7152*n[1]+.0722*n[2];Fh(t,n),n.map(Im);const a=.2126*n[0]+.7152*n[1]+.0722*n[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const Vm=new Map;function Qy(h,t){const n=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Vm.get(n);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);Hm(h,l);const u=a.subarray(6,9);Hm(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Gm(l,u,o)<f){let g,y;d?(g=l[2],y=1):(g=0,y=l[2]);const b=.005;for(;y-g>b;){const A=l[2]=(g+y)/2;d===Gm(l,u,o)<f?g=A:y=A}l[2]=d?y:g}return Fh(l,o),s=st.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Vm.set(n,s),s}function ld({html:h,dir:t,className:n},s){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else od.render({xfaHtml:h,div:a,intent:"richText"});a.firstChild.classList.add("richText",n),s.append(a)}class kr{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,kr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(t.addEventListener("contextmenu",on,{signal:n}),t.addEventListener("pointerdown",kr.#l,{signal:n}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ee(t)}#h(t){this.#i._focusEventsAllowed=!0,ee(t)}#f(t){const n=this.#i._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",on,{signal:n}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:n}=this.#i,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",kr.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{n.delete()},{signal:n._signal}),this.#n.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#f(n),this.#n.append(n,this.#m),this.#r=t}addComment(t,n=null){if(this.#s)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#a=this.#m;n?(this.#n.insertBefore(s,n),this.#n.insertBefore(a,n)):this.#n.append(s,a),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const n=t.renderButton();this.#f(n),this.#n.append(n,this.#m)}async addEditSignatureButton(t){const n=this.#o=await t.renderEditButton(this.#i);this.#f(n),this.#n.append(n,this.#m)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,n){switch(t){case"colorPicker":this.addColorPicker(n);break;case"altText":await this.addAltText(n);break;case"editSignature":await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(n);break}}async addButtonBefore(t,n,s){const a=this.#n.querySelector(s);a&&t==="comment"&&this.addComment(n,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class l1{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const n=this.#i._signal;n instanceof AbortSignal&&!n.aborted&&t.addEventListener("contextmenu",on,{signal:n});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,n){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(n?o.width:0);if(l>s){a=u,s=l;continue}n?u>a&&(a=u):u<a&&(a=u)}return[n?1-a:a,s]}show(t,n,s){const[a,o]=this.#r(n,s),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,n,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",n);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",on,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function Zy(h,t,n){for(const s of n)t.addEventListener(s,h[s].bind(h))}class c1{#t=0;get id(){return`${Pr}${this.#t++}`}}class cd{#t=ad();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Et(this,"_isSVGFittingCanvas",o)}async#n(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof n=="string"?(s.url=n,a=await Ca(n,"blob")):n instanceof File?a=s.file=n:n instanceof Blob&&(a=n),a.type==="image/svg+xml"){const o=cd._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},l.onload=async()=>{const y=s.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=g});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){vt(a),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:n,name:s,size:a,type:o}=t;return this.#n(`${n}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,n){const s=await n;return this.#n(t,s)}async getFromId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(n.width,n.height);return a.getContext("2d").drawImage(n,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const n=this.#i.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=a.convertToBlob()}s.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class u1{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:n,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:n,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#n];t(),n?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#n];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#t[n].type!==t){this.#t.splice(n+1,this.#n-n),this.#n=n;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Kr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Se.platform;for(const[s,a,o={}]of t)for(const l of s){const u=l.startsWith("mac+");n&&u?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!n&&!u&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(this.#t(n));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,n)||(a.bind(t,...l,n)(),o||ee(n))}}class ud{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return r1(t),Et(this,"_colors",t)}convert(t){const n=Ra(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,a]of this._colors)if(a.every((o,l)=>o===n[l]))return ud._colorsMapping.get(s);return n}getHexCode(t){const n=this._colors.get(t);return n?st.makeHexColor(...n):t}}class pi{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new u1;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#_=null;#E=null;#A=null;#C=null;#w=!1;#x=null;#D=new c1;#R=!1;#M=!1;#z=!1;#N=null;#k=null;#j=null;#B=null;#V=null;#T=bt.NONE;#S=new Set;#O=null;#F=null;#H=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#I=[0,0];#P=null;#q=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=pi.prototype,n=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Kr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(t,n,s,a,o,l,u,d,f,g,y,b,A,E,S,_){const w=this._signal=this.#t.signal;this.#q=t,this.#Z=n,this.#J=s,this.#s=a,this.#l=o,this.#F=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:w}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:w}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#_=d.filterFactory,this.#H=f,this.#C=g||null,this.#y=y,this.#v=b,this.#b=A,this.#V=E||null,this.viewParameters={realScale:As.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#x?.hide(),this.#x=null,this.#j?.destroy(),this.#j=null,this.#i=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Et(this,"hcmFilter",this.#H?this.#_.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Et(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return Et(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(n=>n.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Et(this,"highlightColors",null);const n=new Map,s=!!this.#H;for(const[a,o]of t){const l=a.endsWith("_HCM");if(s&&l){n.set(a.replace("_HCM",""),o);continue}!s&&!l&&n.set(a,o)}return Et(this,"highlightColors",n)}get highlightColorNames(){return Et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const n=this.highlightColorNames.get(t);return this._highlightColors.get(n)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,n=!1){this.#s?.editAltText(this,t,n)}hasCommentManager(){return!!this.#l}editComment(t,n,s,a){this.#l?.showDialog(this,t,n,s,a)}selectComment(t,n){this.#r.get(t)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,n,s=void 0){this.#l?.toggleCommentPopup(t,n,s)}makeCommentColor(t,n){return t&&this.#l?.makeCommentColor(t,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:n,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),n())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#F?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#F}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=n;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,n){for(const s of this.#r.values()){const{x:a,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&n>=o&&n<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*As.PDF_TO_CSS_UNITS;for(const n of this.#g)n.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",n=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),A=this.#T===bt.NONE,E=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),n&&S?.editComment()};if(A){this.switchToMode(bt.HIGHLIGHT,E);return}E()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#x||=new l1(this),this.#x.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const n=`${Pr}${t}`,s=this.#a.getRawValue(n);return s&&this.#a.remove(n),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,n=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),n?s.setAttribute("data-l10n-args",JSON.stringify(n)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#x?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#O)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#O&&(this.#x?.hide(),this.#O=null,this.#L({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#O=n,this.#L({hasSelectedText:!0}),!(this.#T!==bt.HIGHLIGHT&&this.#T!==bt.NONE)&&(this.#T===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===bt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#T===bt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#S)if(n.div.contains(t)){this.#k=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,n]=this.#k;this.#k=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#N?.abort(),this.#N=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of this.#S){const a=s.serialize(!0);a&&n.push(a)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){vt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const f=await a.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){vt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==bt.NONE&&!this.isEditorHandlingKeyboard&&pi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#L({isEditing:this.#T!==bt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const n of this.#u)this.#G(n.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,n=null,s=!1,a=!1,o=!1){if(this.#T!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===bt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===bt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===bt.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===bt.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,u=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:g,deleted:y}=d;f&&l.add(f),g&&!y&&u.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:g,contentsObj:y}=d;g&&y?.str&&!l.has(f)&&!this.#m.has(f)&&u.push(d)}this.#l?.showSidebar(u)}if(!n){s&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const l of this.#n.values())l.uid===n?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,n){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(n);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const s of this.#S)s.updateParams(t,n);else for(const s of this.#u)s.updateDefaultParams(t,n)}}showAllEditors(t,n,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(n);(this.#Y?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#G([[Mt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const n of this.#r.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const n of this.#r.values())t.push(n.enable());await Promise.all(t);for(const n of this.#n.values())n.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const n of this.#n.values())n.pageIndex===t&&(yield n)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const n=this.#r.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const n of this.#S)n!==t&&n.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...this.#S],s=()=>{this._editorUndoBar?.show(a,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},a=()=>{for(const o of n)this.#st(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const n of this.#S)n.unselect();this.#S.clear();for(const n of t)n.isEmpty()||(this.#S.add(n),n.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==bt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#I[0]+=t,this.#I[1]+=n;const[a,o]=this.#I,l=[...this.#S],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#I[0]=this.#I[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,n),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let n=!1;for(const[{x:a,y:o,pageIndex:l},u]of t)u.newX=a,u.newY=o,u.newPageIndex=l,n||=a!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!n)return!1;const s=(a,o,l,u)=>{if(this.#n.has(a.id)){const d=this.#r.get(u);d?a._setParentAndPosition(d,o,l):(a.pageIndex=u,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:u}]of t)s(a,o,l,u)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(a,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#p)for(const s of this.#p.keys())s.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==bt.NONE}get imageManager(){return Et(this,"imageManager",new cd)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let f=0,g=n.rangeCount;f<g;f++)if(!t.contains(n.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-a)/l,y:1-(f+y-s)/o,width:b/l,height:y/o});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-s)/o,y:1-(g+b-a)/l,width:y/o,height:b/l});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-a)/l,y:(f-s)/o,width:b/l,height:y/o});break;default:u=(f,g,y,b)=>({x:(f-s)/o,y:(g-a)/l,width:y/o,height:b/l});break}const d=[];for(let f=0,g=n.rangeCount;f<g;f++){const y=n.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:E,height:S}of y.getClientRects())E===0||S===0||d.push(u(b,A,E,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#o||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const n=this.#o?.get(t.data.id);if(!n)return;const s=this.#a.getRawValue(n);s&&(this.#T===bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,n,s){const a=this.#B?.get(t);a&&(a.setCanvas(n,s),this.#B.delete(t))}addMissingCanvas(t,n){(this.#B||=new Map).set(t,n)}}class Un{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Un.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Un._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#n=document.createElement("span");t.append(n),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Un.#f.missing),n.setAttribute("data-l10n-id",Un.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",on,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Un._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#c.div.append(n)}this.#o.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#l===n&&(n=this.#d),{altText:n,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===n)&&(o||(this.#t=t,this.#e=n),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Un.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Un.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#r;if(!n){this.#r=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#c.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class Al{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:n,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-a)/l,(n+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:n}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=n)}#d(t,n){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",n?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",on,{signal:s}),n&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,ee(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,ee(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const n=this.commentPopupPositionInLayer;let s,a;if(n)[s,a]=n;else{[s,a]=this.#n.commentButtonPosition;const{width:g,height:y,x:b,y:A}=this.#n;s=b+s*g,a=A+a*y}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+s*d,u+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,n=null){this.#r=t,this.data=t,this.#o=null,this.#s=n}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Wr{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=s,this.#n=n,this.#r=a,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Mn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ee(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",ee,l),o.addEventListener("pointermove",ee,l),o.addEventListener("pointercancel",ee,l),o.addEventListener("pointerup",ee,l),this.#r?.()}if(ee(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ee(t);let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:a,screenY:o}=n,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=d,A=y-f,E=b-g,S=l-a,_=u-o,w=Math.hypot(S,_)||1,T=Math.hypot(A,E)||1;if(!this.#e&&Math.abs(T-w)<=Wr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(a+l)/2,(o+u)/2];this.#s?.(C,T,w)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(ee(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ht{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#_=0;#E=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#x=ht._zIndex++;static _borderLineWidth=-1;static _colorManager=new ud;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ht.prototype._resizeWithKeyboard,n=pi.TRANSLATE_SMALL,s=pi.TRANSLATE_BIG;return Et(this,"_resizerKeyboardManager",new Kr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ht.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new h1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(ht._l10n??=t,ht._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ht._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ht._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){Xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(n+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,n){const[s,a]=this.parentDimensions;this.setAt(t*s,n*a,this.width*s,this.height*a),this._onTranslated()}#D([t,n],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,n){this.#D(this.parentDimensions,t,n)}translateInPage(t,n){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,n){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=n/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,n){}_onTranslated(t,n){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:s}=ht,a=s/t,o=s/n;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:n},pageDimensions:[s,a]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=De(o,0,s-u),l=De(l,0,a-d);break;case 90:o=De(o,0,s-d),l=De(l,u,a);break;case 180:o=De(o,u,s),l=De(l,d,a);break;case 270:o=De(o,d,s),l=De(l,0,a-u);break}this.x=o/=s,this.y=l/=a;const[f,g]=this.getBaseTranslation();o+=f,l+=g,n.left=`${(100*o).toFixed(2)}%`,n.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,n,s){switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return ht.#R(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return ht.#R(t,n,360-this.parentRotation)}#M(t){switch(t){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,s]}=this;return[n*t,s*t]}setDims(){const{div:{style:t},width:n,height:s}=this;t.width=`${(100*n).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#N.bind(this,s),{signal:n}),a.addEventListener("contextmenu",on,{signal:n}),a.tabIndex=-1}this.div.prepend(this.#c)}#N(t,n){n.preventDefault();const{isMac:s}=Se.platform;if(n.button!==0||n.ctrlKey&&s)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ee,{passive:!1,signal:l}),window.addEventListener("contextmenu",on,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#j()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#k(t,n,s,a){this.width=s,this.height=a,this.x=t,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#d)return;const{savedX:t,savedY:n,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===n&&u===s&&d===a||this.addCommands({cmd:this.#k.bind(this,o,l,u,d),undo:this.#k.bind(this,t,n,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,n){const[s,a]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=ht.MIN_SIZE/s,g=ht.MIN_SIZE/a,y=this.#M(this.rotation),b=(B,G)=>[y[0]*B+y[2]*G,y[1]*B+y[3]*G],A=this.#M(360-this.rotation),E=(B,G)=>[A[0]*B+A[2]*G,A[1]*B+A[3]*G];let S,_,w=!1,T=!1;switch(t){case"topLeft":w=!0,S=(B,G)=>[0,0],_=(B,G)=>[B,G];break;case"topMiddle":S=(B,G)=>[B/2,0],_=(B,G)=>[B/2,G];break;case"topRight":w=!0,S=(B,G)=>[B,0],_=(B,G)=>[0,G];break;case"middleRight":T=!0,S=(B,G)=>[B,G/2],_=(B,G)=>[0,G/2];break;case"bottomRight":w=!0,S=(B,G)=>[B,G],_=(B,G)=>[0,0];break;case"bottomMiddle":S=(B,G)=>[B/2,G],_=(B,G)=>[B/2,0];break;case"bottomLeft":w=!0,S=(B,G)=>[0,G],_=(B,G)=>[B,0];break;case"middleLeft":T=!0,S=(B,G)=>[0,G/2],_=(B,G)=>[B,G/2];break}const C=S(u,d),O=_(u,d);let k=b(...O);const z=ht._round(o+k[0]),P=ht._round(l+k[1]);let I=1,X=1,Q,Z;if(n.fromKeyboard)({deltaX:Q,deltaY:Z}=n);else{const{screenX:B,screenY:G}=n,[J,pt]=this.#l;[Q,Z]=this.screenToPageTranslation(B-J,G-pt),this.#l[0]=B,this.#l[1]=G}if([Q,Z]=E(Q/s,Z/a),w){const B=Math.hypot(u,d);I=X=Math.max(Math.min(Math.hypot(O[0]-C[0]-Q,O[1]-C[1]-Z)/B,1/u,1/d),f/u,g/d)}else T?I=De(Math.abs(O[0]-C[0]-Q),f,1)/u:X=De(Math.abs(O[1]-C[1]-Z),g,1)/d;const ct=ht._round(u*I),dt=ht._round(d*X);k=b(..._(ct,dt));const tt=z-k[0],et=P-k[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ct,this.height=dt,this.x=tt,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new kr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[n,s]of t)await this._editToolbar.addButton(n,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Un.initialize(ht._l10n),this.#i=new Un(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Al(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:n,date:s,deleted:a}}=this.#n;return{text:n,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Al(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:n,richText:s}){if(!n||(this.#n||=new Al(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Al(this),this.#n.edit(t)}toggleComment(t,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,n)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=a-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:n}}){this.#n.data=n?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Zy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Wr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,n,s){let o=.7*(s/n)+1-.7;if(o===1)return;const l=this.#M(this.rotation),u=(z,P)=>[l[0]*z+l[2]*P,l[1]*z+l[3]*P],[d,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,E=ht.MIN_SIZE/d,S=ht.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/A),E/b,S/A);const _=ht._round(b*o),w=ht._round(A*o);if(_===b&&w===A)return;this.#u||=[g,y,b,A];const T=u(b/2,A/2),C=ht._round(g+T[0]),O=ht._round(y+T[1]),k=u(_/2,w/2);this.x=C-k[0],this.y=O-k[1],this.width=_,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(t){const{isMac:n}=Se.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#F(t);return}this.#O(t)}#O(t){const{isMac:n}=Se.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#O(f),s&&this._onStopDragging()};n&&(this.#_=t.clientX,this.#E=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#a){ee(f);return}const[A,E]=this.screenToPageTranslation(g-this.#_,y-this.#E);this.#_=g,this.#E=y,this._uiManager.dragSelectedEditors(A,E)},l),window.addEventListener("touchmove",ee,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),ee(f)},l));const d=f=>{if(!this.#a||this.#a===f.pointerId){u(f);return}ee(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,s){t.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,n,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,g=n/a,y=this.x*o,b=this.y*l,A=this.width*o,E=this.height*l;switch(s){case 0:return[y+f+u,l-b-g-E+d,y+f+A+u,l-b-g+d];case 90:return[y+g+u,l-b+f+d,y+g+E+u,l-b+f+A+d];case 180:return[y-f-A+u,l-b+g+d,y-f+u,l-b+g+E+d];case 270:return[y-g-E+u,l-b-f-A+d,y-g+u,l-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[s,a,o,l]=t,u=o-s,d=l-a;switch(this.rotation){case 0:return[s,n-l,u,d];case 90:return[s,n-a,d,u];case 180:return[o,n-a,u,d];case 270:return[o,n-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:n,date:s,opacity:a,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:n,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:n,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return n<l&&a>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,n,s){const a=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[u,d,f,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=u/o,a.y=d/l,a.width=f/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,n]}=this,[s,a,o,l]=this.getPDFRect();return[ht._round(s+(o-s)*t),ht._round(a+(l-a)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#c.children;if(!this.#e){this.#e=Array.from(n);const l=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",ht._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const l of n){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of n){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ht._l10nResizer[f])}}this.#I(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ht._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#v?t:""}#I(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:n,fromKeyboard:!0})}#P(){this.#v=!1,this.#I(-1),this.#j()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#A||=new Map;const{action:s}=t;let a=this.#A.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(s),this.#A.size===0&&(this.#A=null)},ht._telemetryTimeout),this.#A.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class h1 extends ht{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const qm=3285377520,bn=4294901760,jn=65535;class Jy{constructor(t){this.h1=t?t&4294967295:qm,this.h2=t?t&4294967295:qm}update(t){let n,s;if(typeof t=="string"){n=new Uint8Array(t.length*2),s=0;for(let S=0,_=t.length;S<_;S++){const w=t.charCodeAt(S);w<=255?n[s++]=w:(n[s++]=w>>>8,n[s++]=w&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(n.buffer,0,a);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&jn,E=b&jn;for(let S=0;S<a;S++)S&1?(u=l[S],u=u*y&bn|u*A&jn,u=u<<15|u>>>17,u=u*b&bn|u*E&jn,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*y&bn|d*A&jn,d=d<<15|d>>>17,d=d*b&bn|d*E&jn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=n[a*4+2]<<16;case 2:u^=n[a*4+1]<<8;case 1:u^=n[a*4],u=u*y&bn|u*A&jn,u=u<<15|u>>>17,u=u*b&bn|u*E&jn,a&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&bn|t*36045&jn,n=n*4283543511&bn|((n<<16|t>>>16)*2950163797&bn)>>>16,t^=n>>>1,t=t*444984403&bn|t*60499&jn,n=n*3301882366&bn|((n<<16|t>>>16)*3120437893&bn)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const Uh=Object.freeze({map:null,hash:"",transfer:void 0});class hd{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const s=this.#n.get(t);return s===void 0?n:Object.assign(n,s)}getRawValue(t){return this.#n.get(t)}remove(t){const n=this.#n.get(t);if(n!==void 0&&(n instanceof ht&&this.#i.delete(n.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof ht)return;this.onAnnotationEditor(null)}}setValue(t,n){const s=this.#n.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(n))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#n.set(t,n);a&&this.#r(),n instanceof ht&&((this.#i||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tb(this)}get serializable(){if(this.#n.size===0)return Uh;const t=new Map,n=new Jy,s=[],a=Object.create(null);let o=!1;for(const[l,u]of this.#n){const d=u instanceof ht?u.serialize(!1,a):u;d&&(t.set(l,d),n.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:s}:Uh}get editorStats(){let t=null;const n=new Map;let s=0,a=0;for(const o of this.#n.values()){if(!(o instanceof ht)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;n.has(u)||n.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,g]of Object.entries(l)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const b=y.get(g)??0;y.set(g,b+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,l]of n)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,n){const s=this.#i?.get(t);return s?(s.updateFromAnnotationLayer(n),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const n of this.#i.values())n.serialize()&&t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class tb extends hd{#t;constructor(t){super();const{map:n,hash:s,transfer:a}=t.serializable,o=structuredClone(n,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Xt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Et(this,"modifiedIds",{ids:new Set,hash:""})}}class d1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:n,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Lt(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,u=new FontFace(a,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),s?.(t)}catch{vt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Xt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw vt(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Et(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Et(this,"isSyncFontLoadingSupported",ke||Se.platform.isFirefox)}_queueLoadingCallback(t){function n(){for(Lt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:n,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Et(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function s(O,k){return O.charCodeAt(k)<<24|O.charCodeAt(k+1)<<16|O.charCodeAt(k+2)<<8|O.charCodeAt(k+3)&255}function a(O,k,z,P){const I=O.substring(0,k),X=O.substring(k+z);return I+P+X}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(O,k){if(++f>30){vt("Load test font never loaded."),k();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(g.bind(null,O,k))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const E=16,S=1482184792;let _=s(b,E);for(o=0,l=y.length-3;o<l;o+=4)_=_-S+s(y,o)|0;o<y.length&&(_=_-S+s(y+"XXX",o)|0),b=a(b,E,4,JS(_));const w=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${y}";src:${w}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const O of[t.loadedName,y]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=O,C.append(k)}this._document.body.append(C),g(y,()=>{C.remove(),n.complete()})}}class f1{#t;constructor(t,n=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=n,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${qy(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const s=this.loadedName+"_path_"+n;let a;try{a=t.get(s)}catch(l){vt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[n]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function p1(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(ke)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function g1(h){if(ke&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Xr(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Sl(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const Hh=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,m1=h=>typeof h=="object"&&typeof h?.name=="string",eb=i1.bind(null,Hh,m1);class y1{#t=new Map;#e=Promise.resolve();postMessage(t,n){const s={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,n,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){vt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,n);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(n,a)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const wl={DATA:1,ERROR:2},ge={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Xm(){}function qe(h){if(h instanceof fi||h instanceof kl||h instanceof jm||h instanceof zr||h instanceof Th)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new fi(h.message);case"InvalidPDFException":return new kl(h.message);case"PasswordException":return new jm(h.message,h.code);case"ResponseException":return new zr(h.message,h.status,h.missing);case"UnknownErrorException":return new Th(h.message,h.details)}return new Th(h.message,h.toString())}class Lr{#t=new AbortController;constructor(t,n,s){this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===wl.DATA)a.resolve(t.data);else if(t.callback===wl.ERROR)a.reject(qe(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(n,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:wl.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:wl.ERROR,callbackId:t.callbackId,reason:qe(l)})});return}if(t.streamId){this.#i(t);return}n(t.data)}on(t,n){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=n}send(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}sendWithPromise(t,n,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:n},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,n,s,a){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:n,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:ge.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Lt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:ge.CANCEL,streamId:o,reason:qe(f)}),g.promise}},s)}#i(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:ge.ENQUEUE,streamId:n,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ge.CLOSE,streamId:n}),delete l.streamSinks[n])},error(f){Lt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ge.ERROR,streamId:n,reason:qe(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[n]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ge.START_COMPLETE,streamId:n,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ge.START_COMPLETE,streamId:n,reason:qe(f)})})}#n(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[n],u=this.streamSinks[n];switch(t.stream){case ge.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(qe(t.reason));break;case ge.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(qe(t.reason));break;case ge.PULL:if(!u){o.postMessage({sourceName:s,targetName:a,stream:ge.PULL_COMPLETE,streamId:n,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Xm).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ge.PULL_COMPLETE,streamId:n,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ge.PULL_COMPLETE,streamId:n,reason:qe(f)})});break;case ge.ENQUEUE:if(Lt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ge.CLOSE:if(Lt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,n);break;case ge.ERROR:Lt(l,"error should have stream controller"),l.controller.error(qe(t.reason)),this.#r(l,n);break;case ge.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(qe(t.reason)),this.#r(l,n);break;case ge.CANCEL:if(!u)break;const d=qe(t.reason);Promise.try(u.onCancel||Xm,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ge.CANCEL_COMPLETE,streamId:n,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ge.CANCEL_COMPLETE,streamId:n,reason:qe(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#r(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class nb{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){Xt("Abstract method `_createCanvas` called.")}}class b1 extends nb{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}class ib{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class Ym extends ib{async _fetch(t){const n=await Ca(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Xr(n)}}class sb{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,s,a,o){return"none"}destroy(t=!1){}}class v1 extends sb{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#n=t,this.#r=n}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=this.#r.createElementNS(ci,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#r.createElementNS(ci,"defs"),t.append(s),s.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const g=f.join(",");return[g,g,g]}const[n,s,a]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,l[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const n=this.#r.URL;n!==this.#r.baseURI&&($r(n)?vt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=sd(n,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#o.get(t);if(n)return n;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(n=this.#o.get(l),n)return this.#o.set(t,n),n;const u=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#p(u);return this.#g(s,a,o,f),d}addHCMFilter(t,n){const s=`${t}-${n}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!n))return o.url;const l=this.#v(t);t=st.makeHexColor(...l);const u=this.#v(n);if(n=st.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const E=A/255;d[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#n}_hcm_filter`,y=o.filter=this.#p(g);this.#g(f,f,f,y),this.#m(y);const b=(A,E)=>{const S=l[A]/255,_=u[A]/255,w=new Array(E+1);for(let T=0;T<=E;T++)w[T]=S+T/E*(_-S);return w.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let n=this.#o.get(t);if(n)return n;const[s]=this.#d([t]),a=`alpha_${s}`;if(n=this.#o.get(a),n)return this.#o.set(t,n),n;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#y(s,u),l}addLuminosityFilter(t){let n=this.#o.get(t||"luminosity");if(n)return n;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",n=this.#o.get(a),n)return this.#o.set(t,n),n;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,n,s,a,o){const l=`${n}-${s}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!n||!s))return u.url;const[d,f]=[n,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[a,o].map(this.#v.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#l.style.color="";const E=(w,T,C)=>{const O=new Array(256),k=(y-g)/C,z=w/255,P=(T-w)/(255*C);let I=0;for(let X=0;X<=C;X++){const Q=Math.round(g+X*k),Z=z+X*P;for(let ct=I;ct<=Q;ct++)O[ct]=Z;I=Q+1}for(let X=I;X<256;X++)O[X]=O[I-1];return O.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,_=u.filter=this.#p(S);return this.#m(_),this.#g(E(b[0],A[0],5),E(b[1],A[1],5),E(b[2],A[2],5),_),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const n=this.#r.createElementNS(ci,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#m(t){const n=this.#r.createElementNS(ci,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#p(t){const n=this.#r.createElementNS(ci,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#l.append(n),n}#u(t,n,s){const a=this.#r.createElementNS(ci,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#g(t,n,s,a){const o=this.#r.createElementNS(ci,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",n),this.#u(o,"feFuncB",s)}#y(t,n){const s=this.#r.createElementNS(ci,"feComponentTransfer");n.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,Ra(getComputedStyle(this.#l).getPropertyValue("color"))}}class ab{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class $m extends ab{async _fetch(t){const n=await Ca(t,"arraybuffer");return new Uint8Array(n)}}class rb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class Km extends rb{async _fetch(t){const n=await Ca(t,"arraybuffer");return new Uint8Array(n)}}ke&&vt("Please use the `legacy` build in Node.js environments.");async function dd(h){const n=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(n)}class A1 extends sb{}class S1 extends nb{_createCanvas(t,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,n)}}class w1 extends ib{async _fetch(t){return dd(t)}}class E1 extends ab{async _fetch(t){return dd(t)}}class x1 extends rb{async _fetch(t){return dd(t)}}const ua="__forcedDependency",{floor:Wm,ceil:Qm}=Math;function El(h,t,n,s,a,o){h[t*4+0]=Math.min(h[t*4+0],n),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const Ih=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class _1{#t;#e;constructor(t,n){this.#t=t,this.#e=n}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Ih}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const xl=(h,t)=>{if(!h)return;let n=h.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},h.set(t,n)),n};class T1{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[ua]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,n,s=!1){this.#f=t.width,this.#m=t.height,this.#y(n),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,n){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),n&&n.length>0?(this.#u.set(n),this.#u.fill(Ih,n.length)):this.#u.fill(Ih)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[ua]:{__proto__:this.#e[ua]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const n=Object.getPrototypeOf(this.#t);if(n===null)return this;this.#t=n,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(xl(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const n=this.#n.pop();return n!==void 0&&(xl(this.#g,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const n=this.#r.pop();return n!==void 0&&(xl(this.#g,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}pushBaseTransform(t){return this.#s.push(st.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,n){return this.#t[t]=n,this}recordIncrementalData(t,n){return this.#e[t].push(n),this}resetIncrementalData(t,n){return this.#e[t].length=0,this}recordNamedData(t,n){return this.#i.set(t,n),this}recordSimpleDataFromNamed(t,n,s){this.#t[t]=this.#i.get(n)??s}recordFutureForcedDependency(t,n){return this.recordIncrementalData(ua,n),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const n of t)n in this.#t&&this.recordFutureForcedDependency(n,this.#t[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(ua,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,n,s,a,o,l){const u=st.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform()),d=[1/0,1/0,-1/0,-1/0];st.axialAlignedBoundingBox([s,o,a,l],u,d);const f=st.intersect(this.#a,d);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,n,s,a,o,l){const u=this.#a;if(u[0]===1/0)return this;const d=st.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform());if(u[0]===-1/0)return st.axialAlignedBoundingBox([s,o,a,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return st.axialAlignedBoundingBox([s,o,a,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,n,s,a=1,o=0,l=0,u){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],st.axialAlignedBoundingBox(d,s.fontMatrix,g),(a!==1||o!==0||l!==0)&&st.scaleMinMax([a,0,0,-a,o,l],g),f)))return this.recordBBox(t,n,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&g&&f===void 0&&(f=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=l-y.actualBoundingBoxAscent&&g[3]>=l+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,n,g[0],g[2],g[1],g[3]):this.recordBBox(t,n,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,n){const s=this.#l,a=this.#t,o=this.#e;for(const l of n)l in this.#t?s.add(a[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,n){return this.#i.has(n)&&this.#l.add(this.#i.get(n)),this}recordOperation(t,n=!1){if(this.recordDependencies(t,[ua]),this.#g){const s=xl(this.#g,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Wm(this.#o[0]*256/this.#f),a=Wm(this.#o[1]*256/this.#m),o=Qm(this.#o[2]*256/this.#f),l=Qm(this.#o[3]*256/this.#m);El(this.#p,t,s,a,o,l);for(const u of this.#l)u!==t&&El(this.#p,u,s,a,o,l);for(const u of this.#n)u!==t&&El(this.#p,u,s,a,o,l);for(const u of this.#r)u!==t&&El(this.#p,u,s,a,o,l);n||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,n=!1){const s=Array.from(this.#l);this.recordOperation(t,n),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,n=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const n=this.#d.get(t);return this.#d.delete(t),n}_pushPendingDependencies(t){for(const n of t)this.#l.add(n)}take(){return this.#h.clear(),new _1(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class zl{#t;#e;#i;#n=0;#r=0;constructor(t,n,s){if(t instanceof zl&&t.#i===!!s)return t;this.#t=t,this.#e=n,this.#i=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,n){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,n){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,n){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,n){return this}recordSimpleDataFromNamed(t,n,s){return this.#t.recordSimpleDataFromNamed(t,n,this.#e),this}recordFutureForcedDependency(t,n){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,n,s,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,n,s,a,o,l),this}recordBBox(t,n,s,a,o,l){return this.#i||this.#t.recordBBox(this.#e,n,s,a,o,l),this}recordCharacterBBox(t,n,s,a,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,n,s,a,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,n){return this.#t.recordDependencies(this.#e,n),this}recordNamedDependency(t,n){return this.#t.recordNamedDependency(this.#e,n),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const vn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Gh(h,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,s),h.clip(a)}class fd{isModifyingCurrentTransform(){return!1}getPattern(){Xt("Abstract method `getPattern` called.")}}class C1 extends fd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(t,n,s,a){let o;if(a===Re.STROKE||a===Re.FILL){const l=n.current.getClippedPathBoundingBox(a,te(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=n.cachedCanvases.getCanvas("pattern",u,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=st.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...n.baseTransform),this.matrix&&g.transform(...this.matrix),Gh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Gh(t,this._bbox),o=this._createGradient(t);return o}}function Mh(h,t,n,s,a,o,l,u){const d=t.coords,f=t.colors,g=h.data,y=h.width*4;let b;d[n+1]>d[s+1]&&(b=n,n=s,s=b,b=o,o=l,l=b),d[s+1]>d[a+1]&&(b=s,s=a,a=b,b=l,l=u,u=b),d[n+1]>d[s+1]&&(b=n,n=s,s=b,b=o,o=l,l=b);const A=(d[n]+t.offsetX)*t.scaleX,E=(d[n+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,_=(d[s+1]+t.offsetY)*t.scaleY,w=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(E>=T)return;const C=f[o],O=f[o+1],k=f[o+2],z=f[l],P=f[l+1],I=f[l+2],X=f[u],Q=f[u+1],Z=f[u+2],ct=Math.round(E),dt=Math.round(T);let tt,et,B,G,J,pt,At,D;for(let q=ct;q<=dt;q++){if(q<_){const lt=q<E?0:(E-q)/(E-_);tt=A-(A-S)*lt,et=C-(C-z)*lt,B=O-(O-P)*lt,G=k-(k-I)*lt}else{let lt;q>T?lt=1:_===T?lt=0:lt=(_-q)/(_-T),tt=S-(S-w)*lt,et=z-(z-X)*lt,B=P-(P-Q)*lt,G=I-(I-Z)*lt}let W;q<E?W=0:q>T?W=1:W=(E-q)/(E-T),J=A-(A-w)*W,pt=C-(C-X)*W,At=O-(O-Q)*W,D=k-(k-Z)*W;const nt=Math.round(Math.min(tt,J)),ot=Math.round(Math.max(tt,J));let ft=y*q+nt*4;for(let lt=nt;lt<=ot;lt++)W=(tt-lt)/(tt-J),W<0?W=0:W>1&&(W=1),g[ft++]=et-(et-pt)*W|0,g[ft++]=B-(B-At)*W|0,g[ft++]=G-(G-D)*W|0,g[ft++]=255}}function R1(h,t,n){const s=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)Mh(h,n,s[g],s[g+1],s[g+u],a[g],a[g+1],a[g+u]),Mh(h,n,s[g+u+1],s[g+1],s[g+u],a[g+u+1],a[g+1],a[g+u])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)Mh(h,n,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class M1 extends fd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,n,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,E=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/E},_=y+4,w=b+4,T=s.getCanvas("mesh",_,w),C=T.context,O=C.createImageData(y,b);if(n){const z=O.data;for(let P=0,I=z.length;P<I;P+=4)z[P]=n[0],z[P+1]=n[1],z[P+2]=n[2],z[P+3]=255}for(const z of this._figures)R1(O,z,S);return C.putImageData(O,2,2),{canvas:T.canvas,offsetX:u-2*A,offsetY:d-2*E,scaleX:A,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,n,s,a){Gh(t,this._bbox);const o=new Float32Array(2);if(a===Re.SHADING)st.singularValueDecompose2dScale(te(t),o);else if(this.matrix){st.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;st.singularValueDecompose2dScale(n.baseTransform,o),o[0]*=u,o[1]*=d}else st.singularValueDecompose2dScale(n.baseTransform,o);const l=this._createMeshCanvas(o,a===Re.SHADING?null:this._background,n.cachedCanvases);return a!==Re.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class D1 extends fd{getPattern(){return"hotpink"}}function L1(h){switch(h[0]){case"RadialAxial":return new C1(h);case"Mesh":return new M1(h);case"Dummy":return new D1}throw new Error(`Unknown IR type: ${h[0]}`)}const Zm={COLORED:1,UNCOLORED:2};class pd{static MAX_PATTERN_SIZE=3e3;constructor(t,n,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,n){const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),Vl("TilingType: "+l);const y=s[0],b=s[1],A=s[2],E=s[3],S=A-y,_=E-b,w=new Float32Array(2);st.singularValueDecompose2dScale(this.matrix,w);const[T,C]=w;st.singularValueDecompose2dScale(this.baseTransform,w);const O=T*w[0],k=C*w[1];let z=S,P=_,I=!1,X=!1;const Q=Math.ceil(f*O),Z=Math.ceil(g*k),ct=Math.ceil(S*O),dt=Math.ceil(_*k);Q>=ct?z=f:I=!0,Z>=dt?P=g:X=!0;const tt=this.getSizeAndScale(z,this.ctx.canvas.width,O),et=this.getSizeAndScale(P,this.ctx.canvas.height,k),B=t.cachedCanvases.getCanvas("pattern",tt.size,et.size),G=B.context,J=d.createCanvasGraphics(G,n);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,o,u),G.translate(-tt.scale*y,-et.scale*b),J.transform(0,tt.scale,0,0,et.scale,0,0),G.save(),J.dependencyTracker?.save(),this.clipBbox(J,y,b,A,E),J.baseTransform=te(J.ctx),J.executeOperatorList(a),J.endDrawing(),J.dependencyTracker?.restore(),G.restore(),I||X){const pt=B.canvas;I&&(z=f),X&&(P=g);const At=this.getSizeAndScale(z,this.ctx.canvas.width,O),D=this.getSizeAndScale(P,this.ctx.canvas.height,k),q=At.size,W=D.size,nt=t.cachedCanvases.getCanvas("pattern-workaround",q,W),ot=nt.context,ft=I?Math.floor(S/f):0,lt=X?Math.floor(_/g):0;for(let Yt=0;Yt<=ft;Yt++)for(let xt=0;xt<=lt;xt++)ot.drawImage(pt,q*Yt,W*xt,q,W,0,0,q,W);return{canvas:nt.canvas,scaleX:At.scale,scaleY:D.scale,offsetX:y,offsetY:b}}return{canvas:B.canvas,scaleX:tt.scale,scaleY:et.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,n,s){const a=Math.max(pd.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,n,s,a,o){const l=a-n,u=o-s;t.ctx.rect(n,s,l,u),st.axialAlignedBoundingBox([n,s,a,o],te(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,s){const a=t.ctx,o=t.current;switch(n){case Zm.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=u;break;case Zm.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new ZS(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,s,a,o){let l=s;a!==Re.SHADING&&(l=st.transform(l,n.baseTransform),this.matrix&&(l=st.transform(l,this.matrix)));const u=this.createPatternCanvas(n,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function N1({src:h,srcPos:t=0,dest:n,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Se.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],g=s>>3,y=s&7,b=h.length;n=new Uint32Array(n.buffer);let A=0;for(let E=0;E<a;E++){for(const _=t+g;t<_;t++){const w=t<b?h[t]:255;n[A++]=w&128?f:d,n[A++]=w&64?f:d,n[A++]=w&32?f:d,n[A++]=w&16?f:d,n[A++]=w&8?f:d,n[A++]=w&4?f:d,n[A++]=w&2?f:d,n[A++]=w&1?f:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let _=0;_<y;_++)n[A++]=S&1<<7-_?f:d}return{srcPos:t,destPos:A}}const Jm=16,ty=100,O1=15,ey=10,Xe=16,Dh=new DOMMatrix,rn=new Float32Array(2),pa=new Float32Array([1/0,1/0,-1/0,-1/0]);function k1(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},h.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},h.transform=function(n,s,a,o,l,u){t.transform(n,s,a,o,l,u),this.__originalTransform(n,s,a,o,l,u)},h.setTransform=function(n,s,a,o,l,u){t.setTransform(n,s,a,o,l,u),this.__originalSetTransform(n,s,a,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(n){t.rotate(n),this.__originalRotate(n)},h.clip=function(n){t.clip(n),this.__originalClip(n)},h.moveTo=function(n,s){t.moveTo(n,s),this.__originalMoveTo(n,s)},h.lineTo=function(n,s){t.lineTo(n,s),this.__originalLineTo(n,s)},h.bezierCurveTo=function(n,s,a,o,l,u){t.bezierCurveTo(n,s,a,o,l,u),this.__originalBezierCurveTo(n,s,a,o,l,u)},h.rect=function(n,s,a,o){t.rect(n,s,a,o),this.__originalRect(n,s,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class B1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,n,s)):(a=this.canvasFactory.create(n,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function _l(h,t,n,s,a,o,l,u,d,f){const[g,y,b,A,E,S]=te(h);if(y===0&&b===0){const T=l*g+E,C=Math.round(T),O=u*A+S,k=Math.round(O),z=(l+d)*g+E,P=Math.abs(Math.round(z)-C)||1,I=(u+f)*A+S,X=Math.abs(Math.round(I)-k)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(A),C,k),h.drawImage(t,n,s,a,o,0,0,P,X),h.setTransform(g,y,b,A,E,S),[P,X]}if(g===0&&A===0){const T=u*b+E,C=Math.round(T),O=l*y+S,k=Math.round(O),z=(u+f)*b+E,P=Math.abs(Math.round(z)-C)||1,I=(l+d)*y+S,X=Math.abs(Math.round(I)-k)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,C,k),h.drawImage(t,n,s,a,o,0,0,X,P),h.setTransform(g,y,b,A,E,S),[X,P]}h.drawImage(t,n,s,a,o,l,u,d,f);const _=Math.hypot(g,y),w=Math.hypot(b,A);return[_*d,w*f]}class ny{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=jh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ce.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,n,s){s?.(this),this.clipBox=new Float32Array([0,0,t,n]),this.minMax=pa.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,n=null){const s=this.minMax.slice();if(t===Re.STROKE){n||Xt("Stroke bounding box must include transform."),st.singularValueDecompose2dScale(n,rn);const a=rn[0]*this.lineWidth/2,o=rn[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=st.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(pa,0)}getClippedPathBoundingBox(t=Re.FILL,n=null){return st.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function iy(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const n=t.height,s=t.width,a=n%Xe,o=(n-a)/Xe,l=a===0?o:o+1,u=h.createImageData(s,Xe);let d=0,f;const g=t.data,y=u.data;let b,A,E,S;if(t.kind===Or.GRAYSCALE_1BPP){const _=g.byteLength,w=new Uint32Array(y.buffer,0,y.byteLength>>2),T=w.length,C=s+7>>3,O=4294967295,k=Se.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(E=b<o?Xe:a,f=0,A=0;A<E;A++){const z=_-d;let P=0;const I=z>C?s:z*8-7,X=I&-8;let Q=0,Z=0;for(;P<X;P+=8)Z=g[d++],w[f++]=Z&128?O:k,w[f++]=Z&64?O:k,w[f++]=Z&32?O:k,w[f++]=Z&16?O:k,w[f++]=Z&8?O:k,w[f++]=Z&4?O:k,w[f++]=Z&2?O:k,w[f++]=Z&1?O:k;for(;P<I;P++)Q===0&&(Z=g[d++],Q=128),w[f++]=Z&Q?O:k,Q>>=1}for(;f<T;)w[f++]=0;h.putImageData(u,0,b*Xe)}}else if(t.kind===Or.RGBA_32BPP){for(A=0,S=s*Xe*4,b=0;b<o;b++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(u,0,A),A+=Xe;b<l&&(S=s*a*4,y.set(g.subarray(d,d+S)),h.putImageData(u,0,A))}else if(t.kind===Or.RGB_24BPP)for(E=Xe,S=s*E,b=0;b<l;b++){for(b>=o&&(E=a,S=s*E),f=0,A=S;A--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;h.putImageData(u,0,b*Xe)}else throw new Error(`bad image kind: ${t.kind}`)}function sy(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const n=t.height,s=t.width,a=n%Xe,o=(n-a)/Xe,l=a===0?o:o+1,u=h.createImageData(s,Xe);let d=0;const f=t.data,g=u.data;for(let y=0;y<l;y++){const b=y<o?Xe:a;({srcPos:d}=N1({src:f,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),h.putImageData(u,0,y*Xe)}}function _r(h,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Tl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function ay(h,t){if(t)return!0;st.singularValueDecompose2dScale(h,rn);const n=Math.fround(Mn.pixelRatio*As.PDF_TO_CSS_UNITS);return rn[0]<=n&&rn[1]<=n}const P1=["butt","round","square"],z1=["miter","round","bevel"],j1={},ry={};class ma{constructor(t,n,s,a,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,g){this.ctx=t,this.current=new ny(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new B1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,n,s=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(t,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):s}beginDrawing({transform:t,viewport:n,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...te(this.compositeCtx))}this.ctx.save(),Tl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=te(this.ctx)}executeOperatorList(t,n,s,a,o){const l=t.argsArray,u=t.fnArray;let d=n||0;const f=l.length;if(f===d)return d;const g=f-d>ey&&typeof s=="function",y=g?Date.now()+O1:0;let b=0;const A=this.commonObjs,E=this.objs;let S,_;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=u[d],_=l[d]??null,S!==wa.dependency)_===null?this[S](d):this[S](d,..._);else for(const w of _){this.dependencyTracker?.recordNamedData(w,d);const T=w.startsWith("g_")?A:E;if(!T.has(w))return T.get(w,s),d}if(d++,d===f)return d;if(g&&++b>ey){if(Date.now()>y)return s(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),l=Math.max(Math.hypot(n[2],n[3]),1),u=s,d=a,f="prescale1",g,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,A=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(f,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,d,0,0,b,A),t=g.canvas,u=b,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,n){const s=this.ctx,{width:a,height:o}=n,l=this.current.fillColor,u=this.current.patternFill,d=te(s);let f,g,y,b;if((n.bitmap||n.data)&&n.count>1){const Q=n.bitmap||n.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(Q),f||(f=new Map,this._cachedBitmapsMap.set(Q,f));const Z=f.get(g);if(Z&&!u){const ct=Math.round(Math.min(d[0],d[2])+d[4]),dt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,vn.transformAndFill),{canvas:Z,offsetX:ct,offsetY:dt}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,o),sy(b.context,n));let A=st.transform(d,[1/a,0,0,-1/o,0,0]);A=st.transform(A,[1,0,0,1,0,-o]);const E=pa.slice();st.axialAlignedBoundingBox([0,0,a,o],A,E);const[S,_,w,T]=E,C=Math.round(w-S)||1,O=Math.round(T-_)||1,k=this.cachedCanvases.getCanvas("fillCanvas",C,O),z=k.context,P=S,I=_;z.translate(-P,-I),z.transform(...A),y||(y=this._scaleImage(b.canvas,zn(z)),y=y.img,f&&u&&f.set(g,y)),z.imageSmoothingEnabled=ay(te(z),n.interpolate),_l(z,y,0,0,y.width,y.height,0,0,a,o),z.globalCompositeOperation="source-in";const X=st.transform(zn(z),[1,0,0,1,-P,-I]);return z.fillStyle=u?l.getPattern(s,this,X,Re.FILL,t):l,z.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,k.canvas)),this.dependencyTracker?.recordDependencies(t,vn.transformAndFill),{canvas:k.canvas,offsetX:Math.round(P),offsetY:Math.round(I)}}setLineWidth(t,n){this.dependencyTracker?.recordSimpleData("lineWidth",t),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(t,n){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=P1[n]}setLineJoin(t,n){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=z1[n]}setMiterLimit(t,n){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=n}setDash(t,n,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(n),a.lineDashOffset=s)}setRenderingIntent(t,n){}setFlatness(t,n){}setGState(t,n){for(const[s,a]of n)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,n,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),_r(this.suspendedCtx,l),k1(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_r(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,s,a){const o=a[0],l=a[1],u=a[2]-o,d=a[3]-l;u===0||d===0||(this.genericComposeSMask(n.context,s,u,d,n.subtype,n.backdrop,n.transferMap,o,l,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,n,s,a,o,l,u,d,f,g,y){let b=t.canvas,A=d-g,E=f-y;if(l)if(A<0||E<0||A+s>b.width||E+a>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,a),w=_.context;w.drawImage(b,-A,-E),w.globalCompositeOperation="destination-atop",w.fillStyle=l,w.fillRect(0,0,s,a),w.globalCompositeOperation="source-over",b=_.canvas,A=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(A,E,s,a),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,E,s,a),t.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?n.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,s,a),n.clip(S),n.globalCompositeOperation="destination-in",n.drawImage(b,A,E,s,a,d,f,s,a),n.restore()}save(t){this.inSMaskMode&&_r(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&_r(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,n,s,a,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(n,s,a,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[n](t,o);return}if(this.dependencyTracker!==null){const l=n===wa.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let u=0,d=o.length;u<d;)switch(o[u++]){case vl.moveTo:l.moveTo(o[u++],o[u++]);break;case vl.lineTo:l.lineTo(o[u++],o[u++]);break;case vl.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case vl.closePath:l.closePath();break;default:vt(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}st.axialAlignedBoundingBox(a,te(this.ctx),this.current.minMax),this[n](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,n,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,zn(a),Re.STROKE,t),l){const u=new Path2D;u.addPath(n,a.getTransform().invertSelf().multiplySelf(l)),n=u}this.rescaleAndStroke(n,!1),a.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(t,vn.stroke),s&&this.consumePath(t,n,this.current.getClippedPathBoundingBox(Re.STROKE,te(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,n){this.stroke(t,n)}fill(t,n,s=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,zn(a),Re.FILL,t),f){const g=new Path2D;g.addPath(n,a.getTransform().invertSelf().multiplySelf(f)),n=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(n,"evenodd"),this.pendingEOFill=!1):a.fill(n)),this.dependencyTracker?.recordDependencies(t,vn.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,n,d)}eoFill(t,n){this.pendingEOFill=!0,this.fill(t,n)}fillStroke(t,n){this.fill(t,n,!1),this.stroke(t,n,!1),this.consumePath(t,n)}eoFillStroke(t,n){this.pendingEOFill=!0,this.fillStroke(t,n)}closeFillStroke(t,n){this.fillStroke(t,n)}closeEOFillStroke(t,n){this.pendingEOFill=!0,this.fillStroke(t,n)}endPath(t,n){this.consumePath(t,n)}rawFillPath(t,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(t,vn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=j1}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=ry}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const n=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;n!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(n!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:g}of n)g&&a.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,n){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=n}setWordSpacing(t,n){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=n}setHScale(t,n){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=n/100}setLeading(t,n){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-n}setFont(t,n,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",n,t);const a=this.commonObjs.get(n),o=this.current;if(!a)throw new Error(`Can't find font for ${n}`);if(o.fontMatrix=a.fontMatrix||jh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+n),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const l=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=s;s<Jm?g=Jm:s>ty&&(g=ty),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(t,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=n}setTextRise(t,n){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=n}moveText(t,n,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,n,s){this.setLeading(t,-s),this.moveText(t,n,s)}setTextMatrix(t,n){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=n,s.textMatrixScale=Math.hypot(n[0],n[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,n,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(n)),a}paintChar(t,n,s,a,o,l){const u=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&Ce.FILL_STROKE_MASK,A=!!(g&Ce.ADD_TO_PATH_FLAG),E=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||A||E||S)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,n)),_&&(f.disableFontFace||E||S)){u.save(),u.translate(s,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let w;if(b===Ce.FILL||b===Ce.FILL_STROKE)if(o){w=u.getTransform(),u.setTransform(...o);const T=this.#i(_,w,o);u.fill(T)}else u.fill(_);if(b===Ce.STROKE||b===Ce.FILL_STROKE)if(l){w||=u.getTransform(),u.setTransform(...l);const{a:T,b:C,c:O,d:k}=w,z=st.inverseTransform(l),P=st.transform([T,C,O,k,0,0],z);st.singularValueDecompose2dScale(P,rn),u.lineWidth*=Math.max(rn[0],rn[1])/y,u.stroke(this.#i(_,w,l))}else u.lineWidth/=y,u.stroke(_);u.restore()}else(b===Ce.FILL||b===Ce.FILL_STROKE)&&(u.fillText(n,s,a),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(n))),(b===Ce.STROKE||b===Ce.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(n)).recordDependencies(t,vn.stroke),u.strokeText(n,s,a));A&&((this.pendingTextPaths||=[]).push({transform:te(u),x:s,y:a,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<n.length;a+=4)if(n[a]>0&&n[a]<255){s=!0;break}return Et(this,"isFontSubpixelAAEnabled",s)}showText(t,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,vn.showText).resetBBox(t),this.current.textRenderingMode&Ce.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,n),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=n.length,A=a.vertical,E=A?1:-1,S=a.defaultVMetrics,_=o*s.fontMatrix[0],w=s.textRenderingMode===Ce.FILL&&!a.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(y,-1):l.scale(y,1);let T,C;if(s.patternFill){l.save();const I=s.fillColor.getPattern(l,this,zn(l),Re.FILL,t);T=te(l),l.restore(),l.fillStyle=I}if(s.patternStroke){l.save();const I=s.strokeColor.getPattern(l,this,zn(l),Re.STROKE,t);C=te(l),l.restore(),l.strokeStyle=I}let O=s.lineWidth;const k=s.textMatrixScale;if(k===0||O===0){const I=s.textRenderingMode&Ce.FILL_STROKE_MASK;(I===Ce.STROKE||I===Ce.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=k;if(u!==1&&(l.scale(u,u),O/=u),l.lineWidth=O,a.isInvalidPDFjsFont){const I=[];let X=0;for(const Z of n)I.push(Z.unicode),X+=Z.width;const Q=I.join("");if(l.fillText(Q,0,0),this.dependencyTracker!==null){const Z=l.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=X*_*y,l.restore(),this.compose();return}let z=0,P;for(P=0;P<b;++P){const I=n[P];if(typeof I=="number"){z+=E*I*o/1e3;continue}let X=!1;const Q=(I.isSpace?f:0)+d,Z=I.fontChar,ct=I.accent;let dt,tt,et=I.width;if(A){const J=I.vmetric||S,pt=-(I.vmetric?J[1]:et*.5)*_,At=J[2]*_;et=J?-J[0]:et,dt=pt/u,tt=(z+At)/u}else dt=z/u,tt=0;let B;if(a.remeasure&&et>0){B=l.measureText(Z);const J=B.width*1e3/o*u;if(et<J&&this.isFontSubpixelAAEnabled){const pt=et/J;X=!0,l.save(),l.scale(pt,1),dt/=pt}else et!==J&&(dt+=(et-J)/2e3*o/u)}if(this.contentVisible&&(I.isInFont||a.missingFile)){if(w&&!ct)l.fillText(Z,dt,tt),this.dependencyTracker?.recordCharacterBBox(t,l,B?{bbox:null}:a,o/u,dt,tt,()=>B??l.measureText(Z));else if(this.paintChar(t,Z,dt,tt,T,C),ct){const J=dt+o*ct.offset.x/u,pt=tt-o*ct.offset.y/u;this.paintChar(t,ct.fontChar,J,pt,T,C)}}const G=A?et*_-Q*g:et*_+Q*g;z+=G,X&&l.restore()}A?s.y-=z:s.x+=z*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,n){const s=this.ctx,a=this.current,o=a.font,l=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,y=a.textHScale*u,b=a.fontMatrix||jh,A=n.length,E=a.textRenderingMode===Ce.INVISIBLE;let S,_,w,T;if(E||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new zl(C,t):null,S=0;S<A;++S){if(_=n[S],typeof _=="number"){T=d*_*l/1e3,this.ctx.translate(T,0),a.x+=T*y;continue}const O=(_.isSpace?g:0)+f,k=o.charProcOperatorList[_.operatorListId];k?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(k),this.restore()):vt(`Type3 character "${_.operatorListId}" is not available.`);const z=[_.width,0];st.applyTransform(z,b),w=z[0]*l+O,s.translate(w,0),a.x+=w*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,n,s){}setCharWidthAndBounds(t,n,s,a,o,l,u){const d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,u).recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}getColorN_Pattern(t,n){let s;if(n[0]==="TilingPattern"){const a=this.baseTransform||te(this.ctx),o={createCanvasGraphics:(l,u)=>new ma(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new zl(this.dependencyTracker,u,!0):null)};s=new pd(n,this.ctx,o,a)}else s=this._getPattern(t,n[1],n[2]);return s}setStrokeColorN(t,...n){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,n),this.current.patternStroke=!0}setFillColorN(t,...n){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,n),this.current.patternFill=!0}setStrokeRGBColor(t,n){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,n){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n,s=null){let a;return this.cachedPatterns.has(n)?a=this.cachedPatterns.get(n):(a=L1(this.getObject(t,n)),this.cachedPatterns.set(n,a)),s&&(a.matrix=s),a}shadingFill(t,n){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,n);s.fillStyle=a.getPattern(s,this,zn(s),Re.SHADING,t);const o=zn(s);if(o){const{width:l,height:u}=s.canvas,d=pa.slice();st.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,g,y,b]=d;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,vn.transform).recordDependencies(t,vn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Xt("Should not call beginInlineImage")}beginImageData(){Xt("Should not call beginImageData")}paintFormXObjectBegin(t,n,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),n&&this.transform(t,...n),this.baseTransform=te(this.ctx),s)){st.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,l,u]=s,d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,n){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;n.isolated||Vl("TODO: Support non-isolated groups."),n.knockout&&vt("Knockout groups not supported.");const a=te(s);if(n.matrix&&s.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let o=pa.slice();st.axialAlignedBoundingBox(n.bbox,te(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=st.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;n.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),A=b.context;A.translate(-u,-d),A.transform(...a);let E=new Path2D;const[S,_,w,T]=n.bbox;if(E.rect(S,_,w-S,T-_),n.matrix){const C=new Path2D;C.addPath(E,new DOMMatrix(n.matrix)),E=C}A.clip(E),n.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:d,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),_r(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,n){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=te(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=pa.slice();st.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,n,s,a,o,l){if(this.#t(),Tl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,st.singularValueDecompose2dScale(te(this.ctx),rn);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(n,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(rn[0],0,0,-rn[1],0,d*rn[1]),Tl(this.ctx)}else{Tl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new ny(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,n){if(!this.contentVisible)return;const s=n.count;n=this.getObject(t,n.data,n),n.count=s;const a=this.ctx,o=this._createMaskCanvas(t,n),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,s,a=0,o=0,l,u){if(!this.contentVisible)return;n=this.getObject(t,n.data,n);const d=this.ctx;d.save();const f=te(d);d.transform(s,a,o,l,0,0);const g=this._createMaskCanvas(t,n);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=st.transform(f,[s,a,o,l,u[y],u[y+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,n){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,vn.transformAndFill);for(const l of n){const{data:u,width:d,height:f,transform:g}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const A=this.getObject(t,u,l);sy(b,A),b.globalCompositeOperation="source-in",b.fillStyle=o?a.getPattern(b,this,zn(s),Re.FILL,t):a,b.fillRect(0,0,d,f),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),_l(s,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,n){if(!this.contentVisible)return;const s=this.getObject(t,n);if(!s){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,n,s,a,o){if(!this.contentVisible)return;const l=this.getObject(t,n);if(!l){vt("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let g=0,y=o.length;g<y;g+=2)f.push({transform:[s,0,0,a,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(n,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,n){if(!this.contentVisible)return;const s=n.width,a=n.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/a);let u;if(n.bitmap)u=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)u=n;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,a).context;iy(g,n),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,zn(o));o.imageSmoothingEnabled=ay(te(o),n.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,vn.imageXObject).recordOperation(t),_l(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,n,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(n.bitmap)o=n.bitmap;else{const l=n.width,u=n.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;iy(f,n),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)a.save(),a.transform(...l.transform),a.scale(1,-1),_l(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,vn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,n){}markPointProps(t,n,s){}beginMarkedContent(t,n){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n,s){this.dependencyTracker?.beginMarkedContent(t),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,n,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===ry?o.clip(n,"evenodd"):o.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=te(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:s,c:a,d:o}=this.ctx.getTransform();let l,u;if(s===0&&a===0){const d=Math.abs(n),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/f;else{const g=d*t,y=f*t;l=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(n*o-s*a),f=Math.hypot(n,s),g=Math.hypot(a,o);if(t===0)l=g/d,u=f/d;else{const y=t*d;l=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,n){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const u=s.getLineDash();n&&s.save(),s.scale(o,l),Dh.a=1/o,Dh.d=1/l;const d=new Path2D;if(d.addPath(t,Dh),u.length>0){const f=Math.max(o,l);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=a||1,s.stroke(d),n&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in wa)ma.prototype[h]!==void 0&&(ma.prototype[wa[h]]=ma.prototype[h]);class ya{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const n=new TextEncoder,s={};let a=0;for(const f of ya.strings){const g=n.encode(t[f]);s[f]=g,a+=4+g.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of ya.strings){const g=s[f],y=g.length;u.setUint32(d,y),l.set(g,d+4),d+=4+y}return Lt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Lt(t<ya.strings.length,"Invalid string index");let n=0;for(let a=0;a<t;a++)n+=this.#e.getUint32(n)+4;const s=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class ba{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const n=new TextEncoder,s={};let a=0;for(const b of ba.strings){const A=n.encode(t[b]);s[b]=A,a+=4+A.length}a+=4;let o,l,u=1+a;t.style&&(o=n.encode(t.style.style),l=n.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,a=0;for(const b of ba.strings){const A=s[b],E=A.length;a+=4+E,g.setUint32(y,E),f.set(A,y+4),y+=4+E}return g.setUint32(y-a-4,a),t.style&&(g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,g.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),Lt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Lt(t<ba.strings.length,"Invalid string index");let n=5;for(let a=0;a<t;a++)n+=this.#e.getUint32(n)+4;const s=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const n=this.#e.getUint32(t),s=this.#i.decode(new Uint8Array(this.#t,t+4,n));t+=4+n;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class Gt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:n}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),n&&Object.assign(this,n)}#c(t){Lt(t<Gt.bools.length,"Invalid boolean index");const n=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(n)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Lt(t<Gt.numbers.length,"Invalid number index"),this.#o.getFloat64(Gt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Gt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Gt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Gt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Lt(t<Gt.strings.length,"Invalid string index");let n=Gt.#r+4;for(let o=0;o<t;o++)n+=this.#o.getUint32(n)+4;const s=this.#o.getUint32(n),a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,n+4,s)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#s,t+4,a)),new ya(o.buffer)}get systemFontInfo(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,t+4,s)),new ba(a.buffer)}static write(t){const n=t.systemFontInfo?ba.write(t.systemFontInfo):null,s=t.cssFontInfo?ya.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of Gt.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const u=Gt.#r+4+l+4+(n?n.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;const b=Gt.bools.length;let A=0,E=0;for(let S=0;S<b;S++){const _=t[Gt.bools[S]];A|=(_===void 0?0:_?2:1)<<E,E+=2,(E===8||S===b-1)&&(g.setUint8(y++,A),A=0,E=0)}Lt(y===Gt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Gt.numbers)g.setFloat64(y,t[S]),y+=8;if(Lt(y===Gt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Lt(y===Gt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Lt(y===Gt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Lt(y===Gt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Gt.#r,0),y+=4;for(const S of Gt.strings){const _=o[S],w=_.length;g.setUint32(y,w),f.set(_,y+4),y+=4+w}if(g.setUint32(Gt.#r,y-Gt.#r-4),!n)g.setUint32(y,0),y+=4;else{const S=n.byteLength;g.setUint32(y,S),Lt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(n),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Lt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Lt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class qi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class F1{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const fa=Symbol("INTERNAL");class U1{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:n,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&sn.DISPLAY),this.#e=!!(t&sn.PRINT),this.name=n,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,s=!1){t!==fa&&Xt("Internal method `_setVisible` called."),this.#i=s,this.#n=n}}class H1{#t=null;#e=new Map;#i=null;#n=null;constructor(t,n=sn.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new U1(n,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(fa,!1);for(const s of t.on)this.#e.get(s)._setVisible(fa,!0);for(const s of t.off)this.#e.get(s)._setVisible(fa,!1);this.#i=this.getHash()}}#r(t){const n=t.length;if(n<2)return!0;const s=t[0];for(let a=1;a<n;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return vt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Vl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(vt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return vt(`Unknown optional content policy ${t.policy}.`),!0}return vt(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,s=!0){const a=this.#e.get(t);if(!a){vt(`Optional content group not found: ${t}`);return}if(s&&n&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(fa,!1,!0);a._setVisible(fa,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,n);break;case"OFF":this.setVisibility(a,!1,n);break;case"Toggle":this.setVisibility(a,!o.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Jy;for(const[n,s]of this.#e)t.update(`${n}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class I1{constructor(t,{disableRange:n=!1,disableStream:s=!1}){Lt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Lt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new G1(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new V1(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class G1{constructor(t,n,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Xl(a)?a:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class V1{constructor(t,n,s){this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function q1(h){let t=!0,n=s("filename\\*","i").exec(h);if(n){n=n[1];let g=u(n);return g=unescape(g),g=d(g),g=f(g),o(g)}if(n=l(h),n){const g=f(n);return o(g)}if(n=s("filename","i").exec(h),n){n=n[1];let g=u(n);return g=f(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Xr(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,_,w]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,w]}const E=[];for(let S=0;S<y.length&&S in y;++S){let[_,w]=y[S];w=u(w),_&&(w=unescape(w),S===0&&(w=d(w))),E.push(w)}return E.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),E=g.slice(y+1).replace(/^[^']*'/,"");return a(b,E)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,E){if(A==="q"||A==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),a(b,E);try{E=atob(E)}catch{}return a(b,E)})}return""}function ob(h,t){const n=new Headers;if(!h||!t||typeof t!="object")return n;for(const s in t){const a=t[s];a!==void 0&&n.append(s,a)}return n}function Yl(h){return URL.parse(h)?.origin??null}function lb({responseHeaders:h,isHttp:t,rangeChunkSize:n,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*n)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function cb(h){const t=h.get("Content-Disposition");if(t){let n=q1(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(Xl(n))return n}return null}function Qr(h,t){return new zr(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function ub(h){return h===200||h===206}function hb(h,t,n){return{method:"GET",headers:h,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function db(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(vt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class X1{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=ob(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Y1(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new $1(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Y1{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(t.headers),a=n.url;fetch(a,hb(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Yl(o.url),!ub(o.status))throw Qr(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=lb({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=cb(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:db(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class $1{constructor(t,n,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${s-1}`);const l=a.url;fetch(l,hb(o,this._withCredentials,this._abortController)).then(u=>{const d=Yl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!ub(u.status))throw Qr(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:db(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Lh=200,Nh=206;function K1(h){const t=h.response;return typeof t!="string"?t:Xr(t).buffer}class W1{_responseOrigin=null;constructor({url:t,httpHeaders:n,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=ob(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const n=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,l]of this.headers)n.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Nh):a.expectedStatus=Lh,n.responseType="arraybuffer",Lt(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{t.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,n.send(null),s}onProgress(t,n){const s=this.pendingRequests[t];s&&s.onProgress?.(n)}onStateChange(t,n){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||Lh;if(!(o===Lh&&s.expectedStatus===Nh)&&o!==s.expectedStatus){s.onError(a.status);return}const u=K1(a);if(o===Nh){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(vt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class Q1{constructor(t){this._source=t,this._manager=new W1(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Z1(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const s=new J1(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Z1{constructor(t,n){this._manager=t,this._url=n.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t);this._manager._responseOrigin=Yl(n.responseURL);const s=n.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=lb({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=cb(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Qr(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class J1{constructor(t,n,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:n,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Yl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Qr(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const tw=/^[a-z][a-z0-9\-+.]+:/i;function ew(h){if(tw.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class nw{constructor(t){this.source=t,this.url=ew(t.url),Lt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new iw(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new sw(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class iw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Qr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class sw{constructor(t,n,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:n,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Tr=Symbol("INITIAL_DATA");class fb{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Tr}}get(t,n=null){if(n){const a=this.#e(t);return a.promise.then(()=>n(a.data)),null}const s=this.#t[t];if(!s||s.data===Tr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const n=this.#t[t];return!!n&&n.data!==Tr}delete(t){const n=this.#t[t];return!n||n.data===Tr?!1:(delete this.#t[t],!0)}resolve(t,n=null){const s=this.#e(t);s.data=n,s.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==Tr&&(yield[t,n])}}}const aw=1e5,oy=30;let Fr=class An{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#_=new WeakMap;static#E=null;static#A=new Set;constructor({textContentSource:t,container:n,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=n,this.#h=s.scale*Mn.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=a,this.#a=o,An.#M(),Xi(n,s),this.#t.promise.finally(()=>{An.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=Se.platform;return Et(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:n,done:s})=>{if(s){this.#t.resolve();return}this.#r??=n.lang,Object.assign(this.#f,n.styles),this.#C(n.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),An.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const s=t.scale*Mn.pixelRatio,a=t.rotation;if(a!==this.#d&&(n?.(),this.#d=a,Xi(this.#l,{rotation:a})),s!==this.#h){n?.(),this.#h=s;const o={div:null,properties:null,ctx:An.#D(this.#r)};for(const l of this.#u)o.properties=this.#g.get(l),o.div=l,this.#x(o)}}cancel(){const t=new fi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#i)return;this.#s.ctx??=An.#D(this.#r);const n=this.#u,s=this.#m;for(const a of t){if(n.length>aw){vt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#w(a)}}#w(t){const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(n);const a=st.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=An.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),f=d*An.#z(u,l,this.#r);let g,y;o===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const b="calc(var(--total-scale-factor) *",A=n.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#a).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(An.#E*d).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=d,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#n&&(n.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(E=!0)}if(E&&(s.canvasWidth=l.vertical?t.height:t.width),this.#g.set(n,s),this.#s.div=n,this.#s.properties=s,this.#x(this.#s),s.hasText&&this.#e.append(n),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#x(t){const{div:n,properties:s,ctx:a}=t,{style:o}=n;let l="";if(An.#E>1&&(l=`scale(${1/An.#E})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:f}=s;An.#R(a,f*this.#h,u);const{width:g}=a.measureText(n.textContent);g>0&&(l=`scaleX(${d*this.#h/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let n=this.#b.get(t||="");if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,n),this.#_.set(n,{size:0,family:""})}return n}static#R(t,n,s){const a=this.#_.get(t);n===a.size&&s===a.family||(t.font=`${n}px ${s}`,a.size=n,a.family=s)}static#M(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#z(t,n,s){const a=this.#v.get(t);if(a)return a;const o=this.#D(s);o.canvas.width=o.canvas.height=oy,this.#R(o,oy,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(Se.platform.isFirefox&&vt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?f=n.ascent:n.descent&&(f=1+n.descent)),this.#v.set(t,f),f}};const rw=100;function gd(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new md,{docId:n}=t,s=h.url?p1(h.url):null,a=h.data?g1(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof yd?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof Ea?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!$r(h.docBaseUrl)?h.docBaseUrl:null,A=Sl(h.cMapUrl),E=h.cMapPacked!==!1,S=h.CMapReaderFactory||(ke?w1:Ym),_=Sl(h.iccUrl),w=Sl(h.standardFontDataUrl),T=h.StandardFontDataFactory||(ke?E1:$m),C=Sl(h.wasmUrl),O=h.WasmFactory||(ke?x1:Km),k=h.stopAtErrors!==!0,z=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,P=h.isEvalSupported!==!1,I=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!ke,X=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!ke&&(Se.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,Z=typeof h.disableFontFace=="boolean"?h.disableFontFace:ke,ct=h.fontExtraProperties===!0,dt=h.enableXfa===!0,tt=h.ownerDocument||globalThis.document,et=h.disableRange===!0,B=h.disableStream===!0,G=h.disableAutoFetch===!0,J=h.pdfBug===!0,pt=h.CanvasFactory||(ke?S1:b1),At=h.FilterFactory||(ke?A1:v1),D=h.enableHWA===!0,q=h.useWasm!==!1,W=d?d.length:h.length??NaN,nt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!ke&&!Z,ot=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===Ym&&T===$m&&O===Km&&A&&w&&C&&Dr(A,document.baseURI)&&Dr(w,document.baseURI)&&Dr(C,document.baseURI)),ft=null;KS(y);const lt={canvasFactory:new pt({ownerDocument:tt,enableHWA:D}),filterFactory:new At({docId:n,ownerDocument:tt}),cMapReaderFactory:ot?null:new S({baseUrl:A,isCompressed:E}),standardFontDataFactory:ot?null:new T({baseUrl:w}),wasmFactory:ot?null:new O({baseUrl:C})};g||(g=Ea.create({verbosity:y,port:qi.workerPort}),t._worker=g);const Yt={docId:n,apiVersion:"5.4.296",data:a,password:u,disableAutoFetch:G,rangeChunkSize:f,length:W,docBaseUrl:b,enableXfa:dt,evaluatorOptions:{maxImageSize:z,disableFontFace:Z,ignoreErrors:k,isEvalSupported:P,isOffscreenCanvasSupported:I,isImageDecoderSupported:X,canvasMaxAreaInBytes:Q,fontExtraProperties:ct,useSystemFonts:nt,useWasm:q,useWorkerFetch:ot,cMapUrl:A,iccUrl:_,standardFontDataUrl:w,wasmUrl:C}},xt={ownerDocument:tt,pdfBug:J,styleElement:ft,loadingParams:{disableAutoFetch:G,enableXfa:dt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const zt=g.messageHandler.sendWithPromise("GetDocRequest",Yt,a?[a.buffer]:null);let Pe;if(d)Pe=new I1(d,{disableRange:et,disableStream:B});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ye=Dr(s)?X1:ke?nw:Q1;Pe=new Ye({url:s,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:et,disableStream:B})}return zt.then(Ye=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Nt=new Lr(n,Ye,g.port),Ot=new cw(Nt,t,Pe,xt,lt,D);t._transport=Ot,Nt.send("Ready",null)})}).catch(t._capability.reject),t}class md{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${md.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let yd=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,n,s=!1,a=null){this.length=t,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,n){for(const s of this.#r)s(t,n)}onDataProgress(t,n){this.#t.promise.then(()=>{for(const s of this.#n)s(t,n)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const n of this.#i)n(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,n){Xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class ow{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,n){return this._transport.getAnnotationsByType(t,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class lw{#t=!1;constructor(t,n,s,a=!1){this._pageIndex=t,this._pageInfo=n,this._transport=s,this._stats=a?new Um:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new fb,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new Yr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:n=t.canvas,viewport:s,intent:a="display",annotationMode:o=In.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:E=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,b),{renderingIntent:_,cacheKey:w}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(_);let T=this._intentStates.get(w);T||(T=Object.create(null),this._intentStates.set(w,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const C=!!(_&sn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),k=!this.recordedBBoxes&&(A||O),z=X=>{if(T.renderTasks.delete(P),k){const Q=P.gfx?.dependencyTracker.take();Q&&(P.stepper&&P.stepper.setOperatorBBoxes(Q,P.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Q))}C&&(this.#t=!0),this.#e(),X?(P.capability.reject(X),this._abortOperatorList({intentState:T,reason:X instanceof Error?X:new Error(X)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new ga({callback:z,params:{canvas:n,canvasContext:t,dependencyTracker:k?new T1(n,T.operatorList.length,O):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:E});(T.renderTasks||=new Set).add(P);const I=P.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([X,Q])=>{if(this.destroyed){z();return}if(this._stats?.time("Rendering"),!(Q.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:X,optionalContentConfig:Q}),P.operatorListChanged()}).catch(z),I}getOperatorList({intent:t="display",annotationMode:n=In.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,n,s,a,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>jr.textContent(s));const n=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const l=n.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#e();return t&&n&&(this._stats&&=new Um),n}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,n){const s=this._intentStates.get(n);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let s=0,a=t.length;s<a;s++)n.operatorList.fnArray.push(t.fnArray[s]),n.operatorList.argsArray.push(t.argsArray[s]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:a},l).getReader(),f=this._intentStates.get(n);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:n,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof ql){let a=rw;n.extraDelay>0&&n.extraDelay<1e3&&(a+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},a);return}}if(t.streamReader.cancel(new fi(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Gi,Tn,ui,ms,Ul,ys,bs,Be,Ll,pb,gb,Nr,Sa,Nl;const Zt=class Zt{constructor({name:t=null,port:n=null,verbosity:s=WS()}={}){Bn(this,Be);Bn(this,Gi,Promise.withResolvers());Bn(this,Tn,null);Bn(this,ui,null);Bn(this,ms,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,n){if(Qt(Zt,bs).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Qt(Zt,bs).set(n,this),Pn(this,Be,pb).call(this,n)}else Pn(this,Be,gb).call(this)}get promise(){return Qt(this,Gi).promise}get port(){return Qt(this,ui)}get messageHandler(){return Qt(this,Tn)}destroy(){this.destroyed=!0,Qt(this,ms)?.terminate(),Ve(this,ms,null),Qt(Zt,bs).delete(Qt(this,ui)),Ve(this,ui,null),Qt(this,Tn)?.destroy(),Ve(this,Tn,null)}static create(t){const n=Qt(this,bs).get(t?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Zt(t)}static get workerSrc(){if(qi.workerSrc)return qi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Et(this,"_setupFakeWorkerGlobal",(async()=>Qt(this,Sa,Nl)?Qt(this,Sa,Nl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gi=new WeakMap,Tn=new WeakMap,ui=new WeakMap,ms=new WeakMap,Ul=new WeakMap,ys=new WeakMap,bs=new WeakMap,Be=new WeakSet,Ll=function(){Qt(this,Gi).resolve(),Qt(this,Tn).send("configure",{verbosity:this.verbosity})},pb=function(t){Ve(this,ui,t),Ve(this,Tn,new Lr("main","worker",t)),Qt(this,Tn).on("ready",()=>{}),Pn(this,Be,Ll).call(this)},gb=function(){if(Qt(Zt,ys)||Qt(Zt,Sa,Nl)){Pn(this,Be,Nr).call(this);return}let{workerSrc:t}=Zt;try{Zt._isSameOrigin(window.location,t)||(t=Zt._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),s=new Lr("main","worker",n),a=()=>{o.abort(),s.destroy(),n.terminate(),this.destroyed?Qt(this,Gi).reject(new Error("Worker was destroyed")):Pn(this,Be,Nr).call(this)},o=new AbortController;n.addEventListener("error",()=>{Qt(this,ms)||a()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}Ve(this,Tn,s),Ve(this,ui,n),Ve(this,ms,n),Pn(this,Be,Ll).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{Pn(this,Be,Nr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{Vl("The worker has been disabled.")}Pn(this,Be,Nr).call(this)},Nr=function(){Qt(Zt,ys)||(vt("Setting up fake worker."),Ve(Zt,ys,!0)),Zt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Qt(this,Gi).reject(new Error("Worker was destroyed"));return}const n=new y1;Ve(this,ui,n);const s=`fake${wm(Zt,Ul)._++}`,a=new Lr(s+"_worker",s,n);t.setup(a,n),Ve(this,Tn,new Lr(s,s+"_worker",n)),Pn(this,Be,Ll).call(this)}).catch(t=>{Qt(this,Gi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Sa=new WeakSet,Nl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Bn(Zt,Sa),Bn(Zt,Ul,0),Bn(Zt,ys,!1),Bn(Zt,bs,new WeakMap),ke&&(Ve(Zt,ys,!0),qi.workerSrc||="./pdf.worker.mjs"),Zt._isSameOrigin=(t,n)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(n,s);return s.origin===a.origin},Zt._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Zt.fromPort=t=>{if(a1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Zt.create(t)};let Ea=Zt;class cw{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,n,s,a,o,l){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new fb,this.fontLoader=new d1({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,n=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,a),a}get annotationStorage(){return Et(this,"annotationStorage",new hd)}getRenderingIntent(t,n=In.ENABLE,s=null,a=!1,o=!1){let l=sn.DISPLAY,u=Uh;switch(t){case"any":l=sn.ANY;break;case"display":break;case"print":l=sn.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&sn.PRINT&&s instanceof tb?s:this.annotationStorage;switch(n){case In.DISABLE:l+=sn.ANNOTATIONS_DISABLE;break;case In.ENABLE:break;case In.ENABLE_FORMS:l+=sn.ANNOTATIONS_FORMS;break;case In.ENABLE_STORAGE:l+=sn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${n}`)}a&&(l+=sn.IS_EDITING),o&&(l+=sn.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[l,u.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Fr.cleanup(),this._networkStream?.cancelAllRequests(new fi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(s,a)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Lt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{n.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){a.close();return}Lt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new ow(s,this))}),t.on("DocException",s=>{n._capability.reject(qe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!n.onPassword)throw qe(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};n.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{n.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const g=o.error;vt(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const l=new Gt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new f1(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Lt(f,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,y]of g.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||n.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,s=this.#i.get(n);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new lw(n,o,this,this._params.pdfBug);return this.#e.set(n,l),l});return this.#i.set(n,a),a}getPageIndex(t){return Hh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:n})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(n=>new H1(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new F1(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Fr.cleanup()}}cachedPageNumber(t){if(!Hh(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(n)??null}}class uw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class ga{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:E=null}){this.callback=t,this.params=n,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new uw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=A,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(ga.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ga.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ma(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ga.#e.delete(this._canvas),t||=new ql(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ga.#e.delete(this._canvas),this.callback())))}}const mb="5.4.296",yb="f56dc8601";class an{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Et(this,"_keyboardManager",new Kr([[["Escape","mac+Escape"],an.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],an.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],an.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],an.prototype._moveToPrevious],[["Home","mac+Home"],an.prototype._moveToBeginning],[["End","mac+End"],an.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||n,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",an.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const n=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:n}),t.addEventListener("keydown",this.#m.bind(this),{signal:n});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),n=this.#l._signal;t.addEventListener("contextmenu",on,{signal:n}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",an.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:n}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:n}),t}#f(t,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const n=t.target.getAttribute("data-color");n&&this.#f(n,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#n.lastChild?.focus()}#m(t){an._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#h();this.#t.append(n)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const n=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=n.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Ur{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Ur.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:n,colorValue:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Ur.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(n,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function ly(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function Cr(h){return Math.max(0,Math.min(255,255*h))}class cy{static CMYK_G([t,n,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*n+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Cr(t),[t,t,t]}static G_HTML([t]){const n=ly(t);return`#${n}${n}${n}`}static RGB_G([t,n,s]){return["G",.3*t+.59*n+.11*s]}static RGB_rgb(t){return t.map(Cr)}static RGB_HTML(t){return`#${t.map(ly).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,n+a)]}static CMYK_rgb([t,n,s,a]){return[Cr(1-Math.min(1,t+a)),Cr(1-Math.min(1,s+a)),Cr(1-Math.min(1,n+a))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,s]){const a=1-t,o=1-n,l=1-s,u=Math.min(a,o,l);return["CMYK",a,o,l,u]}}class hw{create(t,n,s=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${n}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${n}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Xt("Abstract method `_createSVG` called.")}}class Hr extends hw{_createSVG(t){return document.createElementNS(ci,t)}}const dw=9,Ss=new WeakSet,fw=new Date().getTimezoneOffset()*60*1e3;class uy{static create(t){switch(t.data.annotationType){case ce.LINK:return new bd(t);case ce.TEXT:return new gw(t);case ce.WIDGET:switch(t.data.fieldType){case"Tx":return new mw(t);case"Btn":return t.data.radioButton?new bb(t):t.data.checkBox?new bw(t):new vw(t);case"Ch":return new Aw(t);case"Sig":return new yw(t)}return new xs(t);case ce.POPUP:return new Vh(t);case ce.FREETEXT:return new vb(t);case ce.LINE:return new ww(t);case ce.SQUARE:return new Ew(t);case ce.CIRCLE:return new xw(t);case ce.POLYLINE:return new Ab(t);case ce.CARET:return new Tw(t);case ce.INK:return new vd(t);case ce.POLYGON:return new _w(t);case ce.HIGHLIGHT:return new Sb(t);case ce.UNDERLINE:return new Cw(t);case ce.SQUIGGLY:return new Rw(t);case ce.STRIKEOUT:return new Mw(t);case ce.STAMP:return new wb(t);case ce.FILEATTACHMENT:return new Dw(t);default:return new ie(t)}}}class ie{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:n}){return!!(t?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ie._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,n=this.annotationStorage?.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:s,rect:a}=this.data;let o=-1/0,l=-1/0;if(n?.length>=8){for(let u=0;u<n.length;u+=8)n[u+1]>l?(l=n[u+1],o=n[u+2]):n[u+1]===l&&(o=Math.max(o,n[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:n},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=n[3]-t[1]+n[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Pr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:n}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(n.id,{popup:s})||this.annotationStorage.setValue(`${Pr}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:n.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:n,popup:s}=t;n&&this.#n(n);let a=this.#i?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#i.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:n},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),n.left=`${100*(t[0]-u)/o}%`,n.top=`${100*(l-t[3]+d)/l}%`,a===0?(n.width=`${100*(t[2]-t[0])/o}%`,n.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:n,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),!(this instanceof xs)&&!(this instanceof bd)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof Vh){const{rotation:S}=n;return!n.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&n.borderStyle.width>0){l.borderWidth=`${n.borderStyle.width}px`;const S=n.borderStyle.horizontalCornerRadius,_=n.borderStyle.verticalCornerRadius;if(S>0||_>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof bb){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(n.borderStyle.style){case da.SOLID:l.borderStyle="solid";break;case da.DASHED:l.borderStyle="dashed";break;case da.BEVELED:vt("Unimplemented border style: beveled");break;case da.INSET:vt("Unimplemented border style: inset");break;case da.UNDERLINE:l.borderBottomStyle="solid";break}const w=n.borderColor||null;w?(this.#e=!0,l.borderColor=st.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):l.borderWidth=0}const f=st.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=a.rawDims;l.left=`${100*(f[0]-b)/g}%`,l.top=`${100*(f[1]-A)/y}%`;const{rotation:E}=n;return n.hasOwnCanvas||E===0?(l.width=`${100*u/g}%`,l.height=`${100*d/y}%`):this.setRotation(E,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),n.style.width=`${100*o/s}%`,n.style.height=`${100*l/a}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,s,a)=>{const o=a.detail[n],l=o[0],u=o.slice(1);a.target.style[s]=cy[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:cy[`${l}_rgb`](u)})};return Et(this,"_commonActions",{display:n=>{const{display:s}=n.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,n){const s=this._commonActions;for(const a of Object.keys(n.detail))(t[a]||s[a])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[a,o]of Object.entries(n)){const l=s[a];if(l){const u={detail:{[a]:o},target:t};l(u),delete n[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,w,T]=t.subarray(2,6);if(a===S&&o===_&&n===w&&s===T)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:_}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const d=a-n,f=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),E=`clippath_${this.data.id}`;A.setAttribute("id",E),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,_=t.length;S<_;S+=8){const w=t[S],T=t[S+1],C=t[S+2],O=t[S+3],k=g.createElement("rect"),z=(C-n)/d,P=(o-T)/f,I=(w-C)/d,X=(T-O)/f;k.setAttribute("x",z),k.setAttribute("y",P),k.setAttribute("width",I),k.setAttribute("height",X),A.append(k),u?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${P}" width="${I}" height="${X}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${E})`}_createPopup(t=null){const{data:n}=this;let s,a;t?(s={str:t.text},a=t.date):(s=n.contentsObj,a=n.modificationDate);const o=this.#i=new Vh({data:{color:n.color,titleObj:n.titleObj,modificationDate:a,contentsObj:s,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:u}of a){if(o===-1||l===n)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Ss.has(f)){vt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:f})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==n&&Ss.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class pw extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class bd extends ie{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n,s=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(t.title=s),this.#t()}#e(t,n,s="",a=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,a),!1),this.#t()}#i(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1))}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=n,u=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===l&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,f=[];for(const g of u){const{id:y}=g;switch(f.push(y),g.type){case"text":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!Ss.has(b)){vt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class gw extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class xs extends ie{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Se.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!n.focused||!l.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,n,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":st.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||dw,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(_h*a))||1,y=f/g;l=Math.min(a,d(y/_h))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(a,d(f/_h))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=st.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class mw extends xs{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[n]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(n,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ss.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",E=>{t.setValue(n,{value:E.target.value}),this.setPropertyOnSiblings(s,"value",E.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",E=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=E=>{const{formattedValue:S}=d;S!=null&&(E.target.value=S),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:_}=S;if(b&&(_.type=g,y&&(_.step=y)),d.userValue){const w=d.userValue;if(b)if(g==="time"){const T=new Date(w),C=[T.getHours(),T.getMinutes(),T.getSeconds()];_.value=C.map(O=>O.toString().padStart(2,"0")).join(":")}else _.value=new Date(w-fw).toISOString().split(g==="date"?"T":".",1)[0];else _.value=w}d.lastCommittedValue=_.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(w){d.userValue=w.detail.value??"",b||t.setValue(n,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:T}=w.detail;d.formattedValue=T,T!=null&&w.target!==document.activeElement&&(w.target.value=T);const C={formattedValue:T};b&&(C.value=T),t.setValue(n,C)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:T}=w.detail,{target:C}=w;if(T===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",T);let O=d.userValue;!O||O.length<=T||(O=O.slice(0,T),C.value=d.userValue=O,t.setValue(n,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(d.commitKey=3),_===-1)return;const{value:w}=S.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const E=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:_}=S;let{value:w}=_;if(b){if(w&&g==="time"){const T=w.split(":").map(C=>parseInt(C,10));w=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),_.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();_.type="text"}d.userValue=w,d.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),E(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:_,target:w}=S,{value:T,selectionStart:C,selectionEnd:O}=w;let k=C,z=O;switch(S.inputType){case"deleteWordBackward":{const P=T.substring(0,C).match(/\w*[^\w]*$/);P&&(k-=P[0].length);break}case"deleteWordForward":{const P=T.substring(C).match(/^[^\w]*\w*/);P&&(z+=P[0].length);break}case"deleteContentBackward":C===O&&(k-=1);break;case"deleteContentForward":C===O&&(z+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,change:_||"",willCommit:!1,selStart:k,selEnd:z}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class yw extends xs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class bw extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ss.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s)){const g=d&&f.exportValue===n.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=n.defaultFieldValue||"Off";l.target.checked=u===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class bb extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof a=="string"&&(a=a!==n.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(n.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Ss.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=n.defaultFieldValue;l.target.checked=u!=null&&u===n.buttonValue}),this.enableScripting&&this.hasJSActions){const l=n.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class vw extends bd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Aw extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,s=t.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");Ss.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=a;return A?Array.prototype.filter.call(b,E=>E.selected).map(E=>E[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){l?.();const A=b.detail.value,E=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=E.has(S.value);t.setValue(n,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const A=a.options,E=b.detail.remove;A[E].selected=!1,a.remove(E),A.length>0&&Array.prototype.findIndex.call(A,_=>_.selected)===-1&&(A[0].selected=!0),t.setValue(n,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(n,{value:null,items:[]}),d=u(!1)},insert(b){const{index:A,displayValue:E,exportValue:S}=b.detail.insert,_=a.children[A],w=document.createElement("option");w.textContent=E,w.value=S,_?_.before(w):a.append(w),t.setValue(n,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:A}=b.detail;for(;a.length!==0;)a.remove(0);for(const E of A){const{displayValue:S,exportValue:_}=E,w=document.createElement("option");w.textContent=S,w.value=_,a.append(w)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(n,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const E of b.target.options)E.selected=A.has(E.index);t.setValue(n,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(n,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(n,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Vh extends ie{constructor(t){const{data:n,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&ie._hasPopupData(n)}),this.elements=s,o&&ie._hasPopupData(n)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new Sw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${rd}${a}`).join(",")),this.container}}class Sw{#t=null;#e=this.#V.bind(this);#i=this.#F.bind(this);#n=this.#O.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#_=null;#E=null;#A=null;#C=!1;#w=null;#x=null;constructor({container:t,color:n,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:g,open:y,commentManager:b=null}){this.#a=t,this.#E=a,this.#o=l,this.#_=u,this.#d=d,this.#s=n,this.#b=f,this.#h=g,this.#l=s,this.#t=b,this.#w=s[0],this.#c=Bl.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,y&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const n of this.trigger)n.addEventListener("click",this.#r,{signal:t}),n.addEventListener("pointerenter",this.#n,{signal:t}),n.addEventListener("pointerleave",this.#i,{signal:t}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(n=>n.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,n=!!this.#w.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!n)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!n)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(n){this.#g=this.#w.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#g=document.createElement("button");l.className="annotationCommentButton";const u=this.#w.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#M(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.renderCommentButton();const[t,n]=this.#y,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${n}% - var(--comment-button-dim))`}#z(){this.#w.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:n}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,n):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:n,opacity:s,creationDate:a,modificationDate:o}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:n,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#g}get comment(){return this.#x||=this.#w.commentText,this.#x}set comment(t){t!==this.comment&&(this.#w.commentText=this.#x=t)}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:n}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=n)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:n,height:s}=this.#g.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#w.layer.getBoundingClientRect();return[(t-a)/l,(n+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[n,s]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=a;this.#t.showDialog(null,this,o+n*u,l+s*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=st.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#E?.str){const s=document.createElement("span");s.className="title",n.append(s),{dir:s.dir,str:s.textContent}=this.#E}if(t.append(n),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),n.append(s)}ld({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#N(){const t=this.#_,n=this.#o;return t?.str&&(!n?.str||n.str===t.str)&&this.#_.html||null}get#k(){return this.#N?.attributes?.style?.fontSize||0}get#j(){return this.#N?.attributes?.style?.color||null}#B(t){const n=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:this.#j,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:a});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:n,deleted:s}){if(this.#t){s?(this.remove(),this.#x=null):n&&(n.deleted?this.remove():(this.#z(),this.#x=n.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(s||n?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#_},t&&(this.#u=null),n&&n.text&&(this.#_=this.#B(n.text),this.#c=Bl.toDateObject(n.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#_}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const E of this.#l)if(!u||st.intersect(E.data.rect,u)!==null){u=E.data.rect,l=!0;break}const d=st.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];this.#u=[100*(y-a)/n,100*(b-o)/s];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#F(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#O(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#F(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#m||this.#O(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class vb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class ww extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ew extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class xw extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ab extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!n)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=n.length;g<y;g+=2){const b=n[g]-t[0],A=t[3]-n[g+1];d.push(`${b},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _w extends Ab{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Tw extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class vd extends ie{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}#i(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#i(n,t),f=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:a}=t,o=this.#t;if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:u,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Sb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Cw extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Rw extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Mw extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class wb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Dw extends ie{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=Se.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Ad=class Eb{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=n,this.#e=s,this.#r=u||null,this.#s=f||null,this.#i=g||new hd,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,n,s){const a=t.firstChild||t,o=a.id=`${rd}${n}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,d]of l)a.setAttribute(u,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:n}=t,s=this.div;Xi(s,this.viewport);const a=new Map,o={data:null,layer:s,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Hr,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const u=l.annotationType===ce.POPUP;if(u){const g=a.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=uy.create(o);if(!d.isRenderable)continue;if(!u&&l.popupRef){const g=a.get(l.popupRef);g?g.push(d):a.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const n={data:null,layer:this.div,linkService:this.#s,svgFactory:new Hr,parent:this};for(const s of t){s.borderStyle||=Eb._defaultBorderStyle,n.data=s;const a=uy.create(n);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,s.id,null)}}update({viewport:t}){const n=this.div;this.viewport=t,Xi(n,{rotation:t.rotation}),this.#o(),n.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[n,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#n.get(n);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:n}=this,{id:s,rotation:a}=t,o=new pw({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return n.append(l),this.#t?.moveElementInDOM(n,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:da.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Cl=/\r\n?|\n/g;class ve extends ht{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ve.prototype,n=o=>o.isEmpty(),s=pi.TRANSLATE_SMALL,a=pi.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Kr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||ve._defaultColor||ht._defaultLineColor,this.#n=t.fontSize||ve._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,n){ht.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Mt.FREETEXT_SIZE:ve._defaultFontSize=n;break;case Mt.FREETEXT_COLOR:ve._defaultColor=n;break}}updateParams(t,n){switch(t){case Mt.FREETEXT_SIZE:this.#r(n);break;case Mt.FREETEXT_COLOR:this.#s(n);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,ve._defaultFontSize],[Mt.FREETEXT_COLOR,ve._defaultColor||ht._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#n],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Ur(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#r(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},s=this.#n;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const n=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ve._internalPadding*t,-(ve._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ve.#c(s)),n=s);return t.join(`
`)}#o(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,n=this.#t=this.#a().trimEnd();if(t===n)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ve._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(l[0]-y)/f,E=n+this.height-(l[1]-b)/g;break;case 90:A=t+(l[0]-y)/f,E=n-(l[1]-b)/g,[u,d]=[d,-u];break;case 180:A=t-this.width+(l[0]-y)/f,E=n-(l[1]-b)/g,[u,d]=[-u,-d];break;case 270:A=t+(l[0]-y-this.height*g)/f,E=n+(l[1]-b-this.width*f)/g,[u,d]=[-d,u];break}this.setAt(A*a,E*o,u,d)}else this._moveAfterPaste(t,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Cl,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=ve.#h(n.getData("text")||"").replaceAll(Cl,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(Cl,"")),A!==this.editorDiv){let E=f;for(const S of this.editorDiv.childNodes){if(S===A){E=g;continue}E.push(ve.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(Cl,""))}else if(u===this.editorDiv){let A=f,E=0;for(const S of this.editorDiv.childNodes)E++===d&&(A=g),A.push(ve.#c(S))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const E=A.nodeValue.length;if(b<=E){y.setStart(A,b),y.setEnd(A,b);break}b-=E}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ve._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,s){let a=null;if(t instanceof vb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:g,popupRef:y,richText:b,contentsObj:A,creationDate:E,modificationDate:S},textContent:_,textPosition:w,parent:{page:{pageNumber:T}}}=t;if(!_||_.length===0)return null;a=t={annotationType:bt.FREETEXT,color:Array.from(u),fontSize:l,value:_.join(`
`),position:w,pageIndex:T-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:E,modificationDate:S}}const o=await super.deserialize(t,n,s);return o.#n=t.fontSize,o.color=st.makeHexColor(...t.color),o.#t=ve.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:n,fontSize:this.#n,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:n,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){Xt("Abstract method `toSVGPath` must be implemented.")}get box(){Xt("Abstract getter `box` must be implemented.")}serialize(t,n){Xt("Abstract method `serialize` must be implemented.")}static _rescale(t,n,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=n+t[u]*a,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,n,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=n+t[u+1]*a,l[u+1]=s+t[u]*o;return l}static _translate(t,n,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=n+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,s,a,o){switch(o){case 90:return[1-n/s,t/a];case 180:return[1-t/s,1-n/a];case 270:return[n/s,1-t/a];default:return[t/s,n/a]}}static _normalizePagePoint(t,n,s){switch(s){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,s,a,o,l){return[(t+5*s)/6,(n+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class gs{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=gs.#m+gs.#p;constructor({x:t,y:n},s,a,o,l,u=0){this.#t=s,this.#h=o*a,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,n],6),this.#i=u,this.#l=gs.#m*a,this.#c=gs.#u*a,this.#d=a,this.#f.push(t,n)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#a+(t[0]-n[0])/2-s)/o,(this.#o+(t[1]-n[1])/2-a)/l,(this.#a+(n[0]-t[0])/2-s)/o,(this.#o+(n[1]-t[1])/2-a)/l]}add({x:t,y:n}){this.#a=t,this.#o=n;const[s,a,o,l]=this.#t;let[u,d,f,g]=this.#s.subarray(8,12);const y=t-f,b=n-g,A=Math.hypot(y,b);if(A<this.#c)return!1;const E=A-this.#l,S=E/A,_=S*y,w=S*b;let T=u,C=d;u=f,d=g,f+=_,g+=w,this.#f?.push(t,n);const O=-w/E,k=_/E,z=O*this.#h,P=k*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+z,g+P],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-z,g-P],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+z,d+P],2),this.#r.push(NaN,NaN,NaN,NaN,(u+z-s)/o,(d+P-a)/l),this.#s.set([u-z,d-P],14),this.#e.push(NaN,NaN,NaN,NaN,(u-z-s)/o,(d-P-a)/l)),this.#s.set([T,C,u,d,f,g],6),!this.isEmpty()):(this.#s.set([T,C,u,d,f,g],6),Math.abs(Math.atan2(C-d,T-u)-Math.atan2(w,_))<Math.PI/2?([u,d,f,g]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+g)/2-a)/l),[u,d,T,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/o,((C+d)/2-a)/l),!0):([T,C,u,d,f,g]=this.#s.subarray(0,6),this.#r.push(((T+5*u)/6-s)/o,((C+5*d)/6-a)/l,((5*u+f)/6-s)/o,((5*d+g)/6-a)/l,((u+f)/2-s)/o,((d+g)/2-a)/l),[f,g,u,d,T,C]=this.#s.subarray(12,18),this.#e.push(((T+5*u)/6-s)/o,((C+5*d)/6-a)/l,((5*u+f)/6-s)/o,((5*d+g)/6-a)/l,((u+f)/2-s)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,n=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(s);for(let a=n.length-6;a>=6;a-=6)isNaN(n[a])?s.push(`L${n[a+4]} ${n[a+5]}`):s.push(`C${n[a]} ${n[a+1]} ${n[a+2]} ${n[a+3]} ${n[a+4]} ${n[a+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,n,s,a]=this.#t,[o,l,u,d]=this.#g();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-n)/a} L${(this.#s[4]-t)/s} ${(this.#s[5]-n)/a} L${o} ${l} L${u} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-n)/a} L${(this.#s[14]-t)/s} ${(this.#s[15]-n)/a} Z`}#v(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#b(t){const[n,s,a,o]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,f,g,y]=this.#g();t.push(`L${(l[0]-n)/a} ${(l[1]-s)/o} L${d} ${f} L${g} ${y} L${(u[0]-n)/a} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,n,s,a,o,l){return new xb(t,n,s,a,o,l)}getOutlines(){const t=this.#r,n=this.#e,s=this.#s,[a,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#_(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#A(f,g);for(let y=n.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(n[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=n[y+b],f[g+1]=n[y+b+1],g+=2}return this.#E(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#_(t){const n=this.#s,[s,a,o,l]=this.#t,[u,d,f,g]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(n[2]-s)/o,(n[3]-a)/l,NaN,NaN,NaN,NaN,(n[4]-s)/o,(n[5]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(n[16]-s)/o,(n[17]-a)/l,NaN,NaN,NaN,NaN,(n[14]-s)/o,(n[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#E(t,n){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6}#A(t,n){const s=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,u,d]=this.#t,[f,g,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-l)/d],n),n+=24}}class xb extends it{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,n,s,a,o,l){super(),this.#a=t,this.#r=n,this.#t=s,this.#s=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=n.length;y<b;y+=2)n[y]=(n[y]-u)/f,n[y+1]=(n[y+1]-d)/g}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let n=6,s=this.#a.length;n<s;n+=6){if(isNaN(this.#a[n])){t.push(`L${this.#a[n+4]} ${this.#a[n+5]}`);continue}t.push(`C${this.#a[n]} ${this.#a[n+1]} ${this.#a[n+2]} ${this.#a[n+3]} ${this.#a[n+4]} ${this.#a[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,a],o){const l=s-t,u=a-n;let d,f;switch(o){case 0:d=it._rescale(this.#a,t,a,l,-u),f=it._rescale(this.#r,t,a,l,-u);break;case 90:d=it._rescaleAndSwap(this.#a,t,n,l,u),f=it._rescaleAndSwap(this.#r,t,n,l,u);break;case 180:d=it._rescale(this.#a,s,n,-l,u),f=it._rescale(this.#r,s,n,-l,u);break;case 270:d=it._rescaleAndSwap(this.#a,s,a,-l,-u),f=it._rescaleAndSwap(this.#r,s,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const n=this.#a;let s=n[4],a=n[5];const o=[s,a,s,a];let l=s,u=a,d=s,f=a;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,E=n.length;A<E;A+=6){const S=n[A+4],_=n[A+5];isNaN(n[A])?(st.pointBoundingBox(S,_,o),u>_?(l=S,u=_):u===_&&(l=g(l,S)),f<_?(d=S,f=_):f===_&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,st.bezierBoundingBox(s,a,...n.slice(A,A+6),y),st.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=g(l,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=g(d,y[2]))),s=S,a=_}const b=this.#e;b[0]=o[0]-this.#i,b[1]=o[1]-this.#i,b[2]=o[2]-o[0]+2*this.#i,b[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,n,s,a,o,l=0){return new gs(t,n,s,a,o,l)}getNewOutline(t,n){const[s,a,o,l]=this.#e,[u,d,f,g]=this.#t,y=o*f,b=l*g,A=s*f+u,E=a*g+d,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+E},this.#t,this.#s,t,this.#n,n??this.#i);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+A,y:this.#r[_+1]*b+E});return S.getOutlines()}}class qh{#t;#e;#i;#n=[];#r=[];constructor(t,n=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:_,width:w,height:T}of t){const C=Math.floor((S-n)/l)*l,O=Math.ceil((S+w+n)/l)*l,k=Math.floor((_-n)/l)*l,z=Math.ceil((_+T+n)/l)*l,P=[C,k,z,!0],I=[O,k,z,!1];this.#n.push(P,I),st.rectBoundingBox(C,k,O,z,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let y=a?-1/0:1/0,b=1/0;const A=this.#n.at(a?-1:-2),E=[A[0],A[2]];for(const S of this.#n){const[_,w,T,C]=S;!C&&a?w<b?(b=w,y=_):w===b&&(y=Math.max(y,_)):C&&!a&&(w<b?(b=w,y=_):w===b&&(y=Math.min(y,_))),S[0]=(_-f)/u,S[1]=(w-g)/d,S[2]=(T-g)/d}this.#t=new Float32Array([f,g,u,d]),this.#e=[y,b],this.#i=E}getOutlines(){this.#n.sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const t=[];for(const n of this.#n)n[3]?(t.push(...this.#l(n)),this.#o(n)):(this.#c(n),t.push(...this.#l(n)));return this.#s(t)}#s(t){const n=[],s=new Set;for(const l of t){const[u,d,f]=l;n.push([u,d,l],[u,f,l])}n.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=n.length;l<u;l+=2){const d=n[l][2],f=n[l+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,f,g,y]=l;s.delete(l);let b=u,A=d;for(o=[u,f],a.push(o);;){let E;if(s.has(g))E=g;else if(s.has(y))E=y;else break;s.delete(E),[u,d,f,g,y]=E,b!==u&&(o.push(b,A,u,A===d?d:f),b=u),A=A===d?f:d}o.push(b,A)}return new Lw(a,this.#t,this.#e,this.#i)}#a(t){const n=this.#r;let s=0,a=n.length-1;for(;s<=a;){const o=s+a>>1,l=n[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,n]){const s=this.#a(t);this.#r.splice(s,0,[t,n])}#c([,t,n]){const s=this.#a(t);for(let a=s;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===n){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===n){this.#r.splice(a,1);return}}}#l(t){const[n,s,a]=t,o=[[n,s,a]],l=this.#a(a);for(let u=0;u<l;u++){const[d,f]=this.#r[u];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(f<=b||A<=d)){if(b>=d){if(A>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,A>f&&o.push([n,f,A])}}}return o}}class Lw extends it{#t;#e;constructor(t,n,s,a){super(),this.#e=t,this.#t=n,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const n of this.#e){let[s,a]=n;t.push(`M${s} ${a}`);for(let o=2;o<n.length;o+=2){const l=n[o],u=n[o+1];l===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,n,s,a],o){const l=[],u=s-t,d=a-n;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*u,g[y+1]=a-f[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Xh extends gs{newFreeDrawOutline(t,n,s,a,o,l){return new Nw(t,n,s,a,o,l)}}class Nw extends xb{newOutliner(t,n,s,a,o,l=0){return new Xh(t,n,s,a,o,l)}}class ue extends ht{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ue.prototype;return Et(this,"_keyboardManager",new Kr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ue._defaultColor,this.#g=t.thickness||ue._defaultThickness,this.opacity=t.opacity||ue._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new qh(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new qh(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#s;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:n,clipPathId:s}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#g/2+a,.0025),n>=0)this.#d=n,this.#n=s,this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ue.#x(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ue.#x(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:g}=this.#s;this.#m=[(g[0]-o)/u,(g[1]-l)/d]}static initialize(t,n){ht.initialize(t,n),ue._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:ue._defaultColor=n;break;case Mt.HIGHLIGHT_THICKNESS:ue._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:this.#_(n);break;case Mt.HIGHLIGHT_THICKNESS:this.#E(n);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,ue._defaultColor],[Mt.HIGHLIGHT_THICKNESS,ue._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||ue._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#g||ue._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#_(t){const n=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,t,ue._defaultOpacity),undo:n.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const n=this.#g,s=a=>{this.#g=a,this.#A(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new an({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#C():t&&(this.#w(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#x([t,n,s,a],o){switch(o){case 90:return[1-n-a,t,a,s];case 180:return[1-t-s,1-n-a,s,a];case 270:return[n,1-t-s,a,s]}return[t,n,s,a]}rotate(t){const{drawLayer:n}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ue.#x(this.#l.box,t)):s=ue.#x([this.x,this.y,this.width,this.height],t),n.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(this.#p,{bbox:ue.#x(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const n=this.#c=document.createElement("div");return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(this.width,this.height),Zy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){ue._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,n]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:g,height:y}of o){const b=d*t+s,A=(1-f)*n+a;l[u]=l[u+4]=b,l[u+1]=l[u+3]=A,l[u+2]=l[u+6]=b+g*t,l[u+5]=l[u+7]=A-y*n,u+=8}return l}#N(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,n,{target:s,x:a,y:o}){const{x:l,y:u,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#j(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",on,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Xh({x:a,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,s){let a=null;if(t instanceof Sb){const{data:{quadPoints:E,rect:S,rotation:_,id:w,color:T,opacity:C,popupRef:O,richText:k,contentsObj:z,creationDate:P,modificationDate:I},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:E,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:k,comment:z?.str||null,creationDate:P,modificationDate:I}}else if(t instanceof vd){const{data:{inkLists:E,rect:S,rotation:_,id:w,color:T,borderStyle:{rawWidth:C},popupRef:O,richText:k,contentsObj:z,creationDate:P,modificationDate:I},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:E,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:k,comment:z?.str||null,creationDate:P,modificationDate:I}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,n,s);f.color=st.makeHexColor(...o),f.opacity=d||1,u&&(f.#g=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(l){const E=f.#i=[];for(let S=0;S<l.length;S+=8)E.push({x:(l[S]-b)/g,y:1-(l[S+1]-A)/y,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/y});f.#v(),f.#w(),f.rotate(f.rotation)}else if(u){f.#h=!0;const E=u[0],S={x:E[0]-b,y:y-(E[1]-A)},_=new Xh(S,[0,0,g,y],1,f.#g/2,!0,.001);for(let C=0,O=E.length;C<O;C+=2)S.x=E[C]-b,S.y=y-(E[C+1]-A),_.add(S);const{id:w,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#b({highlightOutlines:_.getOutlines(),highlightId:w,clipPathId:T}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:n,opacity:this.opacity,thickness:this.#g,quadPoints:this.#z(),outlines:this.#N(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==n[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class _b{#t=Object.create(null);updateProperty(t,n){this[t]=n,this.updateSVGProperty(t,n)}updateProperties(t){if(t)for(const[n,s]of Object.entries(t))n.startsWith("_")||this.updateProperty(n,s)}updateSVGProperty(t,n){this.#t[t]=n}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Xt("Not implemented")}}class mt extends ht{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:n,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,n){const{id:s}=n.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(n))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Xt("Not implemented")}static get typesMap(){Xt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(mt.#i.updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,n[a]]);return t}_updateProperty(t,n,s){const a=this._drawingOptions,o=a[n],l=u=>{a.updateProperty(n,u);const d=this.#t.updateProperty(n,u);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,n,s,a]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[n,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-n,s,a];case 270:return[1-n,t,s*(l/o),a*(o/l)];default:return[t,n,s,a]}}#p(){const{x:t,y:n,width:s,height:a,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-n,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-n,s,a];case 270:return[n,1-t,s*(o/l),a*(l/o)];default:return[t,n,s,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:n,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-n-a,t,a,s];case 2:return[1-t-s,1-n-a,s,a];case 3:return[n,1-t-s,a,s];case 4:return[t,n-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-n,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-n,a*(d/u),s*(u/d)];case 7:return[n-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,n-a,s,a];case 9:return[1-n,t-s,a,s];case 10:return[1-t,1-n,s,a];case 11:return[n-a,1-t,a,s];case 12:return[t-a*(d/u),n,a*(d/u),s*(u/d)];case 13:return[1-n-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-n-s*(u/d),a*(d/u),s*(u/d)];case 15:return[n,1-t,s*(u/d),a*(d/u)];default:return[t,n,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,a,o){Xt("Not implemented")}static startDrawing(t,n,s,a){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=a;if(mt.#a&&mt.#a!==f)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=mt.#n=new AbortController,E=t.combinedSignal(A);if(mt.#s||=d,mt.#a??=f,window.addEventListener("pointerup",S=>{mt.#s===S.pointerId?this._endDraw(S):mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointercancel",S=>{mt.#s===S.pointerId?this._currentParent.endDrawingSession():mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointerdown",S=>{mt.#a===S.pointerType&&((mt.#o||=new Set).add(S.pointerId),mt.#i.isCancellable()&&(mt.#i.removeLastElement(),mt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",on,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",S=>{S.timeStamp===mt.#c&&ee(S)},{signal:E}),t.toggleDrawing(),n._editorUndoBar?.hide(),mt.#i){t.drawLayer.updateProperties(this._currentDrawId,mt.#i.startNew(l,u,y,b,g));return}n.updateUIForDefaultProperties(this),mt.#i=this.createDrawerInstance(l,u,y,b,g),mt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(mt.#r.toSVGProperties(),mt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(mt.#c=-1,!mt.#i)return;const{offsetX:n,offsetY:s,pointerId:a}=t;if(mt.#s===a){if(mt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,mt.#i.add(n,s)),mt.#c=t.timeStamp,ee(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,mt.#i=null,mt.#r=null,mt.#a=null,mt.#c=NaN),mt.#n&&(mt.#n.abort(),mt.#n=null,mt.#s=NaN,mt.#o=null)}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,mt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=mt.#i,a=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Mt.DRAW_STEP),!mt.#i.isEmpty()){const{pageDimensions:[s,a],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:mt.#i.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:mt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,a,o,l){Xt("Not implemented")}static async deserialize(t,n,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:u}}=n.viewport,d=this.deserializeDraw(l,u,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,n,s);return f.createDrawingOptions(t),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[n,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([n,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Ow{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new Zr;#l;#d;constructor(t,n,s,a,o,l){this.#l=s,this.#d=a,this.#n=o,this.#r=l,[t,n]=this.#h(t,n);const u=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n],this.#i=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,n){t==="stroke-width"&&(this.#r=n)}#h(t,n){return it._normalizePoint(t,n,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,n){[t,n]=this.#h(t,n);const[s,a,o,l]=this.#t.subarray(2,6),u=t-o,d=n-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,n),isNaN(s)?(this.#t.set([o,l,t,n],2),this.#e.push(NaN,NaN,NaN,NaN,t,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,n],0),this.#e.push(...it.createBezierPoints(s,a,o,l,t,n)),{path:{d:this.toSVGPath()}}))}end(t,n){const s=this.add(t,n);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,n,s,a,o){this.#l=s,this.#d=a,this.#n=o,[t,n]=this.#h(t,n);const l=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,n=this.#i.length;t<n;t++){const{line:s,points:a}=this.#i[t];this.#e=s,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=it.svgRound(this.#e[4]),n=it.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${n} Z`,this.#a;if(this.#s.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${n}`,this.#o=6}if(this.#s.length===4){const a=it.svgRound(this.#e[10]),o=it.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${n}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,u,d,f,g,y]=this.#e.slice(a,a+6).map(it.svgRound);s.push(`C${l} ${u} ${d} ${f} ${g} ${y}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,n,s,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,n,s,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Zr extends it{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,n,s,a,o,l,u){this.#r=n,this.#s=s,this.#a=a,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of this.#n){if(t.push(`M${it.svgRound(n[4])} ${it.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${it.svgRound(n[10])} ${it.svgRound(n[11])}`);continue}for(let s=6,a=n.length;s<a;s+=6){const[o,l,u,d,f,g]=n.subarray(s,s+6).map(it.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,n,s,a],o){const l=[],u=[],[d,f,g,y]=this.#d();let b,A,E,S,_,w,T,C,O;switch(this.#o){case 0:O=it._rescale,b=t,A=n+a,E=s,S=-a,_=t+d*s,w=n+(1-f-y)*a,T=t+(d+g)*s,C=n+(1-f)*a;break;case 90:O=it._rescaleAndSwap,b=t,A=n,E=s,S=a,_=t+f*s,w=n+d*a,T=t+(f+y)*s,C=n+(d+g)*a;break;case 180:O=it._rescale,b=t+s,A=n,E=-s,S=a,_=t+(1-d-g)*s,w=n+f*a,T=t+(1-d)*s,C=n+(f+y)*a;break;case 270:O=it._rescaleAndSwap,b=t+s,A=n+a,E=-s,S=-a,_=t+(1-f-y)*s,w=n+(1-d-g)*a,T=t+(1-f)*s,C=n+(1-d)*a;break}for(const{line:k,points:z}of this.#n)l.push(O(k,b,A,E,S,o?new Array(k.length):null)),u.push(O(z,b,A,E,S,o?new Array(z.length):null));return{lines:l,points:u,rect:[_,w,T,C]}}static deserialize(t,n,s,a,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const g=[];let y,b,A,E,S;switch(d){case 0:S=it._rescale,y=-t/s,b=n/a+1,A=1/s,E=-1/a;break;case 90:S=it._rescaleAndSwap,y=-n/a,b=-t/s,A=1/a,E=1/s;break;case 180:S=it._rescale,y=t/s+1,b=-n/a,A=-1/s,E=1/a;break;case 270:S=it._rescaleAndSwap,y=n/a+1,b=t/s+1,A=-1/a,E=-1/s;break}if(!l){l=[];for(const w of u){const T=w.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const C=new Float32Array(3*(T-2));l.push(C);let[O,k,z,P]=w.subarray(0,4);C.set([NaN,NaN,NaN,NaN,O,k],0);for(let I=4;I<T;I+=2){const X=w[I],Q=w[I+1];C.set(it.createBezierPoints(O,k,z,P,X,Q),(I-2)*3),[O,k,z,P]=[z,P,X,Q]}}}for(let w=0,T=l.length;w<T;w++)g.push({line:S(l[w].map(C=>C??NaN),y,b,A,E),points:S(u[w].map(C=>C??NaN),y,b,A,E)});const _=new this.prototype.constructor;return _.build(g,s,a,1,d,f,o),_}#l(t=this.#c){const n=this.#i+t/2*this.#a;return this.#o%180===0?[n/this.#r,n/this.#s]:[n/this.#s,n/this.#r]}#d(){const[t,n,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,n+l,s-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)st.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[f,g,y,b,A,E]=a.subarray(u,u+6);st.bezierBoundingBox(o,l,f,g,y,b,A,E,t),o=A,l=E}}const[n,s]=this.#l();t[0]=De(t[0]-n,0,1),t[1]=De(t[1]-s,0,1),t[2]=De(t[2]+n,0,1),t[3]=De(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,n){return t==="stroke-width"?this.#f(n):null}#f(t){const[n,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,u]=[a-n,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,n],s){const[a,o]=this.#l();this.#r=t,this.#s=n,this.#a=s;const[l,u]=this.#l(),d=l-a,f=u-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,n]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=this.#t;let s=0,a=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:a=n/t,o=-t/n,u=t;break;case 180:s=-1,l=-1,u=t,d=n;break;case 270:a=-n/t,o=t/n,d=n;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${it.svgRound(u)} ${it.svgRound(d)})`}getPathResizingSVGProperties([t,n,s,a]){const[o,l]=this.#l(),[u,d,f,g]=this.#t;if(Math.abs(f-o)<=it.PRECISION||Math.abs(g-l)<=it.PRECISION){const S=t+s/2-(u+f/2),_=n+a/2-(d+g/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(s-2*o)/(f-2*o),b=(a-2*l)/(g-2*l),A=f/s,E=g/a;return{path:{"transform-origin":`${it.svgRound(u)} ${it.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${E}) translate(${it.svgRound(o)} ${it.svgRound(l)}) scale(${y} ${b}) translate(${it.svgRound(-o)} ${it.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,s,a]){const[o,l]=this.#l(),u=this.#t,[d,f,g,y]=u;if(u[0]=t,u[1]=n,u[2]=s,u[3]=a,Math.abs(g-o)<=it.PRECISION||Math.abs(y-l)<=it.PRECISION){const _=t+s/2-(d+g/2),w=n+a/2-(f+y/2);for(const{line:T,points:C}of this.#n)it._translate(T,_,w,T),it._translate(C,_,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(a-2*l)/(y-2*l),E=-b*(d+o)+t+o,S=-A*(f+l)+n+l;if(b!==1||A!==1||E!==0||S!==0)for(const{line:_,points:w}of this.#n)it._rescale(_,E,S,b,A,_),it._rescale(w,E,S,b,A,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[a,o]=s,l=this.#t,u=t-l[0],d=n-l[1];if(this.#r===a&&this.#s===o)for(const{line:f,points:g}of this.#n)it._translate(f,u,d,f),it._translate(g,u,d,g);else{const f=this.#r/a,g=this.#s/o;this.#r=a,this.#s=o;for(const{line:y,points:b}of this.#n)it._rescale(y,u,d,f,g,y),it._rescale(b,u,d,f,g,b);l[2]*=f,l[3]*=g}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(n)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class $l extends _b{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ht._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(t,n)}clone(){const t=new $l(this._viewParameters);return t.updateAll(this),t}}class Sd extends mt{static _type="ink";static _editorType=bt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){ht.initialize(t,n),this._defaultDrawingOptions=new $l(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Et(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,a,o){return new Ow(t,n,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,a,o,l){return Zr.deserialize(t,n,s,a,o,l)}static async deserialize(t,n,s){let a=null;if(t instanceof vd){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:E,contentsObj:S,creationDate:_,modificationDate:w},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:bt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:E,comment:S?.str||null,creationDate:_,modificationDate:w}}const o=await super.deserialize(t,n,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Ur(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=Sd.getDefaultDrawingOptions({stroke:st.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:ht._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:n,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:n,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==n[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class Yh extends Zr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Rl=8,Rr=3;class ps{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,n,s,a){return s-=t,a-=n,s===0?a>0?0:4:s===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,n,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(-f+d-u+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(s+y)*n+(a+b)]!==0)return g}return-1}static#r(t,n,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(f+d+u+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(s+y)*n+(a+b)]!==0)return g}return-1}static#s(t,n,s,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)l[g*n]=l[g*n+n-1]=0;for(let g=0;g<n;g++)l[g]=l[n*s-1-g]=0;let u=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<n-1;y++){const b=g*n+y,A=l[b];if(A===0)continue;let E=g,S=y;if(A===1&&l[b-1]===0)u+=1,S-=1;else if(A>=1&&l[b+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const _=[y,g],w=S===y+1,T={isHole:w,points:_,id:u,parent:0};f.push(T);let C;for(const Z of f)if(Z.id===d){C=Z;break}C?C.isHole?T.parent=w?C.parent:d:T.parent=w?d:C.parent:T.parent=w?d:0;const O=this.#n(l,n,g,y,E,S,0);if(O===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let k=this.#i[2*O],z=this.#i[2*O+1];const P=g+k,I=y+z;E=P,S=I;let X=g,Q=y;for(;;){const Z=this.#r(l,n,X,Q,E,S,1);k=this.#i[2*Z],z=this.#i[2*Z+1];const ct=X+k,dt=Q+z;_.push(dt,ct);const tt=X*n+Q;if(l[tt+1]===0?l[tt]=-u:l[tt]===1&&(l[tt]=u),ct===g&&dt===y&&X===P&&Q===I){l[b]!==1&&(d=Math.abs(l[b]));break}else E=X,S=Q,X=ct,Q=dt}}}return f}static#a(t,n,s,a){if(s-n<=4){for(let P=n;P<s-2;P+=2)a.push(t[P],t[P+1]);return}const o=t[n],l=t[n+1],u=t[s-4]-o,d=t[s-3]-l,f=Math.hypot(u,d),g=u/f,y=d/f,b=g*l-y*o,A=d/u,E=1/f,S=Math.atan(A),_=Math.cos(S),w=Math.sin(S),T=E*(Math.abs(_)+Math.abs(w)),C=E*(1-T+T**2),O=Math.max(Math.atan(Math.abs(w+_)*C),Math.atan(Math.abs(w-_)*C));let k=0,z=n;for(let P=n+2;P<s-2;P+=2){const I=Math.abs(b-g*t[P+1]+y*t[P]);I>k&&(z=P,k=I)}k>(f*O)**2?(this.#a(t,n,z+2,a),this.#a(t,z,s,a)):a.push(o,l)}static#o(t){const n=[],s=t.length;return this.#a(t,0,s,n),n.push(t[s-2],t[s-1]),n.length<=4?null:n}static#c(t,n,s,a,o,l){const u=new Float32Array(l**2),d=-2*a**2,f=l>>1;for(let S=0;S<l;S++){const _=(S-f)**2;for(let w=0;w<l;w++)u[S*l+w]=Math.exp((_+(w-f)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),E=new Uint32Array(256);for(let S=0;S<s;S++)for(let _=0;_<n;_++){const w=S*n+_,T=t[w];let C=0,O=0;for(let z=0;z<l;z++){const P=S+z-f;if(!(P<0||P>=s))for(let I=0;I<l;I++){const X=_+I-f;if(X<0||X>=n)continue;const Q=t[P*n+X],Z=u[z*l+I]*g[Math.abs(Q-T)];C+=Q*Z,O+=Z}}const k=A[w]=Math.round(C/O);E[k]++}return[A,E]}static#l(t){const n=new Uint32Array(256);for(const s of t)n[s]++;return n}static#d(t){const n=t.length,s=new Uint8ClampedArray(n>>2);let a=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const l=255/(a-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let n,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(n=o;n<256;n++){const d=t[n];d>s&&(n-l>a&&(a=n-l,u=n-1),s=d,l=n)}for(n=u-1;n>=0&&!(t[n]>t[n+1]);n--);return n}static#f(t){const n=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,u=a;if(s>o||a>o){let b=s,A=a,E=Math.log2(Math.max(s,a)/o);const S=Math.floor(E);E=E===S?S-1:S;for(let w=0;w<E;w++){l=Math.ceil(b/2),u=Math.ceil(A/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(t,0,0,b,A,0,0,l,u),b=l,A=u,t!==n&&t.close(),t=T.transferToImageBitmap()}const _=Math.min(o/l,o/u);l=Math.round(l*_),u=Math.round(u*_)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const g=f.getImageData(0,0,l,u).data;return[this.#d(g),l,u]}static extractContoursFromText(t,{fontFamily:n,fontStyle:s,fontWeight:a},o,l,u,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${a} ${y}px ${n}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:w,fontBoundingBoxDescent:T,width:C}=g.measureText(t),O=1.5,k=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||0,C)*O),z=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(w)+Math.abs(T)||y)*O);f=new OffscreenCanvas(k,z),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,k,z),g.fillStyle="black",g.fillText(t,k*(O-1)/2,z*(3-O)/2);const P=this.#d(g.getImageData(0,0,k,z).data),I=this.#l(P),X=this.#h(I),Q=this.#s(P,k,z,X);return this.processDrawnLines({lines:{curves:Q,width:k,height:z},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,n,s,a,o){const[l,u,d]=this.#f(t),[f,g]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#s(f,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:u}){a%180!==0&&([n,s]=[s,n]);const{curves:d,width:f,height:g}=t,y=t.thickness??0,b=[],A=Math.min(n/f,s/g),E=A/n,S=A/s,_=[];for(const{points:T}of d){const C=l?this.#o(T):T;if(!C)continue;_.push(C);const O=C.length,k=new Float32Array(O),z=new Float32Array(3*(O===2?2:O-2));if(b.push({line:z,points:k}),O===2){k[0]=C[0]*E,k[1]=C[1]*S,z.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[P,I,X,Q]=C;P*=E,I*=S,X*=E,Q*=S,k.set([P,I,X,Q],0),z.set([NaN,NaN,NaN,NaN,P,I],0);for(let Z=4;Z<O;Z+=2){const ct=k[Z]=C[Z]*E,dt=k[Z+1]=C[Z+1]*S;z.set(it.createBezierPoints(P,I,X,Q,ct,dt),(Z-2)*3),[P,I,X,Q]=[X,Q,ct,dt]}}if(b.length===0)return null;const w=u?new Yh:new Zr;return w.build(b,n,s,1,a,u?0:y,o),{outline:w,newCurves:_,areContours:u,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:n,thickness:s,width:a,height:o}){let l=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let O=2,k=C.length;O<k;O++){const z=C[O]-C[O-2];l=Math.min(l,z),u=Math.max(u,z)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=Rl+Rr*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=a,b[A++]=o,b[A++]=n?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=f.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(b);const _=f.prototype.constructor;for(const C of t){const O=new _(C.length-2);for(let k=2,z=C.length;k<z;k++)O[k-2]=C[k]-C[k-2];S.write(O)}S.close();const w=await new Response(E.readable).arrayBuffer(),T=new Uint8Array(w);return qy(T)}static async decompressSignature(t){try{const n=s1(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(n).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const C of s)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,u),u+=C.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],y=d[3],b=d[4]===0,A=d[5],E=d[6],S=d[7],_=[],w=(Rl+Rr*E)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,w);break}u=0;for(let C=0;C<E;C++){const O=d[Rr*C+Rl],k=new Float32Array(O+2);_.push(k);for(let z=0;z<Rr-1;z++)k[z]=d[Rr*C+Rl+z+1];for(let z=0;z<O;z++)k[z+2]=k[z]+T[u++]}return{areContours:b,thickness:A,outlines:_,width:g,height:y}}catch(n){return vt(`decompressSignature: ${n}`),null}}}class wd extends _b{constructor(){super(),super.updateProperties({fill:ht._defaultLineColor,"stroke-width":0})}clone(){const t=new wd;return t.updateAll(this),t}}class Ed extends $l{constructor(t){super(t),super.updateProperties({stroke:ht._defaultLineColor,"stroke-width":1})}clone(){const t=new Ed(this._viewParameters);return t.updateAll(this),t}}class Fn extends mt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){ht.initialize(t,n),this._defaultDrawingOptions=new wd,this._defaultDrawnSignatureOptions=new Ed(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=ps.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Fn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:a,height:o}=this.#i,l=Math.max(a,o),u=ps.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,s,a){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof Yh,this.description=s;let d;this.#t?d=Fn.getDefaultDrawingOptions():(d=Fn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return ps.process(t,n,s,a,Fn._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return ps.extractContoursFromText(t,n,s,a,o,Fn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return ps.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:Fn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Fn.getDefaultDrawingOptions():(this._drawingOptions=Fn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:n,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=n,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,n,s,a,o,l){return l.areContours?Yh.deserialize(t,n,s,a,o,l):Zr.deserialize(t,n,s,a,o,l)}static async deserialize(t,n,s){const a=await super.deserialize(t,n,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class kw extends ht{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){ht.initialize(t,n)}static isHandlingMimeForPasting(t){return Pl.includes(t)}static paste(t,n){n.pasteEditor({mode:bt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#h(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Pl.join(",");const n=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:n,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*a,s=this.height*o;else if(n>l*a||s>l*o){const d=Math.min(l*a/n,l*o/s);n*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=n/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,n,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Mn;let u=this.#t,d=a,f=o,g=null;if(n){if(a>n||o>n){const z=Math.min(n/a,n/o);d=Math.floor(a*z),f=Math.floor(o*z)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(b,A));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":o1.isDarkMode&&(S="#8f8f9d",_="#42414d");const w=15,T=w*l.sx,C=w*l.sy,O=new OffscreenCanvas(T*2,C*2),k=O.getContext("2d");k.fillStyle=S,k.fillRect(0,0,T*2,C*2),k.fillStyle=_,k.fillRect(0,0,T,C),k.fillRect(T,C,T,C),E.fillStyle=E.createPattern(O,"repeat"),E.fillRect(0,0,b,A),E.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,a>t||o>t){const _=Math.min(t/a,t/o);b=Math.floor(a*_),A=Math.floor(o*_),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:g,width:d,height:f,imageData:y}}#u(t,n){const{width:s,height:a}=this.#t;let o=s,l=a,u=this.#t;for(;o>2*t||l>2*n;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=g.transferToImageBitmap()}return u}#g(){const[t,n]=this.parentDimensions,{width:s,height:a}=this,o=new Mn,l=Math.ceil(s*t*o.sx),u=Math.ceil(a*n*o.sy),d=this.#a;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#l){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*As.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*As.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,n,s){let a=null,o=!1;if(t instanceof wb){const{data:{rect:S,rotation:_,id:w,structParent:T,popupRef:C,richText:O,contentsObj:k,creationDate:z,modificationDate:P},container:I,parent:{page:{pageNumber:X}},canvas:Q}=t;let Z,ct;Q?(delete t.canvas,{id:Z,bitmap:ct}=s.imageManager.getFromCanvas(I.id,Q),Q.remove()):(o=!0,t._hasNoCanvas=!0);const dt=(await n._structTree.getAriaAttributes(`${rd}${w}`))?.get("aria-label")||"";a=t={annotationType:bt.STAMP,bitmapId:Z,bitmap:ct,pageIndex:X-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:dt},isSvg:!1,structParent:T,popupRef:C,richText:O,comment:k?.str||null,creationDate:z,modificationDate:P}}const l=await super.deserialize(t,n,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#n=f,l.#l=y;const[A,E]=l.pageDimensions;return l.width=(u[2]-u[0])/A,l.height=(u[3]-u[1])/E,b&&(l.altTextData=b),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=n.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===n,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Hn{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([ve,Sd,kw,ue,Fn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:g}){const y=[...Hn.#g.values()];if(!Hn._initialized){Hn._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=n,this.div=s,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===bt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),t===bt.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const s of Hn.#g.values())n.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const n=this.#i;if(n)for(const s of n.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:d}=a,f=this.#p;if(d-f>500){this.#p=d;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(l,u);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const A=new RegExp(`^${Pr}[0-9]+$`);for(const S of y)if(A.test(S.id)){b=S.id;break}if(!b)return;const E=this.#s.get(b);E?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),E.dblclick(a))},{signal:s,capture:!0})}const t=this.#i;if(t){const s=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let d=a.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of Hn.#g.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:n}=t;if(n===this.#h.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#h.div.contains(n)){const{isMac:s}=Se.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ue.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:n}=t;n&&this.#u.isDeletedAnnotationElement(n)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ht.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getEditorByUID(t){for(const n of this.#s.values())if(n.uid===t)return n;return null}getNextId(){return this.#u.getId()}get#b(){return Hn.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#_(t){const n=this.#b;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,n){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#E(),o=this.getNextId(),l=this.#_({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...n});l&&this.add(l)}async deserialize(t){return await Hn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,n,s={}){const a=this.getNextId(),o=this.#_({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:n,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:n,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,n),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,n+a),f=(o+u)/2-t,g=(l+d)/2-n,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:n}=Se.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===bt.STAMP||s===bt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:n}=Se.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:n}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:n}=document;this.div.contains(n)&&(this.#d=n);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,n,s){const a=this.#u.findParent(n,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Xi(this.div,t);for(const n of this.#u.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Xi(this.div,{rotation:s}),n!==s)for(const a of this.#s.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#u.viewParameters.realScale}}class Ae{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const n of this.#e.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return Et(this,"_svgFactory",new Hr)}static#r(t,[n,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*n}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Ae._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,n){const s=Ae._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${n}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Ae._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),a}#o(t,n){for(const[s,a]of Object.entries(n))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,n=!1,s=!1){const a=Ae.#n++,o=this.#s(),l=Ae._svgFactory.createElement("defs");o.append(l);const u=Ae._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#i.set(a,u);const f=s?this.#a(l,d):null,g=Ae._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,n){const s=Ae.#n++,a=this.#s(),o=Ae._svgFactory.createElement("defs");a.append(o);const l=Ae._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(n){const y=Ae._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Ae._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Ae._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Ae._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,n){this.#i.delete(t),this.updateProperties(t,n)}updateProperties(t,n){if(!n)return;const{root:s,bbox:a,rootClass:o,path:l}=n,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),a&&Ae.#r(u,a),o){const{classList:d}=u;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(l){const f=u.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,n){if(n===this)return;const s=this.#e.get(t);s&&(n.#t.append(s),this.#e.delete(t),n.#e.set(t,s))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:qh};globalThis.pdfjsLib={AbortException:fi,AnnotationEditorLayer:Hn,AnnotationEditorParamsType:Mt,AnnotationEditorType:bt,AnnotationEditorUIManager:pi,AnnotationLayer:Ad,AnnotationMode:In,AnnotationType:ce,applyOpacity:Wy,build:yb,ColorPicker:an,createValidAbsoluteUrl:id,CSSConstants:Ky,DOMSVGFactory:Hr,DrawLayer:Ae,FeatureTest:Se,fetchData:Ca,findContrastColor:Qy,getDocument:gd,getFilenameFromUrl:Xy,getPdfFilenameFromUrl:Yy,getRGB:Ra,getUuid:ad,getXfaPageViewport:$y,GlobalWorkerOptions:qi,ImageKind:Or,InvalidPDFException:kl,isDataScheme:$r,isPdfFile:Xl,isValidExplicitDest:eb,MathClamp:De,noContextMenu:on,normalizeUnicode:Vy,OPS:wa,OutputScale:Mn,PasswordResponses:Iy,PDFDataRangeTransport:yd,PDFDateString:Bl,PDFWorker:Ea,PermissionFlag:Hy,PixelsPerInch:As,RenderingCancelledException:ql,renderRichText:ld,ResponseException:zr,setLayerDimensions:Xi,shadow:Et,SignatureExtractor:ps,stopEvent:ee,SupportedImageMimeTypes:Pl,TextLayer:Fr,TouchManager:Wr,updateUrlHash:sd,Util:st,VerbosityLevel:qr,version:mb,XfaLayer:od};const Bw=Object.freeze(Object.defineProperty({__proto__:null,AbortException:fi,AnnotationEditorLayer:Hn,AnnotationEditorParamsType:Mt,AnnotationEditorType:bt,AnnotationEditorUIManager:pi,AnnotationLayer:Ad,AnnotationMode:In,AnnotationType:ce,CSSConstants:Ky,ColorPicker:an,DOMSVGFactory:Hr,DrawLayer:Ae,FeatureTest:Se,GlobalWorkerOptions:qi,ImageKind:Or,InvalidPDFException:kl,MathClamp:De,OPS:wa,OutputScale:Mn,PDFDataRangeTransport:yd,PDFDateString:Bl,PDFWorker:Ea,PasswordResponses:Iy,PermissionFlag:Hy,PixelsPerInch:As,RenderingCancelledException:ql,ResponseException:zr,SignatureExtractor:ps,SupportedImageMimeTypes:Pl,TextLayer:Fr,TouchManager:Wr,Util:st,VerbosityLevel:qr,XfaLayer:od,applyOpacity:Wy,build:yb,createValidAbsoluteUrl:id,fetchData:Ca,findContrastColor:Qy,getDocument:gd,getFilenameFromUrl:Xy,getPdfFilenameFromUrl:Yy,getRGB:Ra,getUuid:ad,getXfaPageViewport:$y,isDataScheme:$r,isPdfFile:Xl,isValidExplicitDest:eb,noContextMenu:on,normalizeUnicode:Vy,renderRichText:ld,setLayerDimensions:Xi,shadow:Et,stopEvent:ee,updateUrlHash:sd,version:mb},Symbol.toStringTag,{value:"Module"}));function Tb(h){var t,n,s="";if(typeof h=="string"||typeof h=="number")s+=h;else if(typeof h=="object")if(Array.isArray(h)){var a=h.length;for(t=0;t<a;t++)h[t]&&(n=Tb(h[t]))&&(s&&(s+=" "),s+=n)}else for(n in h)h[n]&&(s&&(s+=" "),s+=n);return s}function Kl(){for(var h,t,n=0,s="",a=arguments.length;n<a;n++)(h=arguments[n])&&(t=Tb(h))&&(s&&(s+=" "),s+=t);return s}var hy=Object.prototype.hasOwnProperty;function dy(h,t,n){for(n of h.keys())if(va(n,t))return n}function va(h,t){var n,s,a;if(h===t)return!0;if(h&&t&&(n=h.constructor)===t.constructor){if(n===Date)return h.getTime()===t.getTime();if(n===RegExp)return h.toString()===t.toString();if(n===Array){if((s=h.length)===t.length)for(;s--&&va(h[s],t[s]););return s===-1}if(n===Set){if(h.size!==t.size)return!1;for(s of h)if(a=s,a&&typeof a=="object"&&(a=dy(t,a),!a)||!t.has(a))return!1;return!0}if(n===Map){if(h.size!==t.size)return!1;for(s of h)if(a=s[0],a&&typeof a=="object"&&(a=dy(t,a),!a)||!va(s[1],t.get(a)))return!1;return!0}if(n===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(n===DataView){if((s=h.byteLength)===t.byteLength)for(;s--&&h.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(h)){if((s=h.byteLength)===t.byteLength)for(;s--&&h[s]===t[s];);return s===-1}if(!n||typeof h=="object"){s=0;for(n in h)if(hy.call(h,n)&&++s&&!hy.call(t,n)||!(n in t)||!va(h[n],t[n]))return!1;return Object.keys(t).length===s}}return h!==h&&t!==t}function Jr(h){let t=!1;return{promise:new Promise((s,a)=>{h.then(o=>!t&&s(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const Pw=["onCopy","onCut","onPaste"],zw=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],jw=["onFocus","onBlur"],Fw=["onInput","onInvalid","onReset","onSubmit"],Uw=["onLoad","onError"],Hw=["onKeyDown","onKeyPress","onKeyUp"],Iw=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Gw=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Vw=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],qw=["onSelect"],Xw=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Yw=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],$w=["onScroll"],Kw=["onWheel"],Ww=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Qw=["onTransitionEnd"],Zw=["onToggle"],Jw=["onChange"],tE=[...Pw,...zw,...jw,...Fw,...Uw,...Hw,...Iw,...Gw,...Vw,...qw,...Xw,...Yw,...$w,...Kw,...Ww,...Qw,...Jw,...Zw];function Cb(h,t){const n={};for(const s of tE){const a=h[s];a&&(t?n[s]=(o=>a(o,t(s))):n[s]=a)}return n}var eE="Invariant failed";function qt(h,t){if(!h)throw new Error(eE)}var Oh,fy;function nE(){if(fy)return Oh;fy=1;var h=function(){};return Oh=h,Oh}var iE=nE();const Le=Wh(iE),Rb=L.createContext(null),sE="noopener noreferrer nofollow";class aE{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return qt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){qt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,n,s){t.href=n,t.rel=this.externalLinkRel||sE,t.target=s?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(n=>{qt(this.pdfDocument),qt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{qt(Array.isArray(n));const s=n[0];new Promise(a=>{qt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{a(o)}).catch(()=>{qt(!1)}):typeof s=="number"?a(s):qt(!1)}).then(a=>{const o=a+1;qt(this.pdfViewer),qt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:a,pageNumber:o})})})}goToPage(t){const n=t-1;qt(this.pdfViewer),qt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Aa({children:h,type:t}){return R.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const py={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function rE(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function xa(){return L.useReducer(rE,{value:void 0,error:void 0})}const Wl=typeof window<"u",Mb=Wl&&window.location.protocol==="file:";function oE(h){return typeof h<"u"}function fs(h){return oE(h)&&h!==null}function lE(h){return typeof h=="string"}function cE(h){return h instanceof ArrayBuffer}function uE(h){return qt(Wl),h instanceof Blob}function $h(h){return lE(h)&&/^data:/.test(h)}function gy(h){qt($h(h));const[t="",n=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function hE(){return Wl&&window.devicePixelRatio||1}const Db="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function my(){Le(!Mb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Db}`)}function dE(){Le(!Mb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Db}`)}function ws(h){h?.cancel&&h.cancel()}function Kh(h,t){return Object.defineProperty(h,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.view[3]},configurable:!0}),h}function fE(h){return h.name==="RenderingCancelledException"}function pE(h){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return n(new Error("Error while reading a file."));t(s.result)},s.onerror=a=>{if(!a.target)return n(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return n(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},s.readAsArrayBuffer(h)})}const{PDFDataRangeTransport:gE}=Bw,mE=(h,t)=>{switch(t){case py.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");h(n);break}case py.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");h(n);break}}};function yy(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const by=L.forwardRef(function({children:t,className:n,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:d,loading:f="Loading PDF",noData:g="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:A,onLoadSuccess:E,onPassword:S=mE,onSourceError:_,onSourceSuccess:w,options:T,renderMode:C,rotate:O,scale:k,...z},P){const[I,X]=xa(),{value:Q,error:Z}=I,[ct,dt]=xa(),{value:tt,error:et}=ct,B=L.useRef(new aE),G=L.useRef([]),J=L.useRef(void 0),pt=L.useRef(void 0);l&&l!==J.current&&yy(l)&&(Le(!va(l,J.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),J.current=l),T&&T!==pt.current&&(Le(!va(T,pt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),pt.current=T);const At=L.useRef({scrollPageIntoView:Nt=>{const{dest:Ot,pageNumber:Jt,pageIndex:se=Jt-1}=Nt;if(y){y({dest:Ot,pageIndex:se,pageNumber:Jt});return}const gi=G.current[se];if(gi){gi.scrollIntoView();return}Le(!1,`An internal link leading to page ${Jt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});L.useImperativeHandle(P,()=>({linkService:B,pages:G,viewer:At}),[]);function D(){w&&w()}function q(){Z&&(Le(!1,Z.toString()),_&&_(Z))}function W(){X({type:"RESET"})}L.useEffect(W,[l,X]);const nt=L.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return $h(l)?{data:gy(l)}:(my(),{url:l});if(l instanceof gE)return{range:l};if(cE(l))return{data:l};if(Wl&&uE(l))return{data:await pE(l)};if(qt(typeof l=="object"),qt(yy(l)),"url"in l&&typeof l.url=="string"){if($h(l.url)){const{url:Nt,...Ot}=l;return{data:gy(Nt),...Ot}}my()}return l},[l]);L.useEffect(()=>{const Nt=Jr(nt());return Nt.promise.then(Ot=>{X({type:"RESOLVE",value:Ot})}).catch(Ot=>{X({type:"REJECT",error:Ot})}),()=>{ws(Nt)}},[nt,X]),L.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){q();return}D()}},[Q]);function ot(){tt&&(E&&E(tt),G.current=new Array(tt.numPages),B.current.setDocument(tt))}function ft(){et&&(Le(!1,et.toString()),b&&b(et))}L.useEffect(function(){dt({type:"RESET"})},[dt,Q]),L.useEffect(function(){if(!Q)return;const Ot=T?{...Q,...T}:Q,Jt=gd(Ot);A&&(Jt.onProgress=A),S&&(Jt.onPassword=S);const se=Jt,gi=se.promise.then(mi=>{dt({type:"RESOLVE",value:mi})}).catch(mi=>{se.destroyed||dt({type:"REJECT",error:mi})});return()=>{gi.finally(()=>se.destroy())}},[T,dt,Q]),L.useEffect(()=>{if(!(typeof tt>"u")){if(tt===!1){ft();return}ot()}},[tt]),L.useEffect(function(){B.current.setViewer(At.current),B.current.setExternalLinkRel(a),B.current.setExternalLinkTarget(o)},[a,o]);const lt=L.useCallback((Nt,Ot)=>{G.current[Nt]=Ot},[]),Yt=L.useCallback(Nt=>{delete G.current[Nt]},[]),xt=L.useMemo(()=>({imageResourcesPath:d,linkService:B.current,onItemClick:y,pdf:tt,registerPage:lt,renderMode:C,rotate:O,scale:k,unregisterPage:Yt}),[d,y,tt,lt,C,O,k,Yt]),zt=L.useMemo(()=>Cb(z,()=>tt),[z,tt]);function Pe(){function Nt(Jt){return!!Jt?.pdf}if(!Nt(xt))throw new Error("pdf is undefined");const Ot=typeof t=="function"?t(xt):t;return R.jsx(Rb.Provider,{value:xt,children:Ot})}function Ye(){return l?tt==null?R.jsx(Aa,{type:"loading",children:typeof f=="function"?f():f}):tt===!1?R.jsx(Aa,{type:"error",children:typeof s=="function"?s():s}):Pe():R.jsx(Aa,{type:"no-data",children:typeof g=="function"?g():g})}return R.jsx("div",{className:Kl("react-pdf__Document",n),ref:u,...zt,children:Ye()})});function Lb(){return L.useContext(Rb)}function Nb(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var n=h.filter(Boolean);if(n.length<=1){var s=n[0];return s||null}return function(o){for(var l=0,u=n;l<u.length;l++){var d=u[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const Ob=L.createContext(null);function Ql(){return L.useContext(Ob)}function yE(){const h=Lb(),t=Ql();qt(t);const n={...h,...t},{imageResourcesPath:s,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:f,pdf:g,renderForms:y,rotate:b,scale:A=1}=n;qt(g),qt(f),qt(a);const[E,S]=xa(),{value:_,error:w}=E,T=L.useRef(null);Le(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){_&&l&&l(_)}function O(){w&&(Le(!1,w.toString()),o&&o(w))}L.useEffect(function(){S({type:"RESET"})},[S,f]),L.useEffect(function(){if(!f)return;const X=Jr(f.getAnnotations()),Q=X;return X.promise.then(Z=>{S({type:"RESOLVE",value:Z})}).catch(Z=>{S({type:"REJECT",error:Z})}),()=>{ws(Q)}},[S,f]),L.useEffect(()=>{if(_!==void 0){if(_===!1){O();return}C()}},[_]);function k(){d&&d()}function z(I){Le(!1,`${I}`),u&&u(I)}const P=L.useMemo(()=>f.getViewport({scale:A,rotation:b}),[f,b,A]);return L.useEffect(function(){if(!g||!f||!a||!_)return;const{current:X}=T;if(!X)return;const Q=P.clone({dontFlip:!0}),Z={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:X,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:Q},ct={annotations:_,annotationStorage:g.annotationStorage,div:X,imageResourcesPath:s,linkService:a,page:f,renderForms:y,viewport:Q};X.innerHTML="";try{new Ad(Z).render(ct),k()}catch(dt){z(dt)}return()=>{}},[_,s,a,f,g,y,P]),R.jsx("div",{className:Kl("react-pdf__Page__annotations","annotationLayer"),ref:T})}const kb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},bE=/^H(\d+)$/;function vE(h){return h in kb}function Zl(h){return"children"in h}function Bb(h){return Zl(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function AE(h){const t={};if(Zl(h)){const{role:n}=h,s=n.match(bE);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(vE(n)){const a=kb[n];a&&(t.role=a)}}return t}function Pb(h){const t={};if(Zl(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),Bb(h)){const[n]=h.children;if(n){const s=Pb(n);return{...t,...s}}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function SE(h){return h?{...AE(h),...Pb(h)}:null}function zb({className:h,node:t}){const n=L.useMemo(()=>SE(t),[t]),s=L.useMemo(()=>!Zl(t)||Bb(t)?null:t.children.map((a,o)=>R.jsx(zb,{node:a},o)),[t]);return R.jsx("span",{className:h,...n,children:s})}function wE(){const h=Ql();qt(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=h,[s,a]=xa(),{value:o,error:l}=s,{customTextRenderer:u,page:d}=h;function f(){o&&n&&n(o)}function g(){l&&(Le(!1,l.toString()),t&&t(l))}return L.useEffect(function(){a({type:"RESET"})},[a,d]),L.useEffect(function(){if(u||!d)return;const b=Jr(d.getStructTree()),A=b;return b.promise.then(E=>{a({type:"RESOLVE",value:E})}).catch(E=>{a({type:"REJECT",error:E})}),()=>ws(A)},[u,d,a]),L.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}f()}},[o]),o?R.jsx(zb,{className:"react-pdf__Page__structTree structTree",node:o}):null}const vy=In;function EE(h){const t=Ql();qt(t);const n={...t,...h},{_className:s,canvasBackground:a,devicePixelRatio:o=hE(),onRenderError:l,onRenderSuccess:u,page:d,renderForms:f,renderTextLayer:g,rotate:y,scale:b}=n,{canvasRef:A}=h;qt(d);const E=L.useRef(null);function S(){d&&u&&u(Kh(d,b))}function _(O){fE(O)||(Le(!1,O.toString()),l&&l(O))}const w=L.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),T=L.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);L.useEffect(function(){if(!d)return;d.cleanup();const{current:k}=E;if(!k)return;k.width=w.width,k.height=w.height,k.style.width=`${Math.floor(T.width)}px`,k.style.height=`${Math.floor(T.height)}px`,k.style.visibility="hidden";const z={annotationMode:f?vy.ENABLE_FORMS:vy.ENABLE,canvas:k,canvasContext:k.getContext("2d",{alpha:!1}),viewport:w};a&&(z.background=a);const P=d.render(z),I=P;return P.promise.then(()=>{k.style.visibility="",S()}).catch(_),()=>ws(I)},[a,d,f,w,T]);const C=L.useCallback(()=>{const{current:O}=E;O&&(O.width=0,O.height=0)},[]);return L.useEffect(()=>C,[C]),R.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:Nb(A,E),style:{display:"block",userSelect:"none"},children:g?R.jsx(wE,{}):null})}function xE(h){return"str"in h}function _E(){const h=Ql();qt(h);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:d,rotate:f,scale:g}=h;qt(l);const[y,b]=xa(),{value:A,error:E}=y,S=L.useRef(null);Le(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){A&&s&&s(A)}function w(){E&&(Le(!1,E.toString()),n&&n(E))}L.useEffect(function(){b({type:"RESET"})},[l,b]),L.useEffect(function(){if(!l)return;const I=Jr(l.getTextContent()),X=I;return I.promise.then(Q=>{b({type:"RESOLVE",value:Q})}).catch(Q=>{b({type:"REJECT",error:Q})}),()=>ws(X)},[l,b]),L.useEffect(()=>{if(A!==void 0){if(A===!1){w();return}_()}},[A]);const T=L.useCallback(()=>{o&&o()},[o]),C=L.useCallback(P=>{Le(!1,P.toString()),a&&a(P)},[a]);function O(){const P=S.current;P&&P.classList.add("selecting")}function k(){const P=S.current;P&&P.classList.remove("selecting")}const z=L.useMemo(()=>l.getViewport({scale:g,rotation:f}),[l,f,g]);return L.useLayoutEffect(function(){if(!l||!A)return;const{current:I}=S;if(!I)return;I.innerHTML="";const X=l.streamTextContent({includeMarkedContent:!0}),Q={container:I,textContentSource:X,viewport:z},Z=new Fr(Q),ct=Z;return Z.render().then(()=>{const dt=document.createElement("div");dt.className="endOfContent",I.append(dt);const tt=I.querySelectorAll('[role="presentation"]');if(t){let et=0;A.items.forEach((B,G)=>{if(!xE(B))return;const J=tt[et];if(!J)return;const pt=t({pageIndex:u,pageNumber:d,itemIndex:G,...B});J.innerHTML=pt,et+=B.str&&B.hasEOL?2:1})}T()}).catch(C),()=>ws(ct)},[t,C,T,l,u,d,A,z]),R.jsx("div",{className:Kl("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:O,ref:S})}const Ay=1;function Sy(h){const n={...Lb(),...h},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:u,className:d,customRenderer:f,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:A,inputRef:E,loading:S="Loading page",noData:_="No page specified.",onGetAnnotationsError:w,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:O,onGetTextError:k,onGetTextSuccess:z,onLoadError:P,onLoadSuccess:I,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:ct,onRenderTextLayerError:dt,onRenderTextLayerSuccess:tt,pageIndex:et,pageNumber:B,pdf:G,registerPage:J,renderAnnotationLayer:pt=!0,renderForms:At=!1,renderMode:D="canvas",renderTextLayer:q=!0,rotate:W,scale:nt=Ay,unregisterPage:ot,width:ft,...lt}=n,[Yt,xt]=xa(),{value:zt,error:Pe}=Yt,Ye=L.useRef(null);qt(G);const Nt=fs(B)?B-1:et??null,Ot=B??(fs(et)?et+1:null),Jt=W??(zt?zt.rotate:null),se=L.useMemo(()=>{if(!zt)return null;let Sn=1;const wn=nt??Ay;if(ft||A){const Dn=zt.getViewport({scale:1,rotation:Jt});ft?Sn=ft/Dn.width:A&&(Sn=A/Dn.height)}return wn*Sn},[A,zt,Jt,nt,ft]);L.useEffect(function(){return()=>{fs(Nt)&&a&&ot&&ot(Nt)}},[a,G,Nt,ot]);function gi(){if(I){if(!zt||!se)return;I(Kh(zt,se))}if(a&&J){if(!fs(Nt)||!Ye.current)return;J(Nt,Ye.current)}}function mi(){Pe&&(Le(!1,Pe.toString()),P&&P(Pe))}L.useEffect(function(){xt({type:"RESET"})},[xt,G,Nt]),L.useEffect(function(){if(!G||!Ot)return;const wn=Jr(G.getPage(Ot)),Dn=wn;return wn.promise.then(_s=>{xt({type:"RESOLVE",value:_s})}).catch(_s=>{xt({type:"REJECT",error:_s})}),()=>ws(Dn)},[xt,G,Ot]),L.useEffect(()=>{if(zt!==void 0){if(zt===!1){mi();return}gi()}},[zt,se]);const $i=L.useMemo(()=>fs(Nt)&&Ot&&fs(Jt)&&fs(se)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:w,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:O,onGetTextError:k,onGetTextSuccess:z,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:ct,onRenderTextLayerError:dt,onRenderTextLayerSuccess:tt,page:zt,pageIndex:Nt,pageNumber:Ot,renderForms:At,renderTextLayer:q,rotate:Jt,scale:se}:null,[s,o,g,y,w,T,C,O,k,z,X,Q,Z,ct,dt,tt,zt,Nt,Ot,At,q,Jt,se]),Ma=L.useMemo(()=>Cb(lt,()=>zt&&(se?Kh(zt,se):void 0)),[lt,zt,se]),yi=`${Nt}@${se}/${Jt}`;function Jl(){switch(D){case"custom":return qt(f),R.jsx(f,{},`${yi}_custom`);case"none":return null;case"canvas":default:return R.jsx(EE,{canvasRef:l},`${yi}_canvas`)}}function tc(){return q?R.jsx(_E,{},`${yi}_text`):null}function Ne(){return pt?R.jsx(yE,{},`${yi}_annotations`):null}function ec(){function Sn(Dn){return!!Dn?.page}if(!Sn($i))throw new Error("page is undefined");const wn=typeof u=="function"?u($i):u;return R.jsxs(Ob.Provider,{value:$i,children:[Jl(),tc(),Ne(),wn]})}function to(){return Ot?G===null||zt===void 0||zt===null?R.jsx(Aa,{type:"loading",children:typeof S=="function"?S():S}):G===!1||zt===!1?R.jsx(Aa,{type:"error",children:typeof b=="function"?b():b}):ec():R.jsx(Aa,{type:"no-data",children:typeof _=="function"?_():_})}return R.jsx("div",{className:Kl(s,d),"data-page-number":Ot,ref:Nb(E,Ye),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${se}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ma,children:to()})}dE();qi.workerSrc="pdf.worker.mjs";qi.workerSrc=new URL("/ludusregula/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();function TE({file:h,initialScale:t=.5,minScale:n=.5,maxScale:s=2,step:a=.1}){const o=L.useRef(null),[l,u]=L.useState(null),[d,f]=L.useState(1),[g,y]=L.useState(t),[b,A]=L.useState(0),[E,S]=L.useState(800),[_,w]=L.useState("1");L.useEffect(()=>{const tt=()=>{const et=Math.min(1200,Math.max(320,o.current?.clientWidth??800));S(et)};return tt(),window.addEventListener("resize",tt),()=>window.removeEventListener("resize",tt)},[]),L.useEffect(()=>{l&&f(tt=>Math.min(Math.max(1,tt),l))},[l]);const T=d>1,C=l?d<l:!1,O=({numPages:tt})=>{u(tt),f(1),w("1")},k=()=>{T&&(f(tt=>tt-1),w(String(d-1)))},z=()=>{C&&(f(tt=>tt+1),w(String(d+1)))},P=()=>y(tt=>Math.min(s,+(tt+a).toFixed(2))),I=()=>y(tt=>Math.max(n,+(tt-a).toFixed(2))),X=()=>y(1),Q=()=>A(tt=>(tt+90)%360);L.useEffect(()=>{const tt=et=>{et.key==="ArrowRight"&&C&&z(),et.key==="ArrowLeft"&&T&&k(),(et.ctrlKey||et.metaKey)&&et.key==="+"&&(et.preventDefault(),P()),(et.ctrlKey||et.metaKey)&&et.key==="-"&&(et.preventDefault(),I()),(et.ctrlKey||et.metaKey)&&et.key.toLowerCase()==="0"&&(et.preventDefault(),X()),(et.ctrlKey||et.metaKey)&&et.key.toLowerCase()==="r"&&(et.preventDefault(),Q())};return window.addEventListener("keydown",tt),()=>window.removeEventListener("keydown",tt)},[C,T]);const Z=tt=>{tt.preventDefault();const et=parseInt(_,10);!Number.isNaN(et)&&et>=1&&et<=(l??1)?f(et):w(String(d))},ct=L.useMemo(()=>R.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 p-2 border border-slate-200 bg-white rounded-xl",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("button",{onClick:k,disabled:!T,className:"px-3 py-2 rounded-lg border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50",title:"Page prcdente ()",children:""}),R.jsxs("form",{onSubmit:Z,className:"flex items-center gap-2",children:[R.jsx("span",{className:"text-sm text-slate-600",children:"Page"}),R.jsx("input",{value:_,onChange:tt=>w(tt.target.value.replace(/[^\d]/g,"")),className:"w-16 text-center h-9 rounded-lg border border-slate-300 bg-white outline-none focus:ring-4 focus:ring-[#0abde3]/30",inputMode:"numeric"}),l&&R.jsxs("span",{className:"text-sm text-slate-600",children:["/ ",l]})]}),R.jsx("button",{onClick:z,disabled:!C,className:"px-3 py-2 rounded-lg border border-slate-300 bg-white disabled:opacity-40 hover:bg-slate-50",title:"Page suivante ()",children:""})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("button",{onClick:I,className:"px-3 py-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50",title:"Zoom - (Ctrl -)",children:""}),R.jsxs("div",{className:"w-16 text-center text-sm tabular-nums text-slate-700",children:[Math.round(g*100),"%"]}),R.jsx("button",{onClick:P,className:"px-3 py-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50",title:"Zoom + (Ctrl +)",children:"+"}),R.jsx("button",{onClick:X,className:"px-3 py-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50",title:"Ajuster  la largeur (Ctrl 0)",children:"Ajuster"}),R.jsx("button",{onClick:Q,className:"px-3 py-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50",title:"Pivoter 90 (Ctrl R)",children:""}),R.jsx("a",{href:h,download:!0,className:"px-3 py-2 rounded-lg text-white bg-[#0abde3] hover:brightness-110",title:"Tlcharger",children:"Tlcharger"}),R.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"px-3 py-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50",title:"Ouvrir dans un onglet",children:"Ouvrir"}),R.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"px-3 py-2 rounded-lg border border-slate-300 bg-white hover:bg-slate-50",title:"Imprimer depuis le navigateur",children:"Imprimer"})]})]}),[d,_,l,g,T,C,h]),dt=L.useMemo(()=>R.jsx("div",{className:"w-28 shrink-0 overflow-auto border border-slate-200 rounded-xl bg-white p-2 max-h-[70vh]",children:R.jsx(by,{file:h,loading:R.jsx("div",{className:"text-xs text-slate-500 p-2",children:"Miniatures"}),children:Array.from(new Array(l||0),(tt,et)=>R.jsx("button",{onClick:()=>{f(et+1),w(String(et+1))},className:`block w-full mb-2 rounded-lg overflow-hidden border ${d===et+1?"border-[#0abde3]":"border-slate-200"} hover:border-[#0abde3]`,title:`Aller  la page ${et+1}`,children:R.jsx(Sy,{pageNumber:et+1,width:92,renderAnnotationLayer:!1,renderTextLayer:!1})},`t_${et+1}`))})}),[h,l,d]);return R.jsxs("div",{className:"space-y-3",children:[ct,R.jsxs("div",{className:"flex items-start gap-3",children:[l?dt:null,R.jsx("div",{ref:o,className:"rounded-2xl p-3 bg-white border border-slate-200 shadow-sm overflow-x-auto w-full self-start",children:R.jsx(by,{file:h,onLoadSuccess:O,loading:R.jsx("div",{className:"p-6 text-slate-600",children:"Chargement du document"}),error:R.jsx("div",{className:"p-6 text-[#ee5253]",children:"Impossible de charger le PDF."}),onLoadError:tt=>console.error(tt),children:R.jsx(Sy,{pageNumber:d,width:Math.round(E*g),rotate:b,renderAnnotationLayer:!1,renderTextLayer:!1})})})]})]})}var jb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wy=Vi.createContext&&Vi.createContext(jb),CE=["attr","size","title"];function RE(h,t){if(h==null)return{};var n=ME(h,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(h);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(h,s)&&(n[s]=h[s])}return n}function ME(h,t){if(h==null)return{};var n={};for(var s in h)if(Object.prototype.hasOwnProperty.call(h,s)){if(t.indexOf(s)>=0)continue;n[s]=h[s]}return n}function jl(){return jl=Object.assign?Object.assign.bind():function(h){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(h[s]=n[s])}return h},jl.apply(this,arguments)}function Ey(h,t){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(h);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(h,a).enumerable})),n.push.apply(n,s)}return n}function Fl(h){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ey(Object(n),!0).forEach(function(s){DE(h,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):Ey(Object(n)).forEach(function(s){Object.defineProperty(h,s,Object.getOwnPropertyDescriptor(n,s))})}return h}function DE(h,t,n){return t=LE(t),t in h?Object.defineProperty(h,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):h[t]=n,h}function LE(h){var t=NE(h,"string");return typeof t=="symbol"?t:t+""}function NE(h,t){if(typeof h!="object"||!h)return h;var n=h[Symbol.toPrimitive];if(n!==void 0){var s=n.call(h,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(h)}function Fb(h){return h&&h.map((t,n)=>Vi.createElement(t.tag,Fl({key:n},t.attr),Fb(t.child)))}function OE(h){return t=>Vi.createElement(kE,jl({attr:Fl({},h.attr)},t),Fb(h.child))}function kE(h){var t=n=>{var{attr:s,size:a,title:o}=h,l=RE(h,CE),u=a||n.size||"1em",d;return n.className&&(d=n.className),h.className&&(d=(d?d+" ":"")+h.className),Vi.createElement("svg",jl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:d,style:Fl(Fl({color:h.color||n.color},n.style),h.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Vi.createElement("title",null,o),h.children)};return wy!==void 0?Vi.createElement(wy.Consumer,null,n=>t(n)):t(jb)}function BE(h){return OE({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M378 324a69.78 69.78 0 0 0-48.83 19.91L202 272.41a69.68 69.68 0 0 0 0-32.82l127.13-71.5A69.76 69.76 0 1 0 308.87 129l-130.13 73.2a70 70 0 1 0 0 107.56L308.87 383A70 70 0 1 0 378 324z"},child:[]}]})(h)}function PE(){const{id:h}=VA(),[t,n]=L.useState(null),[s,a]=L.useState(!1);if(L.useEffect(()=>{fetch(Cn("/data/games.json")).then(u=>u.json()).then(u=>n(u.find(d=>d.id===h)||null))},[h]),!t)return R.jsx("div",{className:"p-4",children:"Chargement"});const o=Cn(t.pdf),l=async()=>{const u=window.location.href,d=t.name,f=`Dcouvrez les rgles de "${t.name}" sur LudusRegula !`;if(navigator.share)try{await navigator.share({title:d,text:f,url:u})}catch{}else try{await navigator.clipboard.writeText(u),a(!0),setTimeout(()=>a(!1),2500)}catch(g){console.error("Erreur lors de la copie :",g)}};return R.jsxs("div",{className:"space-y-5",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-[11px] font-semibold rounded-md bg-[#10ac84]/15 text-[#10ac84]",children:"PDF"}),R.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t.name})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1.5 rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition",title:"Partager cette fiche",children:[R.jsx(BE,{}),s?"Lien copi !":"Partager"]}),R.jsx(vs,{to:"/",className:"inline-flex items-center justify-center px-3 py-2 rounded-xl text-sm font-medium border border-slate-300 bg-white hover:bg-slate-50 transition",children:" Retour"})]})]}),R.jsx(TE,{file:o})]})}function zE(){const h=Cn("icon.svg");return R.jsxs("div",{className:"mx-auto w-full max-w-4xl",children:[R.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[R.jsxs("div",{className:"flex items-start gap-4",children:[R.jsx("img",{src:h,alt:"LudusRegula",className:"h-12 w-12 rounded-xl",loading:"eager",fetchPriority:"high"}),R.jsxs("div",{children:[R.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:[" propos de ",R.jsx("span",{className:"text-[#0abde3]",children:"LudusRegula"})]}),R.jsxs("p",{className:"mt-2 text-slate-600",children:["Bienvenue ! Je suis"," ",R.jsx("span",{className:"font-semibold",children:"Maxime Bory"}),"  ce site rassemble vos ",R.jsx("strong",{children:"rgles de jeux"})," dans une interface rapide, claire et agrable  utiliser."]})]})]}),R.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:R.jsxs("a",{href:"https://github.com/plumedours",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-50",title:"Ouvrir mon GitHub",children:[R.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",className:"opacity-80",children:R.jsx("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.58 2 12.26c0 4.52 2.87 8.35 6.84 9.7.5.1.68-.22.68-.49c0-.24-.01-.87-.01-1.71c-2.78.62-3.37-1.21-3.37-1.21c-.45-1.18-1.11-1.5-1.11-1.5c-.91-.64.07-.63.07-.63c1 .07 1.53 1.06 1.53 1.06c.9 1.57 2.36 1.12 2.94.86c.09-.67.35-1.12.63-1.38c-2.22-.26-4.55-1.14-4.55-5.08c0-1.12.39-2.03 1.03-2.75c-.1-.26-.45-1.3.1-2.71c0 0 .85-.28 2.8 1.05c.81-.23 1.68-.35 2.54-.36c.86.01 1.73.13 2.54.36c1.95-1.33 2.8-1.05 2.8-1.05c.55 1.41.2 2.45.1 2.71c.64.72 1.03 1.63 1.03 2.75c0 3.95-2.33 4.82-4.56 5.08c.36.32.67.94.67 1.9c0 1.37-.01 2.47-.01 2.81c0 .27.18.6.69.49A10.02 10.02 0 0 0 22 12.26C22 6.58 17.52 2 12 2Z"})}),"Mon GitHub (@plumedours)"]})})]}),R.jsxs("section",{className:"mt-6 grid gap-6 md:grid-cols-2",children:[R.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[R.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Quest-ce que cest ?"}),R.jsxs("p",{className:"mt-2 text-slate-600",children:[R.jsx("strong",{children:"LudusRegula"})," est une bibliothque personnelle de rgles de jeux. Elle vous permet de"," ",R.jsx("span",{className:"font-medium",children:"rechercher"}),","," ",R.jsx("span",{className:"font-medium",children:"prvisualiser"})," et"," ",R.jsx("span",{className:"font-medium",children:"tlcharger"})," des PDF en quelques clics."]}),R.jsxs("ul",{className:"mt-3 list-disc space-y-1 pl-5 text-slate-600",children:[R.jsx("li",{children:"Interface claire et moderne (thme clair, couleurs du logo)."}),R.jsx("li",{children:"Vignettes daperu pour chaque jeu (WebP/JPG/PNG)."}),R.jsx("li",{children:"Visionneuse PDF intgre : zoom, rotation, miniatures, pagination."}),R.jsxs("li",{children:["Chemins compatibles dev/prod via ",R.jsx("code",{children:"withBase()"}),"."]}),R.jsx("li",{children:"100% front-end (Vite + React + Tailwind)  rapide et simple  hberger."})]})]}),R.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[R.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Ce que le site propose"}),R.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[R.jsx(ha,{color:"#0abde3",label:"Recherche instantane"}),R.jsx(ha,{color:"#10ac84",label:"Prvisualisation PDF"}),R.jsx(ha,{color:"#ff9f43",label:"Vignettes optimises"}),R.jsx(ha,{color:"#ee5253",label:"Navigation mobile"}),R.jsx(ha,{color:"#0abde3",label:"Raccourcis clavier"}),R.jsx(ha,{color:"#10ac84",label:"Sans back-end"})]})]}),R.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm md:col-span-2",children:[R.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Bienvenue !"}),R.jsxs("p",{className:"mt-2 text-slate-600",children:["Lobjectif est simple :"," ",R.jsx("em",{children:"retrouver vos rgles de jeux sans chercher partout"}),". Dposez vos PDFs, ajoutez une vignette, et le tour est jou. Tout se fait ct client, sans base de donnes ni serveur compliqu."]})]}),R.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[R.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Comment ajouter un jeu ?"}),R.jsxs("ol",{className:"mt-3 list-decimal space-y-2 pl-5 text-slate-600",children:[R.jsxs("li",{children:["Placez le PDF dans ",R.jsx("code",{children:"/public/rules/"})," (ex."," ",R.jsx("code",{children:"catan.pdf"}),")."]}),R.jsxs("li",{children:["Placez la vignette dans ",R.jsx("code",{children:"/public/thumbs/"})," (WebP recommand, JPG/PNG en fallback)."]}),R.jsxs("li",{children:["Ajoutez une entre dans ",R.jsx("code",{children:"/public/data/games.json"})," :",R.jsx("pre",{className:"mt-3 overflow-x-auto rounded-lg bg-slate-50 p-3 text-xs text-slate-800",children:`{
  "id": "catan",
  "name": "Les Colons de Catane",
  "summary": "Dveloppez votre colonie, changez et construisez pour gagner.",
  "pdf": "/rules/catan.pdf",
  "thumb": {
    "webp": "/thumbs/catan.webp",
    "jpg": "/thumbs/catan.jpg",
    "png": "/thumbs/catan.png"
  }
}`})]})]}),R.jsxs("p",{className:"mt-3 text-sm text-slate-600",children:["Astuce : utilisez"," ",R.jsx("a",{className:"text-[#0abde3] underline-offset-2 hover:underline",href:"https://squoosh.app/",target:"_blank",rel:"noreferrer",children:"squoosh.app"})," ","pour compresser vos vignettes au format WebP."]})]}),R.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[R.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact & liens"}),R.jsxs("div",{className:"mt-3 space-y-2 text-slate-700",children:[R.jsxs("p",{children:[R.jsx("span",{className:"font-semibold",children:"Auteur :"})," Maxime Bory"]}),R.jsxs("p",{children:[R.jsx("span",{className:"font-semibold",children:"GitHub :"})," ",R.jsx("a",{href:"https://github.com/plumedours",target:"_blank",rel:"noreferrer",className:"text-[#0abde3] underline-offset-2 hover:underline",children:"github.com/plumedours"})]}),R.jsx("p",{className:"text-sm text-slate-500",children:"Vous pouvez proposer des ides, signaler un bug, ou suggrer des amliorations."})]}),R.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[R.jsx(vs,{to:"/contribute",className:"inline-flex items-center gap-2 rounded-xl bg-[#0abde3] px-3 py-2 text-sm font-semibold text-white hover:brightness-110",children:"Contribuer"}),R.jsx(vs,{to:"/",className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-50",children:"Accueil"})]})]})]})]})}function ha({label:h,color:t}){return R.jsx("span",{className:"inline-flex items-center justify-center rounded-lg px-2.5 py-1 font-semibold",style:{backgroundColor:jE(t,.12),color:t},children:h})}function jE(h,t=1){const n=h.replace("#",""),s=parseInt(n.length===3?n.split("").map(u=>u+u).join(""):n,16),a=s>>16&255,o=s>>8&255,l=s&255;return`rgba(${a}, ${o}, ${l}, ${t})`}function FE(){return R.jsxs("div",{className:"max-w-3xl space-y-4",children:[R.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Contribuer"}),R.jsxs("p",{className:"text-slate-700",children:["Pour ajouter un jeu, dposez votre PDF dans ",R.jsx("code",{children:"/public/rules/"}),", la vignette dans",R.jsx("code",{children:" /public/thumbs/"}),", puis ditez"," ",R.jsx("code",{children:"/public/data/games.json"}),"."]}),R.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[R.jsxs("h2",{className:"font-semibold mb-2",children:["Exemple dentre ",R.jsx("code",{children:"games.json"})]}),R.jsx("pre",{className:"text-sm text-slate-800 overflow-x-auto",children:R.jsx("code",{children:`{
  "id": "catan",
  "name": "Les Colons de Catane",
  "summary": "Dveloppez votre colonie...",
  "pdf": "/rules/catan.pdf",
  "thumb": {
    "webp": "/thumbs/catan.webp",
    "jpg": "/thumbs/catan.jpg",
    "png": "/thumbs/catan.png"
  }
}`})})]}),R.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[R.jsx("h2",{className:"font-semibold mb-2",children:"Emplacements attendus"}),R.jsxs("ul",{className:"list-disc pl-5 text-slate-700 space-y-1",children:[R.jsx("li",{children:R.jsx("code",{children:Cn("/rules/catan.pdf")})}),R.jsxs("li",{children:[R.jsx("code",{children:Cn("/thumbs/catan.webp")})," (optionnel),"," ",R.jsx("code",{children:Cn("/thumbs/catan.jpg")}),","," ",R.jsx("code",{children:Cn("/thumbs/catan.png")})]})]})]})]})}function UE(){return R.jsx(MS,{basename:"/ludusregula/",children:R.jsxs("div",{className:"min-h-screen flex flex-col bg-[#f6f7fb] text-slate-900",children:[R.jsx(FS,{}),R.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8 w-full flex-1",children:R.jsxs(aS,{children:[R.jsx(Mr,{path:"/",element:R.jsx(YS,{})}),R.jsx(Mr,{path:"/game/:id",element:R.jsx(PE,{})}),R.jsx(Mr,{path:"/about",element:R.jsx(zE,{})}),R.jsx(Mr,{path:"/contribute",element:R.jsx(FE,{})})]})}),R.jsx("footer",{className:"mt-8 border-t border-slate-200 bg-white",children:R.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 text-sm text-slate-600",children:[" ",new Date().getFullYear()," LudusRegula  propuls par React & Vite."]})})]})})}pA.createRoot(document.getElementById("root")).render(R.jsx(Vi.StrictMode,{children:R.jsx(UE,{})}));
